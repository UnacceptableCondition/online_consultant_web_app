var mainConfig={DOM:{MAIN_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft",AUTHORIZATION_MENU_CLASS:"root_chat_for_touchsoft_input-name-block",USER_NAME_INPUT_CLASS:"root_chat_for_touchsoft_input-name",SEND_USER_NAME_BUTTON:"root_chat_for_touchsoft_input-name-button",SEND_MESSAGE_MIN_SIZE_BUTTON:"root_chat_for_touchsoft_minimize-style__send-button",SEND_MESSAGE_FULL_SIZE_BUTTON:"root_chat_for_touchsoft__bottom_send-button",CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft__textarea",CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style__message-input",TITLE_BLOCK_CLASS:"root_chat_for_touchsoft-title",CHANGE_STYLE_BUTTON_MAX_SIZE:"root_chat_for_touchsoft__top_minimize-button",MINIMIZE_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style",SET_MIN_STYLE_BUTTON:"root_chat_for_touchsoft_minimize-style__max-button",SET_MAX_STYLE_BUTTON:"root_chat_for_touchsoft__top_minimize-button"},DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",CSS_CURRENT_INPUT_CLASS:"root_chat_for_touchsoft__textarea",currentUserSettings:{userId:null,userName:null,isMinimize:!1,readLastMessage:!1,sendNewMessage:!1,lastOnline:(new Date).getTime()},chatSettings:{allowDrag:!1,position:"right",title:"TouchSoft Chat",allowMinimize:!0,outerCssClass:"touchsoft-chat_main-block",typeOfRequest:"fetch",requireName:!0},INVISIBLE_CLASS:"invisible",CHAT_POSITION_RIGHT:"root_chat_for_touchsoft_right-position",CHAT_POSITION_LEFT:"root_chat_for_touchsoft_left-position",LOCAL_STORAGE_NAME:"userID_touchsoft_chat",DEFAULT_USER_NAME:"guest",DEFAULT_CSS_CLASS_FOR_CHAT:"touchsoft-chat_main-block",DEFAULT_CHAT_TITLE:"TouchSoft Chat",HTML_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/chatApplication/chat.html",CSS_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/css/chat.css",CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root_chat_for_touchsoft__top_messages",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",DISPLAY_MESSAGE_DATE:!0,DISPLAY_SENDER_NAME:!0,DISPLAY_MESSAGE:!0,UPDATE_USER_DATA_TIME:5e3};function parseSrcForParameters(e){var s={};return e.substr(e.indexOf("?")+1).split("&").forEach(function(e){var t=e.split("=");t[1]=t[1].replace(/'/g,""),s[t[0]]=t[1]}),s}function setOuterChatSettingToConfig(t,s){Object.keys(t).map(function(e){s.chatSettings[e]=t[e]})}setOuterChatSettingToConfig(parseSrcForParameters(document.currentScript.getAttribute("src")),mainConfig);var dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},dataConnector=function(e){var t;function s(){}return s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,o,r,a){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(r,n,!0),s.setRequestHeader("Content-Type",a),s.onload=function(){e("application/json"===a?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},o?s.send(o):s.send()})},t=new s,"fetch"===e.typeOfRequest?{request:t.requestFetch}:{request:t.requestXMR}}(dataConnectorConfig),dataSource=function(o){var e;function t(){o=o}return t.prototype.createRequestPath=function(e,t,s){var n=e+"/users";return null!==t&&(n+="/"+t),null!==s&&(n+="/"+s),n+=".json"},t.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},t.prototype.getUserData=function(e){var s={},t=this.createRequestPath(dataBaseUrl,e,null);return o.request(t,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},t.prototype.getSettingField=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,t);return o.request(s,null,"GET","application/json")},t.prototype.setSettingField=function(e,t,s){var n=this.createRequestPath(dataBaseUrl,e,t);return o.request(n,JSON.stringify(s),"PUT","application/json")},t.prototype.sendMessage=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,"messages"),n=JSON.stringify({date:t.date,message:t.message,title:"message",user:t.sender,itIsRead:t.read});return o.request(s,n,"POST","application/json")},t.prototype.getAllUsers=function(){var s={},e=this.createRequestPath(dataBaseUrl,null,null);return o.request(e,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},{usersAPI:{getUserData:(e=new t).getUserData.bind(e),sendMessage:e.sendMessage.bind(e),setField:e.setSettingField.bind(e),getField:e.getSettingField.bind(e),getAllUsers:e.getAllUsers.bind(e)},commonAPI:{getHTML:e.getHTML.bind(e)}}}(dataConnector),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var o=this.createMessageContainerDiv(n,s),r=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.CSS_CHAT_MESSAGE_DATE]),a=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.CSS_CHAT_MESSAGE]);return o.appendChild(r),o.appendChild(a),o.appendChild(i),o},e.prototype.getMessageObjectsForMarkAsRead=function(e,t){var s,n=[],o=e||u.currentUserSettings.userName,r=t||u.currentUserSettings.userId;for(s=this.messageList.length-1;0<=s;s--)if(this.messageList[s].sender!==o){if(this.messageList[s].read)break;n.push({userId:r,fieldName:"messages/"+this.messageList[s].id+"/itIsRead",fieldValue:!0})}return n},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e),this.displayMessages()},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(n){function e(){}function o(e,t,s,n,o){return{sender:s,message:e,read:n,date:t,id:o}}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.getUserData=function(e){return dataSource.usersAPI.getUserData(e).then(function(t){if(n.currentUserSettings.userName=t.userName,n.currentUserSettings.isMinimize=t.isMinimize,t.messages){var e,s=[];Object.keys(t.messages).map(function(e){s.push(o(t.messages[e].message,t.messages[e].date,t.messages[e].user,t.messages[e].itIsRead,e))}),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}})},e.prototype.createNewUserProfileToDataBase=function(){var t=this;Object.keys(n.currentUserSettings).map(function(e){t.saveSettingField(e)})},e.prototype.saveSettingField=function(e){this.saveUserSettingsToDataSource([{userId:n.currentUserSettings.userId,fieldName:e,fieldValue:n.currentUserSettings[e]}])},e.prototype.sendMessage=function(e){var t,s,n=o(this.getMessageFromInputElement(),(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),e,!1);messageListManager.addMessageToMessageList(n),this.saveMessageToDataSource(n)},e.prototype.getMessageFromInputElement=function(){var e=getElement(n.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&this.saveUserSettingsToDataSource(e)},e.prototype.saveMessageToDataSource=function(e){if(e.sender===n.currentUserSettings.userName){console.log(e.sender);var t=[{userId:n.currentUserSettings.userId,fieldName:"sendNewMessage",fieldValue:!0}];this.saveUserSettingsToDataSource(t)}dataSource.usersAPI.sendMessage(n.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setField(e.userId,e.fieldName,e.fieldValue)})},new e}(mainConfig),viewFactory=function(n){function e(){}return e.prototype.createView=function(e,t,s){return new Promise(function(e,t){e("DEV")})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var o=document.createElement("link");return n&&o.setAttribute("id",n),t&&o.setAttribute("rel",t),s&&o.setAttribute("type",s),o.setAttribute("href",e),o},new e}(dataSource),chatCustomizer=function(){function e(){}return e.prototype.setup=function(e){this.config=e},e.prototype.setupOuterChatSettings=function(){this.allowMinimize(),this.setPositionOfMainBlock(),this.setTitle(),this.allowDragNDrop()},e.prototype.allowDragNDrop=function(){var e=getElement(this.config.DOM.TITLE_BLOCK_CLASS),c=getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS);"false"!==this.config.chatSettings.allowDrag&&e.addEventListener("mousedown",function(e){var t,s,n,o,r,a,i;function u(e){c.style.left=e.pageX-s+"px",c.style.top=e.pageY-n+"px"}t={top:(i=c.getBoundingClientRect()).top+window.pageYOffset,left:i.left+window.pageXOffset},s=e.pageX-t.left,n=e.pageY-t.top,o=function(e){u(e)},r=function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r)},a=function(){return!1},u(e),c.style.zIndex=1e3,document.addEventListener("mousemove",o),document.addEventListener("mouseup",r),c.addEventListener("dragstart",a)})},e.prototype.setPositionOfMainBlock=function(){"right"===this.config.chatSettings.position?getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(this.config.CHAT_POSITION_RIGHT):getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(this.config.CHAT_POSITION_LEFT)},e.prototype.setTitle=function(){this.config.chatSettings.title.length<1&&(this.config.chatSettings.title=this.config.DEFAULT_CHAT_TITLE),getElement(this.config.DOM.TITLE_BLOCK_CLASS).innerHTML=this.config.chatSettings.title},e.prototype.allowMinimize=function(){"false"===this.config.chatSettings.allowMinimize&&getElement(this.config.DOM.CHANGE_STYLE_BUTTON_MAX_SIZE).classList.add(this.config.INVISIBLE_CLASS)},e.prototype.setMainCssClass=function(){console.log(this.config.chatSettings.outerCssClass),this.config.chatSettings.outerCssClass.length<1&&(this.config.chatSettings.outerCssClass=this.config.DEFAULT_CSS_CLASS_FOR_CHAT),getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS.parentNode).classList.add(this.config.chatSettings.outerCssClass)},new e}(),chatController=function(t){function s(e){return e+(new Date).getTime()}function e(){}return e.prototype.startApp=function(){var e=this;return this.setupChatView().then(function(){e.authorization(t.chatSettings.requireName),e.setupChatBasicListeners()}).then(function(){t.currentUserSettings.userId?userDataManager.getUserData(t.currentUserSettings.userId).then(function(){e.setupChatStyle(),e.setupIntervalFunctions(),e.setupChatSendListeners()}):e.setupChatStyle()}).then(function(){chatCustomizer.setup(t),chatCustomizer.setupOuterChatSettings()})},e.prototype.authorization=function(e){userDataManager.setup(t),t.currentUserSettings.userId=this.getUserIdFromLocalStorage(),t.currentUserSettings.userId||("false"===e?(t.currentUserSettings.userId=s(t.DEFAULT_USER_NAME),t.currentUserSettings.userName=t.DEFAULT_USER_NAME,this.saveUserIdToLocalStorage(t.currentUserSettings.userId),userDataManager.createNewUserProfileToDataBase()):this.toggleAuthorizationMenuVisible())},e.prototype.toggleAuthorizationMenuVisible=function(){getElement(t.DOM.AUTHORIZATION_MENU_CLASS).classList.toggle(t.INVISIBLE_CLASS)},e.prototype.getUserNameFromInput=function(){t.currentUserSettings.userName=getElement(t.DOM.USER_NAME_INPUT_CLASS).value,t.currentUserSettings.userId=s(t.currentUserSettings.userName),userDataManager.setup(t),userDataManager.createNewUserProfileToDataBase(),this.saveUserIdToLocalStorage(t.currentUserSettings.userId),this.toggleAuthorizationMenuVisible(),this.setupIntervalFunctions(),this.setupChatSendListeners()},e.prototype.setupChatSendListeners=function(){getElement(t.DOM.SEND_MESSAGE_FULL_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),getElement(t.DOM.SEND_MESSAGE_MIN_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},e.prototype.setupChatBasicListeners=function(){var e=this;getElement(t.DOM.SEND_USER_NAME_BUTTON).addEventListener("click",e.getUserNameFromInput.bind(e)),getElement(t.DOM.SET_MAX_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e)),getElement(t.DOM.SET_MIN_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e))},e.prototype.setupChatView=function(){return viewFactory.createView(t.HTML_FILE_PATH,t.CSS_FILE_PATH,null)},e.prototype.setupChatStyle=function(){t.currentUserSettings.isMinimize?getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS):getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS)},e.prototype.minMaxStyleToggle=function(){getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),t.currentUserSettings.isMinimize=!1===t.currentUserSettings.isMinimize,this.changeInputAndSendButtonClass(),userDataManager.saveSettingField("isMinimize")},e.prototype.activityNotify=function(){var e=new Date;t.currentUserSettings.lastOnline=e.getTime(),userDataManager.saveSettingField("lastOnline")},e.prototype.changeInputAndSendButtonClass=function(){t.currentUserSettings.isMinimize?t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS},e.prototype.saveUserIdToLocalStorage=function(e){localStorage.setItem(t.LOCAL_STORAGE_NAME,e)},e.prototype.getUserIdFromLocalStorage=function(){return localStorage.getItem(t.LOCAL_STORAGE_NAME)},e.prototype.setupIntervalFunctions=function(){var e=this;setInterval(function(){userDataManager.getUserData(t.currentUserSettings.userId),e.activityNotify()},t.UPDATE_USER_DATA_TIME)},new e}(mainConfig);chatController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRBcHBEZXYuanMiXSwibmFtZXMiOlsibWFpbkNvbmZpZyIsIkRPTSIsIk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUyIsIkFVVEhPUklaQVRJT05fTUVOVV9DTEFTUyIsIlVTRVJfTkFNRV9JTlBVVF9DTEFTUyIsIlNFTkRfVVNFUl9OQU1FX0JVVFRPTiIsIlNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT04iLCJTRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTiIsIkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTIiwiQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1MiLCJUSVRMRV9CTE9DS19DTEFTUyIsIkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUiLCJNSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTIiwiU0VUX01JTl9TVFlMRV9CVVRUT04iLCJTRVRfTUFYX1NUWUxFX0JVVFRPTiIsIkRBVEFfQkFTRV9VUkwiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJzZW5kTmV3TWVzc2FnZSIsImxhc3RPbmxpbmUiLCJEYXRlIiwiZ2V0VGltZSIsImNoYXRTZXR0aW5ncyIsImFsbG93RHJhZyIsInBvc2l0aW9uIiwidGl0bGUiLCJhbGxvd01pbmltaXplIiwib3V0ZXJDc3NDbGFzcyIsInR5cGVPZlJlcXVlc3QiLCJyZXF1aXJlTmFtZSIsIklOVklTSUJMRV9DTEFTUyIsIkNIQVRfUE9TSVRJT05fUklHSFQiLCJDSEFUX1BPU0lUSU9OX0xFRlQiLCJMT0NBTF9TVE9SQUdFX05BTUUiLCJERUZBVUxUX1VTRVJfTkFNRSIsIkRFRkFVTFRfQ1NTX0NMQVNTX0ZPUl9DSEFUIiwiREVGQVVMVF9DSEFUX1RJVExFIiwiSFRNTF9GSUxFX1BBVEgiLCJDU1NfRklMRV9QQVRIIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIkNTU19NRVNTQUdFX0NPTlRBSU5FUiIsIkRJU1BMQVlfTUVTU0FHRV9EQVRFIiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIkRJU1BMQVlfTUVTU0FHRSIsIlVQREFURV9VU0VSX0RBVEFfVElNRSIsInBhcnNlU3JjRm9yUGFyYW1ldGVycyIsInNyYyIsInVzZXJDb25maWdPYmplY3QiLCJzdWJzdHIiLCJpbmRleE9mIiwic3BsaXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsInBhcmFtT2JqIiwicmVwbGFjZSIsInNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyIsIm91dGVyQ29uZmlnT2JqZWN0IiwiY29uZmlnIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsImdldEF0dHJpYnV0ZSIsImRhdGFCYXNlVXJsIiwiZ2V0RWxlbWVudCIsInNlbGVjdG9yIiwiaXNBbGwiLCJpdElzSWQiLCJzZWxlY3RvclN0YXJ0IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwicHJvdG90eXBlIiwicmVxdWVzdEZldGNoIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3RUeXBlIiwiY29udGVudFR5cGUiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInRleHQiLCJyZXF1ZXN0WE1SIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25sb2FkIiwiSlNPTiIsInBhcnNlIiwib25lcnJvciIsInN0YXR1c1RleHQiLCJzZW5kIiwicmVxdWVzdCIsImRhdGFTb3VyY2UiLCJkYXRhU291cmNlSW5zdGFuY2UiLCJEYXRhU291cmNlIiwiY3JlYXRlUmVxdWVzdFBhdGgiLCJkYXRhQmFzZVVSTCIsInJlcXVlc3RQb3N0Zml4IiwicGF0aCIsImdldEhUTUwiLCJnZXRVc2VyRGF0YSIsInVzZXJEYXRhIiwidGhpcyIsImRhdGEiLCJnZXRTZXR0aW5nRmllbGQiLCJmaWVsZE5hbWUiLCJzZXRTZXR0aW5nRmllbGQiLCJ2YWx1ZSIsInN0cmluZ2lmeSIsInNlbmRNZXNzYWdlIiwibWVzc2FnZU9iamVjdCIsImpzb25NZXNzYWdlIiwiZGF0ZSIsIm1lc3NhZ2UiLCJ1c2VyIiwic2VuZGVyIiwiaXRJc1JlYWQiLCJyZWFkIiwiZ2V0QWxsVXNlcnMiLCJ1c2Vyc0RhdGFMaXN0IiwidXNlcnNBUEkiLCJiaW5kIiwic2V0RmllbGQiLCJnZXRGaWVsZCIsImNvbW1vbkFQSSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwibWVzc2FnZVNlbmRlckRpdiIsIm1lc3NhZ2VEaXYiLCJhcHBlbmRDaGlsZCIsImdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCIsInJlbGF0aXZlVXNlck5hbWUiLCJyZWxhdGl2ZVVzZXJJZCIsImkiLCJtZXNzYWdlc0lzUmVhZCIsImxlbmd0aCIsInB1c2giLCJpZCIsImZpZWxkVmFsdWUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNEaXNwbGF5Iiwic3R5bGVDbGFzc2VzIiwiZGl2Iiwic3R5bGUiLCJpbm5lckhUTUwiLCJjcmVhdGVNZXNzYWdlTGlzdCIsIm1lc3NhZ2VPYmplY3RzIiwibmV3TWVzc2FnZUxpc3QiLCJ1cGRhdGVNZXNzYWdlTGlzdCIsImRpc3BsYXlNZXNzYWdlcyIsImFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IiwibWVzc2FnZU9iaiIsInRoYXQiLCJjbGVhckNoYXQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ1c2VyRGF0YU1hbmFnZXIiLCJVc2VyRGF0YU1hbmFnZXIiLCJjcmVhdGVNZXNzYWdlT2JqZWN0IiwibWVzc2FnZXMiLCJtZXNzYWdlc09iamVjdCIsImNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSIsInNhdmVTZXR0aW5nRmllbGQiLCJzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIiwic2VuZGVyTmFtZSIsIm1pbnV0ZXMiLCJnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsImdldEhvdXJzIiwiY29uY2F0Iiwic2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UiLCJzZXRNZXNzYWdlQXNSZWFkIiwiY29uc29sZSIsImxvZyIsInVzZXJTZXR0aW5ncyIsInNldHRpbmdzIiwibmV3RmllbGRTZXR0aW5nIiwidmlld0ZhY3RvcnkiLCJWaWV3RmFjdG9yeSIsImNyZWF0ZVZpZXciLCJodG1sUGF0aCIsImNzc1BhdGgiLCJjb250YWluZXJDbGFzcyIsImluY2x1ZGVWaWV3SFRNTFRvUGFnZSIsImNvbnRhaW5lckRpdiIsImh0bWwiLCJpbmNsdWRlVmlld0Nzc1RvUGFnZSIsImxpbmsiLCJoZWFkIiwiY3JlYXRlQ1NTTGluayIsImZpbGVQYXRoIiwicmVsIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsImNoYXRDdXN0b21pemVyIiwiQ2hhdEN1c3RvbWl6ZXIiLCJjb25maWdPYmplY3QiLCJzZXR1cE91dGVyQ2hhdFNldHRpbmdzIiwic2V0UG9zaXRpb25PZk1haW5CbG9jayIsInNldFRpdGxlIiwiYWxsb3dEcmFnTkRyb3AiLCJjbGlja0Jsb2NrIiwiZHJhZ0Jsb2NrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjb3JkcyIsInNoaWZ0WCIsInNoaWZ0WSIsIm1vdmVPYmoiLCJzZXROdWxsIiwiZW5kRHJhZyIsImJveCIsIm1vdmVBdCIsImVsZW0iLCJsZWZ0IiwicGFnZVgiLCJ0b3AiLCJwYWdlWSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0IiwicGFnZVhPZmZzZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiekluZGV4Iiwic2V0TWFpbkNzc0NsYXNzIiwicGFyZW50Tm9kZSIsImNoYXRDb250cm9sbGVyIiwiZ2V0SGFzaCIsInN0ciIsIkNoYXRDb250cm9sbGVyIiwic3RhcnRBcHAiLCJzZXR1cENoYXRWaWV3IiwiYXV0aG9yaXphdGlvbiIsInNldHVwQ2hhdEJhc2ljTGlzdGVuZXJzIiwic2V0dXBDaGF0U3R5bGUiLCJzZXR1cEludGVydmFsRnVuY3Rpb25zIiwic2V0dXBDaGF0U2VuZExpc3RlbmVycyIsInVzZXJOYW1lSXNSZXF1aXJlIiwiZ2V0VXNlcklkRnJvbUxvY2FsU3RvcmFnZSIsInNhdmVVc2VySWRUb0xvY2FsU3RvcmFnZSIsInRvZ2dsZUF1dGhvcml6YXRpb25NZW51VmlzaWJsZSIsInRvZ2dsZSIsImdldFVzZXJOYW1lRnJvbUlucHV0IiwibWluTWF4U3R5bGVUb2dnbGUiLCJjaGFuZ2VJbnB1dEFuZFNlbmRCdXR0b25DbGFzcyIsImFjdGl2aXR5Tm90aWZ5IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJzZXRJbnRlcnZhbCJdLCJtYXBwaW5ncyI6IkFBRUEsSUFBSUEsV0FBYSxDQUNiQyxJQUFLLENBQ0RDLDRCQUE2QiwwQkFDN0JDLHlCQUEwQiwyQ0FD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QUNsRDFOLEVBQU9oRCxvQkFBb0JHLFdBQzFCNkMsRUFBT2pELHdCQUEwQmlELEVBQU9oRSxJQUFJUSx1Q0FFNUN3RCxFQUFPakQsd0JBQTBCaUQsRUFBT2hFLElBQUlPLHdDQU1wRG9RLEVBQWV0TCxVQUFVZ00seUJBQTJCLFNBQWtDcFEsR0FDbEYyUSxhQUFhQyxRQUFRN04sRUFBTzVCLG1CQUFvQm5CLElBR3BEMFAsRUFBZXRMLFVBQVUrTCwwQkFBNEIsV0FDakQsT0FBT1EsYUFBYUUsUUFBUTlOLEVBQU81QixxQkFLdkN1TyxFQUFldEwsVUFBVTRMLHVCQUF5QixXQUM5QyxJQUFJcEYsRUFBTy9ELEtBQ1hpSyxZQUFhLFdBQ1Q5RixnQkFBZ0JyRSxZQUFZNUQsRUFBT2hELG9CQUFvQkMsUUFDdkQ0SyxFQUFLOEYsa0JBQ04zTixFQUFPYix3QkFHUCxJQUFJd04sRUEvS00sQ0FpTGxCNVEsWUFFSHlRLGVBQWVJIiwiZmlsZSI6ImNoYXRBcHBEZXYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2NvbmZpZ1xyXG5cclxudmFyIG1haW5Db25maWcgPSB7XHJcbiAgICBET006IHtcclxuICAgICAgICBNQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRcIixcclxuICAgICAgICBBVVRIT1JJWkFUSU9OX01FTlVfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfaW5wdXQtbmFtZS1ibG9ja1wiLFxyXG4gICAgICAgIFVTRVJfTkFNRV9JTlBVVF9DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9pbnB1dC1uYW1lXCIsXHJcbiAgICAgICAgU0VORF9VU0VSX05BTUVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X2lucHV0LW5hbWUtYnV0dG9uXCIsXHJcblxyXG4gICAgICAgIFNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbWluaW1pemUtc3R5bGVfX3NlbmQtYnV0dG9uXCIsXHJcblxyXG4gICAgICAgIFNFTkRfTUVTU0FHRV9GVUxMX1NJWkVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X19ib3R0b21fc2VuZC1idXR0b25cIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgiDQtNC70Y8g0LLQstC+0LTQsCDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfTUFYX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdGV4dGFyZWFcIixcclxuICAgICAgICBDU1NfTUlOX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZV9fbWVzc2FnZS1pbnB1dFwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCIHRpdGxlXHJcbiAgICAgICAgVElUTEVfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnQtdGl0bGVcIixcclxuICAgICAgICBDSEFOR0VfU1RZTEVfQlVUVE9OX01BWF9TSVpFOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190b3BfbWluaW1pemUtYnV0dG9uXCIsXHJcbiAgICAgICAgLy8g0YfQsNGCINCyINGB0YLQuNC70LUgbWluXHJcbiAgICAgICAgTUlOSU1JWkVfU1RZTEVfQ0hBVF9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZVwiLFxyXG4gICAgICAgIFNFVF9NSU5fU1RZTEVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X21pbmltaXplLXN0eWxlX19tYXgtYnV0dG9uXCIsXHJcbiAgICAgICAgU0VUX01BWF9TVFlMRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RvcF9taW5pbWl6ZS1idXR0b25cIlxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gZGF0YVNvdXJjZVxyXG4gICAgREFUQV9CQVNFX1VSTDogXCJodHRwczovL29ubGluZWNvbnN1bHRhbnR3ZWJhcHAuZmlyZWJhc2Vpby5jb21cIixcclxuXHJcblxyXG4gICAgLy8gdXNlckRhdGFNYW5hZ2VyXHJcbiAgICBDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdGV4dGFyZWFcIixcclxuXHJcbiAgICAvLyDQvdCw0YHRgtGA0L7QudC60Lgg0YLQtdC60YPRidC10LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70YxcclxuICAgIGN1cnJlbnRVc2VyU2V0dGluZ3M6IHtcclxuICAgICAgICB1c2VySWQ6IG51bGwsXHJcbiAgICAgICAgdXNlck5hbWU6IG51bGwsXHJcbiAgICAgICAgaXNNaW5pbWl6ZTogZmFsc2UsXHJcbiAgICAgICAgcmVhZExhc3RNZXNzYWdlOiBmYWxzZSxcclxuICAgICAgICBzZW5kTmV3TWVzc2FnZTogZmFsc2UsXHJcbiAgICAgICAgbGFzdE9ubGluZTogbmV3IERhdGUoKS5nZXRUaW1lKClcclxuICAgIH0sXHJcblxyXG4gICAgY2hhdFNldHRpbmdzOiB7XHJcbiAgICAgICAgYWxsb3dEcmFnOiBmYWxzZSxcclxuICAgICAgICBwb3NpdGlvbjogXCJyaWdodFwiLFxyXG4gICAgICAgIHRpdGxlOiBcIlRvdWNoU29mdCBDaGF0XCIsXHJcbiAgICAgICAgYWxsb3dNaW5pbWl6ZTogdHJ1ZSxcclxuICAgICAgICBvdXRlckNzc0NsYXNzOiAndG91Y2hzb2Z0LWNoYXRfbWFpbi1ibG9jaycsXHJcbiAgICAgICAgdHlwZU9mUmVxdWVzdDogXCJmZXRjaFwiLFxyXG4gICAgICAgIHJlcXVpcmVOYW1lOiB0cnVlXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINC60LvQsNGB0YEg0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtCwXHJcbiAgICBJTlZJU0lCTEVfQ0xBU1M6IFwiaW52aXNpYmxlXCIsXHJcbiAgICBDSEFUX1BPU0lUSU9OX1JJR0hUOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X3JpZ2h0LXBvc2l0aW9uXCIsXHJcbiAgICBDSEFUX1BPU0lUSU9OX0xFRlQ6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbGVmdC1wb3NpdGlvblwiLFxyXG5cclxuXHJcbiAgICBMT0NBTF9TVE9SQUdFX05BTUU6IFwidXNlcklEX3RvdWNoc29mdF9jaGF0XCIsXHJcbiAgICBERUZBVUxUX1VTRVJfTkFNRTogXCJndWVzdFwiLFxyXG5cclxuICAgIERFRkFVTFRfQ1NTX0NMQVNTX0ZPUl9DSEFUOiAndG91Y2hzb2Z0LWNoYXRfbWFpbi1ibG9jaycsXHJcbiAgICBERUZBVUxUX0NIQVRfVElUTEU6IFwiVG91Y2hTb2Z0IENoYXRcIixcclxuXHJcbiAgICAvLyBjaGF0Vmlld0NvbmZpZ1xyXG4gICAgLy8g0L7RgtC60YPQtNCwINC30LDQs9GA0YPQttCw0LXRgiBodG1sINC4IGNzcyDRh9Cw0YLQsFxyXG4gICAgSFRNTF9GSUxFX1BBVEg6XHJcbiAgICAgICAgXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2Rldi9odG1sL2NoYXRBcHBsaWNhdGlvbi9jaGF0Lmh0bWxcIixcclxuICAgIENTU19GSUxFX1BBVEg6XHJcbiAgICAgICAgXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2Rldi9jc3MvY2hhdC5jc3NcIixcclxuXHJcbiAgICAvLyBtZXNzYWdlTGlzdE1hbmFnZXJDb25maWdcclxuICAgIC8vIENzcyDQutC70LDRgdGBINC00LvRjyDRjdC70LXQvNC10L3QsNGCINGBINGB0L7QvtCx0YnQtdC90LjQtSwg0LXRgdC70Lgg0Y7Qt9C10YAg0L3QtSDQv9GA0L7Rh9C40YLQsNC7INGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVM6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX21lc3NhZ2Utbm90LXJlYWRcIixcclxuICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICBDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVI6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RvcF9tZXNzYWdlc1wiLFxyXG4gICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLXNlbmRlclwiLFxyXG4gICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQtNCw0YLRgyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgIENTU19DSEFUX01FU1NBR0VfREFURTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWRhdGVcIixcclxuICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICBDU1NfQ0hBVF9NRVNTQUdFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VcIixcclxuXHJcbiAgICBDU1NfTUVTU0FHRV9DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1lbGVtZW50c1wiLFxyXG5cclxuICAgIERJU1BMQVlfTUVTU0FHRV9EQVRFOiB0cnVlLFxyXG4gICAgRElTUExBWV9TRU5ERVJfTkFNRTogdHJ1ZSxcclxuICAgIERJU1BMQVlfTUVTU0FHRTogdHJ1ZSxcclxuXHJcbiAgICBVUERBVEVfVVNFUl9EQVRBX1RJTUU6IDUwMDBcclxufTtcclxuXHJcbi8vIElOQ0xVREVcclxuZnVuY3Rpb24gcGFyc2VTcmNGb3JQYXJhbWV0ZXJzKFxyXG4gICAgc3JjXHJcbikge1xyXG4gICAgdmFyIHVzZXJDb25maWdPYmplY3QgPSB7fTtcclxuICAgIHZhciBhcnJQYXJhbSA9IHNyYy5zdWJzdHIoc3JjLmluZGV4T2YoXCI/XCIpICsgMSkuc3BsaXQoXCImXCIpO1xyXG4gICAgYXJyUGFyYW0uZm9yRWFjaChmdW5jdGlvbiBjcmVhdGVDb25maWdPYmogKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgcGFyYW1PYmogPSBlbGVtZW50LnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBwYXJhbU9ialsxXSA9IHBhcmFtT2JqWzFdLnJlcGxhY2UoLycvZywgXCJcIik7XHJcbiAgICAgICAgdXNlckNvbmZpZ09iamVjdFtwYXJhbU9ialswXV0gPSBwYXJhbU9ialsxXTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHVzZXJDb25maWdPYmplY3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyAob3V0ZXJDb25maWdPYmplY3QsIGNvbmZpZykge1xyXG4gICAgT2JqZWN0LmtleXMob3V0ZXJDb25maWdPYmplY3QpLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY29uZmlnLmNoYXRTZXR0aW5nc1trZXldID0gb3V0ZXJDb25maWdPYmplY3Rba2V5XTtcclxuICAgIH0pXHJcbn1cclxuXHJcbi8vIElOQ0xVREVcclxuXHJcbnNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyhwYXJzZVNyY0ZvclBhcmFtZXRlcnMoZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoXCJzcmNcIikpLCBtYWluQ29uZmlnKTtcclxudmFyIGRhdGFCYXNlVXJsID0gbWFpbkNvbmZpZy5EQVRBX0JBU0VfVVJMO1xyXG5cclxudmFyIGdldEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRFbGVtZW50RnJvbURPTSAoc2VsZWN0b3IsIGlzQWxsLCBpdElzSWQpIHtcclxuICAgIHZhciBzZWxlY3RvclN0YXJ0ID0gKGl0SXNJZCkgPyBcIiNcIiA6IFwiLlwiO1xyXG4gICAgaWYoaXNBbGwpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JTdGFydCArIHNlbGVjdG9yKTtcclxufTtcclxuXHJcblxyXG52YXIgZGF0YUNvbm5lY3RvckNvbmZpZyA9IHtcclxuICAgIHR5cGVPZlJlcXVlc3Q6IG1haW5Db25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3RcclxufTtcclxuXHJcbi8vIGRhdGFiYXNlXHJcblxyXG4vLyDQnNC+0LTRg9C70Ywg0L/RgNC10LTQvtGB0YLQsNCy0LvRj9C10YIg0YHQv9C+0YHQvtCxINC+0YLQv9GA0LDQstC60Lgg0LfQsNC/0YDQvtGB0LAg0Log0LjRgdGC0L7Rh9C90LjQutGDINC00LDQvdC90YvRhVxyXG4vLyDQlNC70Y8g0YDQtdC60LLQtdGB0YLQsCDQvdC10L7QsdGF0L7QtNC40Lwg0L/Rg9GC0YwsINGC0LXQu9C+INC30LDQv9GA0L7RgdCwLCDRgtC40L8g0LfQsNC/0YDQvtGB0LBcclxuLy8gcmVxdWVzdCDQstC+0LfQstGA0LDRidCw0LXRgiBQcm9taXNlXHJcbnZhciBkYXRhQ29ubmVjdG9yID0gKGZ1bmN0aW9uIGdldERhdGFTb3VyY2VBUEkoZGF0YUNvbm5lY3RvckNvbmZpZ09iaikge1xyXG4gICAgdmFyIGRhdGFCYXNlQ29ubmVjdG9yO1xyXG4gICAgdmFyIGRhdGFCYXNlQVBJO1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFCYXNlQ29ubmVjdG9yKCkge31cclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24gcmVxdWVzdEZldGNoKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2gocmVxdWVzdFBhdGgsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQWNjZXB0OiBjb250ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IGNvbnRlbnRUeXBlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiBnZXRSZXNwb25zZUpTT04ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYoY29udGVudFR5cGUgPT09IFwiYXBwbGljYXRpb24vanNvblwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0WE1SID0gZnVuY3Rpb24gcmVxdWVzdFhNUihcclxuICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICByZXF1ZXN0Qm9keSxcclxuICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICBjb250ZW50VHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIHJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4ocmVxdWVzdFR5cGUsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgY29udGVudFR5cGUpO1xyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gbG9hZENhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiBlcnJvckNhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoeGhyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEJvZHkpIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKHJlcXVlc3RCb2R5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZGF0YUJhc2VDb25uZWN0b3IgPSBuZXcgRGF0YUJhc2VDb25uZWN0b3IoKTtcclxuICAgIGlmIChkYXRhQ29ubmVjdG9yQ29uZmlnT2JqLnR5cGVPZlJlcXVlc3QgPT09IFwiZmV0Y2hcIikge1xyXG4gICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0RmV0Y2hcclxuICAgICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRhQmFzZUFQSSA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdFhNUlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGFCYXNlQVBJO1xyXG59KShkYXRhQ29ubmVjdG9yQ29uZmlnKTtcclxuLy8g0JzQvtC00YPQu9GMINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFXHJcbi8vINCS0YHQtSBBUEkg0YTRg9C90LrRhtC40Lgg0LLQvtC30LLRgNCw0YnQsNGO0YIg0L/RgNC+0LzQuNGB0YtcclxudmFyIGRhdGFTb3VyY2UgPSAoZnVuY3Rpb24gY3JlYXRlRGF0YVNvdXJjZSAoZGF0YUNvbm5lY3Rvcikge1xyXG4gICAgdmFyIGRhdGFTb3VyY2VJbnN0YW5jZTtcclxuICAgIHZhciBkYXRhU291cmNlQVBJO1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2UoKSB7XHJcbiAgICAgICAgZGF0YUNvbm5lY3RvciA9IGRhdGFDb25uZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuY3JlYXRlUmVxdWVzdFBhdGggPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0UGF0aChcclxuICAgICAgICBkYXRhQmFzZVVSTCxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgcmVxdWVzdFBvc3RmaXhcclxuICAgICkge1xyXG4gICAgICAgIHZhciBwYXRoID0gZGF0YUJhc2VVUkwgKyBcIi91c2Vyc1wiO1xyXG4gICAgICAgIGlmICh1c2VySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQb3N0Zml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UG9zdGZpeDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF0aCArPSBcIi5qc29uXCI7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldEhUTUwgPSBmdW5jdGlvbiBnZXRIVE1MIChyZXF1ZXN0UGF0aCkge1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcIkdFVFwiLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04J1xyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCg0LDQsdC+0YLQsCDRgSDQmtCe0J3QmtCg0JXQotCd0KvQnCDRjtC30LXRgNC+0LxcclxuXHJcbiAgICAvLyDQn9C+0LvRg9GH0LjRgtGMINCy0YHQtSDRgdC+0L7QsdGJ0LXQvdC40Y8g0Lgg0L3QsNGB0YLRgNC+0LnQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBmdW5jdGlvbiBnZXRVc2VyRGF0YSh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlckRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yXHJcbiAgICAgICAgICAgIC5yZXF1ZXN0KHJlcXVlc3RQYXRoLCBudWxsLCBcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc2V0VXNlckRhdGEoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24gc2V0RGF0YSAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhW2tleV0gPSBkYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiByZXR1cm5Vc2Vyc0xpc3QoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlckRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C+0LvRg9GH0LDQtdGCINC+0L/RgCDQv9C+0LvQtSDQvdCw0YHRgtGA0L7QtdC6INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0U2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gZ2V0QW1vdW50T2ZOb1JlYWRNZXNzYWdlKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBmaWVsZE5hbWVcclxuICAgICkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgZmllbGROYW1lKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgXCJHRVRcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXRgiDQvtC/0YAg0L/QvtC70LUg0L3QsNGB0YLRgNC+0LXQuiDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLnNldFNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIGdldEFtb3VudE9mTm9SZWFkTWVzc2FnZShcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgZmllbGROYW1lLFxyXG4gICAgICAgIHZhbHVlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIGZpZWxkTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcclxuICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGC0L/RgNCw0LLQuNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjlxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZVRvVXNlcihcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgbWVzc2FnZU9iamVjdFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBcIm1lc3NhZ2VzXCIpO1xyXG4gICAgICAgIHZhciBqc29uTWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlOiBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJtZXNzYWdlXCIsXHJcbiAgICAgICAgICAgICAgICB1c2VyOiBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIGl0SXNSZWFkOiBtZXNzYWdlT2JqZWN0LnJlYWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIGpzb25NZXNzYWdlLFxyXG4gICAgICAgICAgICBcIlBPU1RcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQoNCw0LHQvtGC0LAg0YHQviDQktCh0JXQnNCYINGO0LfQtdGA0LDQvNC4XHJcblxyXG4gICAgLy8g0L/QvtC70YPRh9C40YLRjCDQstGB0LUg0LTQsNC90L3Ri9C1LCDQstGB0LXRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0QWxsVXNlcnMgPSBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcclxuICAgICAgICB2YXIgdXNlcnNEYXRhTGlzdCA9IHt9O1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yXHJcbiAgICAgICAgICAgIC5yZXF1ZXN0KHJlcXVlc3RQYXRoLCBudWxsLCBcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc2V0VXNlcnNMaXN0KGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIHNldERhdGEoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzRGF0YUxpc3Rba2V5XSA9IGRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcmV0dXJuVXNlcnNMaXN0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJzRGF0YUxpc3Q7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXQvCBpbnN0YW5jZSDQvtCx0YrQtdC60YLQsCwg0LfQsNC00LDQtdC8IEFQSVxyXG5cclxuICAgIGRhdGFTb3VyY2VJbnN0YW5jZSA9IG5ldyBEYXRhU291cmNlKCk7XHJcbiAgICBkYXRhU291cmNlQVBJID0ge1xyXG4gICAgICAgIHVzZXJzQVBJOiB7XHJcbiAgICAgICAgICAgIGdldFVzZXJEYXRhOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0VXNlckRhdGEuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBzZW5kTWVzc2FnZTogZGF0YVNvdXJjZUluc3RhbmNlLnNlbmRNZXNzYWdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgc2V0RmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXRTZXR0aW5nRmllbGQuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBnZXRGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLmdldFNldHRpbmdGaWVsZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJzOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0QWxsVXNlcnMuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21tb25BUEk6IHtcclxuICAgICAgICAgICAgZ2V0SFRNTDogZGF0YVNvdXJjZUluc3RhbmNlLmdldEhUTUwuYmluZChkYXRhU291cmNlSW5zdGFuY2UpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZGF0YVNvdXJjZUFQSTtcclxufSkoZGF0YUNvbm5lY3Rvcik7XHJcblxyXG4vLyBtZXNzYWdlTWFuYWdlclxyXG5cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGNoYXRNYW5hZ2VyQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIGNoYXRNYW5hZ2VyICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0YDQsNCx0L7RgtGLINGB0L4g0YHQv9C40YHQutC+0Lwg0YHQvtC+0LHRidC10L3QuNC5INCe0JTQndCe0JPQniDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxudmFyIG1lc3NhZ2VMaXN0TWFuYWdlciA9IChmdW5jdGlvbiBzZXR1cE1lc3NhZ2VMaXN0TWFuYWdlciAoY29uZmlnKSB7XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8g0KTQvtGA0LzQsNGCICBtZXNzYWdlTGlzdCA9IFtcclxuICAgIC8vICAgIHtcclxuICAgIC8vICAgICAgIHNlbmRlcjogc2VuZGVyXHJcbiAgICAvLyAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgLy8gICAgICAgcmVhZDogdHJ1ZS9mYWxzZVxyXG4gICAgLy8gICAgICAgZGF0ZTogZGF0ZVxyXG4gICAgLy8gICAgfSxcclxuICAgIC8vIF1cclxuICAgIC8vIHJlYWQgLSDQsdGL0LvQviDQu9C4INC/0YDQvtGH0LjRgtCw0L3QviDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgZnVuY3Rpb24gTWVzc2FnZUxpc3RNYW5hZ2VyKCkge31cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLmNET00gPSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQmxvY2s6IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTUVTU0FHRSBFTEVNRU5UIC8vXHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10YIgRE9NINGN0LvQtdC80LXQvdGCINGB0L7QvtCx0YnQtdC90LjRjyDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvdCwINGN0LrRgNCw0L3QtVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgbWVzc2FnZURhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYoaXNSZWFkLCBzZW5kZXIpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlRGF0ZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfTUVTU0FHRV9EQVRFLFxyXG4gICAgICAgICAgICBbY29uZmlnLkNTU19DSEFUX01FU1NBR0VfREFURV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZVNlbmRlckRpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ESVNQTEFZX1NFTkRFUl9OQU1FLFxyXG4gICAgICAgICAgICBbY29uZmlnLkNTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUVdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfTUVTU0FHRSxcclxuICAgICAgICAgICAgW2NvbmZpZy5DU1NfQ0hBVF9NRVNTQUdFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZURhdGVEaXYpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZVNlbmRlckRpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGl2KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VDb250YWluZXJEaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkID0gZnVuY3Rpb24gIGdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCAocmVsYXRpdmVVc2VyTmFtZSwgcmVsYXRpdmVVc2VySWQpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICB2YXIgbWVzc2FnZXNJc1JlYWQgPSBbXTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSByZWxhdGl2ZVVzZXJOYW1lIHx8IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lO1xyXG4gICAgICAgIHZhciB1c2VySWQgPSByZWxhdGl2ZVVzZXJJZCB8fCBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQ7XHJcbiAgICAgICAgZm9yKGkgPSB0aGlzLm1lc3NhZ2VMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubWVzc2FnZUxpc3RbaV0uc2VuZGVyICE9PSB1c2VyTmFtZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMubWVzc2FnZUxpc3RbaV0ucmVhZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzSXNSZWFkLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOlwibWVzc2FnZXMvXCIgKyB0aGlzLm1lc3NhZ2VMaXN0W2ldLmlkICsgXCIvaXRJc1JlYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZXNJc1JlYWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgKGlzUmVhZCwgc2VuZGVyKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcuQ1NTX01FU1NBR0VfQ09OVEFJTkVSKTtcclxuICAgICAgICBpZiAoIWlzUmVhZCAmJiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSAhPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcuQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgPSBmdW5jdGlvbiAodGV4dCwgaXNEaXNwbGF5LCBzdHlsZUNsYXNzZXMpIHtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdHlsZUNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoc3R5bGUpIHtcclxuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoc3R5bGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUxpc3QgKG1lc3NhZ2VPYmplY3RzKSAge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gYWRkRWxlbWVudFRvTWVzc2FnZUxpc3QgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VMaXN0LnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdCAobmV3TWVzc2FnZUxpc3QpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IChcclxuICAgICAgICBtZXNzYWdlT2JqXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LnB1c2gobWVzc2FnZU9iaik7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QtdGA0LXQsdC40YDQsNC10YIg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSwg0YHQvtC30LTQsNC10YIg0YHQvtC+0YLQstC10YLRgdCy0YPRjtGJ0LjQtSDQuNC8IERPTSDRjdC70LXQvNC10L3RgtGLINC4INCy0YHRgtCw0LLQu9GP0LXRgiDQuNGFINCyINGH0LDRglxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZXMgPSBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoYXQuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGF0LmNET00ubWVzc2FnZXNCbG9jay5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7Rh9C40YHRgtC40YLRjCBET00g0Y3Qu9C10LzQtdC90YIg0LIg0LrQvtGC0L7RgNC+0Lwg0L7RgtC+0LHRgNCw0LbQsNGO0YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyAo0L3QsNC/0YDQuNC80LXRgCDRh9GC0L7QsdGLINCy0YHRgtCw0LLQuNGC0Ywg0L3QstC+0YvQuSDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5KVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckNoYXQgPSBmdW5jdGlvbiBjbGVhckNoYXQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2sucmVtb3ZlQ2hpbGQodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2VMaXN0TWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbnZhciB1c2VyRGF0YU1hbmFnZXIgPSAgKGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIGZ1bmN0aW9uIFVzZXJEYXRhTWFuYWdlciAoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgbWludXRlcyA9IChkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkgPyBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGVcclxuICAgICAgICAgICAgLmdldEhvdXJzKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLmNvbmNhdChcIjpcIiwgbWludXRlcyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlT2JqZWN0IChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZCxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWQ6IGlzUmVhZCxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuc2V0dXAoKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGZ1bmN0aW9uIGdldFVzZXJEYXRhICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlckRhdGEodXNlcklkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lID0gZGF0YS51c2VyTmFtZTtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSA9IGRhdGEuaXNNaW5pbWl6ZTtcclxuICAgICAgICAgICAgaWYoZGF0YS5tZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzT2JqZWN0ID0gW107XHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhLm1lc3NhZ2VzKS5tYXAoZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc09iamVjdC5wdXNoKGNyZWF0ZU1lc3NhZ2VPYmplY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZXNbbWVzc2FnZV0ubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1lc3NhZ2VzW21lc3NhZ2VdLnVzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZXNbbWVzc2FnZV0uaXRJc1JlYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QgPSBtZXNzYWdlTGlzdE1hbmFnZXIuY3JlYXRlTWVzc2FnZUxpc3QobWVzc2FnZXNPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2VMaXN0KG5ld01lc3NhZ2VMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbmNsdWRlXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MpLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHRoYXQuc2F2ZVNldHRpbmdGaWVsZChrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIGluY2x1ZGVcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVTZXR0aW5nRmllbGQgPSBmdW5jdGlvbiBzZXRGaWVsZCAoZmllbGROYW1lKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzW2ZpZWxkTmFtZV1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIClcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlIChzZW5kZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gY3JlYXRlTWVzc2FnZU9iamVjdChtZXNzYWdlLCBkYXRlLCBzZW5kZXJOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICBlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0TWVzc2FnZUFzUmVhZCA9IGZ1bmN0aW9uIHNldE1lc3NhZ2VBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0cyA9IG1lc3NhZ2VMaXN0TWFuYWdlci5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShtZXNzYWdlT2JqZWN0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3Quc2VuZGVyID09PSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlT2JqZWN0LnNlbmRlcik7XHJcbiAgICAgICAgICAgIHZhciB1c2VyU2V0dGluZ3MgPSBbe1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IFwic2VuZE5ld01lc3NhZ2VcIixcclxuICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShcclxuICAgICAgICAgICAgICAgIHVzZXJTZXR0aW5nc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTZXR0aW5ncyA9IFt7dXNlcklkLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWV9LHt9Li4uXVxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbiAobmV3RmllbGRTZXR0aW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0RmllbGQoXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhTWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcblxyXG4vLyB2aWV3XHJcblxyXG52YXIgdmlld0ZhY3RvcnkgPSAoZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBWaWV3RmFjdG9yeSAoKSB7fVxyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVWaWV3ID0gZnVuY3Rpb24gY3JlYXRlQ2hhdFZpZXcgKGh0bWxQYXRoLCBjc3NQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIC8vIGlmKGh0bWxQYXRoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBpZihjc3NQYXRoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhhdC5pbmNsdWRlVmlld0Nzc1RvUGFnZSh0aGF0LmNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNzc1BhdGgsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwic3R5bGVzaGVldFwiLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBcInRleHQvY3NzXCIsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwidG91Y2gtc29mdC1jaGF0LWNzc1wiXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKFwiREVWXCIpO1xyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgcmVqZWN0KG5ldyBFcnJvcihcImh0bWxQYXRoIGlzIG51bGwuIFBsZWFzZSBhZGQgaHRtbFBhdGhcIikpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0hUTUxUb1BhZ2UgPSBmdW5jdGlvbiBpbmNsdWRlQ2hhdEhUTUxUb1BhZ2UgKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciBjb250YWluZXJEaXYgPSAoY29udGFpbmVyQ2xhc3MpID8gZ2V0RWxlbWVudChjb250YWluZXJDbGFzcykgOiBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLmNvbW1vbkFQSS5nZXRIVE1MKGh0bWxQYXRoKS50aGVuKGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0Nzc1RvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0Q3NzVG9QYWdlIChsaW5rKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNTU0xpbmsgPSBmdW5jdGlvbiBjcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgIHJlbCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgVmlld0ZhY3RvcnkoKVxyXG5cclxufSkoZGF0YVNvdXJjZSk7XHJcblxyXG4vLyBjaGF0TWFpblxyXG5cclxudmFyIGNoYXRDdXN0b21pemVyID0gKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBDaGF0Q3VzdG9taXplcigpIHt9XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAgKGNvbmZpZ09iamVjdCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnT2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0dXBPdXRlckNoYXRTZXR0aW5ncyA9IGZ1bmN0aW9uIHNldHVwT3V0ZXJDaGF0U2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5hbGxvd01pbmltaXplKCk7XHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbk9mTWFpbkJsb2NrKCk7XHJcbiAgICAgICAgdGhpcy5zZXRUaXRsZSgpO1xyXG4gICAgICAgIC8vdGhpcy5zZXRNYWluQ3NzQ2xhc3MoKTtcclxuICAgICAgICB0aGlzLmFsbG93RHJhZ05Ecm9wKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5hbGxvd0RyYWdORHJvcCA9IGZ1bmN0aW9uIGFsbG93RHJhZ05Ecm9wKCkge1xyXG4gICAgICAgIHZhciBjbGlja0Jsb2NrID0gZ2V0RWxlbWVudCh0aGlzLmNvbmZpZy5ET00uVElUTEVfQkxPQ0tfQ0xBU1MpO1xyXG4gICAgICAgIHZhciBkcmFnQmxvY2sgPSBnZXRFbGVtZW50KHRoaXMuY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3MuYWxsb3dEcmFnID09PSBcImZhbHNlXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbGlja0Jsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gZHJhZ0FuZERyb3AoZSkge1xyXG4gICAgICAgICAgICB2YXIgY29yZHM7XHJcbiAgICAgICAgICAgIHZhciBzaGlmdFg7XHJcbiAgICAgICAgICAgIHZhciBzaGlmdFk7XHJcbiAgICAgICAgICAgIHZhciBtb3ZlT2JqO1xyXG4gICAgICAgICAgICB2YXIgc2V0TnVsbDtcclxuICAgICAgICAgICAgdmFyIGVuZERyYWc7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDb29yZHMoZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogYm94LnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBib3gubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29yZHMgPSBnZXRDb29yZHMoZHJhZ0Jsb2NrKTtcclxuICAgICAgICAgICAgc2hpZnRYID0gZS5wYWdlWCAtIGNvcmRzLmxlZnQ7XHJcbiAgICAgICAgICAgIHNoaWZ0WSA9IGUucGFnZVkgLSBjb3Jkcy50b3A7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBtb3ZlQXQoZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgZHJhZ0Jsb2NrLnN0eWxlLmxlZnQgPSBlbGVtLnBhZ2VYIC0gc2hpZnRYICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgZHJhZ0Jsb2NrLnN0eWxlLnRvcCA9IGVsZW0ucGFnZVkgLSBzaGlmdFkgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1vdmVPYmogPSBmdW5jdGlvbiBtb3ZlT2JqRHJhZ0FuZERyb3AoZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgbW92ZUF0KGVsZW0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc2V0TnVsbCA9IGZ1bmN0aW9uIHNldE51bGxEcmFnQW5kRHJvcCAoKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsbW92ZU9iaiApO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixzZXROdWxsICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBlbmREcmFnID0gZnVuY3Rpb24gZW5kRHJhZ0FuZERyb3AoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBtb3ZlQXQoZSk7XHJcbiAgICAgICAgICAgIGRyYWdCbG9jay5zdHlsZS56SW5kZXggPSAxMDAwO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3ZlT2JqKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc2V0TnVsbCk7XHJcbiAgICAgICAgICAgIGRyYWdCbG9jay5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIGVuZERyYWcpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLnNldFBvc2l0aW9uT2ZNYWluQmxvY2sgPSBmdW5jdGlvbiBzZXRQb3NpdGlvbk9mTWFpbkJsb2NrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3MucG9zaXRpb24gPT09IFwicmlnaHRcIikge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KHRoaXMuY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5DSEFUX1BPU0lUSU9OX1JJR0hUXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2V0RWxlbWVudCh0aGlzLmNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuQ0hBVF9QT1NJVElPTl9MRUZUXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0VGl0bGUgPSBmdW5jdGlvbiBzZXRUaXRsZSgpIHtcclxuICAgICAgICBpZih0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3MudGl0bGUubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3MudGl0bGUgPSB0aGlzLmNvbmZpZy5ERUZBVUxUX0NIQVRfVElUTEU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEVsZW1lbnQodGhpcy5jb25maWcuRE9NLlRJVExFX0JMT0NLX0NMQVNTKS5pbm5lckhUTUwgPSB0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3MudGl0bGU7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5hbGxvd01pbmltaXplID0gZnVuY3Rpb24gYWxsb3dNaW5pbWl6ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jb25maWcuY2hhdFNldHRpbmdzLmFsbG93TWluaW1pemUgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KHRoaXMuY29uZmlnLkRPTS5DSEFOR0VfU1RZTEVfQlVUVE9OX01BWF9TSVpFKS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0TWFpbkNzc0NsYXNzID0gZnVuY3Rpb24gc2V0TWFpbkNzc0NsYXNzKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy5vdXRlckNzc0NsYXNzKTtcclxuICAgICAgICBpZih0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3Mub3V0ZXJDc3NDbGFzcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy5vdXRlckNzc0NsYXNzID0gdGhpcy5jb25maWcuREVGQVVMVF9DU1NfQ0xBU1NfRk9SX0NIQVQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEVsZW1lbnQodGhpcy5jb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUy5wYXJlbnROb2RlKS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3Mub3V0ZXJDc3NDbGFzc1xyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgQ2hhdEN1c3RvbWl6ZXIoKTtcclxufSkoKTtcclxudmFyIGNoYXRDb250cm9sbGVyID0gKGZ1bmN0aW9uIChjb25maWcpIHtcclxuXHJcbiAgICAvLyBJTkNMVURFIC8vXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0SGFzaChzdHIpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHN0ciArIGRhdGUuZ2V0VGltZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElOQ0xVREUgLy9cclxuXHJcbiAgICBmdW5jdGlvbiBDaGF0Q29udHJvbGxlcigpIHt9XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShjb25maWcuTE9DQUxfU1RPUkFHRV9OQU1FKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXR1cENoYXRWaWV3KCkudGhlbiggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGF0LmF1dGhvcml6YXRpb24oY29uZmlnLmNoYXRTZXR0aW5ncy5yZXF1aXJlTmFtZSk7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0dXBDaGF0QmFzaWNMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnNldHVwQ2hhdFN0eWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXR1cENoYXRTZW5kTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoYXQuc2V0dXBDaGF0U3R5bGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjaGF0Q3VzdG9taXplci5zZXR1cChjb25maWcpO1xyXG4gICAgICAgICAgICBjaGF0Q3VzdG9taXplci5zZXR1cE91dGVyQ2hhdFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGF1dGhvcml6YXRpb24gYmxvY2sgLy9cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuYXV0aG9yaXphdGlvbiA9IGZ1bmN0aW9uIGF1dGhvcml6YXRpb24gKHVzZXJOYW1lSXNSZXF1aXJlKSB7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNldHVwKGNvbmZpZyk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gdGhpcy5nZXRVc2VySWRGcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgaWYoIWNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCkge1xyXG4gICAgICAgICAgICBpZih1c2VyTmFtZUlzUmVxdWlyZSA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBnZXRIYXNoKGNvbmZpZy5ERUZBVUxUX1VTRVJfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSA9IGNvbmZpZy5ERUZBVUxUX1VTRVJfTkFNRTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVVzZXJJZFRvTG9jYWxTdG9yYWdlKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUF1dGhvcml6YXRpb25NZW51VmlzaWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUudG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5BVVRIT1JJWkFUSU9OX01FTlVfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICApXHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCV0YHQu9C4INGC0YDQtdCx0YPQtdGC0YHRjyDQstCy0LXRgdGC0Lgg0LjQvNGPLCDQv9C+0LvRg9GH0LDQtdC8INC10LPQviDQuCDQt9Cw0L3QvtGB0LjQvCDRjtC30LXRgNCwINCyINCx0LRcclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRVc2VyTmFtZUZyb21JbnB1dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSA9IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgIGNvbmZpZy5ET00uVVNFUl9OQU1FX0lOUFVUX0NMQVNTXHJcbiAgICAgICAgKS52YWx1ZTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBnZXRIYXNoKFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNldHVwKGNvbmZpZyk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSgpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVVzZXJJZFRvTG9jYWxTdG9yYWdlKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBdXRob3JpemF0aW9uTWVudVZpc2libGUoKTtcclxuICAgICAgICB0aGlzLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNldHVwQ2hhdFNlbmRMaXN0ZW5lcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2V0dXAgQ2hhdCAvL1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRTZW5kTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHNldHVwIGNoYXQgbGlzdGVuZXJzXHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFTkRfTUVTU0FHRV9GVUxMX1NJWkVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuc2VuZE1lc3NhZ2UuYmluZCh1c2VyRGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlcixcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdXNlckRhdGFNYW5hZ2VyLnNldE1lc3NhZ2VBc1JlYWQuYmluZCh1c2VyRGF0YU1hbmFnZXIpKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwQ2hhdEJhc2ljTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uU0VORF9VU0VSX05BTUVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuZ2V0VXNlck5hbWVGcm9tSW5wdXQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFVF9NQVhfU1RZTEVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICB0aGF0Lm1pbk1heFN0eWxlVG9nZ2xlLmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5TRVRfTUlOX1NUWUxFX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgdGhhdC5taW5NYXhTdHlsZVRvZ2dsZS5iaW5kKHRoYXQpXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRWaWV3ID0gZnVuY3Rpb24gc2V0dXBDaGF0VmlldyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZpZXdGYWN0b3J5LmNyZWF0ZVZpZXcoY29uZmlnLkhUTUxfRklMRV9QQVRILCBjb25maWcuQ1NTX0ZJTEVfUEFUSCwgbnVsbCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRTdHlsZSA9IGZ1bmN0aW9uIHNldHVwQ2hhdFN0eWxlKCkge1xyXG4gICAgICAgIGlmICghY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSkge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLm1pbk1heFN0eWxlVG9nZ2xlID0gZnVuY3Rpb24gbWluTWF4U3R5bGVUb2dnbGUoKSB7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICAgICAgY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1JTklNSVpFX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLmlzTWluaW1pemUgPSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID09PSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNoYW5nZUlucHV0QW5kU2VuZEJ1dHRvbkNsYXNzKCk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNhdmVTZXR0aW5nRmllbGQoXCJpc01pbmltaXplXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuYWN0aXZpdHlOb3RpZnkgPSBmdW5jdGlvbiBhY3Rpdml0eU5vdGlmeSAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLmxhc3RPbmxpbmUgPSBkYXRlLmdldFRpbWUoKTtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuc2F2ZVNldHRpbmdGaWVsZChcImxhc3RPbmxpbmVcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5jaGFuZ2VJbnB1dEFuZFNlbmRCdXR0b25DbGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyA9IGNvbmZpZy5ET00uQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1NcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25maWcuQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MgPSBjb25maWcuRE9NLkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTE9DQUwgU1RPUkFHRSAvL1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlVXNlcklkVG9Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzYXZlVXNlcklkVG9Mb2NhbFN0b3JhZ2UodXNlcklkKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSwgdXNlcklkKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBnZXRVc2VySWRGcm9tTG9jYWxTdG9yYWdlICgpIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBMT0NBTCBTVE9SQUdFIC8vXHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHNldEludGVydmFsKCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5nZXRVc2VyRGF0YShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICB0aGF0LmFjdGl2aXR5Tm90aWZ5KCk7XHJcbiAgICAgICAgfSwgY29uZmlnLlVQREFURV9VU0VSX0RBVEFfVElNRSlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBDaGF0Q29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcblxyXG5jaGF0Q29udHJvbGxlci5zdGFydEFwcCgpOyJdfQ==
