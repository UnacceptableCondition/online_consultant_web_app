var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort",CSS_ACTIVE_USER_BLOCK:"root-touchsoft-dashboard_active-user",CSS_CONTROL_PANEL_LOG_CLASS:"root-touchsoft-dashboard_control-log",CSS_CONTROL_PANEL_SELECT_CLASS:"root-touchsoft-dashboard_control_select_command",CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS:"root-touchsoft-dashboard_control_send-command-button",CSS_CONTROL_PARAMETERS_CLASS:"root-touchsoft-dashboard_control_parameter-input",CSS_CONTROL_PANEL_LOG_ELEMENT_CLASS:"root-touchsoft-dashboard_control-log-inner-information"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","networkRadioLongPoll","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?",srcEnd:"'&gt&lt/script&gt"},userList:{USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online"},chatSettings:{typeOfRequest:"longPoll"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},interval:{UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e3},router:{ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",ADMIN_NAME:"Admin",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message",COMMAND_PATH_PREFIX:"https://onlineconsultantwebapp.firebaseio.com/usersSettings/"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,n){var r;return 1<e.length&&(t<(r=function(e,t,s,n){for(var r,a,o,i,u=e[Math.floor((s+t)/2)][n],c=t,l=s;c<=l;){for(;e[c][n]>u;)c++;for(;e[l][n]<u;)l--;c<=l&&(o=l,i=(r=e)[a=c],r[a]=r[o],r[o]=i,c++,l--)}return c}(e,t,s,n))-1&&this.quickSort(e,t,r-1,n),r<s&&this.quickSort(e,r,s,n)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.setupDataBaseAPI=function(e){return"fetch"===e?{request:t.requestFetch,getNewConnectorAPI:t.setupDataBaseAPI}:"XHR"===e?{request:t.requestXMR,getNewConnectorAPI:t.setupDataBaseAPI}:{request:t.requestXMR,createLongPollConnection:t.longPoll,getNewConnectorAPI:t.setupDataBaseAPI}},s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,r,a,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(a,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},r?s.send(r):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},(t=new s).setupDataBaseAPI(e.typeOfRequest)}(dataConnectorConfig),dataSource=function(o,t){var s,r="userList",n="usersMessages",a="usersSettings",i={isMinimize:!1,readLastMessage:!0};function u(){}function c(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function l(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}return u.prototype.createRequestPath=function(e,t,s,n){var r=e;return null!==n&&(r+="/"+n),null!==t&&(r+="/"+t),null!==s&&(r+="/"+s),r+=".json"},u.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},u.prototype.setData=function(e,t,s,n,r){var a;return a="PUT"===t?this.createRequestPath(dataBaseUrl,n,s,e):this.createRequestPath(dataBaseUrl,n,null,e),o.request(a,JSON.stringify(r),t,"application/json")},u.prototype.addNewUserToDataSource=function(t,e){var s=new Date,n=this;i.userName=e,Object.keys(i).map(function(e){return n.setData(a,"PUT",e,t,i[e]),!0}),this.setData(r,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},u.prototype.getDataSourceAPI=function(e){return e&&(t.chatSettings.typeOfRequest=e),u.prototype.getData="longPoll"===t.chatSettings.typeOfRequest?c:l,{usersAPI:{getUserList:s.getData.bind(s,r),getUserSettings:s.getData.bind(s,a),getUserMessages:s.getData.bind(s,n),getSettingField:s.getData.bind(s,a),sendMessage:s.setData.bind(s,n,"POST"),setSettingField:s.setData.bind(s,a,"PUT"),addNewUserToDataSource:s.addNewUserToDataSource.bind(s),updateLastOnline:s.setData.bind(s,r,"PUT","lastOnline"),updateSendNewMessageFlag:s.setData.bind(s,r,"PUT","sendNewMessage"),updateMessageIsReadField:s.setData.bind(s,n,"PUT")},commonAPI:{getHTML:s.getHTML.bind(s),getDataSourceAPI:s.getDataSourceAPI.bind(s)}}},(s=new u).getDataSourceAPI()}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/,getIp:/getIp/,askQuestion:/askQuestion/},r=/event: put/,t=/data: null/,a=/","data":/,o=/"path":"\/-/,n=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=/data: {"path":"\/","data":{"getIp":/,u=/data: {"path":"\/","data":{"askQuestion":/,c=/data: {"path":"\/askQuestion","data":/,l=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){return!!s[e].test(t)&&e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(a)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,n={},r={};return"read"===t?(n.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),n.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),n):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(a).shift(),n=JSON.parse(this.prepareDataBeforeJsonParse(e)),r[s]=n,r):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return l?(l=!1,this.getFirstData(e)):n.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseCommandAnswer=function(e){var t,s=/getIp/.test(e[e.length-1]),n=/askQuestion/.test(e[e.length-1]);return s&&n?(t=e[e.length-1].split(/data: {"path":"\/","data":/).pop().split("},"),[JSON.parse(t[0]+"}}"),JSON.parse("{"+t[1].trim().slice(0,-1))]):s?this.parseUserIpData(e):n?this.parseQuestionsData(e):void 0},e.prototype.parseUserIpData=function(e){return i.test(e)?JSON.parse('{"getIp":'+e[e.length-1].split(i).pop().trim().slice(0,-1)):JSON.parse(e[e.length-1].split(r).pop().split('data: {"path":"/getIp","data":').pop().trim().slice(0,-1))},e.prototype.parseQuestionsData=function(e){return u.test(e[e.length-1])?JSON.parse('{"askQuestion":'+e[e.length-1].split(u).pop().trim().slice(0,-1)):c.test(e[e.length-1])?JSON.parse(e[e.length-1].split(c).pop().trim().slice(0,-1)):JSON.parse('{"askQuestion":{"'+e[e.length-1].split('data: {"path":"/askQuestion/').pop().replace('","data"','"')+"}")},e.prototype.parse=function(e){var t=e.split(r),s=this.getTypeOfChanges(t[t.length-1]),n={type:s};return!!this.hasNewData(t)&&("message"===s||"read"===s?(n.object=this.parseUsersMessages(t,s),n):"sendNewMessage"===s||"lastOnline"===s||"userList"===s?(n.object=this.parseUserList(t,s),n):("getIp"===s||"askQuestion"===s)&&(n.object=this.parseCommandAnswer(t,s),n))},new e}(),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,r){var a=this;return new Promise(function(e,t){s?(n&&a.includeViewCssToPage(a.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(a.includeViewHTMLToPage(s,r))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var r=document.createElement("link");return n&&r.setAttribute("id",n),t&&r.setAttribute("rel",t),s&&r.setAttribute("type",s),r.setAttribute("href",e),r},new e}(dataSource),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var r=this.createMessageContainerDiv(n,s),a=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return r.appendChild(a),r.appendChild(o),r.appendChild(i),r},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,n=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:n,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,n){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort(),i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3===this.readyState&&200===this.status&&(t=n.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){return t[e].id=e,messageListManager.addMessageToMessageList(t[e]),!0}),messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){e.id===t.id&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){return t[e].id=e,s.push(t[e]),!0}),messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(){var e,t,s,n=this.getMessageFromInputElement(),r=(e=new Date,t=1===e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),e.getHours().toString().concat(":",t)),a=i.currentUserSettings.userName||i.ADMIN_NAME,o={sender:a,message:n,read:!1,date:r,id:s};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),log=function(t){function s(e){getElement(t.DOM.CSS_CONTROL_PANEL_LOG_CLASS).appendChild(e)}function n(e){var n=document.createElement("div");n.classList.add(t.DOM.CSS_CONTROL_PANEL_LOG_ELEMENT_CLASS);return function t(s,n){Object.keys(s).map(function(e){s[e]instanceof Object?t(s[e],n):n(s[e],e)})}(e,function(e,t){var s;(s=document.createElement("div")).innerHTML=t+": "+e,n.appendChild(s)}),n}return{write:function(e){e instanceof Array?e.forEach(function(e){s(n(e))}):s(n(e))},clear:function(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}.bind(null,t.DOM.CSS_CONTROL_PANEL_LOG_CLASS)}}(mainConfig),userListManager=function(a,e){function t(){this.uList=[]}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return s.classList.add(a.userList.USER_ELEMENT_CSS_CLASS),n.classList.add(a.userList.USER_ID_ELEMENT_CSS_CLASS),n.innerHTML=e,t?r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_ONLINE):r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(n),s.appendChild(r),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var n=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,n),online:n,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.updateUserOnlineStatus=function(e,t){var s=this.getUserFromUserListById(e);this.uList[s].lastOnline=t,this.uList[s].online=this.userIsOnline(t),this.uList[s].userElement=this.createUserElement(e,this.userIsOnline(t))},t.prototype.getUserFromUserListById=function(t){var s=this,n=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(n=e),!0}),n},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=a.interval.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(a.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,a.currentDashboardCondition.sortBy)},t.prototype.clearUserList=function(){this.uList=[]},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(a.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(a.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),controlPanel=function(o,i,s,n){var u,e,c,r,t,l,d,a=3,p={getIp:{parametersNumber:0},askQuestion:{parametersNumber:3}},S={getIp:[],askQuestion:["placeholder","текст вопроса"]};function g(e){t[e].forEach(function(e){e()})}function h(){var e,t,s,n,r,a;l={commandName:u.value,parametersNumber:p[u.value].parametersNumber,isExecute:!1},c.forEach(function(e,t){t<l.parametersNumber&&(l["parameter"+t]=e.value)}),e=null,t=u.value,s=e||o.currentUserSettings.userId,d=o.COMMAND_PATH_PREFIX+s+"/commands/"+t+".json",n=l,r=d,a=JSON.stringify(n),i.request(r,a,"PUT","application/json")}function f(e){for(var t=S[e].length,s=a-1;0<=s;s--)s<t?(c[s].classList.remove(o.INVISIBLE_CLASS),c[s].placeholder=S[e][s]):(c[s].classList.add(o.INVISIBLE_CLASS),c[s].value="")}function _(){}return t={firstInit:[function(){getElement(o.DOM.CSS_CONTROL_PANEL_LOG_CLASS),u=getElement(o.DOM.CSS_CONTROL_PANEL_SELECT_CLASS),e=getElement(o.DOM.CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS),c=getElement(o.DOM.CSS_CONTROL_PARAMETERS_CLASS,!0)},function(){u.addEventListener("change",function(){f(u.value)}),e.addEventListener("click",h)},f.bind(null,"getIp")],setup:[function(e){var t=e||o.currentUserSettings.userId;r&&r.abort(),r=i.createLongPollConnection(o.COMMAND_PATH_PREFIX+t+"/commandsResponse/.json"),s.clear(),r.onreadystatechange=function(){if(3===this.readyState&&200===this.status){var e=n.parse(this.responseText);e&&s.write(e.object)}},r.send()}],close:[function(){r&&r.abort()}]},_.prototype.setup=g.bind(null,"setup"),_.prototype.close=g.bind(null,"close"),_.prototype.firstInit=g.bind(null,"firstInit"),new _}(mainConfig,dataConnector,log,longPollResponseParser),dashboard=function(s,n,r,a,e,o,t){var i,u,c=[],l=(i=mainConfig,u={write:function(e,t){var s=JSON.stringify(e);localStorage.setItem(t,s)},get:function(e){var t=localStorage.getItem(e),s=null;return t&&(s=JSON.parse(t)),s}},{saveCondition:function(){u.write({filter:i.currentDashboardCondition.filterBy,sort:i.currentDashboardCondition.sortBy,currentUserId:i.currentUserSettings.userId},i.LOCAL_STORAGE_NAME)},setupCondition:function(e){var t=u.get(i.LOCAL_STORAGE_NAME);return t&&(i.currentDashboardCondition.filterBy=t.filter,i.currentDashboardCondition.sortBy=t.sort,i.currentUserSettings.userId=t.currentUserId),e instanceof Function&&e(t),t}});function d(){this.setupEventEmitter()}return d.prototype.startApp=function(){r.setup(s),this.getUserList(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions(),t.firstInit()},d.prototype.setupEventEmitter=function(){var n=this;o.addSubscribe("userList",function(e){var t,s=[];t=e instanceof Array?e[1]:e,Object.keys(t).map(function(e){return a.addUserToUsersArray(t[e],e,s),!0}),a.uList=a.uList.concat(s),l.setupCondition(n.localSettingsSetup.bind(n)),n.setupUserListDOM()}),o.addSubscribe("lastOnline",function(e){var t=e[0],s=e[1];a.updateUserOnlineStatus(t,s)}),o.addSubscribe("sendNewMessage",function(e){var t=a.getUserFromUserListById(e[0]);a.uList[t].sendNewMessage=e[1],n.toggleNewMessageIndicatorToUser()})},d.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(s.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(s.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(s.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(s.currentUserSettings.userId)))},d.prototype.filter=function(){s.currentDashboardCondition.filterBy=getElement(s.DOM.CSS_FILTER_INPUT_ID).value,l.saveCondition(),a.filterByName(s.currentDashboardCondition.filterBy),a.displayUsers()},d.prototype.sort=function(){s.currentDashboardCondition.sortBy=getElement(s.DOM.CSS_SORT_SELECT_ID).value,l.saveCondition(),a.sortUsersByField(),a.displayUsers()},d.prototype.setupUsersListeners=function(){var t=this;Array.from(s.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})},d.prototype.setupUserListDOM=function(){a.displayUsers(),this.getAcessToUsersList(),this.toggleNewMessageIndicatorToUser(),this.setupUsersListeners()},d.prototype.getAcessToUsersList=function(){s.users=getElement(s.userList.USER_ELEMENT_CSS_CLASS,!0)},d.prototype.getUserList=function(){var e,t=n.usersAPI.getUserList(null);t.onreadystatechange=function(){this.status&&(e=longPollResponseParser.parse(this.responseText))&&o.emit(e.type,e.object)},t.send(),s.currentUserListConnection=t},d.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},d.prototype.startConversationWithUser=function(e){s.currentUserSettings.userId=e,t.setup(),r.clearMessageList(),r.getUserData(e).then(function(){getElement(s.DOM.CSS_ACTIVE_USER_BLOCK).classList.remove(s.INVISIBLE_CLASS),l.saveCondition()}),n.usersAPI.updateSendNewMessageFlag(e,!1)},d.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(s.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,s.ADMIN_NAME)),getElement(s.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(s.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(s.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},d.prototype.markMessageFromUserAsRead=function(e){var t=a.getUserFromUserListById(e);a.uList[t].sendNewMessage=!1,r.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},d.prototype.closeConversation=function(){getElement(s.DOM.CSS_ACTIVE_USER_BLOCK).classList.add(s.INVISIBLE_CLASS),s.currentUserSettings.userId=null,s.currentMessageConnection.abort(),t.close(),l.saveCondition()},d.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(a.uList).map(function(e){return t=a.uList[e].userElement.getElementsByClassName(s.CSS_HAVE_NEW_MESSAGE_STYLE)[0],a.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(s.CSS_HAVE_NEW_MESSAGE_STYLE),a.uList[e].userElement.appendChild(t)),!a.uList[e].sendNewMessage&&t&&a.uList[e].userElement.removeChild(t),!0})},d.prototype.setupIntervalFunctions=function(){var e=this;c.push=setInterval(function(){Object.keys(a.uList).map(function(e){return a.updateUserOnlineStatus(a.uList[e].userId,a.uList[e].lastOnline),!0}),e.setupUserListDOM()},s.interval.UPDATE_USERS_TIME)},d.prototype.closeApp=function(){c.forEach(function(e){clearInterval(e)}),userDataManager.clearMessageList(),a.clearUserList(),s.currentMessageConnection&&s.currentMessageConnection.abort(),s.currentUserListConnection.abort(),t.close()},new d}(mainConfig,dataSource,userDataManager,userListManager,0,eventEmitter,controlPanel),launcher=function(s){var o={},n={chatTitle:{typeOfValue:"value"},chatUrl:{typeOfValue:"value"},chatClass:{typeOfValue:"value"},chatPositionSelect:{typeOfValue:"value"},allowMinimize:{typeOfValue:"checked"},allowDrag:{typeOfValue:"checked"},showTime:{typeOfValue:"checked"},requireName:{typeOfValue:"checked"},networkRadioXMR:{typeOfValue:"value",true:"XHR"},networkRadioLongPoll:{typeOfValue:"value",true:"longPoll"},networkRadioFetch:{typeOfValue:"value",true:"fetch"}};function e(){}return e.prototype.getDataFromElement=function(s){var n,r="",a=this;return Object.keys(o).map(function(e,t){return s[e]&&(0<t?"radio"===(n=o[e].getAttribute("type"))?o[e].checked&&(r+="'&typeOfRequest='"+a.getElementValue(e,n)):r+="'&"+e+"='"+a.getElementValue(e,n):r+=e+"='"+a.getElementValue(e)),!0}),r.length<1&&(r=null),r},e.prototype.getElementValue=function(e){return o[e][n[e].typeOfValue]},e.prototype.startApp=function(){var t=this;s.launcher.after.map(function(e){return o[e]=getElement(s.launcher.pattern+e,!1,!0),o[e].addEventListener("input",function(){var e=s.launcher.srcStart+this.getDataFromElement(n);e+=s.launcher.srcEnd,o.scriptCode.innerHTML=e}.bind(t)),!0})},e.prototype.closeApp=function(){o={}},new e}(mainConfig),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),mainController=function(s){var n={dashboard:s.router.DASHBOARD_HTML_PATH,configuration:s.router.LAUNCHER_HTML_PATH,about:s.router.ABOUT_HTML_PATH},r={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},a={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function e(){}return e.prototype.startApp=function(){var t=this;window.addEventListener("hashchange",function(e){t.handleUrl(e.newURL)}),t.handleUrl(window.location.href+"#dashboard")},e.prototype.handleUrl=function(e){var t;-1!==e.indexOf("#")&&(t=e.split("#").pop(),this.closePreviousPage(t),document.querySelectorAll("a."+s.router.NAVIGATION_ACTIVE_CSS).forEach(function(e){e.classList.remove(s.router.NAVIGATION_ACTIVE_CSS)}),document.querySelectorAll('a[href="#'+t+'"]').forEach(function(e){e.classList.add(s.router.NAVIGATION_ACTIVE_CSS)}),clearElementContent(s.router.CONTENT_CLASS),viewFactory.createView(n[t],null,s.router.CONTENT_CLASS).then(function(){a[t]()}))},e.prototype.closePreviousPage=function(t){Object.keys(r).map(function(e){return e!==t&&r[e](),!0})},new e}(mainConfig);mainController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwiQ1NTX0FDVElWRV9VU0VSX0JMT0NLIiwiQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTIiwiQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTIiwiQ1NTX0NPTlRST0xfU0VORF9DT01NQU5EX0JVVFRPTl9DTEFTUyIsIkNTU19DT05UUk9MX1BBUkFNRVRFUlNfQ0xBU1MiLCJDU1NfQ09OVFJPTF9QQU5FTF9MT0dfRUxFTUVOVF9DTEFTUyIsImxhdW5jaGVyIiwicGF0dGVybiIsImFmdGVyIiwic3JjU3RhcnQiLCJzcmNFbmQiLCJ1c2VyTGlzdCIsIlVTRVJfRUxFTUVOVF9DU1NfQ0xBU1MiLCJVU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTIiwiVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkUiLCJVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FIiwiY2hhdFNldHRpbmdzIiwidHlwZU9mUmVxdWVzdCIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24iLCJmaWx0ZXJCeSIsInNvcnRCeSIsImludGVydmFsIiwiVVBEQVRFX1VTRVJTX1RJTUUiLCJPTkxJTkVfSU5URVJWQUwiLCJyb3V0ZXIiLCJBQk9VVF9IVE1MX1BBVEgiLCJMQVVOQ0hFUl9IVE1MX1BBVEgiLCJEQVNIQk9BUkRfSFRNTF9QQVRIIiwiQ09OVEVOVF9DTEFTUyIsIk5BVklHQVRJT05fQUNUSVZFX0NTUyIsIm1lc3NhZ2VzIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfTUVTU0FHRV9DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIklOVklTSUJMRV9DTEFTUyIsIkRBVEFfQkFTRV9VUkwiLCJBRE1JTl9OQU1FIiwiQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MiLCJMT0NBTF9TVE9SQUdFX05BTUUiLCJDU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRSIsIkNPTU1BTkRfUEFUSF9QUkVGSVgiLCJkYXRhQmFzZVVybCIsImdldEVsZW1lbnQiLCJzZWxlY3RvciIsImlzQWxsIiwiaXRJc0lkIiwic2VsZWN0b3JTdGFydCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwic29ydGVyIiwiU29ydGVyIiwicHJvdG90eXBlIiwicXVpY2tTb3J0IiwiaXRlbXMiLCJsZWZ0IiwicmlnaHQiLCJzb3J0RmllbGQiLCJpbmRleCIsImxlbmd0aCIsImZpcnN0SW5kZXgiLCJzZWNvbmRJbmRleCIsInRlbXAiLCJwaXZvdCIsIk1hdGgiLCJmbG9vciIsImkiLCJqIiwicGFydGl0aW9uIiwidGhpcyIsImNsZWFyRWxlbWVudENvbnRlbnQiLCJlbGVtZW50U2VsZWN0b3IiLCJlbGVtZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwic2V0dXBEYXRhQmFzZUFQSSIsInJlcXVlc3QiLCJyZXF1ZXN0RmV0Y2giLCJnZXROZXdDb25uZWN0b3JBUEkiLCJyZXF1ZXN0WE1SIiwiY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uIiwibG9uZ1BvbGwiLCJyZXF1ZXN0UGF0aCIsInJlcXVlc3RCb2R5IiwicmVxdWVzdFR5cGUiLCJjb250ZW50VHlwZSIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsIkNvbnRlbnQtVHlwZSIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwidGV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIkpTT04iLCJwYXJzZSIsIm9uZXJyb3IiLCJzdGF0dXNUZXh0Iiwic2VuZCIsInRhcmdldFVybCIsInhodHRwIiwiZGF0YVNvdXJjZSIsImNvbmZpZyIsImRhdGFTb3VyY2VJbnN0YW5jZSIsIlVTRVJfTElTVCIsIlVTRVJfTUVTU0FHRVMiLCJVU0VSU19TRVRUSU5HUyIsIm5ld1VzZXJEYXRhIiwiaXNNaW5pbWl6ZSIsInJlYWRMYXN0TWVzc2FnZSIsIkRhdGFTb3VyY2UiLCJsb25nUG9sbENvbm5lY3QiLCJkYXRhVHlwZSIsImNyZWF0ZVJlcXVlc3RQYXRoIiwiYmFzaWNDb25uZWN0IiwiYmluZCIsImRhdGFCYXNlVVJMIiwicmVxdWVzdFBvc3RmaXgiLCJyZXF1ZXN0UHJlZml4IiwicGF0aCIsImdldEhUTUwiLCJzZXREYXRhIiwiZmllbGROYW1lIiwidmFsdWUiLCJzdHJpbmdpZnkiLCJhZGROZXdVc2VyVG9EYXRhU291cmNlIiwiZGF0ZSIsIkRhdGUiLCJ0aGF0IiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsInNldHRpbmdOYW1lIiwibGFzdE9ubGluZSIsImdldFRpbWUiLCJzZW5kTmV3TWVzc2FnZSIsImdldERhdGFTb3VyY2VBUEkiLCJnZXREYXRhIiwidXNlcnNBUEkiLCJnZXRVc2VyTGlzdCIsImdldFVzZXJTZXR0aW5ncyIsImdldFVzZXJNZXNzYWdlcyIsImdldFNldHRpbmdGaWVsZCIsInNlbmRNZXNzYWdlIiwic2V0U2V0dGluZ0ZpZWxkIiwidXBkYXRlTGFzdE9ubGluZSIsInVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyIsInVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZCIsImNvbW1vbkFQSSIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsImV2ZW50cyIsImFkZFN1YnNjcmliZSIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwicHVzaCIsImZpbHRlciIsImVsZW1lbnRDYWxsYmFjayIsImVtaXQiLCJkYXRhIiwiZXZlbnQiLCJmb3JFYWNoIiwiY2FsbCIsImxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJ0eXBlc09mQ2hhbmdlIiwibWVzc2FnZSIsInNldHRpbmciLCJyZWFkIiwiZ2V0SXAiLCJhc2tRdWVzdGlvbiIsImV2ZW50UmVndWxhciIsImhhc051bGxEYXRhIiwiZ2V0RGF0YVJlZ3VsYXIiLCJpdElzTmV3TWVzc2FnZVJlZ3VsYXIiLCJpdElzTmV3VXNlckxpc3RSZWd1bGFyIiwiaXRJc0ZpcnN0SXBEYXRhUmVndWxhciIsIml0SXNGaXJzdFF1ZXN0aW9uc0RhdGEiLCJpdElzTmV3UXVlc3Rpb25zQ29tbWFuZCIsIml0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiIsIkxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJnZXRUeXBlT2ZDaGFuZ2VzIiwiYW5zd2VyRGF0YSIsInR5cGVOYW1lIiwidGVzdCIsInByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlIiwic3BsaXQiLCJ0cmltIiwic2xpY2UiLCJwYXJzZVVzZXJzTWVzc2FnZXMiLCJjaGFuZ2VUeXBlIiwibWVzc2FnZUlkIiwicmVzdWx0T2JqZWN0IiwiaWQiLCJwb3AiLCJzaGlmdCIsImdldEZpcnN0RGF0YSIsImhhc05ld0RhdGEiLCJwYXJzZVVzZXJMaXN0IiwiZ2V0VXNlcklkIiwiZXhjZXB0aW9uIiwicGFyc2VDb21tYW5kQW5zd2VyIiwiaXRJc0lQSW5mb3JtYXRpb24iLCJpdElzUXVlc3Rpb25zSW5mb3JtYXRpb24iLCJwYXJzZVVzZXJJcERhdGEiLCJwYXJzZVF1ZXN0aW9uc0RhdGEiLCJyZXBsYWNlIiwicmVzdWx0IiwicmVzdWx0T2ZQYXJzZSIsInR5cGUiLCJvYmplY3QiLCJ2aWV3RmFjdG9yeSIsIlZpZXdGYWN0b3J5IiwiY3JlYXRlVmlldyIsImh0bWxQYXRoIiwiY3NzUGF0aCIsImNvbnRhaW5lckNsYXNzIiwiaW5jbHVkZVZpZXdDc3NUb1BhZ2UiLCJjcmVhdGVDU1NMaW5rIiwiaW5jbHVkZVZpZXdIVE1MVG9QYWdlIiwiRXJyb3IiLCJjb250YWluZXJEaXYiLCJodG1sIiwiaW5uZXJIVE1MIiwibGluayIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZpbGVQYXRoIiwicmVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJzZW5kZXIiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwiRElTUExBWV9NRVNTQUdFX0RBVEUiLCJtZXNzYWdlU2VuZGVyRGl2IiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIm1lc3NhZ2VEaXYiLCJESVNQTEFZX01FU1NBR0UiLCJnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQiLCJtZXNzYWdlc0lzUmVhZCIsImZpZWxkVmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0Rpc3BsYXkiLCJzdHlsZUNsYXNzZXMiLCJkaXYiLCJzdHlsZSIsImNyZWF0ZU1lc3NhZ2VMaXN0IiwibWVzc2FnZU9iamVjdHMiLCJuZXdNZXNzYWdlTGlzdCIsInVwZGF0ZU1lc3NhZ2VMaXN0IiwiZGlzcGxheU1lc3NhZ2VzIiwiYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqIiwiY2xlYXJDaGF0IiwibWVzc2FnZU9iamVjdCIsInVzZXJEYXRhTWFuYWdlciIsIlVzZXJEYXRhTWFuYWdlciIsImdldFVzZXJEYXRhIiwiZ2V0VXNlckNvcnJlc3BvbmRlbmNlIiwiY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uIiwiYWJvcnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwia2V5IiwibWVzc2FnZXNPYmplY3QiLCJjbGVhck1lc3NhZ2VMaXN0IiwiY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlIiwic2F2ZVNldHRpbmdGaWVsZCIsInVwZGF0ZVVzZXJPbmxpbmUiLCJtaW51dGVzIiwiZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQiLCJnZXRNaW51dGVzIiwidG9TdHJpbmciLCJnZXRIb3VycyIsImNvbmNhdCIsInNhdmVNZXNzYWdlVG9EYXRhU291cmNlIiwic2V0TWVzc2FnZUFzUmVhZCIsInNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UiLCJzZXR0aW5ncyIsIm5ld0ZpZWxkU2V0dGluZyIsImxvZyIsImRpc3BsYXlNZXNzYWdlIiwibWVzc2FnZUVsZW1lbnQiLCJyZXN1bHREaXYiLCJkZXBsb3lPYmplY3QiLCJkYXRhTmFtZSIsImlubmVyRGl2Iiwid3JpdGUiLCJBcnJheSIsImNsZWFyIiwidXNlckxpc3RNYW5hZ2VyIiwiVXNlckxpc3RNYW5hZ2VyIiwidUxpc3QiLCJjcmVhdGVVc2VyRWxlbWVudCIsImlzT25saW5lIiwidXNlckRpdiIsInVzZXJJZERpdiIsInVzZXJJbmRpY2F0b3IiLCJzZXRVc2VyTGlzdCIsInVzZXJMdXN0T2JqZWN0IiwiYWRkVXNlclRvVXNlcnNBcnJheSIsInVzZXIiLCJ1c2Vyc0xpc3QiLCJ1c2VySXNPbmxpbmUiLCJ1c2VyRWxlbWVudCIsIm9ubGluZSIsInZpc2libGUiLCJ1cGRhdGVVc2VyT25saW5lU3RhdHVzIiwidXNlckluZGV4IiwiZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQiLCJ1c2VyTWFuYWdlciIsImxhc3RVc2VyT25saW5lVGltZSIsImZpbHRlckJ5TmFtZSIsImluZGV4T2YiLCJzb3J0VXNlcnNCeUZpZWxkIiwiY2xlYXJVc2VyTGlzdCIsImRpc3BsYXlVc2VycyIsImVsZW0iLCJjb250cm9sUGFuZWwiLCJwYXJzZXIiLCJzZWxlY3RDb21tYW5kIiwic2VuZEJ1dHRvbiIsInBhcmFtZXRlckVsZW1lbnRzIiwiY29ubmVjdGlvbiIsIm1vZHVsZUluaXQiLCJjdXJyZW50Q29tbWFuZCIsInBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3QiLCJDT01NQU5EX0lOUFVUX0FNT1VOVCIsImNvbW1hbmRzIiwicGFyYW1ldGVyc051bWJlciIsImNvbW1hbmRzVmlldyIsIm1vZHVsZUNvbnRyb2xsZXIiLCJhY3Rpb24iLCJjb250cm9sRnVuY3Rpb24iLCJzZW5kQnV0dG9uTGlzdGVuZXIiLCJjb21tYW5kTmFtZSIsImNvbW1hbmRPYmplY3QiLCJqc29uRGF0YSIsImlzRXhlY3V0ZSIsImRpc3BsYXlDb21tYW5kVmlldyIsIm51bWJlck9mQ29tbWFuZElucHV0cyIsInJlbW92ZSIsInBsYWNlaG9sZGVyIiwiQ29udHJvbFBhbmVsIiwiZmlyc3RJbml0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwiZGFzaGJvYXJkIiwidURhdGFNYW5hZ2VyIiwidUxpc3RNYW5hZ2VyIiwiY1BhbmVsIiwibG9jYWxTdG9yYWdlTWFuYWdlciIsImludGVydmFsSWQiLCJjb25kaXRpb25NYW5hZ2VyIiwic3RvcmFnZU5hbWUiLCJzZXJpYWxEYXRhIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldCIsImdldEl0ZW0iLCJzYXZlQ29uZGl0aW9uIiwic29ydCIsImN1cnJlbnRVc2VySWQiLCJzZXR1cENvbmRpdGlvbiIsImNvbmRpdGlvbiIsIkZ1bmN0aW9uIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsInNldHVwRXZlbnRFbWl0dGVyIiwic3RhcnRBcHAiLCJzZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zIiwic2V0dXBJbnRlcnZhbEZ1bmN0aW9ucyIsIm5ld0RhdGEiLCJsb2NhbFNldHRpbmdzU2V0dXAiLCJzZXR1cFVzZXJMaXN0RE9NIiwidG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlciIsInN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIiLCJzZXR1cFVzZXJzTGlzdGVuZXJzIiwiZnJvbSIsInVzZXJzIiwidXNlckxpc3RlbmVyIiwiaW5uZXJUZXh0IiwiZ2V0QWNlc3NUb1VzZXJzTGlzdCIsImxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3IiLCJjdXJyZW50VXNlckxpc3RDb25uZWN0aW9uIiwibWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZCIsImNsb3NlQ29udmVyc2F0aW9uIiwibmV3TWVzc2FnZURpdiIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzZXRJbnRlcnZhbCIsInZpZXdJZCIsImNsb3NlQXBwIiwiY2xlYXJJbnRlcnZhbCIsIkRPTVZhcmlhYmxlcyIsImtleU9mVmFsdWUiLCJjaGF0VGl0bGUiLCJ0eXBlT2ZWYWx1ZSIsImNoYXRVcmwiLCJjaGF0Q2xhc3MiLCJjaGF0UG9zaXRpb25TZWxlY3QiLCJhbGxvd01pbmltaXplIiwiYWxsb3dEcmFnIiwic2hvd1RpbWUiLCJyZXF1aXJlTmFtZSIsIm5ldHdvcmtSYWRpb1hNUiIsInRydWUiLCJuZXR3b3JrUmFkaW9Mb25nUG9sbCIsIm5ldHdvcmtSYWRpb0ZldGNoIiwiTGF1bmNoZXIiLCJnZXREYXRhRnJvbUVsZW1lbnQiLCJzcmMiLCJlbGVtZW50TmFtZSIsImdldEF0dHJpYnV0ZSIsImNoZWNrZWQiLCJnZXRFbGVtZW50VmFsdWUiLCJuYW1lIiwic2NyaXB0Q29kZSIsImFib3V0IiwiQWJvdXQiLCJtYWluQ29udHJvbGxlciIsIm1hdGNoZXNIdG1sUGF0aCIsImNvbmZpZ3VyYXRpb24iLCJjbG9zZUZ1bmN0aW9ucyIsInN0YXJ0RnVuY3Rpb25zIiwiTWFpbkNvbnRyb2xsZXIiLCJ3aW5kb3ciLCJoYW5kbGVVcmwiLCJuZXdVUkwiLCJsb2NhdGlv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LEVBQWVRLFNBS3ZCUCxFQUFlL1ksVUFBVXVaLGtCQUFvQixTQUEyQkQsR0FDcEUzVCxPQUFPQyxLQUFLaVQsR0FBZ0JoVCxJQUFJLFNBQThCa0osR0FJMUQsT0FIR0EsSUFBUXVLLEdBQ1BULEVBQWU5SixNQUVaLEtBSVIsSUFBSWdLLEVBcEVNLENBc0VsQmxkLFlBRUg2YyxlQUFlbEQiLCJmaWxlIjoiZGFzaGJvYXJkQXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gY29uZmlnXHJcblxyXG4vKiBleHBvcnRlZCBtYWluQ29uZmlnICovXHJcbnZhciBtYWluQ29uZmlnID0ge1xyXG4gICAgRE9NOiB7XHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0L3QtdC+0LHRhdC+0LTQuNC80L4g0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQv9C40YHQvtC6INGO0LfQtdGA0L7QslxyXG4gICAgICAgIFVTRVJfTElTVF9DU1NfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXJzLWxpc3RcIixcclxuICAgICAgICAvLyDQkdC70L7QuiDQsiDQutC+0YLQvtGA0YvQuSDQt9Cw0LPRgNGD0LbQsNC10YLRgdGPINGH0LDRglxyXG4gICAgICAgIENTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0XCIsXHJcbiAgICAgICAgLy8g0JrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNC70Y8g0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOINC/0L4g0L3QsNC20LDRgtC40Y5cclxuICAgICAgICBDU1NfU0VORF9NRVNTQUdFX0JVVFRPTl9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfc2VuZC1idXR0b25cIixcclxuICAgICAgICAvLyDQmtC70LDRgdGBINC60L3QvtC/0LrQuCDQt9Cw0LrRgNGL0LLQsNGO0YnQtdC5INGH0LDRglxyXG4gICAgICAgIENTU19DTE9TRV9DSEFUX0JVVFRPTl9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2xvc2UtY2hhdFwiLFxyXG4gICAgICAgIC8vIElEIERPTSDRjdC70LXQvNC10L3RgtCwINC00Y/QuyDQstCy0L7QtNCwINC/0LDRgNCw0LzQtdGC0YDQsCDRhNC40LvRjNGC0YDQsNGG0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxyXG4gICAgICAgIENTU19GSUxURVJfSU5QVVRfSUQ6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2ZpbHRlci1pbnB1dFwiLFxyXG4gICAgICAgIC8vIElEIERPTSDRjdC70LXQvNC10L3RgtCwINC00Y/QuyDQstCy0L7QtNCwINC/0LDRgNCw0LzQtdGC0YDQsCDRgdC+0YDRgtC40YDQvtCy0LrQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxyXG4gICAgICAgIENTU19TT1JUX1NFTEVDVF9JRDogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfc29ydFwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQvtGC0L7QsdGA0LDQttCw0LXRgtGB0Y8g0YfQsNGCINC4INC60L7QvdGC0YDQvtC7INC/0LDQvdC10LvRjFxyXG4gICAgICAgIENTU19BQ1RJVkVfVVNFUl9CTE9DSzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfYWN0aXZlLXVzZXJcIixcclxuXHJcbiAgICAgICAgLy8gQ09OVFJPTCBQQU5FTFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEgY29udHJvbCBwYW5lbCDQtdC70LXQvNC10L3RglxyXG4gICAgICAgIENTU19DT05UUk9MX1BBTkVMX0xPR19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY29udHJvbC1sb2dcIixcclxuICAgICAgICBDU1NfQ09OVFJPTF9QQU5FTF9TRUxFQ1RfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NvbnRyb2xfc2VsZWN0X2NvbW1hbmRcIixcclxuICAgICAgICBDU1NfQ09OVFJPTF9TRU5EX0NPTU1BTkRfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jb250cm9sX3NlbmQtY29tbWFuZC1idXR0b25cIixcclxuICAgICAgICBDU1NfQ09OVFJPTF9QQVJBTUVURVJTX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jb250cm9sX3BhcmFtZXRlci1pbnB1dFwiLFxyXG4gICAgICAgIENTU19DT05UUk9MX1BBTkVMX0xPR19FTEVNRU5UX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jb250cm9sLWxvZy1pbm5lci1pbmZvcm1hdGlvblwiXHJcblxyXG4gICAgfSxcclxuICAgIGxhdW5jaGVyOiB7XHJcbiAgICAgICAgcGF0dGVybjogXCJ0b3VjaHNvZnRfY2hhdC1sYXVuY2hlcl9cIixcclxuICAgICAgICBhZnRlciA6IFtcclxuICAgICAgICAgICAgXCJjaGF0VGl0bGVcIiwgXCJjaGF0VXJsXCIsIFwiY2hhdENsYXNzXCIsIFwiY2hhdFBvc2l0aW9uU2VsZWN0XCIsXHJcbiAgICAgICAgICAgIFwiYWxsb3dNaW5pbWl6ZVwiLCBcImFsbG93RHJhZ1wiLCBcInJlcXVpcmVOYW1lXCIsIFwic2hvd1RpbWVcIiwgXCJuZXR3b3JrUmFkaW9YTVJcIixcclxuICAgICAgICAgICAgXCJuZXR3b3JrUmFkaW9GZXRjaFwiLFwibmV0d29ya1JhZGlvTG9uZ1BvbGxcIiwgXCJzY3JpcHRDb2RlXCJcclxuICAgICAgICBdLFxyXG4gICAgICAgIHNyY1N0YXJ0OiBcIiZsdHNjcmlwdCBzcmM9J2h0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vSG9tZXdvcmtfMi9tYXN0ZXIvanMvY2hhdC5qcz9cIixcclxuICAgICAgICBzcmNFbmQ6ICBcIicmZ3QmbHQvc2NyaXB0Jmd0XCJcclxuICAgIH0sXHJcbiAgICB1c2VyTGlzdDoge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGB0Ysg0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDQvtCx0YrQtdC60YLQvtC8INGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAgICBVU0VSX0VMRU1FTlRfQ1NTX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyXCIsXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8gaWQg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgVVNFUl9JRF9FTEVNRU5UX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1pZFwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGC0Ysg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0YHRgtCw0YLRg9GB0LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItb2ZmbGluZVwiLFxyXG4gICAgICAgIFVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PTkxJTkU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItb25saW5lXCJcclxuICAgIH0sXHJcbiAgICBjaGF0U2V0dGluZ3M6IHtcclxuICAgICAgICB0eXBlT2ZSZXF1ZXN0OiBcImxvbmdQb2xsXCJcclxuICAgIH0sXHJcbiAgICBjdXJyZW50VXNlclNldHRpbmdzOiB7XHJcbiAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgIHVzZXJOYW1lOiBudWxsXHJcbiAgICB9LFxyXG5cclxuICAgIGN1cnJlbnREYXNoYm9hcmRDb25kaXRpb246IHtcclxuICAgICAgICBmaWx0ZXJCeTogbnVsbCxcclxuICAgICAgICBzb3J0Qnk6IG51bGxcclxuICAgIH0sXHJcblxyXG5cclxuICAgIGludGVydmFsOiB7XHJcbiAgICAgICAgVVBEQVRFX1VTRVJTX1RJTUU6IDUwMDAsXHJcbiAgICAgICAgT05MSU5FX0lOVEVSVkFMOiAxMjAwMFxyXG4gICAgfSxcclxuICAgIHJvdXRlcjoge1xyXG4gICAgICAgIC8vIFVSTCDQt9Cw0LPRgNGD0LfQutC4INGB0YLRgNCw0L3QuNGG0YsgYWJvdXRcclxuICAgICAgICBBQk9VVF9IVE1MX1BBVEg6IFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9kYXNoYm9hcmQvYWJvdXQuaHRtbFwiLFxyXG4gICAgICAgIC8vIFVSTCDQt9Cw0LPRgNGD0LfQutC4INGB0YLRgNCw0L3QuNGG0YsgY29uZmlndXJhdGlvblxyXG4gICAgICAgIExBVU5DSEVSX0hUTUxfUEFUSDogXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2FwcC9odG1sL2Rhc2hib2FyZC9jaGF0TGF1bmNoZXIuaHRtbFwiLFxyXG4gICAgICAgIC8vIFVSTCDQt9Cw0LPRgNGD0LfQutC4INGB0YLRgNCw0L3QuNGG0YsgZGFzaGJvYXJkXHJcbiAgICAgICAgREFTSEJPQVJEX0hUTUxfUEFUSDogXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2FwcC9odG1sL2Rhc2hib2FyZC9kYXNoYm9hcmQuaHRtbFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAsINCyINC60L7RgtC+0YDRi9C5INC30LDQs9GA0YPQttCw0LXRgtGB0Y8g0L3QtdC+0LHRhdC+0LTQuNC80LDRjyDRh9Cw0YHRgtGMINGB0YLRgNCw0L3QuNGG0YtcclxuICAgICAgICBDT05URU5UX0NMQVNTOiBcImNvbnRlbnRcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSwg0L7RgtC80LXRh9Cw0Y7RidC40Lkg0LDQutGC0LjQstC90YPRjiDRgdGC0YDQsNC90LjRhtGDINCyINC/0LDQvdC10LvQuCDQvdCw0LLQuNCz0LDRhtC40LhcclxuICAgICAgICBOQVZJR0FUSU9OX0FDVElWRV9DU1M6IFwibmF2aWdhdGlvbi1hY3RpdmVcIlxyXG4gICAgfSxcclxuICAgIG1lc3NhZ2VzOiB7XHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEg0LTQu9GPINGN0LvQtdC80LXQvdCw0YIg0YEg0YHQvtC+0LHRidC10L3QuNC1LCDQtdGB0LvQuCDRjtC30LXRgCDQvdC1INC/0YDQvtGH0LjRgtCw0Lsg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVM6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX21lc3NhZ2Utbm90LXJlYWRcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUjogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlc1wiLFxyXG5cclxuICAgICAgICAvLyBtZXNzYWdlXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQvdCw0YXQvtC00LjRgtGB0Y8g0YHQvtC+0LHRidC10L3QuNGPLNC00LDRgtCwINC4INC40LzRjyDQvtGC0L/RgNCw0LLQuNGC0LXQu9GPXHJcbiAgICAgICAgQ1NTX01FU1NBR0VfQ09OVEFJTkVSOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2UtZWxlbWVudHNcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINC40LzRjyDQvtGC0L/RgNCw0LLQuNGC0LXQu9GPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLXNlbmRlclwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LTQsNGC0YMg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRV9EQVRFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2UtZGF0ZVwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlXCJcclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLyDQutC70LDRgdGBINC/0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgSU5WSVNJQkxFX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9pbnZpc2libGUtZWxlbWVudFwiLFxyXG5cclxuICAgIERBVEFfQkFTRV9VUkw6IFwiaHR0cHM6Ly9vbmxpbmVjb25zdWx0YW50d2ViYXBwLmZpcmViYXNlaW8uY29tXCIsXHJcblxyXG5cclxuICAgIEFETUlOX05BTUU6IFwiQWRtaW5cIixcclxuXHJcbiAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDRgdC+0L7QsdGJ0LXQvdC40Y8g0L/QtdGA0LXQtCDQvtGC0L/RgNCw0LLQutC+0Lkg0Y7Qt9C10YDRg1xyXG4gICAgQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3RleHRhcmVhLWZvci1tZXNzYWdlXCIsXHJcblxyXG4gICAgTE9DQUxfU1RPUkFHRV9OQU1FOiBcImN1cnJlbnRDb25kaXRpb25cIixcclxuXHJcbiAgICAvLyDQtNC70Y8g0L3QvtCy0YvRhSDRgdC+0L7QsdGJ0LXQvdC40Lkg0L7RgiDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxyXG4gICAgLy8g0JXRgdC70Lgg0Y7Qt9C10YAg0L/RgNC40YHQu9Cw0Lsg0YHQvtC+0L7QsdGJ0LXQvdC40LUsINC90LAg0Y7Qt9C10YDQsCDQsiDRgdC/0LjRgdC60LUg0LLQtdGI0LDQtdGC0YHRjyDRjdGC0L7RgiDRgdGC0LjQu9GMXHJcbiAgICBDU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1oYXZlLW5ldy1tZXNzYWdlXCIsXHJcblxyXG4gICAgQ09NTUFORF9QQVRIX1BSRUZJWDogXCJodHRwczovL29ubGluZWNvbnN1bHRhbnR3ZWJhcHAuZmlyZWJhc2Vpby5jb20vdXNlcnNTZXR0aW5ncy9cIlxyXG5cclxuXHJcblxyXG5cclxufTtcclxuLyogZXhwb3J0ZWQgZGF0YUNvbm5lY3RvckNvbmZpZyAqL1xyXG4vKiBleHBvcnRlZCBkYXRhQmFzZVVybCAqL1xyXG4vKiBleHBvcnRlZCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbnZhciBkYXRhQmFzZVVybCA9IG1haW5Db25maWcuREFUQV9CQVNFX1VSTDtcclxuXHJcbnZhciBnZXRFbGVtZW50ID0gZnVuY3Rpb24gZ2V0RWxlbWVudEZyb21ET00gKHNlbGVjdG9yLCBpc0FsbCwgaXRJc0lkKSB7XHJcbiAgICB2YXIgc2VsZWN0b3JTdGFydCA9IChpdElzSWQpID8gXCIjXCIgOiBcIi5cIjtcclxuICAgIGlmKGlzQWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JTdGFydCArIHNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbn07XHJcblxyXG5cclxudmFyIGRhdGFDb25uZWN0b3JDb25maWcgPSB7XHJcbiAgICB0eXBlT2ZSZXF1ZXN0OiBtYWluQ29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0XHJcbn07XHJcblxyXG4vLyBzZXJ2aWNlXHJcblxyXG4vKiBleHBvcnRlZCBzb3J0ZXIgKi9cclxudmFyIHNvcnRlciA9IChmdW5jdGlvbiBjcmVhdGVOZXdTb3J0ZXIgKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydGVyKCkge31cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTb3J0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzd2FwKGl0ZW1zLCBmaXJzdEluZGV4LCBzZWNvbmRJbmRleCkge1xyXG4gICAgICAgIHZhciB0ZW1wID0gaXRlbXNbZmlyc3RJbmRleF07XHJcbiAgICAgICAgaXRlbXNbZmlyc3RJbmRleF0gPSBpdGVtc1tzZWNvbmRJbmRleF07XHJcbiAgICAgICAgaXRlbXNbc2Vjb25kSW5kZXhdID0gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYXJ0aXRpb24oaXRlbXMsIGxlZnQsIHJpZ2h0LCBzb3J0RmllbGQpIHtcclxuICAgICAgICB2YXIgcGl2b3QgPSBpdGVtc1tNYXRoLmZsb29yKChyaWdodCArIGxlZnQpIC8gMildW3NvcnRGaWVsZF07XHJcbiAgICAgICAgdmFyIGkgPSBsZWZ0O1xyXG4gICAgICAgIHZhciBqID0gcmlnaHQ7XHJcblxyXG4gICAgICAgIHdoaWxlIChpIDw9IGopIHtcclxuICAgICAgICAgICAgd2hpbGUgKGl0ZW1zW2ldW3NvcnRGaWVsZF0gPiBwaXZvdCkge1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVtc1tqXVtzb3J0RmllbGRdIDwgcGl2b3QpIHtcclxuICAgICAgICAgICAgICAgIGotLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA8PSBqKSB7XHJcbiAgICAgICAgICAgICAgICBzd2FwKGl0ZW1zLCBpLCBqKTtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGotLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH1cclxuXHJcbiAgICBTb3J0ZXIucHJvdG90eXBlLnF1aWNrU29ydCA9IGZ1bmN0aW9uIHF1aWNrU29ydChcclxuICAgICAgICBpdGVtcyxcclxuICAgICAgICBsZWZ0LFxyXG4gICAgICAgIHJpZ2h0LFxyXG4gICAgICAgIHNvcnRGaWVsZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGluZGV4O1xyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gcGFydGl0aW9uKGl0ZW1zLCBsZWZ0LCByaWdodCwgc29ydEZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKGxlZnQgPCBpbmRleCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVpY2tTb3J0KGl0ZW1zLCBsZWZ0LCBpbmRleCAtIDEsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGluZGV4IDwgcmlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVpY2tTb3J0KGl0ZW1zLCBpbmRleCwgcmlnaHQsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gY3JlYXRlU29ydGVyKCk7XHJcbn0pKCk7XHJcbi8qIGV4cG9ydGVkIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLy8g0J7Rh9C40YnQsNC10YIgRE9NINGB0L7QtNC10YDQttCw0YnQuNC5INGN0LvQtdC80LXQvdGC0Ysg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG5mdW5jdGlvbiBjbGVhckVsZW1lbnRDb250ZW50KGVsZW1lbnRTZWxlY3Rvcikge1xyXG4gICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGVsZW1lbnRTZWxlY3Rvcik7XHJcbiAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBkYXRhYmFzZVxyXG5cclxuLyogZXhwb3J0ZWQgZGF0YUNvbm5lY3RvciAqL1xyXG4vKiBnbG9iYWwgZGF0YUNvbm5lY3RvckNvbmZpZyAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0L/RgNC10LTQvtGB0YLQsNCy0LvRj9C10YIg0YHQv9C+0YHQvtCxINC+0YLQv9GA0LDQstC60Lgg0LfQsNC/0YDQvtGB0LAg0Log0LjRgdGC0L7Rh9C90LjQutGDINC00LDQvdC90YvRhVxyXG4vLyDQlNC70Y8g0YDQtdC60LLQtdGB0YLQsCDQvdC10L7QsdGF0L7QtNC40Lwg0L/Rg9GC0YwsINGC0LXQu9C+INC30LDQv9GA0L7RgdCwLCDRgtC40L8g0LfQsNC/0YDQvtGB0LBcclxuLy8gcmVxdWVzdCDQstC+0LfQstGA0LDRidCw0LXRgiBQcm9taXNlXHJcbnZhciBkYXRhQ29ubmVjdG9yID0gKGZ1bmN0aW9uIGdldERhdGFTb3VyY2VBUEkoZGF0YUNvbm5lY3RvckNvbmZpZ09iaikge1xyXG4gICAgdmFyIGRhdGFCYXNlQ29ubmVjdG9yO1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFCYXNlQ29ubmVjdG9yKCkge31cclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUuc2V0dXBEYXRhQmFzZUFQSSA9IGZ1bmN0aW9uIHNldHVwRGF0YUJhc2VBUEkgKHR5cGVPZlJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgZGF0YUJhc2VBUEk7XHJcbiAgICAgICAgaWYgKHR5cGVPZlJlcXVlc3QgPT09IFwiZmV0Y2hcIikge1xyXG4gICAgICAgICAgICBkYXRhQmFzZUFQSSA9IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RGZXRjaCxcclxuICAgICAgICAgICAgICAgIGdldE5ld0Nvbm5lY3RvckFQSTogZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZU9mUmVxdWVzdCA9PT0gXCJYSFJcIikge1xyXG4gICAgICAgICAgICBkYXRhQmFzZUFQSSA9IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RYTVIsXHJcbiAgICAgICAgICAgICAgICBnZXROZXdDb25uZWN0b3JBUEk6IGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUElcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhQmFzZUFQSSA9IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RYTVIsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVMb25nUG9sbENvbm5lY3Rpb246IGRhdGFCYXNlQ29ubmVjdG9yLmxvbmdQb2xsLFxyXG4gICAgICAgICAgICAgICAgZ2V0TmV3Q29ubmVjdG9yQVBJOiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhQmFzZUFQSTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RGZXRjaCA9IGZ1bmN0aW9uIHJlcXVlc3RGZXRjaChcclxuICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICByZXF1ZXN0Qm9keSxcclxuICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICBjb250ZW50VHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHJlcXVlc3RQYXRoLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIEFjY2VwdDogY29udGVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBjb250ZW50VHlwZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXRob2Q6IHJlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICBib2R5OiByZXF1ZXN0Qm9keVxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gZ2V0UmVzcG9uc2VKU09OKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUucmVxdWVzdFhNUiA9IGZ1bmN0aW9uIHJlcXVlc3RYTVIoXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiByZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKHJlcXVlc3RUeXBlLCByZXF1ZXN0UGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIGNvbnRlbnRUeXBlKTtcclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIGxvYWRDYXNlKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoY29udGVudFR5cGUgPT09IFwiYXBwbGljYXRpb24vanNvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHhoci5yZXNwb25zZSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gZXJyb3JDYXNlKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHhoci5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3RCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChyZXF1ZXN0Qm9keSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5sb25nUG9sbCA9IGZ1bmN0aW9uIGxvbmdQb2xsICh0YXJnZXRVcmwpIHtcclxuICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4aHR0cC5vcGVuKCdHRVQnLCB0YXJnZXRVcmwsIHRydWUpO1xyXG4gICAgICAgIHhodHRwLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICd0ZXh0L2V2ZW50LXN0cmVhbScpO1xyXG4gICAgICAgIHJldHVybiB4aHR0cDtcclxuICAgIH07XHJcblxyXG4gICAgZGF0YUJhc2VDb25uZWN0b3IgPSBuZXcgRGF0YUJhc2VDb25uZWN0b3IoKTtcclxuICAgIHJldHVybiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJKGRhdGFDb25uZWN0b3JDb25maWdPYmoudHlwZU9mUmVxdWVzdCk7XHJcblxyXG59KShkYXRhQ29ubmVjdG9yQ29uZmlnKTtcclxuLyogZXhwb3J0ZWQgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG4vKiBnbG9iYWwgZGF0YUJhc2VVcmwgKi9cclxuLyogZ2xvYmFsIGRhdGFDb25uZWN0b3IgKi9cclxuLy8g0JzQvtC00YPQu9GMINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFXHJcbi8vINCS0YHQtSBBUEkg0YTRg9C90LrRhtC40Lgg0LLQvtC30LLRgNCw0YnQsNGO0YIg0L/RgNC+0LzQuNGB0YtcclxudmFyIGRhdGFTb3VyY2UgPSAoZnVuY3Rpb24gY3JlYXRlRGF0YVNvdXJjZSAoZGF0YUNvbm5lY3RvciwgY29uZmlnKSB7XHJcbiAgICB2YXIgZGF0YVNvdXJjZUluc3RhbmNlO1xyXG4gICAgdmFyIFVTRVJfTElTVCA9IFwidXNlckxpc3RcIjtcclxuICAgIHZhciBVU0VSX01FU1NBR0VTID0gXCJ1c2Vyc01lc3NhZ2VzXCI7XHJcbiAgICB2YXIgVVNFUlNfU0VUVElOR1MgPSBcInVzZXJzU2V0dGluZ3NcIjtcclxuICAgIHZhciBuZXdVc2VyRGF0YSA9IHtcclxuICAgICAgICBpc01pbmltaXplOiBmYWxzZSxcclxuICAgICAgICByZWFkTGFzdE1lc3NhZ2U6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YVNvdXJjZSgpIHt9XHJcblxyXG4gICAgZnVuY3Rpb24gbG9uZ1BvbGxDb25uZWN0IChkYXRhVHlwZSwgdXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IuY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uKHJlcXVlc3RQYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYXNpY0Nvbm5lY3QgKGRhdGFUeXBlLCB1c2VySWQpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0LmJpbmQobnVsbCwgcmVxdWVzdFBhdGgsIG51bGwsIFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgfVxyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmNyZWF0ZVJlcXVlc3RQYXRoID0gZnVuY3Rpb24gY3JlYXRlUmVxdWVzdFBhdGgoXHJcbiAgICAgICAgZGF0YUJhc2VVUkwsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHJlcXVlc3RQb3N0Zml4LFxyXG4gICAgICAgIHJlcXVlc3RQcmVmaXhcclxuICAgICkge1xyXG4gICAgICAgIHZhciBwYXRoID0gZGF0YUJhc2VVUkw7XHJcbiAgICAgICAgaWYocmVxdWVzdFByZWZpeCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgcmVxdWVzdFByZWZpeFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXNlcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyB1c2VySWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXF1ZXN0UG9zdGZpeCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgcmVxdWVzdFBvc3RmaXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhdGggKz0gXCIuanNvblwiO1xyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRIVE1MID0gZnVuY3Rpb24gZ2V0SFRNTCAocmVxdWVzdFBhdGgpIHtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgXCJHRVRcIiwgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCdcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uIHNldERhdGEgKGRhdGFUeXBlLCByZXF1ZXN0VHlwZSwgZmllbGROYW1lLCB1c2VySWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoO1xyXG4gICAgICAgIGlmKHJlcXVlc3RUeXBlID09PSBcIlBVVFwiKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBmaWVsZE5hbWUsIGRhdGFUeXBlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCwgZGF0YVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodmFsdWUpLFxyXG4gICAgICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5hZGROZXdVc2VyVG9EYXRhU291cmNlID0gZnVuY3Rpb24gYWRkTmV3VXNlclRvRGF0YVNvdXJjZSAodXNlcklkLCB1c2VyTmFtZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGU7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIG5ld1VzZXJEYXRhLnVzZXJOYW1lID0gdXNlck5hbWU7XHJcbiAgICAgICAgT2JqZWN0LmtleXMobmV3VXNlckRhdGEpLm1hcChmdW5jdGlvbiBhZGROZXdTZXR0aW5ncyAoc2V0dGluZ05hbWUpIHtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKFVTRVJTX1NFVFRJTkdTLCBcIlBVVFwiLCBzZXR0aW5nTmFtZSwgdXNlcklkLCBuZXdVc2VyRGF0YVtzZXR0aW5nTmFtZV0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNldERhdGEoVVNFUl9MSVNULCBcIlBVVFwiLCBudWxsLCB1c2VySWQsIHtcImxhc3RPbmxpbmVcIjogZGF0ZS5nZXRUaW1lKCksIFwic2VuZE5ld01lc3NhZ2VcIjogZmFsc2V9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YVNvdXJjZUFQSSA9IGZ1bmN0aW9uIGdldERhdGFTb3VyY2VBUEkgKHR5cGVPZlJlcXVlc3QpIHtcclxuICAgICAgICBpZih0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9IHR5cGVPZlJlcXVlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9PT0gXCJsb25nUG9sbFwiKSB7XHJcbiAgICAgICAgICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGEgPSBsb25nUG9sbENvbm5lY3RcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXREYXRhID0gYmFzaWNDb25uZWN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVzZXJzQVBJOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRVc2VyTGlzdDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9MSVNUXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgZ2V0VXNlclNldHRpbmdzOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HU1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFVzZXJNZXNzYWdlczogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFU1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFNldHRpbmdGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUlNfU0VUVElOR1NcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZTogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFUyxcclxuICAgICAgICAgICAgICAgICAgICBcIlBPU1RcIlxyXG5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBzZXRTZXR0aW5nRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBhZGROZXdVc2VyVG9EYXRhU291cmNlOiBkYXRhU291cmNlSW5zdGFuY2UuYWRkTmV3VXNlclRvRGF0YVNvdXJjZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUxhc3RPbmxpbmU6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTElTVCxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibGFzdE9ubGluZVwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlU2VuZE5ld01lc3NhZ2VGbGFnOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX0xJU1QsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNlbmROZXdNZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21tb25BUEk6IHtcclxuICAgICAgICAgICAgICAgIGdldEhUTUw6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRIVE1MLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKSxcclxuICAgICAgICAgICAgICAgIGdldERhdGFTb3VyY2VBUEk6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhU291cmNlQVBJLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10LwgaW5zdGFuY2Ug0L7QsdGK0LXQutGC0LAsINC30LDQtNCw0LXQvCBBUElcclxuICAgIGRhdGFTb3VyY2VJbnN0YW5jZSA9IG5ldyBEYXRhU291cmNlKCk7XHJcblxyXG5cclxuXHJcbiAgICByZXR1cm4gZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGFTb3VyY2VBUEkoKTtcclxufSkoZGF0YUNvbm5lY3RvciwgbWFpbkNvbmZpZyk7XHJcblxyXG4vLyBldmVudEVtaXR0ZXJcclxuXHJcbi8qIGV4cG9ydGVkIGV2ZW50RW1pdHRlciAqL1xyXG52YXIgZXZlbnRFbWl0dGVyID0gKGZ1bmN0aW9uIGNyZWF0ZUV2ZW50RW1pdHRlciAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZFN1YnNjcmliZSA9IGZ1bmN0aW9uIGFkZFN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrICkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBpZiggIXRoaXMuZXZlbnRzW2V2ZW50TmFtZV0gKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVN1YnNjcmliZSAoKSB7XHJcbiAgICAgICAgICAgIHRoYXQuZXZlbnRzW2V2ZW50TmFtZV0gPSB0aGF0LmV2ZW50c1tldmVudE5hbWVdLmZpbHRlcihmdW5jdGlvbiByZW1vdmUgKGVsZW1lbnRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRDYWxsYmFjayAhPT0gY2FsbGJhY2tcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZW1vdmVTdWJzY3JpYmVcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCAoZXZlbnROYW1lLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXTtcclxuICAgICAgICBpZiggZXZlbnQgKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LmZvckVhY2goZnVuY3Rpb24gaW52b2tlIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChudWxsLCBkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG59KSgpO1xyXG4vKiBleHBvcnRlZCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyICovXHJcbnZhciBsb25nUG9sbFJlc3BvbnNlUGFyc2VyID0gKGZ1bmN0aW9uIGNyZWF0ZUxvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKSB7XHJcbiAgICB2YXIgdHlwZXNPZkNoYW5nZSA9IHtcclxuICAgICAgICBtZXNzYWdlOiAvbWVzc2FnZS8sXHJcbiAgICAgICAgdXNlckxpc3Q6IC9sYXN0T25saW5lLnsxLH1zZW5kTmV3TWVzc2FnZS8sXHJcbiAgICAgICAgbGFzdE9ubGluZTogL1wicGF0aFwiOlwiXFwvXFx3ezEsfVxcL2xhc3RPbmxpbmUvLFxyXG4gICAgICAgIHNlbmROZXdNZXNzYWdlOiAvXCJwYXRoXCI6XCJcXC9cXHd7MSx9XFwvc2VuZE5ld01lc3NhZ2UvLFxyXG4gICAgICAgIHNldHRpbmc6IC9yZWFkTGFzdE1lc3NhZ2UvLFxyXG4gICAgICAgIHJlYWQ6IC9yZWFkLyxcclxuICAgICAgICBnZXRJcDogL2dldElwLyxcclxuICAgICAgICBhc2tRdWVzdGlvbjogL2Fza1F1ZXN0aW9uL1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZXZlbnRSZWd1bGFyID0gL2V2ZW50OiBwdXQvO1xyXG4gICAgdmFyIGhhc051bGxEYXRhID0gL2RhdGE6IG51bGwvO1xyXG4gICAgdmFyIGdldERhdGFSZWd1bGFyID0gL1wiLFwiZGF0YVwiOi87XHJcbiAgICB2YXIgaXRJc05ld01lc3NhZ2VSZWd1bGFyID0gL1wicGF0aFwiOlwiXFwvLS87XHJcbiAgICB2YXIgaXRJc05ld1VzZXJMaXN0UmVndWxhciA9IC9cImRhdGFcIjp7XCJsYXN0T25saW5lXCI6XFxkKyxcInNlbmROZXdNZXNzYWdlXCI6LztcclxuICAgIHZhciBpdElzRmlyc3RJcERhdGFSZWd1bGFyID0gL2RhdGE6IHtcInBhdGhcIjpcIlxcL1wiLFwiZGF0YVwiOntcImdldElwXCI6LztcclxuICAgIHZhciBpdElzRmlyc3RRdWVzdGlvbnNEYXRhID0gL2RhdGE6IHtcInBhdGhcIjpcIlxcL1wiLFwiZGF0YVwiOntcImFza1F1ZXN0aW9uXCI6LztcclxuICAgIHZhciBpdElzTmV3UXVlc3Rpb25zQ29tbWFuZCA9IC9kYXRhOiB7XCJwYXRoXCI6XCJcXC9hc2tRdWVzdGlvblwiLFwiZGF0YVwiOi87XHJcbiAgICB2YXIgaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uID0gdHJ1ZTtcclxuXHJcbiAgICBmdW5jdGlvbiBMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCkge31cclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRUeXBlT2ZDaGFuZ2VzID0gZnVuY3Rpb24gZ2V0VHlwZU9mQ2hhbmdlcyhcclxuICAgICAgICBhbnN3ZXJEYXRhXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdHlwZSA9IE9iamVjdC5rZXlzKHR5cGVzT2ZDaGFuZ2UpLmZpbHRlcihcclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q3VycmVudFR5cGVPZkNoYW5nZSh0eXBlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVzT2ZDaGFuZ2VbdHlwZU5hbWVdLnRlc3QoYW5zd2VyRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZU5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gdHlwZVswXTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UgPSBmdW5jdGlvbiBwcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilbMV1cclxuICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJzTWVzc2FnZXMgPSBmdW5jdGlvbiBwYXJzZVVzZXJzTWVzc2FnZXMoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgbWVzc2FnZUlkO1xyXG4gICAgICAgIHZhciByZXN1bHRPYmplY3QgPSB7fTtcclxuICAgICAgICBpZiAoY2hhbmdlVHlwZSA9PT0gXCJyZWFkXCIpIHtcclxuICAgICAgICAgICAgZGF0YS5pZCA9IHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJy9yZWFkXCIsXCInKVxyXG4gICAgICAgICAgICAgICAgLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGRhdGEudmFsdWUgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcvcmVhZFwiLFwiZGF0YVwiOicpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWl0SXNOZXdNZXNzYWdlUmVndWxhci50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlSWQgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVxyXG4gICAgICAgICAgICAuc2hpZnQoKTtcclxuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZSh0aGlzLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgcmVzdWx0T2JqZWN0W21lc3NhZ2VJZF0gPSBkYXRhO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRPYmplY3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmhhc05ld0RhdGEgPSBmdW5jdGlvbiBoYXNOZXdEYXRhKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIWhhc051bGxEYXRhLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pICYmIHJlc3BvbnNlLmxlbmd0aCA+IDFcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJMaXN0ID0gZnVuY3Rpb24gcGFyc2VVc2VyTGlzdChcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBjaGFuZ2VUeXBlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgIHZhciB1c2VySWQ7XHJcbiAgICAgICAgaWYgKGl0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGl0SXNOZXdVc2VyTGlzdFJlZ3VsYXIudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgdXNlcklkID0gdGhpcy5nZXRVc2VySWQocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0sIG51bGwpO1xyXG4gICAgICAgICAgICBkYXRhW3VzZXJJZF0gPSB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShcclxuICAgICAgICAgICAgcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilbMV1cclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICByZXR1cm4gW3VzZXJJZCwgZGF0YV07XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmdldEZpcnN0RGF0YSA9IGZ1bmN0aW9uIGdldEZpcnN0RGF0YShcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGpzb25EYXRhID0gSlNPTi5wYXJzZSh0aGlzLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBqc29uRGF0YTtcclxuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRVc2VySWQgPSBmdW5jdGlvbiBnZXRVc2VySWQoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoY2hhbmdlVHlwZSlcclxuICAgICAgICAgICAgICAgIC5zaGlmdCgpXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpWzBdXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VDb21tYW5kQW5zd2VyID0gZnVuY3Rpb24gcGFyc2VDb21tYW5kQW5zd2VyKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICB2YXIgaXBEYXRhO1xyXG4gICAgICAgIHZhciBhc2tRdWVzdGlvbkRhdGE7XHJcbiAgICAgICAgdmFyIGl0SXNJUEluZm9ybWF0aW9uID0gL2dldElwLy50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICB2YXIgaXRJc1F1ZXN0aW9uc0luZm9ybWF0aW9uID0gL2Fza1F1ZXN0aW9uLy50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKTtcclxuXHJcbiAgICAgICAgaWYoaXRJc0lQSW5mb3JtYXRpb24gJiYgaXRJc1F1ZXN0aW9uc0luZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdCgvZGF0YToge1wicGF0aFwiOlwiXFwvXCIsXCJkYXRhXCI6LykucG9wKCkuc3BsaXQoXCJ9LFwiKTtcclxuICAgICAgICAgICAgYXNrUXVlc3Rpb25EYXRhID0gSlNPTi5wYXJzZShkYXRhWzBdKyBcIn19XCIpO1xyXG4gICAgICAgICAgICBpcERhdGEgPSBKU09OLnBhcnNlKFwie1wiICsgZGF0YVsxXS50cmltKCkuc2xpY2UoMCwtMSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgYXNrUXVlc3Rpb25EYXRhLFxyXG4gICAgICAgICAgICAgICAgaXBEYXRhXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9IGVsc2UgaWYgKGl0SXNJUEluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVXNlcklwRGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdElzUXVlc3Rpb25zSW5mb3JtYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VRdWVzdGlvbnNEYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlVXNlcklwRGF0YSA9IGZ1bmN0aW9uIHBhcnNlVXNlcklwRGF0YShcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgaWYoaXRJc0ZpcnN0SXBEYXRhUmVndWxhci50ZXN0KHJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShcIntcXFwiZ2V0SXBcXFwiOlwiICsgcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoaXRJc0ZpcnN0SXBEYXRhUmVndWxhcikucG9wKCkudHJpbSgpLnNsaWNlKDAsLTEpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdChldmVudFJlZ3VsYXIpLnBvcCgpLnNwbGl0KFwiZGF0YToge1xcXCJwYXRoXFxcIjpcXFwiL2dldElwXFxcIixcXFwiZGF0YVxcXCI6XCIpLnBvcCgpLnRyaW0oKS5zbGljZSgwLC0xKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVF1ZXN0aW9uc0RhdGEgPSBmdW5jdGlvbiBwYXJzZVF1ZXN0aW9uc0RhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmKGl0SXNGaXJzdFF1ZXN0aW9uc0RhdGEudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoXCJ7XFxcImFza1F1ZXN0aW9uXFxcIjpcIiArIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KGl0SXNGaXJzdFF1ZXN0aW9uc0RhdGEpLnBvcCgpLnRyaW0oKS5zbGljZSgwLC0xKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdElzTmV3UXVlc3Rpb25zQ29tbWFuZC50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSkge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdChpdElzTmV3UXVlc3Rpb25zQ29tbWFuZCkucG9wKCkudHJpbSgpLnNsaWNlKDAsLTEpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShcIntcXFwiYXNrUXVlc3Rpb25cXFwiOntcXFwiXCIgKyByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdChcImRhdGE6IHtcXFwicGF0aFxcXCI6XFxcIi9hc2tRdWVzdGlvbi9cIikucG9wKCkucmVwbGFjZShcIlxcXCIsXFxcImRhdGFcXFwiXCIsIFwiXFxcIlwiKSArIFwifVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UodGV4dCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB0ZXh0LnNwbGl0KGV2ZW50UmVndWxhcik7XHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSB0aGlzLmdldFR5cGVPZkNoYW5nZXMocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdE9mUGFyc2UgPSB7IHR5cGU6IGNoYW5nZVR5cGUgfTtcclxuICAgICAgICBpZiAodGhpcy5oYXNOZXdEYXRhKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwibWVzc2FnZVwiIHx8IGNoYW5nZVR5cGUgPT09IFwicmVhZFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRPZlBhcnNlLm9iamVjdCA9IHRoaXMucGFyc2VVc2Vyc01lc3NhZ2VzKHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPT09IFwic2VuZE5ld01lc3NhZ2VcIiB8fFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJsYXN0T25saW5lXCIgfHxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPT09IFwidXNlckxpc3RcIlxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJMaXN0KHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2VUeXBlID09PSBcImdldElwXCIgfHwgY2hhbmdlVHlwZSA9PT0gXCJhc2tRdWVzdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZUNvbW1hbmRBbnN3ZXIocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCk7XHJcbn0pKCk7XHJcblxyXG4vLyB2aWV3XHJcblxyXG4vKiBleHBvcnRlZCB2aWV3RmFjdG9yeSAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG52YXIgdmlld0ZhY3RvcnkgPSAoZnVuY3Rpb24gY3JlYXRlVmlld0ZhY3RvcnkgKGRhdGFTb3VyY2UpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBWaWV3RmFjdG9yeSAoKSB7fVxyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVWaWV3ID0gZnVuY3Rpb24gY3JlYXRlQ2hhdFZpZXcgKGh0bWxQYXRoLCBjc3NQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gY3JlYXRlVmlld1Byb21pc2UgKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZihodG1sUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYoY3NzUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaW5jbHVkZVZpZXdDc3NUb1BhZ2UodGhhdC5jcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlc2hlZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0L2Nzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvdWNoLXNvZnQtY2hhdC1jc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGF0LmluY2x1ZGVWaWV3SFRNTFRvUGFnZShodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJodG1sUGF0aCBpcyBudWxsLiBQbGVhc2UgYWRkIGh0bWxQYXRoXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuaW5jbHVkZVZpZXdIVE1MVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRIVE1MVG9QYWdlIChodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpIHtcclxuICAgICAgICB2YXIgY29udGFpbmVyRGl2ID0gKGNvbnRhaW5lckNsYXNzKSA/IGdldEVsZW1lbnQoY29udGFpbmVyQ2xhc3MpIDogZG9jdW1lbnQuYm9keTtcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS5jb21tb25BUEkuZ2V0SFRNTChodG1sUGF0aCkudGhlbihmdW5jdGlvbiBzZXRIdG1sIChodG1sKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0Nzc1RvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0Q3NzVG9QYWdlIChsaW5rKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNTU0xpbmsgPSBmdW5jdGlvbiBjcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgIHJlbCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgVmlld0ZhY3RvcnkoKVxyXG5cclxufSkoZGF0YVNvdXJjZSk7XHJcblxyXG4vLyBjaGF0IG1hbmFnZXJcclxuXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINGA0LDQsdC+0YLRiyDRgdC+INGB0L/QuNGB0LrQvtC8INGB0L7QvtCx0YnQtdC90LjQuSDQntCU0J3QntCT0J4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbnZhciBtZXNzYWdlTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gc2V0dXBNZXNzYWdlTGlzdE1hbmFnZXIgKGNvbmZpZykge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vINCk0L7RgNC80LDRgiAgbWVzc2FnZUxpc3QgPSBbXHJcbiAgICAvLyAgICB7XHJcbiAgICAvLyAgICAgICBzZW5kZXI6IHNlbmRlclxyXG4gICAgLy8gICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIC8vICAgICAgIHJlYWQ6IHRydWUvZmFsc2VcclxuICAgIC8vICAgICAgIGRhdGU6IGRhdGVcclxuICAgIC8vICAgIH0sXHJcbiAgICAvLyBdXHJcbiAgICAvLyByZWFkIC0g0LHRi9C70L4g0LvQuCDQv9GA0L7Rh9C40YLQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIE1lc3NhZ2VMaXN0TWFuYWdlcigpIHt9XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5jRE9NID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlc0Jsb2NrOiBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFX0RBVEUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkICgpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICB2YXIgbWVzc2FnZXNJc1JlYWQgPSBbXTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSBjb25maWcuQURNSU5fTkFNRSB8fCBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZTtcclxuICAgICAgICB2YXIgdXNlcklkID0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIGZvcihpID0gdGhpcy5tZXNzYWdlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1lc3NhZ2VMaXN0W2ldLnNlbmRlciAhPT0gdXNlck5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLm1lc3NhZ2VMaXN0W2ldLnJlYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc0lzUmVhZC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogdGhpcy5tZXNzYWdlTGlzdFtpXS5pZCArIFwiL3JlYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzSXNSZWFkO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgKGlzUmVhZCwgc2VuZGVyKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX01FU1NBR0VfQ09OVEFJTkVSKTtcclxuICAgICAgICBpZiAoIWlzUmVhZCAmJiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSAhPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgPSBmdW5jdGlvbiBjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgKHRleHQsIGlzRGlzcGxheSwgc3R5bGVDbGFzc2VzKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc3R5bGVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gY2xhc3NBZGQgKHN0eWxlKSB7XHJcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKHN0eWxlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTUVTU0FHRSBFTEVNRU5UIC8vXHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VMaXN0IChtZXNzYWdlT2JqZWN0cykgIHtcclxuICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cykge1xyXG4gICAgICAgICAgICBtZXNzYWdlT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIGFkZEVsZW1lbnRUb01lc3NhZ2VMaXN0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3QgKG5ld01lc3NhZ2VMaXN0KSB7XHJcbiAgICAgICAgaWYodGhpcy5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnJlYWRMYXN0TWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IChcclxuICAgICAgICBtZXNzYWdlT2JqXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LnB1c2gobWVzc2FnZU9iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0LXRgNC10LHQuNGA0LDQtdGCINGB0L/QuNGB0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LksINGB0L7Qt9C00LDQtdGCINGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40LUg0LjQvCBET00g0Y3Qu9C10LzQtdC90YLRiyDQuCDQstGB0YLQsNCy0LvRj9C10YIg0LjRhSDQsiDRh9Cw0YJcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuZGlzcGxheU1lc3NhZ2VzID0gZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2VzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNsZWFyQ2hhdCgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBjcmVhdGVNZXNzYWdlIChtZXNzYWdlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGF0LmNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnJlYWRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhhdC5jRE9NLm1lc3NhZ2VzQmxvY2suYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YfQuNGB0YLQuNGC0YwgRE9NINGN0LvQtdC80LXQvdGCINCyINC60L7RgtC+0YDQvtC8INC+0YLQvtCx0YDQsNC20LDRjtGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8gKNC90LDQv9GA0LjQvNC10YAg0YfRgtC+0LHRiyDQstGB0YLQsNCy0LjRgtGMINC90LLQvtGL0Lkg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSlcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJDaGF0ID0gZnVuY3Rpb24gY2xlYXJDaGF0KCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLmNET00ubWVzc2FnZXNCbG9jay5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLnJlbW92ZUNoaWxkKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNZXNzYWdlTGlzdE1hbmFnZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4vKiBnbG9iYWwgZ2V0Q3VycmVudERhdGUgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGV2ZW50RW1pdHRlciAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG4vKiBnbG9iYWwgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciAqL1xyXG52YXIgdXNlckRhdGFNYW5hZ2VyID0gIChmdW5jdGlvbiBjcmVhdGVVc2VyRGF0YU1hbmFnZXIgKGNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKSB7XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIC8qIGV4cG9ydGVkIGdldEN1cnJlbnREYXRlICovXHJcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSAoZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT09IDEpID8gXCIwXCIgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIHJldHVybiBkYXRlXHJcbiAgICAgICAgICAgIC5nZXRIb3VycygpXHJcbiAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgIC5jb25jYXQoXCI6XCIsIG1pbnV0ZXMpO1xyXG4gICAgfVxyXG4gICAgLyogZXhwb3J0ZWQgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZU9iamVjdCAoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWQsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlbmRlcjogc2VuZGVyLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICByZWFkOiBpc1JlYWQsXHJcbiAgICAgICAgICAgIGRhdGU6IGRhdGUsXHJcbiAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIC8vIGJhc2ljXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyRGF0YUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGdldENvcnJlc3BvbmRlbmNlIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpLnRoZW4oIGZ1bmN0aW9uIGdldFJlc29sdmUgKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYyAoZGF0YSkge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB2YXIgbWVzc2FnZXNPYmplY3QgPSBbXTtcclxuICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBwdXNoRGF0YSAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0uaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlc09iamVjdC5wdXNoKGRhdGFba2V5XSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICBuZXdNZXNzYWdlTGlzdCA9IG1lc3NhZ2VMaXN0TWFuYWdlci5jcmVhdGVNZXNzYWdlTGlzdChtZXNzYWdlc09iamVjdCk7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2VMaXN0KG5ld01lc3NhZ2VMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYyAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJNZXNzYWdlcyh1c2VySWQpKCkudGhlbihmdW5jdGlvbiB1cGRhdGVNZXNzYWdlc0xpc3QgKGRhdGEpIHtcclxuICAgICAgICAgICAgdGhhdC51cGRhdGVNZXNzYWdlTGlzdChkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGdldExvbmdQb2xsQ29ycmVzcG9uZGVuY2UocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpO1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckNvcnJlc3BvbmRlbmNlRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiA9IGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBzZXR1cENvbm5lY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSAzICYmIHRoaXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBsb25nUG9sbFJlc3BvbnNlUGFyc2VyLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uc2VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbCAoZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIGFkZFRvTWVzc2FnZUxpc3RMb25nUG9sbCAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0uaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QoZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFVzZXJEYXRhTWFuYWdlciAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9PT0gXCJsb25nUG9sbFwiKSB7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YUZyb21Mb25nUG9sbENvbm5lY3Rpb24uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyQ29ycmVzcG9uZGVuY2UgPSBnZXRVc2VyQ29ycmVzcG9uZGVuY2VGcm9tTG9uZ1BvbGxDb25uZWN0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSB1cGRhdGVNZXNzYWdlTGlzdEFmdGVyTG9uZ1BvbGwuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gc3Vic2NyaWJlTWVzc2FnZSAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC51cGRhdGVNZXNzYWdlTGlzdChkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJyZWFkXCIsIGZ1bmN0aW9uIHN1YnNjcmliZVJlYWQgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobWVzc2FnZS5pZCA9PT0gZGF0YS5pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlYWQgPSBkYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhQmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyQ29ycmVzcG9uZGVuY2UgPSBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAgKCkge1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5zZXR1cCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmNsZWFyTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiBjbGVhck1lc3NhZ2VMaXN0ICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIubWVzc2FnZUxpc3QgPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVOZXdVc2VyUHJvZmlsZVRvRGF0YUJhc2UgPSBmdW5jdGlvbiBjcmVhdGVOZXdVc2VyUHJvZmlsZVRvRGF0YUJhc2UgKHVzZXJJZCwgdXNlck5hbWUpIHtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UodXNlcklkLCB1c2VyTmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZVNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIHNldEZpZWxkIChmaWVsZE5hbWUpIHtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldFNldHRpbmdGaWVsZChcclxuICAgICAgICAgICAgZmllbGROYW1lLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzW2ZpZWxkTmFtZV1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVVzZXJPbmxpbmUgPSBmdW5jdGlvbiB1cGRhdGVVc2VyT25saW5lICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlO1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkudXBkYXRlTGFzdE9ubGluZSh1c2VySWQsIGRhdGUuZ2V0VGltZSgpKVxyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24gc2VuZE1lc3NhZ2UgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCgpO1xyXG4gICAgICAgIHZhciBkYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSB8fCBjb25maWcuQURNSU5fTkFNRTtcclxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IGNyZWF0ZU1lc3NhZ2VPYmplY3QoXHJcbiAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgIHVzZXJOYW1lLFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ICE9PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICBlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0TWVzc2FnZUFzUmVhZCA9IGZ1bmN0aW9uIHNldE1lc3NhZ2VBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0cyA9IG1lc3NhZ2VMaXN0TWFuYWdlci5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gc2V0UmVhZCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQoXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVNZXNzYWdlVG9EYXRhU291cmNlID0gZnVuY3Rpb24gc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0LnNlbmRlciA9PT0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUpIHtcclxuICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWcoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTZXR0aW5ncyA9IFt7dXNlcklkLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWV9LHt9Li4uXVxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlID0gZnVuY3Rpb24gc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZSAoc2V0dGluZ3MpIHtcclxuICAgICAgICBzZXR0aW5ncy5mb3JFYWNoKGZ1bmN0aW9uIHNhdmVTZXR0aW5nIChuZXdGaWVsZFNldHRpbmcpIHtcclxuICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5zZXRTZXR0aW5nRmllbGQoXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcuZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhTWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKTtcclxuXHJcbi8vIGxvZ1xyXG5cclxudmFyIGxvZyA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuXHJcbiAgICAvKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbiAgICAvKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4gICAgLy8g0J7Rh9C40YnQsNC10YIgRE9NINGB0L7QtNC10YDQttCw0YnQuNC5INGN0LvQtdC80LXQvdGC0Ysg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gd3JpdGVNZXNzYWdlIChtZXNzYWdlcykge1xyXG4gICAgICAgIHZhciBtZXNzYWdlRWxlbWVudDtcclxuICAgICAgICBpZihtZXNzYWdlcyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VFbGVtZW50ID0gY3JlYXRlTWVzc2FnZUVsZW1lbnQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZShtZXNzYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWVzc2FnZUVsZW1lbnQgPSBjcmVhdGVNZXNzYWdlRWxlbWVudChtZXNzYWdlcyk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UobWVzc2FnZUVsZW1lbnQpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTKS5hcHBlbmRDaGlsZChtZXNzYWdlRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQobWVzc2FnZXMpIHtcclxuICAgICAgICB2YXIgcmVzdWx0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByZXN1bHREaXYuY2xhc3NMaXN0LmFkZChjb25maWcuRE9NLkNTU19DT05UUk9MX1BBTkVMX0xPR19FTEVNRU5UX0NMQVNTKTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGxiYWNrRm9yTWVzc2FnZXNEZXBsb3kgPSBmdW5jdGlvbiBhZGREYXRhVG9SZXN1bHREaXYgKGRhdGEsIGRhdGFOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBpbm5lckRpdjtcclxuICAgICAgICAgICAgaW5uZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBpbm5lckRpdi5pbm5lckhUTUwgPSBkYXRhTmFtZSArIFwiOiBcIiArIGRhdGE7XHJcbiAgICAgICAgICAgIHJlc3VsdERpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGVwbG95T2JqZWN0KG1lc3NhZ2VzLCBjYWxsYmFja0Zvck1lc3NhZ2VzRGVwbG95KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0RGl2O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlcGxveU9iamVjdCAob2JqZWN0LCBjYWxsYmFjaykge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKG9iamVjdCkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYob2JqZWN0W2tleV0gaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGRlcGxveU9iamVjdChvYmplY3Rba2V5XSwgY2FsbGJhY2spXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhvYmplY3Rba2V5XSxrZXkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgd3JpdGU6IHdyaXRlTWVzc2FnZSxcclxuICAgICAgICBjbGVhcjogY2xlYXJFbGVtZW50Q29udGVudC5iaW5kKG51bGwsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG59KG1haW5Db25maWcpO1xyXG5cclxuLy8gZGFzaGJvYXJkXHJcblxyXG4vKiBleHBvcnRlZCB1c2VyTGlzdE1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHNvcnRlciAqL1xyXG52YXIgdXNlckxpc3RNYW5hZ2VyID0gKGZ1bmN0aW9uIGNyZWF0ZVVzZXJMaXN0IChjb25maWcsIHNvcnRlcikge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLyog0KTQvtGA0LzQsNGCINC+0LHRitC10LrRgtCwINCyINGB0L/QuNGB0LrQtSDRjtC30LXRgNCwXHJcbiAgICAgICogdXNlcklkOiBcIkl2YW4zMDAwMDBcIixcclxuICAgICAgKiB1c2VyRWxlbWVudDogVXNlckxpc3RNYW5hZ2VyLmNyZWF0ZVVzZXJFbGVtZW50KHVzZXJJZCwgdXNlcklzT25saW5lKSxcclxuICAgICAgKiBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgKiB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAqIHNlbmROZXdNZXNzYWdlOiB1c2VyU2V0dGluZ3Muc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICogcmVhZExhc3RNZXNzYWdlOiB1c2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlLFxyXG4gICAgICAqIGxhc3RPbmxpbmU6IHVzZXJTZXR0aW5ncy5sYXN0T25saW5lLFxyXG4gICAgICAqIGlzTWluaW1pemU6IHVzZXJTZXR0aW5ncy5pc01pbmltaXplLFxyXG4gICAgICAqIHVzZXJOYW1lOiB1c2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgKlxyXG4gICAgICAqIHZpc2libGUgLSDQvtGC0L7QsdGA0LDQttCw0YLRjCDQu9C4INGO0LfQtdGA0LAg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICAgICovXHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmdW5jdGlvbiBVc2VyTGlzdE1hbmFnZXIoKSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7fTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0LXQu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y7Qt9C10YDQsCDQsiDRgdC/0LjRgdC60LVcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlVXNlckVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVVc2VyRWxlbWVudChcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgaXNPbmxpbmVcclxuICAgICkge1xyXG4gICAgICAgIHZhciB1c2VyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlcklkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlckluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIHVzZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUyk7XHJcblxyXG4gICAgICAgIHVzZXJJZERpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTKTtcclxuICAgICAgICB1c2VySWREaXYuaW5uZXJIVE1MID0gdXNlcklkO1xyXG5cclxuICAgICAgICBpZiAoaXNPbmxpbmUpIHtcclxuICAgICAgICAgICAgdXNlckluZGljYXRvci5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1c2VySW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQodXNlcklkRGl2KTtcclxuICAgICAgICB1c2VyRGl2LmFwcGVuZENoaWxkKHVzZXJJbmRpY2F0b3IpO1xyXG5cclxuICAgICAgICByZXR1cm4gdXNlckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXRVc2VyTGlzdCA9IGZ1bmN0aW9uIHNldFVzZXJMaXN0ICh1c2VyTHVzdE9iamVjdCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSB1c2VyTHVzdE9iamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRVc2VyVG9Vc2Vyc0FycmF5ID0gZnVuY3Rpb24gYWRkVXNlclRvVXNlcnNMaXN0KFxyXG4gICAgICAgIHVzZXIsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHVzZXJzTGlzdFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJc09ubGluZSA9IHRoaXMudXNlcklzT25saW5lKHVzZXIubGFzdE9ubGluZSk7XHJcbiAgICAgICAgdXNlcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgdXNlckVsZW1lbnQ6IHRoaXMuY3JlYXRlVXNlckVsZW1lbnQodXNlcklkLCB1c2VySXNPbmxpbmUpLFxyXG4gICAgICAgICAgICBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2VuZE5ld01lc3NhZ2U6IHVzZXIuc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWRMYXN0TWVzc2FnZTogdXNlci5yZWFkTGFzdE1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGxhc3RPbmxpbmU6IHVzZXIubGFzdE9ubGluZSxcclxuICAgICAgICAgICAgdXNlck5hbWU6IHVzZXIudXNlck5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlVXNlclZpZXcgKHVzZXJJZCwgbGFzdE9ubGluZSkge1xyXG4gICAgICAgIHZhciB1c2VySW5kZXggPSB0aGlzLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy51TGlzdFt1c2VySW5kZXhdLmxhc3RPbmxpbmUgPSBsYXN0T25saW5lO1xyXG4gICAgICAgIHRoaXMudUxpc3RbdXNlckluZGV4XS5vbmxpbmUgPSB0aGlzLnVzZXJJc09ubGluZShsYXN0T25saW5lKTtcclxuICAgICAgICB0aGlzLnVMaXN0W3VzZXJJbmRleF0udXNlckVsZW1lbnQgPSB0aGlzLmNyZWF0ZVVzZXJFbGVtZW50KFxyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIHRoaXMudXNlcklzT25saW5lKGxhc3RPbmxpbmUpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIGluZGV4INGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INGO0LfQtdGA0LAg0LXRgdC70Lgg0L7QvSDRgtCw0Lwg0L3QsNGF0L7QtNC40YLRgdGPLiDQkiDQv9GA0L7RgtC40LLQvdC+INGB0LvRg9GH0LDQtSDQstC+0LfQstGA0LDRidCw0LXRgiBudWxsXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkID0gZnVuY3Rpb24gZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJNYW5hZ2VyID0gdGhpcztcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gbnVsbDtcclxuICAgICAgICBPYmplY3Qua2V5cyh1c2VyTWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGdldEtleSAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyTWFuYWdlci51TGlzdFtrZXldLnVzZXJJZCA9PT0gdXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5kZXggPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJJbmRleDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdGCINC+0L3Qu9Cw0LnQvSDRjtC30LXRgNCwINC90LDRhdC+0LTRjyDRgNCw0LfQvdC40YbRgyDQvNC10LbQtNGDINC00LDRgtC+0Lkg0L/QvtGB0LvQtdC00L3QtdCz0L4g0LrQvtC90LXQutGC0LAg0Y7Qt9C10YDQsCDRgSDQsdC0INC4INGC0LXQutGD0YnQuNC8INCy0YDQtdC80LXQvdC10LxcclxuICAgIC8vINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUg0LXRgdC70Lgg0Y7Qt9C10YAg0L7QvdC70LDQudC9LCBmYWxzZSAtINC+0YTRhNC70LDQudC9XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnVzZXJJc09ubGluZSA9IGZ1bmN0aW9uIHVzZXJJc09ubGluZSAobGFzdFVzZXJPbmxpbmVUaW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAtIGxhc3RVc2VyT25saW5lVGltZSA8PSBjb25maWcuaW50ZXJ2YWwuT05MSU5FX0lOVEVSVkFMO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQlNC10LvQsNC10YIg0L3QtdCy0LjQtNC40LzRi9C80Lgg0YLQtdGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5INCyINGB0L/QuNGB0LrQtSwg0LIg0LjQvNC10L3QsNGFINC60L7RgtC+0YDRi9GFINC90LXRgiDQv9C10YDQtdC00LDQvdC90L7QuSDQv9C+0LTRgdGC0YDQvtC60LhcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuZmlsdGVyQnlOYW1lID0gZnVuY3Rpb24gZmlsdGVyQnlOYW1lKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBmaWx0ZXJOYW1lIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9IGVsZW1lbnQudXNlcklkLmluZGV4T2YoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpICE9PSAtMTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtGA0YLQuNGA0YPQtdGCINGB0L/QuNGB0L7QuiDRjtC30LXRgNC+0LIg0L/QviDQv9C+0LvRjlxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zb3J0VXNlcnNCeUZpZWxkID0gZnVuY3Rpb24gc29ydFVzZXJzQnlPbmxpbmUoKSB7XHJcbiAgICAgICAgc29ydGVyLnF1aWNrU29ydCh0aGlzLnVMaXN0LCAwLCB0aGlzLnVMaXN0Lmxlbmd0aCAtIDEsIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJVc2VyTGlzdCA9IGZ1bmN0aW9uIGNsZWFyVXNlckxpc3QgKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC+0LHRgNCw0LfQuNGC0YwvINCe0LHQvdC+0LLQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0Y7Qt9C10YDQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5VXNlcnMgPSBmdW5jdGlvbiBkaXNwbGF5VXNlcnMoKSB7XHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcuRE9NLlVTRVJfTElTVF9DU1NfQ0xBU1MpO1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBnZXRFbGVtIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5VU0VSX0xJU1RfQ1NTX0NMQVNTKS5hcHBlbmRDaGlsZChlbGVtLnVzZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIC8vIGluY2x1ZGVcclxuXHJcbiAgICAvKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbiAgICAvKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4gICAgLy8g0J7Rh9C40YnQsNC10YIgRE9NINGB0L7QtNC10YDQttCw0YnQuNC5INGN0LvQtdC80LXQvdGC0Ysg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBVc2VyTGlzdE1hbmFnZXIoKVxyXG5cclxufSkobWFpbkNvbmZpZywgc29ydGVyKTtcclxudmFyIGNvbnRyb2xQYW5lbCA9IChmdW5jdGlvbiAoY29uZmlnLCBkYXRhQ29ubmVjdG9yLCBsb2csIHBhcnNlcikge1xyXG5cclxuICAgIHZhciBsb2dFbGVtZW50O1xyXG4gICAgdmFyIHNlbGVjdENvbW1hbmQ7XHJcbiAgICB2YXIgc2VuZEJ1dHRvbjtcclxuICAgIHZhciBwYXJhbWV0ZXJFbGVtZW50cztcclxuXHJcbiAgICB2YXIgY29ubmVjdGlvbjtcclxuICAgIHZhciBtb2R1bGVJbml0O1xyXG4gICAgdmFyIGN1cnJlbnRDb21tYW5kO1xyXG4gICAgdmFyIHBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3Q7XHJcbiAgICB2YXIgQ09NTUFORF9JTlBVVF9BTU9VTlQgPSAzO1xyXG4gICAgdmFyIERFRkFVTFRfQ09NTUFORF9OQU1FID0gXCJnZXRJcFwiO1xyXG5cclxuICAgIHZhciBjb21tYW5kcyA9IHtcclxuICAgICAgICBnZXRJcDoge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzTnVtYmVyOiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhc2tRdWVzdGlvbjoge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzTnVtYmVyOiAzXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY29tbWFuZHNWaWV3ID0ge1xyXG4gICAgICAgIGdldElwOiBbXSxcclxuICAgICAgICBhc2tRdWVzdGlvbjogIFtcInBsYWNlaG9sZGVyXCIsIFwi0YLQtdC60YHRgiDQstC+0L/RgNC+0YHQsFwiXVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBtb2R1bGVDb250cm9sbGVyIChhY3Rpb24pIHtcclxuICAgICAgICBtb2R1bGVJbml0W2FjdGlvbl0uZm9yRWFjaChmdW5jdGlvbiBpbnZva2VDb250cm9sRnVuY3Rpb25zIChjb250cm9sRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgY29udHJvbEZ1bmN0aW9uKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRBY2Nlc3NUb0RPTSAoKSB7XHJcbiAgICAgICAgbG9nRWxlbWVudCA9IGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9QQU5FTF9MT0dfQ0xBU1MpO1xyXG4gICAgICAgIHNlbGVjdENvbW1hbmQgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTKTtcclxuICAgICAgICBzZW5kQnV0dG9uID0gIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9TRU5EX0NPTU1BTkRfQlVUVE9OX0NMQVNTKTtcclxuICAgICAgICBwYXJhbWV0ZXJFbGVtZW50cyA9ICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFSQU1FVEVSU19DTEFTUywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNldHVwTG9uZ1BvbGxDb25uZWN0aW9uICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlciA9ICh1c2VySWQpID8gdXNlcklkIDogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIGlmKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25uZWN0aW9uID0gZGF0YUNvbm5lY3Rvci5jcmVhdGVMb25nUG9sbENvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgIGNvbmZpZy5DT01NQU5EX1BBVEhfUFJFRklYICsgdXNlciArIFwiL2NvbW1hbmRzUmVzcG9uc2UvLmpzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbG9nLmNsZWFyKCk7XHJcbiAgICAgICAgY29ubmVjdGlvbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBjb21tYW5kQ2hhbmdlQ2FsbGJhY2sgKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSAzICYmIHRoaXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhICA9IHBhcnNlci5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nLndyaXRlKGRhdGEub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29ubmVjdGlvbi5zZW5kKClcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbG9zZUxvbmdQb2xsQ29ubmVjdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlcXVlc3RDb21tYW5kIChjb21tYW5kT2JqZWN0LCByZXF1ZXN0UGF0aCkge1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGNvbW1hbmRPYmplY3QpO1xyXG4gICAgICAgIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIGpzb25EYXRhLFxyXG4gICAgICAgICAgICBcIlBVVFwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29tbWFuZCAoKSB7XHJcbiAgICAgICAgdmFyIHBhcmFtZXRlclByZWZpeCA9IFwicGFyYW1ldGVyXCI7XHJcbiAgICAgICAgY3VycmVudENvbW1hbmQgPSB7XHJcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiBzZWxlY3RDb21tYW5kLnZhbHVlLFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzTnVtYmVyOiBjb21tYW5kc1tzZWxlY3RDb21tYW5kLnZhbHVlXS5wYXJhbWV0ZXJzTnVtYmVyLFxyXG4gICAgICAgICAgICBpc0V4ZWN1dGU6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBwYXJhbWV0ZXJFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZihpbmRleCA8IGN1cnJlbnRDb21tYW5kLnBhcmFtZXRlcnNOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDb21tYW5kW3BhcmFtZXRlclByZWZpeCArIGluZGV4XSA9IGVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVQYXRoRm9yQ29tbWFuZFJlcXVlc3QgKHVzZXJJZCwgY29tbWFuZE5hbWUpIHtcclxuICAgICAgICB2YXIgdXNlciA9ICh1c2VySWQpID8gdXNlcklkIDogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIHBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3QgPSBjb25maWcuQ09NTUFORF9QQVRIX1BSRUZJWCArIHVzZXIgKyBcIi9jb21tYW5kcy9cIiArIGNvbW1hbmROYW1lICsgXCIuanNvblwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNlbmRCdXR0b25MaXN0ZW5lciAoKSB7XHJcbiAgICAgICAgY3JlYXRlQ29tbWFuZCgpO1xyXG4gICAgICAgIGNyZWF0ZVBhdGhGb3JDb21tYW5kUmVxdWVzdChudWxsLCBzZWxlY3RDb21tYW5kLnZhbHVlKTtcclxuICAgICAgICByZXF1ZXN0Q29tbWFuZChjdXJyZW50Q29tbWFuZCwgcGF0aEZvckN1cnJlbnRDb21tYW5kUmVxdWVzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheUNvbW1hbmRWaWV3IChjb21tYW5kTmFtZSkge1xyXG4gICAgICAgIHZhciBudW1iZXJPZkNvbW1hbmRJbnB1dHMgPSAgY29tbWFuZHNWaWV3W2NvbW1hbmROYW1lXS5sZW5ndGg7XHJcbiAgICAgICAgZm9yKHZhciBpID0gQ09NTUFORF9JTlBVVF9BTU9VTlQgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZihpIDwgbnVtYmVyT2ZDb21tYW5kSW5wdXRzKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJFbGVtZW50c1tpXS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyRWxlbWVudHNbaV0ucGxhY2Vob2xkZXIgPSBjb21tYW5kc1ZpZXdbY29tbWFuZE5hbWVdW2ldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyRWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZChjb25maWcuSU5WSVNJQkxFX0NMQVNTKTtcclxuICAgICAgICAgICAgICAgIHBhcmFtZXRlckVsZW1lbnRzW2ldLnZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXR1cExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgc2VsZWN0Q29tbWFuZC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGlzcGxheUNvbW1hbmRWaWV3KHNlbGVjdENvbW1hbmQudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbmRCdXR0b25MaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlSW5pdCA9IHtcclxuICAgICAgICBmaXJzdEluaXQ6IFtcclxuICAgICAgICAgICAgZ2V0QWNjZXNzVG9ET00sXHJcbiAgICAgICAgICAgIHNldHVwTGlzdGVuZXJzLFxyXG4gICAgICAgICAgICBkaXNwbGF5Q29tbWFuZFZpZXcuYmluZChudWxsLCBERUZBVUxUX0NPTU1BTkRfTkFNRSlcclxuICAgICAgICBdLFxyXG4gICAgICAgIHNldHVwOiBbXHJcbiAgICAgICAgICAgIHNldHVwTG9uZ1BvbGxDb25uZWN0aW9uXHJcbiAgICAgICAgXSxcclxuICAgICAgICBjbG9zZTogW1xyXG4gICAgICAgICAgICBjbG9zZUxvbmdQb2xsQ29ubmVjdGlvblxyXG4gICAgICAgIF1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udHJvbFBhbmVsKCkge31cclxuXHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLnNldHVwID0gbW9kdWxlQ29udHJvbGxlci5iaW5kKG51bGwsIFwic2V0dXBcIik7XHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLmNsb3NlID0gbW9kdWxlQ29udHJvbGxlci5iaW5kKG51bGwsIFwiY2xvc2VcIik7XHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLmZpcnN0SW5pdCA9IG1vZHVsZUNvbnRyb2xsZXIuYmluZChudWxsLCBcImZpcnN0SW5pdFwiKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IENvbnRyb2xQYW5lbCgpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZGF0YUNvbm5lY3RvciwgbG9nLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKTtcclxuLyogZXhwb3J0ZWQgZGFzaGJvYXJkICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHVzZXJMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgZXZlbnRFbWl0dGVyICovXHJcbi8qIGdsb2JhbCBzb3J0ZXIgKi9cclxuLyogZ2xvYmFsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIgKi9cclxuLyogZ2xvYmFsIGxvY2FsU3RvcmFnZU1hbmFnZXIgKi9cclxudmFyIGRhc2hib2FyZCA9IChmdW5jdGlvbiBjcmVhdGVEYXNoYm9hcmRDb250cm9sbGVyKGNvbmZpZywgZGF0YVNvdXJjZSwgdURhdGFNYW5hZ2VyLCB1TGlzdE1hbmFnZXIsIHNvcnRlciwgZXZlbnRFbWl0dGVyLCBjUGFuZWwpe1xyXG5cclxuICAgIHZhciBpbnRlcnZhbElkID0gW107XHJcblxyXG4gICAgdmFyIGNvbmRpdGlvbk1hbmFnZXIgPSAoZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIGxvY2FsU3RvcmFnZU1hbmFnZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzYXZlRGF0YSAoZGF0YSwgc3RvcmFnZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJpYWxEYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlTmFtZSwgc2VyaWFsRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RGF0YSAoc3RvcmFnZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJpYWxEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlcmlhbERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShzZXJpYWxEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB3cml0ZTogc2F2ZURhdGEsXHJcbiAgICAgICAgICAgICAgICBnZXQ6IGdldERhdGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH0pKCk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VNYW5hZ2VyLndyaXRlKHtcclxuICAgICAgICAgICAgICAgIGZpbHRlcjogY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnksXHJcbiAgICAgICAgICAgICAgICBzb3J0OiBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnksXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcklkOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWRcclxuICAgICAgICAgICAgfSwgY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSlcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBnZXRDdXJyZW50Q29uZGl0aW9uRnJvbUxvY2FsU3RvcmFnZShjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gbG9jYWxTdG9yYWdlTWFuYWdlci5nZXQoY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSk7XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5ID0gY29uZGl0aW9uLmZpbHRlcjtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gY29uZGl0aW9uLmN1cnJlbnRVc2VySWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY29uZGl0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2F2ZUNvbmRpdGlvbjogc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSxcclxuICAgICAgICAgICAgc2V0dXBDb25kaXRpb246IGdldEN1cnJlbnRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9KShtYWluQ29uZmlnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2V0dXAoY29uZmlnKTtcclxuICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgY1BhbmVsLmZpcnN0SW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cEV2ZW50RW1pdHRlciA9IGZ1bmN0aW9uIHNldHVwRXZlbnRFbWl0dGVyICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInVzZXJMaXN0XCIsIGZ1bmN0aW9uICBzZXR1cERhdGEgKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgbmV3RGF0YTtcclxuICAgICAgICAgICAgaWYoZGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdEYXRhID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld0RhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG5ld0RhdGEpLm1hcChmdW5jdGlvbiBzZXRVc2VyU2V0dGluZyh1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci5hZGRVc2VyVG9Vc2Vyc0FycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RhdGFbdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnNMaXN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3QgPSB1TGlzdE1hbmFnZXIudUxpc3QuY29uY2F0KHVzZXJzTGlzdCk7XHJcbiAgICAgICAgICAgIGNvbmRpdGlvbk1hbmFnZXIuc2V0dXBDb25kaXRpb24oXHJcbiAgICAgICAgICAgICAgICB0aGF0LmxvY2FsU2V0dGluZ3NTZXR1cC5iaW5kKHRoYXQpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0dXBVc2VyTGlzdERPTSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJsYXN0T25saW5lXCIsIGZ1bmN0aW9uIGxhc3RPbmxpbmVTdWIgKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJJZCA9IGRhdGFbMF07XHJcbiAgICAgICAgICAgIHZhciBsYXN0T25saW5lID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVwZGF0ZVVzZXJPbmxpbmVTdGF0dXModXNlcklkLCBsYXN0T25saW5lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJzZW5kTmV3TWVzc2FnZVwiLCBmdW5jdGlvbiBzZW5kTmV3TWVzc2FnZVN1YiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlckluZGV4ID0gdUxpc3RNYW5hZ2VyLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKGRhdGFbMF0pO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3RbdXNlckluZGV4XS5zZW5kTmV3TWVzc2FnZSA9IGRhdGFbMV07XHJcbiAgICAgICAgICAgIHRoYXQudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5sb2NhbFNldHRpbmdzU2V0dXAgPSBmdW5jdGlvbiBsb2NhbFNldHRpbmdzU2V0dXAoY29uZGl0aW9uKSB7XHJcbiAgICAgICAgaWYgKGNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uLmZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLnZhbHVlID0gY29uZGl0aW9uLmZpbHRlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5zb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NPUlRfU0VMRUNUX0lEKS52YWx1ZSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5jdXJyZW50VXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBjb25kaXRpb24uY3VycmVudFVzZXJJZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlcihjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIERBU0hCT0FSRF9DT05ESVRJT05cclxuXHJcbiAgICAvLyDRhNC40LvRjNGC0YDQsNGG0LjRjyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiBmaWx0ZXIoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0ZJTFRFUl9JTlBVVF9JRCkudmFsdWU7XHJcbiAgICAgICAgY29uZGl0aW9uTWFuYWdlci5zYXZlQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmZpbHRlckJ5TmFtZShjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAvLyDRgdC+0YDRgtC40YDQvtCy0LrQsCDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gc29ydCgpIHtcclxuICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnkgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NPUlRfU0VMRUNUX0lEKS52YWx1ZTtcclxuICAgICAgICBjb25kaXRpb25NYW5hZ2VyLnNhdmVDb25kaXRpb24oKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuc29ydFVzZXJzQnlGaWVsZCgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBVc2Vyc0xpc3RlbmVycyA9IGZ1bmN0aW9uIHNldHVwVXNlcnNMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIEFycmF5LmZyb20oY29uZmlnLnVzZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIGFkZExpc3RlbmVycyAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnVzZXJMaXN0ZW5lci5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpcnN0Q2hpbGQuaW5uZXJUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwVXNlckxpc3RET00gPSBmdW5jdGlvbiBzZXR1cFVzZXJMaXN0RE9NICgpIHtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuZGlzcGxheVVzZXJzKCk7XHJcbiAgICAgICAgdGhpcy5nZXRBY2Vzc1RvVXNlcnNMaXN0KCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cFVzZXJzTGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldEFjZXNzVG9Vc2Vyc0xpc3QgPSBmdW5jdGlvbiBhY2Nlc3NUb1VzZXJzRE9NKCkge1xyXG4gICAgICAgIGNvbmZpZy51c2VycyA9IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgIGNvbmZpZy51c2VyTGlzdC5VU0VSX0VMRU1FTlRfQ1NTX0NMQVNTLCB0cnVlXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0VXNlckxpc3QgPSBmdW5jdGlvbiBnZXRVc2VyTGlzdCAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgdmFyIGxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3IgPSBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJMaXN0KG51bGwpO1xyXG4gICAgICAgIGxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3Iub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbkZyb21EYXRhICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gbG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3Iuc2VuZCgpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlckxpc3RDb25uZWN0aW9uID0gbG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvcjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnVzZXJMaXN0ZW5lciA9IGZ1bmN0aW9uIHVzZXJMaXN0ZW5lcih1c2VySWQpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIodXNlcklkKTtcclxuICAgICAgICB0aGlzLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQodXNlcklkKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC60YDRi9Cy0LDQtdGCINGH0LDRgiDRgSDRjtC30LXRgNC+0LwsINC30LDQs9GA0YPQttCw0LXRgiDQvNC10YHRgdCw0LTQttC4INGO0LfQtdGA0LAg0Lgg0L7RgtC+0LHRgNCw0LbQsNC10YIg0LjRhVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlciA9IGZ1bmN0aW9uIHN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIoXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICApIHtcclxuICAgICAgICAvLyB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIGNQYW5lbC5zZXR1cCgpO1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5jbGVhck1lc3NhZ2VMaXN0KCk7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLmdldFVzZXJEYXRhKHVzZXJJZClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc2F2ZUxvY2FsRGF0YSAoKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0FDVElWRV9VU0VSX0JMT0NLKS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uTWFuYWdlci5zYXZlQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkudXBkYXRlU2VuZE5ld01lc3NhZ2VGbGFnKHVzZXJJZCwgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zID0gZnVuY3Rpb24gc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlciwgY29uZmlnLkFETUlOX05BTUUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuY2xvc2VDb252ZXJzYXRpb24uYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhhdC5maWx0ZXIuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgICAgICB0aGF0LnNvcnQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB1c2VyRGF0YU1hbmFnZXIuc2V0TWVzc2FnZUFzUmVhZC5iaW5kKHVzZXJEYXRhTWFuYWdlcikpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C+0LzQtdGH0LDQtdGCINC60LDQvdCw0Lsg0Y7Qt9C10YDQsCDQutCw0Log0L/RgNC+0YfQuNGC0LDQvdC90YvQuSAo0LXRgdC70Lgg0YLQsNC8INC10YHRgtGMINC90LXQv9GA0L7Rh9C40YLQsNC90L3Ri9C1INGB0L7QvtCx0YnQtdC90LjRjylcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQgPSBmdW5jdGlvbiBtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gdUxpc3RNYW5hZ2VyLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3VzZXJJbmRleF0uc2VuZE5ld01lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShbe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgZmllbGROYW1lOiBcInNlbmROZXdNZXNzYWdlXCIsXHJcbiAgICAgICAgICAgIGZpZWxkVmFsdWU6IGZhbHNlXHJcbiAgICAgICAgfV0pO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQl9Cw0LrRgNGL0LLQsNC10YIg0LrQsNC90LDQuyDQvtCx0YnQtdC90LjRjyDRgSDRjtC30LXRgNC+0Lwg0Lgg0YfQsNGCXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZUNvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uIGNsb3NlQ29udmVyc2F0aW9uICgpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0FDVElWRV9VU0VSX0JMT0NLKS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IG51bGw7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIGNQYW5lbC5jbG9zZSgpO1xyXG4gICAgICAgIGNvbmRpdGlvbk1hbmFnZXIuc2F2ZUNvbmRpdGlvbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQtNC+0LHQsNCy0LvRj9C10YIg0L3QvtCy0YvQuSDQtdC70LXQvNC10L3Rgi3QuNC90LTQuNC60LDRgtC+0YAg0LJcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIgPSBmdW5jdGlvbiB0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCkge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlRGl2O1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHVMaXN0TWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGJsaW5rKGtleSkge1xyXG4gICAgICAgICAgICBuZXdNZXNzYWdlRGl2ID0gdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRVxyXG4gICAgICAgICAgICApWzBdO1xyXG4gICAgICAgICAgICBpZiAodUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgIW5ld01lc3NhZ2VEaXYpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZURpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRSk7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5hcHBlbmRDaGlsZChuZXdNZXNzYWdlRGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgbmV3TWVzc2FnZURpdikge1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQucmVtb3ZlQ2hpbGQobmV3TWVzc2FnZURpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgPSBmdW5jdGlvbiBzZXR1cEludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaW50ZXJ2YWxJZC5wdXNoID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gaW50ZXJ2YWwgKCkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh1TGlzdE1hbmFnZXIudUxpc3QpLm1hcChmdW5jdGlvbiB1c2VyTGlzdFVwZGF0ZSAodmlld0lkKSB7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudXBkYXRlVXNlck9ubGluZVN0YXR1cyhcclxuICAgICAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rbdmlld0lkXS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3ZpZXdJZF0ubGFzdE9ubGluZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhhdC5zZXR1cFVzZXJMaXN0RE9NKCk7XHJcbiAgICAgICAgfSxjb25maWcuaW50ZXJ2YWwuVVBEQVRFX1VTRVJTX1RJTUUpXHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG4gICAgICAgIGludGVydmFsSWQuZm9yRWFjaChmdW5jdGlvbiBjbGVhciAoaWQpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpZClcclxuICAgICAgICB9KTtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY2xlYXJNZXNzYWdlTGlzdCgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5jbGVhclVzZXJMaXN0KCk7XHJcbiAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlckxpc3RDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgY1BhbmVsLmNsb3NlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgRGFzaGJvYXJkQ29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZGF0YVNvdXJjZSwgdXNlckRhdGFNYW5hZ2VyLCB1c2VyTGlzdE1hbmFnZXIsIHNvcnRlciwgZXZlbnRFbWl0dGVyLCBjb250cm9sUGFuZWwpO1xyXG4vKiBleHBvcnRlZCBsYXVuY2hlciAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgbGF1bmNoZXIgPSAoZnVuY3Rpb24gY3JlYXRlTGF1bmNoZXIgKGNvbmZpZykge1xyXG5cclxuICAgIHZhciBET01WYXJpYWJsZXMgPSB7fTtcclxuICAgIHZhciBrZXlPZlZhbHVlID0ge1xyXG4gICAgICAgIGNoYXRUaXRsZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0VXJsOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRDbGFzczoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0UG9zaXRpb25TZWxlY3Q6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFsbG93TWluaW1pemU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbGxvd0RyYWc6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaG93VGltZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVpcmVOYW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJhZGlvIGJ1dHRvbiAobGFzdCBlbGVtZW50LCBpdCdzIGltcG90ZW50KVxyXG4gICAgICAgIG5ldHdvcmtSYWRpb1hNUjoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB0cnVlOiBcIlhIUlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBuZXR3b3JrUmFkaW9Mb25nUG9sbDoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB0cnVlOiBcImxvbmdQb2xsXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5ldHdvcmtSYWRpb0ZldGNoOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwiZmV0Y2hcIlxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gTGF1bmNoZXIoKSB7fVxyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5nZXREYXRhRnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBnZXREYXRhRnJvbUVsZW1lbnQgKGtleSkge1xyXG4gICAgICAgIHZhciBzcmMgPSBcIlwiO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgdHlwZU9mVmFsdWU7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoRE9NVmFyaWFibGVzKS5tYXAoZnVuY3Rpb24gc2V0dXBEYXRhIChlbGVtZW50TmFtZSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYoa2V5W2VsZW1lbnROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mVmFsdWUgPSBET01WYXJpYWJsZXNbZWxlbWVudE5hbWVdLmdldEF0dHJpYnV0ZShcInR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZU9mVmFsdWUgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihET01WYXJpYWJsZXNbZWxlbWVudE5hbWVdLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSBcIicmXCIgKyBcInR5cGVPZlJlcXVlc3RcIiArIFwiPSdcIiArIHRoYXQuZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnROYW1lLCB0eXBlT2ZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gXCInJlwiICsgZWxlbWVudE5hbWUgKyBcIj0nXCIgKyB0aGF0LmdldEVsZW1lbnRWYWx1ZShlbGVtZW50TmFtZSwgdHlwZU9mVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IGVsZW1lbnROYW1lICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKHNyYy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIHNyYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzcmM7XHJcbiAgICB9O1xyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5nZXRFbGVtZW50VmFsdWUgPSBmdW5jdGlvbiBnZXRFbGVtZW50VmFsdWUgKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gRE9NVmFyaWFibGVzW25hbWVdW2tleU9mVmFsdWVbbmFtZV0udHlwZU9mVmFsdWVdO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTY3JpcHQgKCkge1xyXG4gICAgICAgIHZhciBzcmMgPSBjb25maWcubGF1bmNoZXIuc3JjU3RhcnQgKyB0aGlzLmdldERhdGFGcm9tRWxlbWVudChrZXlPZlZhbHVlKTtcclxuICAgICAgICBzcmMgKz0gY29uZmlnLmxhdW5jaGVyLnNyY0VuZDtcclxuICAgICAgICBET01WYXJpYWJsZXMuc2NyaXB0Q29kZS5pbm5lckhUTUwgPSBzcmM7XHJcbiAgICB9XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBjb25maWcubGF1bmNoZXIuYWZ0ZXIubWFwKChmdW5jdGlvbiBjcmVhdGVTY3JpcHRQYXJ0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIERPTVZhcmlhYmxlc1tlbGVtZW50XSA9ICBnZXRFbGVtZW50KGNvbmZpZy5sYXVuY2hlci5wYXR0ZXJuICsgZWxlbWVudCwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICBET01WYXJpYWJsZXNbZWxlbWVudF0uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGNyZWF0ZVNjcmlwdC5iaW5kKHRoYXQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiBjbG9zZUFwcCAoKSB7XHJcbiAgICAgICAgRE9NVmFyaWFibGVzID0ge307XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTGF1bmNoZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCBhYm91dCAqL1xyXG4vLyBTVFVCIC8vXHJcbnZhciBhYm91dCA9IChmdW5jdGlvbiBjcmVhdGVBYm91dFBhZ2VBcHAgKCkge1xyXG4gICAgZnVuY3Rpb24gQWJvdXQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIEFib3V0LnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIEFib3V0LnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uIGNsb3NlQXBwICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgQWJvdXQoKTtcclxuXHJcbn0pKCk7XHJcbi8qIGdsb2JhbCBkYXNoYm9hcmQgKi9cclxuLyogZ2xvYmFsIGxhdW5jaGVyICovXHJcbi8qIGdsb2JhbCBhYm91dCAqL1xyXG4vKiBnbG9iYWwgY2xlYXJFbGVtZW50Q29udGVudCAqL1xyXG4vKiBnbG9iYWwgdmlld0ZhY3RvcnkgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIG1haW5Db250cm9sbGVyID0gKGZ1bmN0aW9uIGNyZWF0ZU1haW5Db250cm9sbGVyIChjb25maWcpIHtcclxuXHJcbiAgICB2YXIgbWF0Y2hlc0h0bWxQYXRoID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogY29uZmlnLnJvdXRlci5EQVNIQk9BUkRfSFRNTF9QQVRILFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGNvbmZpZy5yb3V0ZXIuTEFVTkNIRVJfSFRNTF9QQVRILFxyXG4gICAgICAgIGFib3V0OiBjb25maWcucm91dGVyLkFCT1VUX0hUTUxfUEFUSFxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIGNsb3NlRnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLmNsb3NlQXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5jbG9zZUFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuY2xvc2VBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHN0YXJ0RnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLnN0YXJ0QXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5zdGFydEFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuc3RhcnRBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIgKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gaGFzQ2hhbmdlRXZlbnRBZGQgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhhdC5oYW5kbGVVcmwoZWxlbWVudC5uZXdVUkwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDQn9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLIC0g0YHRh9C40YLQsNGC0Ywg0YHQvtGB0YLQvtGP0L3QuNC1INC4INC30LDQv9GD0YHRgtC40YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQulxyXG4gICAgICAgIHRoYXQuaGFuZGxlVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIjZGFzaGJvYXJkXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiBVUkxcclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVVcmwgPSBmdW5jdGlvbiBoYW5kbGVVcmwodXJsKSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSBudWxsO1xyXG4gICAgICAgIGlmKHVybC5pbmRleE9mKFwiI1wiKSA9PT0gLTEpe1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaGFzaCA9IHVybC5zcGxpdCgnIycpLnBvcCgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VQcmV2aW91c1BhZ2UoaGFzaCk7XHJcblxyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhLicgKyBjb25maWcucm91dGVyLk5BVklHQVRJT05fQUNUSVZFX0NTUykuZm9yRWFjaChmdW5jdGlvbiByZW1vdmVDbGFzc0FjdGl2ZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLnJvdXRlci5OQVZJR0FUSU9OX0FDVElWRV9DU1MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmPVwiIycgKyBoYXNoICsgJ1wiXScpLmZvckVhY2goZnVuY3Rpb24gYWRkQ2xhc3NBY3RpdmUgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5yb3V0ZXIuTkFWSUdBVElPTl9BQ1RJVkVfQ1NTKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpO1xyXG4gICAgICAgIHZpZXdGYWN0b3J5LmNyZWF0ZVZpZXcobWF0Y2hlc0h0bWxQYXRoW2hhc2hdLCBudWxsLCBjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpLnRoZW4oZnVuY3Rpb24gaW52b2tlU3RhcnRGdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0RnVuY3Rpb25zW2hhc2hdKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VQcmV2aW91c1BhZ2UgPSBmdW5jdGlvbiBjbG9zZVByZXZpb3VzUGFnZShoYXNoKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoY2xvc2VGdW5jdGlvbnMpLm1hcChmdW5jdGlvbiBpbnZva2VDbG9zZUZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYoa2V5ICE9PSBoYXNoKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUZ1bmN0aW9uc1trZXldKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNYWluQ29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcblxyXG5tYWluQ29udHJvbGxlci5zdGFydEFwcCgpOyJdfQ==
