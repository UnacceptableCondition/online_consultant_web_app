var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort",CSS_ACTIVE_USER_BLOCK:"root-touchsoft-dashboard_active-user",CSS_CONTROL_PANEL_LOG_CLASS:"root-touchsoft-dashboard_control-log",CSS_CONTROL_PANEL_SELECT_CLASS:"root-touchsoft-dashboard_control_select_command",CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS:"root-touchsoft-dashboard_control_send-command-button",CSS_CONTROL_PARAMETERS_CLASS:"root-touchsoft-dashboard_control_parameter-input",CSS_CONTROL_PANEL_LOG_ELEMENT_CLASS:"root-touchsoft-dashboard_control-log-inner-information"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","networkRadioLongPoll","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?",srcEnd:"'&gt&lt/script&gt"},userList:{USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online"},chatSettings:{typeOfRequest:"longPoll"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},interval:{UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e3},router:{ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",ADMIN_NAME:"Admin",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message",COMMAND_PATH_PREFIX:"https://onlineconsultantwebapp.firebaseio.com/usersSettings/"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,n){var r;return 1<e.length&&(t<(r=function(e,t,s,n){for(var r,a,o,i,u=e[Math.floor((s+t)/2)][n],c=t,l=s;c<=l;){for(;e[c][n]>u;)c++;for(;e[l][n]<u;)l--;c<=l&&(o=l,i=(r=e)[a=c],r[a]=r[o],r[o]=i,c++,l--)}return c}(e,t,s,n))-1&&this.quickSort(e,t,r-1,n),r<s&&this.quickSort(e,r,s,n)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.setupDataBaseAPI=function(e){return"fetch"===e?{request:t.requestFetch,getNewConnectorAPI:t.setupDataBaseAPI}:"XHR"===e?{request:t.requestXMR,getNewConnectorAPI:t.setupDataBaseAPI}:{request:t.requestXMR,createLongPollConnection:t.longPoll,getNewConnectorAPI:t.setupDataBaseAPI}},s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,r,a,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(a,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},r?s.send(r):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},(t=new s).setupDataBaseAPI(e.typeOfRequest)}(dataConnectorConfig),dataSource=function(o,t){var s,r="userList",n="usersMessages",a="usersSettings",i={isMinimize:!1,readLastMessage:!0};function u(){}function c(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function l(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}return u.prototype.createRequestPath=function(e,t,s,n){var r=e;return null!==n&&(r+="/"+n),null!==t&&(r+="/"+t),null!==s&&(r+="/"+s),r+=".json"},u.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},u.prototype.setData=function(e,t,s,n,r){var a;return a="PUT"===t?this.createRequestPath(dataBaseUrl,n,s,e):this.createRequestPath(dataBaseUrl,n,null,e),o.request(a,JSON.stringify(r),t,"application/json")},u.prototype.addNewUserToDataSource=function(t,e){var s=new Date,n=this;i.userName=e,Object.keys(i).map(function(e){return n.setData(a,"PUT",e,t,i[e]),!0}),this.setData(r,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},u.prototype.getDataSourceAPI=function(e){return e&&(t.chatSettings.typeOfRequest=e),u.prototype.getData="longPoll"===t.chatSettings.typeOfRequest?c:l,{usersAPI:{getUserList:s.getData.bind(s,r),getUserSettings:s.getData.bind(s,a),getUserMessages:s.getData.bind(s,n),getSettingField:s.getData.bind(s,a),sendMessage:s.setData.bind(s,n,"POST"),setSettingField:s.setData.bind(s,a,"PUT"),addNewUserToDataSource:s.addNewUserToDataSource.bind(s),updateLastOnline:s.setData.bind(s,r,"PUT","lastOnline"),updateSendNewMessageFlag:s.setData.bind(s,r,"PUT","sendNewMessage"),updateMessageIsReadField:s.setData.bind(s,n,"PUT")},commonAPI:{getHTML:s.getHTML.bind(s),getDataSourceAPI:s.getDataSourceAPI.bind(s)}}},(s=new u).getDataSourceAPI()}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/,getIp:/getIp/,askQuestion:/askQuestion/},r=/event: put/,t=/data: null/,a=/","data":/,o=/"path":"\/-/,n=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=/data: {"path":"\/","data":{"getIp":/,u=/data: {"path":"\/","data":{"askQuestion":/,c=/data: {"path":"\/askQuestion","data":/,l=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){return!!s[e].test(t)&&e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(a)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,n={},r={};return"read"===t?(n.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),n.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),n):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(a).shift(),n=JSON.parse(this.prepareDataBeforeJsonParse(e)),r[s]=n,r):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return l?(l=!1,this.getFirstData(e)):n.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseCommandAnswer=function(e){var t,s=/getIp/.test(e[e.length-1]),n=/askQuestion/.test(e[e.length-1]);return s&&n?(t=e[e.length-1].split(/data: {"path":"\/","data":/).pop().split("},"),[JSON.parse(t[0]+"}}"),JSON.parse("{"+t[1].trim().slice(0,-1))]):s?this.parseUserIpData(e):n?this.parseQuestionsData(e):void 0},e.prototype.parseUserIpData=function(e){return i.test(e)?JSON.parse(e[e.length-1].split(i).pop().trim().slice(0,-2)):JSON.parse(e[e.length-1].split(r).pop().split('data: {"path":"/getIp","data":').pop().trim().slice(0,-1))},e.prototype.parseQuestionsData=function(e){return u.test(e[e.length-1])?JSON.parse(e[e.length-1].split(u).pop().trim().slice(0,-2)):c.test(e[e.length-1])?JSON.parse(e[e.length-1].split(c).pop().trim().slice(0,-1)):JSON.parse('{"askQuestion":{"'+e[e.length-1].split('data: {"path":"/askQuestion/').pop().replace('","data"','"')+"}")},e.prototype.parse=function(e){var t=e.split(r),s=this.getTypeOfChanges(t[t.length-1]),n={type:s};return!!this.hasNewData(t)&&("message"===s||"read"===s?(n.object=this.parseUsersMessages(t,s),n):"sendNewMessage"===s||"lastOnline"===s||"userList"===s?(n.object=this.parseUserList(t,s),n):("getIp"===s||"askQuestion"===s)&&(n.object=this.parseCommandAnswer(t,s),n))},new e}(),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,r){var a=this;return new Promise(function(e,t){s?(n&&a.includeViewCssToPage(a.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(a.includeViewHTMLToPage(s,r))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var r=document.createElement("link");return n&&r.setAttribute("id",n),t&&r.setAttribute("rel",t),s&&r.setAttribute("type",s),r.setAttribute("href",e),r},new e}(dataSource),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var r=this.createMessageContainerDiv(n,s),a=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return r.appendChild(a),r.appendChild(o),r.appendChild(i),r},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,n=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:n,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,n){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort(),i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3===this.readyState&&200===this.status&&(t=n.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){return t[e].id=e,messageListManager.addMessageToMessageList(t[e]),!0}),messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){e.id===t.id&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){return t[e].id=e,s.push(t[e]),!0}),messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(){var e,t,s,n=this.getMessageFromInputElement(),r=(e=new Date,t=1===e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),e.getHours().toString().concat(":",t)),a=i.currentUserSettings.userName||i.ADMIN_NAME,o={sender:a,message:n,read:!1,date:r,id:s};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),log=function(t){function s(e){getElement(t.DOM.CSS_CONTROL_PANEL_LOG_CLASS).appendChild(e)}function n(e){var n=document.createElement("div");n.classList.add(t.DOM.CSS_CONTROL_PANEL_LOG_ELEMENT_CLASS);return function t(s,n){Object.keys(s).map(function(e){s[e]instanceof Object?t(s[e],n):n(s[e],e)})}(e,function(e,t){var s;(s=document.createElement("div")).innerHTML=t+": "+e,n.appendChild(s)}),n}return{write:function(e){e instanceof Array?e.forEach(function(e){s(n(e))}):s(n(e))},clear:function(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}.bind(null,t.DOM.CSS_CONTROL_PANEL_LOG_CLASS)}}(mainConfig),userListManager=function(a,e){function t(){this.uList=[]}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return s.classList.add(a.userList.USER_ELEMENT_CSS_CLASS),n.classList.add(a.userList.USER_ID_ELEMENT_CSS_CLASS),n.innerHTML=e,t?r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_ONLINE):r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(n),s.appendChild(r),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var n=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,n),online:n,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.updateUserOnlineStatus=function(e,t){var s=this.getUserFromUserListById(e);this.uList[s].lastOnline=t,this.uList[s].online=this.userIsOnline(t),this.uList[s].userElement=this.createUserElement(e,this.userIsOnline(t))},t.prototype.getUserFromUserListById=function(t){var s=this,n=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(n=e),!0}),n},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=a.interval.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(a.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,a.currentDashboardCondition.sortBy)},t.prototype.clearUserList=function(){this.uList=[]},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(a.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(a.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),controlPanel=function(o,i,s,n){var u,e,c,r,t,l,d,p={getIp:{parametersNumber:0,type:"async"},askQuestion:{parametersNumber:3,type:"pending"}};function a(e){t[e].forEach(function(e){e()})}function g(){var e,t,s,n,r,a;l={commandName:u.value,parametersNumber:p[u.value].parametersNumber,isExecute:!1,typeOfCommand:p[u.value].type},c.forEach(function(e,t){t<l.parametersNumber&&(l["parameter"+t]=e.value)}),e=null,t=u.value,s=e||o.currentUserSettings.userId,d=o.COMMAND_PATH_PREFIX+s+"/commands/"+t+".json",n=l,r=d,a=JSON.stringify(n),i.request(r,a,"PUT","application/json")}function S(){}return t={firstInit:[function(){getElement(o.DOM.CSS_CONTROL_PANEL_LOG_CLASS),u=getElement(o.DOM.CSS_CONTROL_PANEL_SELECT_CLASS),e=getElement(o.DOM.CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS),c=getElement(o.DOM.CSS_CONTROL_PARAMETERS_CLASS,!0)},function(){u.addEventListener("change",function(){}),e.addEventListener("click",g)}],setup:[function(e){var t=e||o.currentUserSettings.userId;r&&r.abort(),r=i.createLongPollConnection(o.COMMAND_PATH_PREFIX+t+"/commandsResponse/.json"),s.clear(),r.onreadystatechange=function(){if(3===this.readyState&&200===this.status){var e=n.parse(this.responseText);e&&s.write(e.object)}},r.send()}],close:[function(){r&&r.abort()}]},S.prototype.setup=a.bind(null,"setup"),S.prototype.close=a.bind(null,"close"),S.prototype.firstInit=a.bind(null,"firstInit"),new S}(mainConfig,dataConnector,log,longPollResponseParser),dashboard=function(s,n,r,a,e,o,i){var t=[];function u(){this.setupEventEmitter()}return u.prototype.startApp=function(){r.setup(s),this.getUserList(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions(),i.firstInit()},u.prototype.setupEventEmitter=function(){var n,r=this;o.addSubscribe("userList",function(e){var t,s=[];t=e instanceof Array?e[1]:e,Object.keys(t).map(function(e){return a.addUserToUsersArray(t[e],e,s),!0}),a.uList=a.uList.concat(s),n=r.getCurrentUserIdFromLocalStorage(),r.localSettingsSetup(n),r.setupUserListDOM()}),o.addSubscribe("lastOnline",function(e){var t=e[0],s=e[1];a.updateUserOnlineStatus(t,s)}),o.addSubscribe("sendNewMessage",function(e){var t=a.getUserFromUserListById(e[0]);a.uList[t].sendNewMessage=e[1],r.toggleNewMessageIndicatorToUser()})},u.prototype.saveCurrentConditionToLocalStorage=function(){var e=JSON.stringify({filter:s.currentDashboardCondition.filterBy,sort:s.currentDashboardCondition.sortBy,currentUserId:s.currentUserSettings.userId});localStorage.setItem(s.LOCAL_STORAGE_NAME,e)},u.prototype.getCurrentUserIdFromLocalStorage=function(){var e=localStorage.getItem(s.LOCAL_STORAGE_NAME),t=null;return e&&(t=JSON.parse(e),s.currentDashboardCondition.filterBy=t.filter,s.currentDashboardCondition.sortBy=t.sort,s.currentUserSettings.userId=t.currentUserId),t},u.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(s.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(s.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(s.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(s.currentUserSettings.userId)))},u.prototype.filter=function(){s.currentDashboardCondition.filterBy=getElement(s.DOM.CSS_FILTER_INPUT_ID).value,this.saveCurrentConditionToLocalStorage(),a.filterByName(s.currentDashboardCondition.filterBy),a.displayUsers()},u.prototype.sort=function(){s.currentDashboardCondition.sortBy=getElement(s.DOM.CSS_SORT_SELECT_ID).value,this.saveCurrentConditionToLocalStorage(),a.sortUsersByField(),a.displayUsers()},u.prototype.setupUsersListeners=function(){var t=this;Array.from(s.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})},u.prototype.setupUserListDOM=function(){a.displayUsers(),this.getAcessToUsersList(),this.toggleNewMessageIndicatorToUser(),this.setupUsersListeners()},u.prototype.getAcessToUsersList=function(){s.users=getElement(s.userList.USER_ELEMENT_CSS_CLASS,!0)},u.prototype.getUserList=function(){var e,t=n.usersAPI.getUserList(null);t.onreadystatechange=function(){this.status&&(e=longPollResponseParser.parse(this.responseText))&&o.emit(e.type,e.object)},t.send(),s.currentUserListConnection=t},u.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},u.prototype.startConversationWithUser=function(e){var t=this;s.currentUserSettings.userId=e,i.setup(),r.clearMessageList(),r.getUserData(e).then(function(){getElement(s.DOM.CSS_ACTIVE_USER_BLOCK).classList.remove(s.INVISIBLE_CLASS),t.saveCurrentConditionToLocalStorage()}),n.usersAPI.updateSendNewMessageFlag(e,!1)},u.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(s.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,s.ADMIN_NAME)),getElement(s.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(s.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(s.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},u.prototype.markMessageFromUserAsRead=function(e){var t=a.getUserFromUserListById(e);a.uList[t].sendNewMessage=!1,r.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},u.prototype.closeConversation=function(){getElement(s.DOM.CSS_ACTIVE_USER_BLOCK).classList.add(s.INVISIBLE_CLASS),s.currentUserSettings.userId=null,s.currentMessageConnection.abort(),i.close(),this.saveCurrentConditionToLocalStorage()},u.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(a.uList).map(function(e){return t=a.uList[e].userElement.getElementsByClassName(s.CSS_HAVE_NEW_MESSAGE_STYLE)[0],a.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(s.CSS_HAVE_NEW_MESSAGE_STYLE),a.uList[e].userElement.appendChild(t)),!a.uList[e].sendNewMessage&&t&&a.uList[e].userElement.removeChild(t),!0})},u.prototype.setupIntervalFunctions=function(){var e=this;t.push=setInterval(function(){Object.keys(a.uList).map(function(e){return a.updateUserOnlineStatus(a.uList[e].userId,a.uList[e].lastOnline),!0}),e.setupUserListDOM()},s.interval.UPDATE_USERS_TIME)},u.prototype.closeApp=function(){t.forEach(function(e){clearInterval(e)}),userDataManager.clearMessageList(),a.clearUserList(),s.currentMessageConnection&&s.currentMessageConnection.abort(),s.currentUserListConnection.abort(),i.close()},new u}(mainConfig,dataSource,userDataManager,userListManager,0,eventEmitter,controlPanel),launcher=function(s){var o={},n={chatTitle:{typeOfValue:"value"},chatUrl:{typeOfValue:"value"},chatClass:{typeOfValue:"value"},chatPositionSelect:{typeOfValue:"value"},allowMinimize:{typeOfValue:"checked"},allowDrag:{typeOfValue:"checked"},showTime:{typeOfValue:"checked"},requireName:{typeOfValue:"checked"},networkRadioXMR:{typeOfValue:"value",true:"XHR"},networkRadioLongPoll:{typeOfValue:"value",true:"longPoll"},networkRadioFetch:{typeOfValue:"value",true:"fetch"}};function e(){}return e.prototype.getDataFromElement=function(s){var n,r="",a=this;return Object.keys(o).map(function(e,t){return s[e]&&(0<t?"radio"===(n=o[e].getAttribute("type"))?o[e].checked&&(r+="'&typeOfRequest='"+a.getElementValue(e,n)):r+="'&"+e+"='"+a.getElementValue(e,n):r+=e+"='"+a.getElementValue(e)),!0}),r.length<1&&(r=null),r},e.prototype.getElementValue=function(e){return o[e][n[e].typeOfValue]},e.prototype.startApp=function(){var t=this;s.launcher.after.map(function(e){return o[e]=getElement(s.launcher.pattern+e,!1,!0),o[e].addEventListener("input",function(){var e=s.launcher.srcStart+this.getDataFromElement(n);e+=s.launcher.srcEnd,o.scriptCode.innerHTML=e}.bind(t)),!0})},e.prototype.closeApp=function(){o={}},new e}(mainConfig),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),mainController=function(s){var n={dashboard:s.router.DASHBOARD_HTML_PATH,configuration:s.router.LAUNCHER_HTML_PATH,about:s.router.ABOUT_HTML_PATH},r={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},a={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function e(){}return e.prototype.startApp=function(){var t=this;window.addEventListener("hashchange",function(e){t.handleUrl(e.newURL)}),t.handleUrl(window.location.href+"#dashboard")},e.prototype.handleUrl=function(e){var t;-1!==e.indexOf("#")&&(t=e.split("#").pop(),this.closePreviousPage(t),document.querySelectorAll("a."+s.router.NAVIGATION_ACTIVE_CSS).forEach(function(e){e.classList.remove(s.router.NAVIGATION_ACTIVE_CSS)}),document.querySelectorAll('a[href="#'+t+'"]').forEach(function(e){e.classList.add(s.router.NAVIGATION_ACTIVE_CSS)}),clearElementContent(s.router.CONTENT_CLASS),viewFactory.createView(n[t],null,s.router.CONTENT_CLASS).then(function(){a[t]()}))},e.prototype.closePreviousPage=function(t){Object.keys(r).map(function(e){return e!==t&&r[e](),!0})},new e}(mainConfig);mainController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwiQ1NTX0FDVElWRV9VU0VSX0JMT0NLIiwiQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTIiwiQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTIiwiQ1NTX0NPTlRST0xfU0VORF9DT01NQU5EX0JVVFRPTl9DTEFTUyIsIkNTU19DT05UUk9MX1BBUkFNRVRFUlNfQ0xBU1MiLCJDU1NfQ09OVFJPTF9QQU5FTF9MT0dfRUxFTUVOVF9DTEFTUyIsImxhdW5jaGVyIiwicGF0dGVybiIsImFmdGVyIiwic3JjU3RhcnQiLCJzcmNFbmQiLCJ1c2VyTGlzdCIsIlVTRVJfRUxFTUVOVF9DU1NfQ0xBU1MiLCJVU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTIiwiVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkUiLCJVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FIiwiY2hhdFNldHRpbmdzIiwidHlwZU9mUmVxdWVzdCIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24iLCJmaWx0ZXJCeSIsInNvcnRCeSIsImludGVydmFsIiwiVVBEQVRFX1VTRVJTX1RJTUUiLCJPTkxJTkVfSU5URVJWQUwiLCJyb3V0ZXIiLCJBQk9VVF9IVE1MX1BBVEgiLCJMQVVOQ0hFUl9IVE1MX1BBVEgiLCJEQVNIQk9BUkRfSFRNTF9QQVRIIiwiQ09OVEVOVF9DTEFTUyIsIk5BVklHQVRJT05fQUNUSVZFX0NTUyIsIm1lc3NhZ2VzIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfTUVTU0FHRV9DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIklOVklTSUJMRV9DTEFTUyIsIkRBVEFfQkFTRV9VUkwiLCJBRE1JTl9OQU1FIiwiQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MiLCJMT0NBTF9TVE9SQUdFX05BTUUiLCJDU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRSIsIkNPTU1BTkRfUEFUSF9QUkVGSVgiLCJkYXRhQmFzZVVybCIsImdldEVsZW1lbnQiLCJzZWxlY3RvciIsImlzQWxsIiwiaXRJc0lkIiwic2VsZWN0b3JTdGFydCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwic29ydGVyIiwiU29ydGVyIiwicHJvdG90eXBlIiwicXVpY2tTb3J0IiwiaXRlbXMiLCJsZWZ0IiwicmlnaHQiLCJzb3J0RmllbGQiLCJpbmRleCIsImxlbmd0aCIsImZpcnN0SW5kZXgiLCJzZWNvbmRJbmRleCIsInRlbXAiLCJwaXZvdCIsIk1hdGgiLCJmbG9vciIsImkiLCJqIiwicGFydGl0aW9uIiwidGhpcyIsImNsZWFyRWxlbWVudENvbnRlbnQiLCJlbGVtZW50U2VsZWN0b3IiLCJlbGVtZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwic2V0dXBEYXRhQmFzZUFQSSIsInJlcXVlc3QiLCJyZXF1ZXN0RmV0Y2giLCJnZXROZXdDb25uZWN0b3JBUEkiLCJyZXF1ZXN0WE1SIiwiY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uIiwibG9uZ1BvbGwiLCJyZXF1ZXN0UGF0aCIsInJlcXVlc3RCb2R5IiwicmVxdWVzdFR5cGUiLCJjb250ZW50VHlwZSIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsIkNvbnRlbnQtVHlwZSIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwidGV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIkpTT04iLCJwYXJzZSIsIm9uZXJyb3IiLCJzdGF0dXNUZXh0Iiwic2VuZCIsInRhcmdldFVybCIsInhodHRwIiwiZGF0YVNvdXJjZSIsImNvbmZpZyIsImRhdGFTb3VyY2VJbnN0YW5jZSIsIlVTRVJfTElTVCIsIlVTRVJfTUVTU0FHRVMiLCJVU0VSU19TRVRUSU5HUyIsIm5ld1VzZXJEYXRhIiwiaXNNaW5pbWl6ZSIsInJlYWRMYXN0TWVzc2FnZSIsIkRhdGFTb3VyY2UiLCJsb25nUG9sbENvbm5lY3QiLCJkYXRhVHlwZSIsImNyZWF0ZVJlcXVlc3RQYXRoIiwiYmFzaWNDb25uZWN0IiwiYmluZCIsImRhdGFCYXNlVVJMIiwicmVxdWVzdFBvc3RmaXgiLCJyZXF1ZXN0UHJlZml4IiwicGF0aCIsImdldEhUTUwiLCJzZXREYXRhIiwiZmllbGROYW1lIiwidmFsdWUiLCJzdHJpbmdpZnkiLCJhZGROZXdVc2VyVG9EYXRhU291cmNlIiwiZGF0ZSIsIkRhdGUiLCJ0aGF0IiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsInNldHRpbmdOYW1lIiwibGFzdE9ubGluZSIsImdldFRpbWUiLCJzZW5kTmV3TWVzc2FnZSIsImdldERhdGFTb3VyY2VBUEkiLCJnZXREYXRhIiwidXNlcnNBUEkiLCJnZXRVc2VyTGlzdCIsImdldFVzZXJTZXR0aW5ncyIsImdldFVzZXJNZXNzYWdlcyIsImdldFNldHRpbmdGaWVsZCIsInNlbmRNZXNzYWdlIiwic2V0U2V0dGluZ0ZpZWxkIiwidXBkYXRlTGFzdE9ubGluZSIsInVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyIsInVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZCIsImNvbW1vbkFQSSIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsImV2ZW50cyIsImFkZFN1YnNjcmliZSIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwicHVzaCIsImZpbHRlciIsImVsZW1lbnRDYWxsYmFjayIsImVtaXQiLCJkYXRhIiwiZXZlbnQiLCJmb3JFYWNoIiwiY2FsbCIsImxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJ0eXBlc09mQ2hhbmdlIiwibWVzc2FnZSIsInNldHRpbmciLCJyZWFkIiwiZ2V0SXAiLCJhc2tRdWVzdGlvbiIsImV2ZW50UmVndWxhciIsImhhc051bGxEYXRhIiwiZ2V0RGF0YVJlZ3VsYXIiLCJpdElzTmV3TWVzc2FnZVJlZ3VsYXIiLCJpdElzTmV3VXNlckxpc3RSZWd1bGFyIiwiaXRJc0ZpcnN0SXBEYXRhUmVndWxhciIsIml0SXNGaXJzdFF1ZXN0aW9uc0RhdGEiLCJpdElzTmV3UXVlc3Rpb25zQ29tbWFuZCIsIml0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiIsIkxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJnZXRUeXBlT2ZDaGFuZ2VzIiwiYW5zd2VyRGF0YSIsInR5cGVOYW1lIiwidGVzdCIsInByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlIiwic3BsaXQiLCJ0cmltIiwic2xpY2UiLCJwYXJzZVVzZXJzTWVzc2FnZXMiLCJjaGFuZ2VUeXBlIiwibWVzc2FnZUlkIiwicmVzdWx0T2JqZWN0IiwiaWQiLCJwb3AiLCJzaGlmdCIsImdldEZpcnN0RGF0YSIsImhhc05ld0RhdGEiLCJwYXJzZVVzZXJMaXN0IiwiZ2V0VXNlcklkIiwiZXhjZXB0aW9uIiwicGFyc2VDb21tYW5kQW5zd2VyIiwiaXRJc0lQSW5mb3JtYXRpb24iLCJpdElzUXVlc3Rpb25zSW5mb3JtYXRpb24iLCJwYXJzZVVzZXJJcERhdGEiLCJwYXJzZVF1ZXN0aW9uc0RhdGEiLCJyZXBsYWNlIiwicmVzdWx0IiwicmVzdWx0T2ZQYXJzZSIsInR5cGUiLCJvYmplY3QiLCJ2aWV3RmFjdG9yeSIsIlZpZXdGYWN0b3J5IiwiY3JlYXRlVmlldyIsImh0bWxQYXRoIiwiY3NzUGF0aCIsImNvbnRhaW5lckNsYXNzIiwiaW5jbHVkZVZpZXdDc3NUb1BhZ2UiLCJjcmVhdGVDU1NMaW5rIiwiaW5jbHVkZVZpZXdIVE1MVG9QYWdlIiwiRXJyb3IiLCJjb250YWluZXJEaXYiLCJodG1sIiwiaW5uZXJIVE1MIiwibGluayIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZpbGVQYXRoIiwicmVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJzZW5kZXIiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwiRElTUExBWV9NRVNTQUdFX0RBVEUiLCJtZXNzYWdlU2VuZGVyRGl2IiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIm1lc3NhZ2VEaXYiLCJESVNQTEFZX01FU1NBR0UiLCJnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQiLCJtZXNzYWdlc0lzUmVhZCIsImZpZWxkVmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0Rpc3BsYXkiLCJzdHlsZUNsYXNzZXMiLCJkaXYiLCJzdHlsZSIsImNyZWF0ZU1lc3NhZ2VMaXN0IiwibWVzc2FnZU9iamVjdHMiLCJuZXdNZXNzYWdlTGlzdCIsInVwZGF0ZU1lc3NhZ2VMaXN0IiwiZGlzcGxheU1lc3NhZ2VzIiwiYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqIiwiY2xlYXJDaGF0IiwibWVzc2FnZU9iamVjdCIsInVzZXJEYXRhTWFuYWdlciIsIlVzZXJEYXRhTWFuYWdlciIsImdldFVzZXJEYXRhIiwiZ2V0VXNlckNvcnJlc3BvbmRlbmNlIiwiY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uIiwiYWJvcnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwia2V5IiwibWVzc2FnZXNPYmplY3QiLCJjbGVhck1lc3NhZ2VMaXN0IiwiY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlIiwic2F2ZVNldHRpbmdGaWVsZCIsInVwZGF0ZVVzZXJPbmxpbmUiLCJtaW51dGVzIiwiZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQiLCJnZXRNaW51dGVzIiwidG9TdHJpbmciLCJnZXRIb3VycyIsImNvbmNhdCIsInNhdmVNZXNzYWdlVG9EYXRhU291cmNlIiwic2V0TWVzc2FnZUFzUmVhZCIsInNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UiLCJzZXR0aW5ncyIsIm5ld0ZpZWxkU2V0dGluZyIsImxvZyIsImRpc3BsYXlNZXNzYWdlIiwibWVzc2FnZUVsZW1lbnQiLCJyZXN1bHREaXYiLCJkZXBsb3lPYmplY3QiLCJkYXRhTmFtZSIsImlubmVyRGl2Iiwid3JpdGUiLCJBcnJheSIsImNsZWFyIiwidXNlckxpc3RNYW5hZ2VyIiwiVXNlckxpc3RNYW5hZ2VyIiwidUxpc3QiLCJjcmVhdGVVc2VyRWxlbWVudCIsImlzT25saW5lIiwidXNlckRpdiIsInVzZXJJZERpdiIsInVzZXJJbmRpY2F0b3IiLCJzZXRVc2VyTGlzdCIsInVzZXJMdXN0T2JqZWN0IiwiYWRkVXNlclRvVXNlcnNBcnJheSIsInVzZXIiLCJ1c2Vyc0xpc3QiLCJ1c2VySXNPbmxpbmUiLCJ1c2VyRWxlbWVudCIsIm9ubGluZSIsInZpc2libGUiLCJ1cGRhdGVVc2VyT25saW5lU3RhdHVzIiwidXNlckluZGV4IiwiZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQiLCJ1c2VyTWFuYWdlciIsImxhc3RVc2VyT25saW5lVGltZSIsImZpbHRlckJ5TmFtZSIsImluZGV4T2YiLCJzb3J0VXNlcnNCeUZpZWxkIiwiY2xlYXJVc2VyTGlzdCIsImRpc3BsYXlVc2VycyIsImVsZW0iLCJjb250cm9sUGFuZWwiLCJwYXJzZXIiLCJzZWxlY3RDb21tYW5kIiwic2VuZEJ1dHRvbiIsInBhcmFtZXRlckVsZW1lbnRzIiwiY29ubmVjdGlvbiIsIm1vZHVsZUluaXQiLCJjdXJyZW50Q29tbWFuZCIsInBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3QiLCJjb21tYW5kcyIsInBhcmFtZXRlcnNOdW1iZXIiLCJtb2R1bGVDb250cm9sbGVyIiwiYWN0aW9uIiwiY29udHJvbEZ1bmN0aW9uIiwic2VuZEJ1dHRvbkxpc3RlbmVyIiwiY29tbWFuZE5hbWUiLCJjb21tYW5kT2JqZWN0IiwianNvbkRhdGEiLCJpc0V4ZWN1dGUiLCJ0eXBlT2ZDb21tYW5kIiwiQ29udHJvbFBhbmVsIiwiZmlyc3RJbml0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwiZGFzaGJvYXJkIiwidURhdGFNYW5hZ2VyIiwidUxpc3RNYW5hZ2VyIiwiY1BhbmVsIiwiaW50ZXJ2YWxJZCIsIkRhc2hib2FyZENvbnRyb2xsZXIiLCJzZXR1cEV2ZW50RW1pdHRlciIsInN0YXJ0QXBwIiwic2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucyIsInNldHVwSW50ZXJ2YWxGdW5jdGlvbnMiLCJjb25kaXRpb24iLCJuZXdEYXRhIiwiZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UiLCJsb2NhbFNldHRpbmdzU2V0dXAiLCJzZXR1cFVzZXJMaXN0RE9NIiwidG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlciIsInNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UiLCJzZXJpYWxDb25kaXRpb24iLCJzb3J0IiwiY3VycmVudFVzZXJJZCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwic3RhcnRDb252ZXJzYXRpb25XaXRoVXNlciIsInNldHVwVXNlcnNMaXN0ZW5lcnMiLCJmcm9tIiwidXNlcnMiLCJ1c2VyTGlzdGVuZXIiLCJpbm5lclRleHQiLCJnZXRBY2Vzc1RvVXNlcnNMaXN0IiwibG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvciIsImN1cnJlbnRVc2VyTGlzdENvbm5lY3Rpb24iLCJtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkIiwicmVtb3ZlIiwiY2xvc2VDb252ZXJzYXRpb24iLCJuZXdNZXNzYWdlRGl2IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNldEludGVydmFsIiwidmlld0lkIiwiY2xvc2VBcHAiLCJjbGVhckludGVydmFsIiwiRE9NVmFyaWFibGVzIiwia2V5T2ZWYWx1ZSIsImNoYXRUaXRsZSIsInR5cGVPZlZhbHVlIiwiY2hhdFVybCIsImNoYXRDbGFzcyIsImNoYXRQb3NpdGlvblNlbGVjdCIsImFsbG93TWluaW1pemUiLCJhbGxvd0RyYWciLCJzaG93VGltZSIsInJlcXVpcmVOYW1lIiwibmV0d29ya1JhZGlvWE1SIiwidHJ1ZSIsIm5ldHdvcmtSYWRpb0xvbmdQb2xsIiwibmV0d29ya1JhZGlvRmV0Y2giLCJMYXVuY2hlciIsImdldERhdGFGcm9tRWxlbWVudCIsInNyYyIsImVsZW1lbnROYW1lIiwiZ2V0QXR0cmlidXRlIiwiY2hlY2tlZCIsImdldEVsZW1lbnRWYWx1ZSIsIm5hbWUiLCJzY3JpcHRDb2RlIiwiYWJvdXQiLCJBYm91dCIsIm1haW5Db250cm9sbGVyIiwibWF0Y2hlc0h0bWxQYXRoIiwiY29uZmlndXJhdGlvbiIsImNsb3NlRnVuY3Rpb25zIiwic3RhcnRGdW5jdGlvbnMiLCJNYWluQ29udHJvbGxlciIsIndpbmRvdyIsImhhbmRsZVVybCIsIm5ld1VSTCIsImxvY2F0aW9uIiwiaHJlZiIsInVybCIsImhhc2giLCJjbG9zZVByZXZpb3VzUGFnZSJdLCJtYXBwaW5ncyI6IkFBR0EsSUFBSUEsV0FBYSxDQUNiQyxJQUFLLENBRURDLG9CQUFxQixzQ0FFckJDLDhCQUEr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QUFTQyxpQkFBaUIsS0FBT3FFLEVBQU9oRyxPQUFPSyx1QkFBdUJzSixRQUFRLFNBQTRCdkcsR0FDdEdBLEVBQVFrTSxVQUFVeUksT0FBTy9SLEVBQU9oRyxPQUFPSyx5QkFFM0NxQixTQUFTQyxpQkFBaUIsWUFBY2taLEVBQU8sTUFBTWxSLFFBQVEsU0FBeUJ2RyxHQUNsRkEsRUFBUWtNLFVBQVVDLElBQUl2SixFQUFPaEcsT0FBT0sseUJBR3hDNkMsb0JBQW9COEMsRUFBT2hHLE9BQU9JLGVBQ2xDd00sWUFBWUUsV0FBV29OLEVBQWdCVyxHQUFPLEtBQU03VSxFQUFPaEcsT0FBT0ksZUFBZXdFLEtBQUssV0FDbEZ5VixFQUFlUSxTQUt2QlAsRUFBZXRZLFVBQVU4WSxrQkFBb0IsU0FBMkJELEdBQ3BFbFQsT0FBT0MsS0FBS3dTLEdBQWdCdlMsSUFBSSxTQUE4QmtKLEdBSTFELE9BSEdBLElBQVE4SixHQUNQVCxFQUFlckosTUFFWixLQUlSLElBQUl1SixFQXBFTSxDQXNFbEJ6YyxZQUVIb2MsZUFBZTVEIiwiZmlsZSI6ImRhc2hib2FyZEFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbmZpZ1xyXG5cclxuLyogZXhwb3J0ZWQgbWFpbkNvbmZpZyAqL1xyXG52YXIgbWFpbkNvbmZpZyA9IHtcclxuICAgIERPTToge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC90LXQvtCx0YXQvtC00LjQvNC+INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L/QuNGB0L7QuiDRjtC30LXRgNC+0LJcclxuICAgICAgICBVU0VSX0xJU1RfQ1NTX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2Vycy1saXN0XCIsXHJcbiAgICAgICAgLy8g0JHQu9C+0Log0LIg0LrQvtGC0L7RgNGL0Lkg0LfQsNCz0YDRg9C20LDQtdGC0YHRjyDRh9Cw0YJcclxuICAgICAgICBDU1NfQ0hBVF9DT05UQUlOU19CTE9DS19TVFlMRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdFwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTQu9GPINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjiDQv9C+INC90LDQttCw0YLQuNGOXHJcbiAgICAgICAgQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3NlbmQtYnV0dG9uXCIsXHJcbiAgICAgICAgLy8g0JrQu9Cw0YHRgSDQutC90L7Qv9C60Lgg0LfQsNC60YDRi9Cy0LDRjtGJ0LXQuSDRh9Cw0YJcclxuICAgICAgICBDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2Nsb3NlLWNoYXRcIixcclxuICAgICAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDQv9Cw0YDQsNC80LXRgtGA0LAg0YTQuNC70YzRgtGA0LDRhtC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgICAgICBDU1NfRklMVEVSX0lOUFVUX0lEOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9maWx0ZXItaW5wdXRcIixcclxuICAgICAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDQv9Cw0YDQsNC80LXRgtGA0LAg0YHQvtGA0YLQuNGA0L7QstC60Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgICAgICBDU1NfU09SVF9TRUxFQ1RfSUQ6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3NvcnRcIixcclxuICAgICAgICAvLyDQmtC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0L7RgtC+0LHRgNCw0LbQsNC10YLRgdGPINGH0LDRgiDQuCDQutC+0L3RgtGA0L7QuyDQv9Cw0L3QtdC70YxcclxuICAgICAgICBDU1NfQUNUSVZFX1VTRVJfQkxPQ0s6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2FjdGl2ZS11c2VyXCIsXHJcblxyXG4gICAgICAgIC8vIENPTlRST0wgUEFORUxcclxuICAgICAgICAvLyDQmtC70LDRgdGBIGNvbnRyb2wgcGFuZWwg0LXQu9C10LzQtdC90YJcclxuICAgICAgICBDU1NfQ09OVFJPTF9QQU5FTF9MT0dfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NvbnRyb2wtbG9nXCIsXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jb250cm9sX3NlbGVjdF9jb21tYW5kXCIsXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfU0VORF9DT01NQU5EX0JVVFRPTl9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY29udHJvbF9zZW5kLWNvbW1hbmQtYnV0dG9uXCIsXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfUEFSQU1FVEVSU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY29udHJvbF9wYXJhbWV0ZXItaW5wdXRcIixcclxuICAgICAgICBDU1NfQ09OVFJPTF9QQU5FTF9MT0dfRUxFTUVOVF9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY29udHJvbC1sb2ctaW5uZXItaW5mb3JtYXRpb25cIlxyXG5cclxuICAgIH0sXHJcbiAgICBsYXVuY2hlcjoge1xyXG4gICAgICAgIHBhdHRlcm46IFwidG91Y2hzb2Z0X2NoYXQtbGF1bmNoZXJfXCIsXHJcbiAgICAgICAgYWZ0ZXIgOiBbXHJcbiAgICAgICAgICAgIFwiY2hhdFRpdGxlXCIsIFwiY2hhdFVybFwiLCBcImNoYXRDbGFzc1wiLCBcImNoYXRQb3NpdGlvblNlbGVjdFwiLFxyXG4gICAgICAgICAgICBcImFsbG93TWluaW1pemVcIiwgXCJhbGxvd0RyYWdcIiwgXCJyZXF1aXJlTmFtZVwiLCBcInNob3dUaW1lXCIsIFwibmV0d29ya1JhZGlvWE1SXCIsXHJcbiAgICAgICAgICAgIFwibmV0d29ya1JhZGlvRmV0Y2hcIixcIm5ldHdvcmtSYWRpb0xvbmdQb2xsXCIsIFwic2NyaXB0Q29kZVwiXHJcbiAgICAgICAgXSxcclxuICAgICAgICBzcmNTdGFydDogXCImbHRzY3JpcHQgc3JjPSdodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL0hvbWV3b3JrXzIvbWFzdGVyL2pzL2NoYXQuanM/XCIsXHJcbiAgICAgICAgc3JjRW5kOiAgXCInJmd0Jmx0L3NjcmlwdCZndFwiXHJcbiAgICB9LFxyXG4gICAgdXNlckxpc3Q6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgdGLINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L7QsdGK0LXQutGC0L7QvCDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgVVNFUl9FTEVNRU5UX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlclwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPIGlkINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaWRcIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgtGLINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGB0YLQsNGC0YPRgdCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9mZmxpbmVcIixcclxuICAgICAgICBVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9ubGluZVwiXHJcbiAgICB9LFxyXG4gICAgY2hhdFNldHRpbmdzOiB7XHJcbiAgICAgICAgdHlwZU9mUmVxdWVzdDogXCJsb25nUG9sbFwiXHJcbiAgICB9LFxyXG4gICAgY3VycmVudFVzZXJTZXR0aW5nczoge1xyXG4gICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICB1c2VyTmFtZTogbnVsbFxyXG4gICAgfSxcclxuXHJcbiAgICBjdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uOiB7XHJcbiAgICAgICAgZmlsdGVyQnk6IG51bGwsXHJcbiAgICAgICAgc29ydEJ5OiBudWxsXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBpbnRlcnZhbDoge1xyXG4gICAgICAgIFVQREFURV9VU0VSU19USU1FOiA1MDAwLFxyXG4gICAgICAgIE9OTElORV9JTlRFUlZBTDogMTIwMDBcclxuICAgIH0sXHJcbiAgICByb3V0ZXI6IHtcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGFib3V0XHJcbiAgICAgICAgQUJPVVRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2Fib3V0Lmh0bWxcIixcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICBMQVVOQ0hFUl9IVE1MX1BBVEg6IFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9kYXNoYm9hcmQvY2hhdExhdW5jaGVyLmh0bWxcIixcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGRhc2hib2FyZFxyXG4gICAgICAgIERBU0hCT0FSRF9IVE1MX1BBVEg6IFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWxcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwLCDQsiDQutC+0YLQvtGA0YvQuSDQt9Cw0LPRgNGD0LbQsNC10YLRgdGPINC90LXQvtCx0YXQvtC00LjQvNCw0Y8g0YfQsNGB0YLRjCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgICAgQ09OVEVOVF9DTEFTUzogXCJjb250ZW50XCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEsINC+0YLQvNC10YfQsNGO0YnQuNC5INCw0LrRgtC40LLQvdGD0Y4g0YHRgtGA0LDQvdC40YbRgyDQsiDQv9Cw0L3QtdC70Lgg0L3QsNCy0LjQs9Cw0YbQuNC4XHJcbiAgICAgICAgTkFWSUdBVElPTl9BQ1RJVkVfQ1NTOiBcIm5hdmlnYXRpb24tYWN0aXZlXCJcclxuICAgIH0sXHJcbiAgICBtZXNzYWdlczoge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINC00LvRjyDRjdC70LXQvNC10L3QsNGCINGBINGB0L7QvtCx0YnQtdC90LjQtSwg0LXRgdC70Lgg0Y7Qt9C10YAg0L3QtSDQv9GA0L7Rh9C40YLQsNC7INGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9tZXNzYWdlLW5vdC1yZWFkXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZXNcIixcclxuXHJcbiAgICAgICAgLy8gbWVzc2FnZVxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0L3QsNGF0L7QtNC40YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyzQtNCw0YLQsCDQuCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19NRVNTQUdFX0NPTlRBSU5FUjogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWVsZW1lbnRzXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1zZW5kZXJcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINC00LDRgtGDINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfREFURTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWRhdGVcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0U6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZVwiXHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy8g0LrQu9Cw0YHRgSDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0LBcclxuICAgIElOVklTSUJMRV9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfaW52aXNpYmxlLWVsZW1lbnRcIixcclxuXHJcbiAgICBEQVRBX0JBU0VfVVJMOiBcImh0dHBzOi8vb25saW5lY29uc3VsdGFudHdlYmFwcC5maXJlYmFzZWlvLmNvbVwiLFxyXG5cclxuXHJcbiAgICBBRE1JTl9OQU1FOiBcIkFkbWluXCIsXHJcblxyXG4gICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINC/0LXRgNC10LQg0L7RgtC/0YDQsNCy0LrQvtC5INGO0LfQtdGA0YNcclxuICAgIENTU19DVVJSRU5UX0lOUFVUX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF90ZXh0YXJlYS1mb3ItbWVzc2FnZVwiLFxyXG5cclxuICAgIExPQ0FMX1NUT1JBR0VfTkFNRTogXCJjdXJyZW50Q29uZGl0aW9uXCIsXHJcblxyXG4gICAgLy8g0LTQu9GPINC90L7QstGL0YUg0YHQvtC+0LHRidC10L3QuNC5INC+0YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgIC8vINCV0YHQu9C4INGO0LfQtdGAINC/0YDQuNGB0LvQsNC7INGB0L7QvtC+0LHRidC10L3QuNC1LCDQvdCwINGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INCy0LXRiNCw0LXRgtGB0Y8g0Y3RgtC+0YIg0YHRgtC40LvRjFxyXG4gICAgQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaGF2ZS1uZXctbWVzc2FnZVwiLFxyXG5cclxuICAgIENPTU1BTkRfUEFUSF9QUkVGSVg6IFwiaHR0cHM6Ly9vbmxpbmVjb25zdWx0YW50d2ViYXBwLmZpcmViYXNlaW8uY29tL3VzZXJzU2V0dGluZ3MvXCJcclxuXHJcblxyXG5cclxuXHJcbn07XHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLyogZXhwb3J0ZWQgZGF0YUJhc2VVcmwgKi9cclxuLyogZXhwb3J0ZWQgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgZGF0YUJhc2VVcmwgPSBtYWluQ29uZmlnLkRBVEFfQkFTRV9VUkw7XHJcblxyXG52YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tRE9NIChzZWxlY3RvciwgaXNBbGwsIGl0SXNJZCkge1xyXG4gICAgdmFyIHNlbGVjdG9yU3RhcnQgPSAoaXRJc0lkKSA/IFwiI1wiIDogXCIuXCI7XHJcbiAgICBpZihpc0FsbCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG59O1xyXG5cclxuXHJcbnZhciBkYXRhQ29ubmVjdG9yQ29uZmlnID0ge1xyXG4gICAgdHlwZU9mUmVxdWVzdDogbWFpbkNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdFxyXG59O1xyXG5cclxuLy8gc2VydmljZVxyXG5cclxuLyogZXhwb3J0ZWQgc29ydGVyICovXHJcbnZhciBzb3J0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlTmV3U29ydGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlcigpIHt9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU29ydGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3dhcChpdGVtcywgZmlyc3RJbmRleCwgc2Vjb25kSW5kZXgpIHtcclxuICAgICAgICB2YXIgdGVtcCA9IGl0ZW1zW2ZpcnN0SW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW2ZpcnN0SW5kZXhdID0gaXRlbXNbc2Vjb25kSW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW3NlY29uZEluZGV4XSA9IHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcGFydGl0aW9uKGl0ZW1zLCBsZWZ0LCByaWdodCwgc29ydEZpZWxkKSB7XHJcbiAgICAgICAgdmFyIHBpdm90ID0gaXRlbXNbTWF0aC5mbG9vcigocmlnaHQgKyBsZWZ0KSAvIDIpXVtzb3J0RmllbGRdO1xyXG4gICAgICAgIHZhciBpID0gbGVmdDtcclxuICAgICAgICB2YXIgaiA9IHJpZ2h0O1xyXG5cclxuICAgICAgICB3aGlsZSAoaSA8PSBqKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVtc1tpXVtzb3J0RmllbGRdID4gcGl2b3QpIHtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoaXRlbXNbal1bc29ydEZpZWxkXSA8IHBpdm90KSB7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPD0gaikge1xyXG4gICAgICAgICAgICAgICAgc3dhcChpdGVtcywgaSwgaik7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ydGVyLnByb3RvdHlwZS5xdWlja1NvcnQgPSBmdW5jdGlvbiBxdWlja1NvcnQoXHJcbiAgICAgICAgaXRlbXMsXHJcbiAgICAgICAgbGVmdCxcclxuICAgICAgICByaWdodCxcclxuICAgICAgICBzb3J0RmllbGRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBpbmRleDtcclxuICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHBhcnRpdGlvbihpdGVtcywgbGVmdCwgcmlnaHQsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgaW5kZXggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgbGVmdCwgaW5kZXggLSAxLCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgaW5kZXgsIHJpZ2h0LCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZVNvcnRlcigpO1xyXG59KSgpO1xyXG4vKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8vINCe0YfQuNGJ0LDQtdGCIERPTSDRgdC+0LTQtdGA0LbQsNGJ0LjQuSDRjdC70LXQvNC10L3RgtGLINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChlbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZGF0YWJhc2VcclxuXHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3IgKi9cclxuLyogZ2xvYmFsIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLy8g0JzQvtC00YPQu9GMINC/0YDQtdC00L7RgdGC0LDQstC70Y/QtdGCINGB0L/QvtGB0L7QsSDQvtGC0L/RgNCw0LLQutC4INC30LDQv9GA0L7RgdCwINC6INC40YHRgtC+0YfQvdC40LrRgyDQtNCw0L3QvdGL0YVcclxuLy8g0JTQu9GPINGA0LXQutCy0LXRgdGC0LAg0L3QtdC+0LHRhdC+0LTQuNC8INC/0YPRgtGMLCDRgtC10LvQviDQt9Cw0L/RgNC+0YHQsCwg0YLQuNC/INC30LDQv9GA0L7RgdCwXHJcbi8vIHJlcXVlc3Qg0LLQvtC30LLRgNCw0YnQsNC10YIgUHJvbWlzZVxyXG52YXIgZGF0YUNvbm5lY3RvciA9IChmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJKGRhdGFDb25uZWN0b3JDb25maWdPYmopIHtcclxuICAgIHZhciBkYXRhQmFzZUNvbm5lY3RvcjtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhQmFzZUNvbm5lY3RvcigpIHt9XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnNldHVwRGF0YUJhc2VBUEkgPSBmdW5jdGlvbiBzZXR1cERhdGFCYXNlQVBJICh0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIGRhdGFCYXNlQVBJO1xyXG4gICAgICAgIGlmICh0eXBlT2ZSZXF1ZXN0ID09PSBcImZldGNoXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0RmV0Y2gsXHJcbiAgICAgICAgICAgICAgICBnZXROZXdDb25uZWN0b3JBUEk6IGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUElcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVPZlJlcXVlc3QgPT09IFwiWEhSXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgZ2V0TmV3Q29ubmVjdG9yQVBJOiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uOiBkYXRhQmFzZUNvbm5lY3Rvci5sb25nUG9sbCxcclxuICAgICAgICAgICAgICAgIGdldE5ld0Nvbm5lY3RvckFQSTogZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YUJhc2VBUEk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbiByZXF1ZXN0RmV0Y2goXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0UGF0aCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IGNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHlcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlSlNPTihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RYTVIgPSBmdW5jdGlvbiByZXF1ZXN0WE1SKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0VHlwZSwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBsb2FkQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIGVycm9yQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdEJvZHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUubG9uZ1BvbGwgPSBmdW5jdGlvbiBsb25nUG9sbCAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGh0dHAub3BlbignR0VUJywgdGFyZ2V0VXJsLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAndGV4dC9ldmVudC1zdHJlYW0nKTtcclxuICAgICAgICByZXR1cm4geGh0dHA7XHJcbiAgICB9O1xyXG5cclxuICAgIGRhdGFCYXNlQ29ubmVjdG9yID0gbmV3IERhdGFCYXNlQ29ubmVjdG9yKCk7XHJcbiAgICByZXR1cm4gZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqLnR5cGVPZlJlcXVlc3QpO1xyXG5cclxufSkoZGF0YUNvbm5lY3RvckNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIGRhdGFCYXNlVXJsICovXHJcbi8qIGdsb2JhbCBkYXRhQ29ubmVjdG9yICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhVxyXG4vLyDQktGB0LUgQVBJINGE0YPQvdC60YbQuNC4INCy0L7Qt9Cy0YDQsNGJ0LDRjtGCINC/0YDQvtC80LjRgdGLXHJcbnZhciBkYXRhU291cmNlID0gKGZ1bmN0aW9uIGNyZWF0ZURhdGFTb3VyY2UgKGRhdGFDb25uZWN0b3IsIGNvbmZpZykge1xyXG4gICAgdmFyIGRhdGFTb3VyY2VJbnN0YW5jZTtcclxuICAgIHZhciBVU0VSX0xJU1QgPSBcInVzZXJMaXN0XCI7XHJcbiAgICB2YXIgVVNFUl9NRVNTQUdFUyA9IFwidXNlcnNNZXNzYWdlc1wiO1xyXG4gICAgdmFyIFVTRVJTX1NFVFRJTkdTID0gXCJ1c2Vyc1NldHRpbmdzXCI7XHJcbiAgICB2YXIgbmV3VXNlckRhdGEgPSB7XHJcbiAgICAgICAgaXNNaW5pbWl6ZTogZmFsc2UsXHJcbiAgICAgICAgcmVhZExhc3RNZXNzYWdlOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2UoKSB7fVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvbmdQb2xsQ29ubmVjdCAoZGF0YVR5cGUsIHVzZXJJZCkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCwgZGF0YVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLmNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbihyZXF1ZXN0UGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYmFzaWNDb25uZWN0IChkYXRhVHlwZSwgdXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdC5iaW5kKG51bGwsIHJlcXVlc3RQYXRoLCBudWxsLCBcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgIH1cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5jcmVhdGVSZXF1ZXN0UGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RQYXRoKFxyXG4gICAgICAgIGRhdGFCYXNlVVJMLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICByZXF1ZXN0UG9zdGZpeCxcclxuICAgICAgICByZXF1ZXN0UHJlZml4XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcGF0aCA9IGRhdGFCYXNlVVJMO1xyXG4gICAgICAgIGlmKHJlcXVlc3RQcmVmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQcmVmaXhcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgdXNlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBvc3RmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQb3N0Zml4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXRoICs9IFwiLmpzb25cIjtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0SFRNTCA9IGZ1bmN0aW9uIGdldEhUTUwgKHJlcXVlc3RQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIFwiR0VUXCIsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLnNldERhdGEgPSBmdW5jdGlvbiBzZXREYXRhIChkYXRhVHlwZSwgcmVxdWVzdFR5cGUsIGZpZWxkTmFtZSwgdXNlcklkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aDtcclxuICAgICAgICBpZihyZXF1ZXN0VHlwZSA9PT0gXCJQVVRcIikge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgZmllbGROYW1lLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuYWRkTmV3VXNlclRvRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFTb3VyY2UgKHVzZXJJZCwgdXNlck5hbWUpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBuZXdVc2VyRGF0YS51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1VzZXJEYXRhKS5tYXAoZnVuY3Rpb24gYWRkTmV3U2V0dGluZ3MgKHNldHRpbmdOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YShVU0VSU19TRVRUSU5HUywgXCJQVVRcIiwgc2V0dGluZ05hbWUsIHVzZXJJZCwgbmV3VXNlckRhdGFbc2V0dGluZ05hbWVdKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKFVTRVJfTElTVCwgXCJQVVRcIiwgbnVsbCwgdXNlcklkLCB7XCJsYXN0T25saW5lXCI6IGRhdGUuZ2V0VGltZSgpLCBcInNlbmROZXdNZXNzYWdlXCI6IGZhbHNlfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGFTb3VyY2VBUEkgPSBmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJICh0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgaWYodHlwZU9mUmVxdWVzdCkge1xyXG4gICAgICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPSB0eXBlT2ZSZXF1ZXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPT09IFwibG9uZ1BvbGxcIikge1xyXG4gICAgICAgICAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXREYXRhID0gbG9uZ1BvbGxDb25uZWN0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YSA9IGJhc2ljQ29ubmVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1c2Vyc0FQSToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VXNlckxpc3Q6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTElTVFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFVzZXJTZXR0aW5nczogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUlNfU0VUVElOR1NcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBnZXRVc2VyTWVzc2FnZXM6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVNcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBnZXRTZXR0aW5nRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2U6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQT1NUXCJcclxuXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2V0U2V0dGluZ0ZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HUyxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgYWRkTmV3VXNlclRvRGF0YVNvdXJjZTogZGF0YVNvdXJjZUluc3RhbmNlLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVMYXN0T25saW5lOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX0xJU1QsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgICAgICAgICBcImxhc3RPbmxpbmVcIlxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZzogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9MSVNULFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzZW5kTmV3TWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZUlzUmVhZEZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX01FU1NBR0VTLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tbW9uQVBJOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRIVE1MOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0SFRNTC5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSksXHJcbiAgICAgICAgICAgICAgICBnZXREYXRhU291cmNlQVBJOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YVNvdXJjZUFQSS5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdC8IGluc3RhbmNlINC+0LHRitC10LrRgtCwLCDQt9Cw0LTQsNC10LwgQVBJXHJcbiAgICBkYXRhU291cmNlSW5zdGFuY2UgPSBuZXcgRGF0YVNvdXJjZSgpO1xyXG5cclxuXHJcblxyXG4gICAgcmV0dXJuIGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhU291cmNlQVBJKCk7XHJcbn0pKGRhdGFDb25uZWN0b3IsIG1haW5Db25maWcpO1xyXG5cclxuLy8gZXZlbnRFbWl0dGVyXHJcblxyXG4vKiBleHBvcnRlZCBldmVudEVtaXR0ZXIgKi9cclxudmFyIGV2ZW50RW1pdHRlciA9IChmdW5jdGlvbiBjcmVhdGVFdmVudEVtaXR0ZXIgKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRTdWJzY3JpYmUgPSBmdW5jdGlvbiBhZGRTdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjayApIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaWYoICF0aGlzLmV2ZW50c1tldmVudE5hbWVdICkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVTdWJzY3JpYmUgKCkge1xyXG4gICAgICAgICAgICB0aGF0LmV2ZW50c1tldmVudE5hbWVdID0gdGhhdC5ldmVudHNbZXZlbnROYW1lXS5maWx0ZXIoZnVuY3Rpb24gcmVtb3ZlIChlbGVtZW50Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Q2FsbGJhY2sgIT09IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaWJlXHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQgKGV2ZW50TmFtZSwgZGF0YSkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYoIGV2ZW50ICkge1xyXG4gICAgICAgICAgICBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIGludm9rZSAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobnVsbCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBFdmVudEVtaXR0ZXIoKTtcclxufSkoKTtcclxuLyogZXhwb3J0ZWQgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciAqL1xyXG52YXIgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciA9IChmdW5jdGlvbiBjcmVhdGVMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCkge1xyXG4gICAgdmFyIHR5cGVzT2ZDaGFuZ2UgPSB7XHJcbiAgICAgICAgbWVzc2FnZTogL21lc3NhZ2UvLFxyXG4gICAgICAgIHVzZXJMaXN0OiAvbGFzdE9ubGluZS57MSx9c2VuZE5ld01lc3NhZ2UvLFxyXG4gICAgICAgIGxhc3RPbmxpbmU6IC9cInBhdGhcIjpcIlxcL1xcd3sxLH1cXC9sYXN0T25saW5lLyxcclxuICAgICAgICBzZW5kTmV3TWVzc2FnZTogL1wicGF0aFwiOlwiXFwvXFx3ezEsfVxcL3NlbmROZXdNZXNzYWdlLyxcclxuICAgICAgICBzZXR0aW5nOiAvcmVhZExhc3RNZXNzYWdlLyxcclxuICAgICAgICByZWFkOiAvcmVhZC8sXHJcbiAgICAgICAgZ2V0SXA6IC9nZXRJcC8sXHJcbiAgICAgICAgYXNrUXVlc3Rpb246IC9hc2tRdWVzdGlvbi9cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGV2ZW50UmVndWxhciA9IC9ldmVudDogcHV0LztcclxuICAgIHZhciBoYXNOdWxsRGF0YSA9IC9kYXRhOiBudWxsLztcclxuICAgIHZhciBnZXREYXRhUmVndWxhciA9IC9cIixcImRhdGFcIjovO1xyXG4gICAgdmFyIGl0SXNOZXdNZXNzYWdlUmVndWxhciA9IC9cInBhdGhcIjpcIlxcLy0vO1xyXG4gICAgdmFyIGl0SXNOZXdVc2VyTGlzdFJlZ3VsYXIgPSAvXCJkYXRhXCI6e1wibGFzdE9ubGluZVwiOlxcZCssXCJzZW5kTmV3TWVzc2FnZVwiOi87XHJcbiAgICB2YXIgaXRJc0ZpcnN0SXBEYXRhUmVndWxhciA9IC9kYXRhOiB7XCJwYXRoXCI6XCJcXC9cIixcImRhdGFcIjp7XCJnZXRJcFwiOi87XHJcbiAgICB2YXIgaXRJc0ZpcnN0UXVlc3Rpb25zRGF0YSA9IC9kYXRhOiB7XCJwYXRoXCI6XCJcXC9cIixcImRhdGFcIjp7XCJhc2tRdWVzdGlvblwiOi87XHJcbiAgICB2YXIgaXRJc05ld1F1ZXN0aW9uc0NvbW1hbmQgPSAvZGF0YToge1wicGF0aFwiOlwiXFwvYXNrUXVlc3Rpb25cIixcImRhdGFcIjovO1xyXG4gICAgdmFyIGl0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiA9IHRydWU7XHJcblxyXG4gICAgZnVuY3Rpb24gTG9uZ1BvbGxSZXNwb25zZVBhcnNlcigpIHt9XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0VHlwZU9mQ2hhbmdlcyA9IGZ1bmN0aW9uIGdldFR5cGVPZkNoYW5nZXMoXHJcbiAgICAgICAgYW5zd2VyRGF0YVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSBPYmplY3Qua2V5cyh0eXBlc09mQ2hhbmdlKS5maWx0ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRUeXBlT2ZDaGFuZ2UodHlwZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlc09mQ2hhbmdlW3R5cGVOYW1lXS50ZXN0KGFuc3dlckRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVbMF07XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlID0gZnVuY3Rpb24gcHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2Vyc01lc3NhZ2VzID0gZnVuY3Rpb24gcGFyc2VVc2Vyc01lc3NhZ2VzKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VJZDtcclxuICAgICAgICB2YXIgcmVzdWx0T2JqZWN0ID0ge307XHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwicmVhZFwiKSB7XHJcbiAgICAgICAgICAgIGRhdGEuaWQgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcvcmVhZFwiLFwiJylcclxuICAgICAgICAgICAgICAgIC5zaGlmdCgpO1xyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnL3JlYWRcIixcImRhdGFcIjonKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpdElzTmV3TWVzc2FnZVJlZ3VsYXIudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUlkID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilcclxuICAgICAgICAgICAgLnNoaWZ0KCk7XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgIHJlc3VsdE9iamVjdFttZXNzYWdlSWRdID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0T2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5oYXNOZXdEYXRhID0gZnVuY3Rpb24gaGFzTmV3RGF0YShyZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICFoYXNOdWxsRGF0YS50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSAmJiByZXNwb25zZS5sZW5ndGggPiAxXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2VyTGlzdCA9IGZ1bmN0aW9uIHBhcnNlVXNlckxpc3QoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgdXNlcklkO1xyXG4gICAgICAgIGlmIChpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdElzTmV3VXNlckxpc3RSZWd1bGFyLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIHVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLCBudWxsKTtcclxuICAgICAgICAgICAgZGF0YVt1c2VySWRdID0gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB1c2VySWQgPSB0aGlzLmdldFVzZXJJZChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWQsIGRhdGFdO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRGaXJzdERhdGEgPSBmdW5jdGlvbiBnZXRGaXJzdERhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBqc29uRGF0YTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0VXNlcklkID0gZnVuY3Rpb24gZ2V0VXNlcklkKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGNoYW5nZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAuc2hpZnQoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVswXVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlQ29tbWFuZEFuc3dlciA9IGZ1bmN0aW9uIHBhcnNlQ29tbWFuZEFuc3dlcihcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgdmFyIGlwRGF0YTtcclxuICAgICAgICB2YXIgYXNrUXVlc3Rpb25EYXRhO1xyXG4gICAgICAgIHZhciBpdElzSVBJbmZvcm1hdGlvbiA9IC9nZXRJcC8udGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgdmFyIGl0SXNRdWVzdGlvbnNJbmZvcm1hdGlvbiA9IC9hc2tRdWVzdGlvbi8udGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSk7XHJcblxyXG4gICAgICAgIGlmKGl0SXNJUEluZm9ybWF0aW9uICYmIGl0SXNRdWVzdGlvbnNJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICBkYXRhID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoL2RhdGE6IHtcInBhdGhcIjpcIlxcL1wiLFwiZGF0YVwiOi8pLnBvcCgpLnNwbGl0KFwifSxcIik7XHJcbiAgICAgICAgICAgIGFza1F1ZXN0aW9uRGF0YSA9IEpTT04ucGFyc2UoZGF0YVswXSsgXCJ9fVwiKTtcclxuICAgICAgICAgICAgaXBEYXRhID0gSlNPTi5wYXJzZShcIntcIiArIGRhdGFbMV0udHJpbSgpLnNsaWNlKDAsLTEpKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIGFza1F1ZXN0aW9uRGF0YSxcclxuICAgICAgICAgICAgICAgIGlwRGF0YVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSBlbHNlIGlmIChpdElzSVBJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVVzZXJJcERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRJc1F1ZXN0aW9uc0luZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlUXVlc3Rpb25zRGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJJcERhdGEgPSBmdW5jdGlvbiBwYXJzZVVzZXJJcERhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmKGl0SXNGaXJzdElwRGF0YVJlZ3VsYXIudGVzdChyZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoaXRJc0ZpcnN0SXBEYXRhUmVndWxhcikucG9wKCkudHJpbSgpLnNsaWNlKDAsLTIpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdChldmVudFJlZ3VsYXIpLnBvcCgpLnNwbGl0KFwiZGF0YToge1xcXCJwYXRoXFxcIjpcXFwiL2dldElwXFxcIixcXFwiZGF0YVxcXCI6XCIpLnBvcCgpLnRyaW0oKS5zbGljZSgwLC0xKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVF1ZXN0aW9uc0RhdGEgPSBmdW5jdGlvbiBwYXJzZVF1ZXN0aW9uc0RhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmKGl0SXNGaXJzdFF1ZXN0aW9uc0RhdGEudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoaXRJc0ZpcnN0UXVlc3Rpb25zRGF0YSkucG9wKCkudHJpbSgpLnNsaWNlKDAsLTIpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGl0SXNOZXdRdWVzdGlvbnNDb21tYW5kLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KGl0SXNOZXdRdWVzdGlvbnNDb21tYW5kKS5wb3AoKS50cmltKCkuc2xpY2UoMCwtMSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKFwie1xcXCJhc2tRdWVzdGlvblxcXCI6e1xcXCJcIiArIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KFwiZGF0YToge1xcXCJwYXRoXFxcIjpcXFwiL2Fza1F1ZXN0aW9uL1wiKS5wb3AoKS5yZXBsYWNlKFwiXFxcIixcXFwiZGF0YVxcXCJcIiwgXCJcXFwiXCIpICsgXCJ9XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRleHQuc3BsaXQoZXZlbnRSZWd1bGFyKTtcclxuICAgICAgICB2YXIgY2hhbmdlVHlwZSA9IHRoaXMuZ2V0VHlwZU9mQ2hhbmdlcyhyZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdKTtcclxuICAgICAgICB2YXIgcmVzdWx0T2ZQYXJzZSA9IHsgdHlwZTogY2hhbmdlVHlwZSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmhhc05ld0RhdGEocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlVHlwZSA9PT0gXCJtZXNzYWdlXCIgfHwgY2hhbmdlVHlwZSA9PT0gXCJyZWFkXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJzTWVzc2FnZXMocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJzZW5kTmV3TWVzc2FnZVwiIHx8XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID09PSBcImxhc3RPbmxpbmVcIiB8fFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJ1c2VyTGlzdFwiXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlVXNlckxpc3QocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09IFwiZ2V0SXBcIiB8fCBjaGFuZ2VUeXBlID09PSBcImFza1F1ZXN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlQ29tbWFuZEFuc3dlcihyZXN1bHQsIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mUGFyc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IExvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKTtcclxufSkoKTtcclxuXHJcbi8vIHZpZXdcclxuXHJcbi8qIGV4cG9ydGVkIHZpZXdGYWN0b3J5ICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBkYXRhU291cmNlICovXHJcbnZhciB2aWV3RmFjdG9yeSA9IChmdW5jdGlvbiBjcmVhdGVWaWV3RmFjdG9yeSAoZGF0YVNvdXJjZSkge1xyXG5cclxuICAgIGZ1bmN0aW9uIFZpZXdGYWN0b3J5ICgpIHt9XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZVZpZXcgPSBmdW5jdGlvbiBjcmVhdGVDaGF0VmlldyAoaHRtbFBhdGgsIGNzc1BhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBjcmVhdGVWaWV3UHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmKGh0bWxQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjc3NQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbmNsdWRlVmlld0Nzc1RvUGFnZSh0aGF0LmNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc1BhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVzaGVldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRleHQvY3NzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG91Y2gtc29mdC1jaGF0LWNzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoYXQuaW5jbHVkZVZpZXdIVE1MVG9QYWdlKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImh0bWxQYXRoIGlzIG51bGwuIFBsZWFzZSBhZGQgaHRtbFBhdGhcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0hUTUxUb1BhZ2UgPSBmdW5jdGlvbiBpbmNsdWRlQ2hhdEhUTUxUb1BhZ2UgKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciBjb250YWluZXJEaXYgPSAoY29udGFpbmVyQ2xhc3MpID8gZ2V0RWxlbWVudChjb250YWluZXJDbGFzcykgOiBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLmNvbW1vbkFQSS5nZXRIVE1MKGh0bWxQYXRoKS50aGVuKGZ1bmN0aW9uIHNldEh0bWwgKGh0bWwpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyRGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3Q3NzVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRDc3NUb1BhZ2UgKGxpbmspIHtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlQ1NTTGluayA9IGZ1bmN0aW9uIGNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgZmlsZVBhdGgsXHJcbiAgICAgICAgcmVsLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVsKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwicmVsXCIsIHJlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwidHlwZVwiLCB0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGZpbGVQYXRoKTtcclxuICAgICAgICByZXR1cm4gbGluaztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBWaWV3RmFjdG9yeSgpXHJcblxyXG59KShkYXRhU291cmNlKTtcclxuXHJcbi8vIGNoYXQgbWFuYWdlclxyXG5cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZXhwb3J0ZWQgbWVzc2FnZUxpc3RNYW5hZ2VyICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0YDQsNCx0L7RgtGLINGB0L4g0YHQv9C40YHQutC+0Lwg0YHQvtC+0LHRidC10L3QuNC5INCe0JTQndCe0JPQniDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxudmFyIG1lc3NhZ2VMaXN0TWFuYWdlciA9IChmdW5jdGlvbiBzZXR1cE1lc3NhZ2VMaXN0TWFuYWdlciAoY29uZmlnKSB7XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8g0KTQvtGA0LzQsNGCICBtZXNzYWdlTGlzdCA9IFtcclxuICAgIC8vICAgIHtcclxuICAgIC8vICAgICAgIHNlbmRlcjogc2VuZGVyXHJcbiAgICAvLyAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgLy8gICAgICAgcmVhZDogdHJ1ZS9mYWxzZVxyXG4gICAgLy8gICAgICAgZGF0ZTogZGF0ZVxyXG4gICAgLy8gICAgfSxcclxuICAgIC8vIF1cclxuICAgIC8vIHJlYWQgLSDQsdGL0LvQviDQu9C4INC/0YDQvtGH0LjRgtCw0L3QviDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgZnVuY3Rpb24gTWVzc2FnZUxpc3RNYW5hZ2VyKCkge31cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAgKCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLmNET00gPSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQmxvY2s6IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIE1FU1NBR0UgRUxFTUVOVCAvL1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdGCIERPTSDRjdC70LXQvNC10L3RgiDRgdC+0L7QsdGJ0LXQvdC40Y8g0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L3QsCDRjdC60YDQsNC90LVcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlRWxlbWVudChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlQ29udGFpbmVyRGl2ID0gdGhpcy5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2KGlzUmVhZCwgc2VuZGVyKTtcclxuICAgICAgICB2YXIgbWVzc2FnZURhdGVEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgbWVzc2FnZURhdGUsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ESVNQTEFZX01FU1NBR0VfREFURSxcclxuICAgICAgICAgICAgW2NvbmZpZy5tZXNzYWdlcy5DU1NfQ0hBVF9NRVNTQUdFX0RBVEVdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIG1lc3NhZ2VTZW5kZXJEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9TRU5ERVJfTkFNRSxcclxuICAgICAgICAgICAgW2NvbmZpZy5tZXNzYWdlcy5DU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ESVNQTEFZX01FU1NBR0UsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEYXRlRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VTZW5kZXJEaXYpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCA9IGZ1bmN0aW9uICBnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlc0lzUmVhZCA9IFtdO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZSA9IGNvbmZpZy5BRE1JTl9OQU1FIHx8IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lO1xyXG4gICAgICAgIHZhciB1c2VySWQgPSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQ7XHJcbiAgICAgICAgZm9yKGkgPSB0aGlzLm1lc3NhZ2VMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubWVzc2FnZUxpc3RbaV0uc2VuZGVyICE9PSB1c2VyTmFtZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMubWVzc2FnZUxpc3RbaV0ucmVhZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzSXNSZWFkLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiB0aGlzLm1lc3NhZ2VMaXN0W2ldLmlkICsgXCIvcmVhZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0W2ldLnJlYWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZXNJc1JlYWQ7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiAoaXNSZWFkLCBzZW5kZXIpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfTUVTU0FHRV9DT05UQUlORVIpO1xyXG4gICAgICAgIGlmICghaXNSZWFkICYmIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lICE9PSBzZW5kZXIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayA9IGZ1bmN0aW9uIGNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayAodGV4dCwgaXNEaXNwbGF5LCBzdHlsZUNsYXNzZXMpIHtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdHlsZUNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiBjbGFzc0FkZCAoc3R5bGUpIHtcclxuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoc3R5bGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUxpc3QgKG1lc3NhZ2VPYmplY3RzKSAge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gYWRkRWxlbWVudFRvTWVzc2FnZUxpc3QgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VMaXN0LnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdCAobmV3TWVzc2FnZUxpc3QpIHtcclxuICAgICAgICBpZih0aGlzLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QgKFxyXG4gICAgICAgIG1lc3NhZ2VPYmpcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QucHVzaChtZXNzYWdlT2JqKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QtdGA0LXQsdC40YDQsNC10YIg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSwg0YHQvtC30LTQsNC10YIg0YHQvtC+0YLQstC10YLRgdCy0YPRjtGJ0LjQtSDQuNC8IERPTSDRjdC70LXQvNC10L3RgtGLINC4INCy0YHRgtCw0LLQu9GP0LXRgiDQuNGFINCyINGH0LDRglxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZXMgPSBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoYXQuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGF0LmNET00ubWVzc2FnZXNCbG9jay5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7Rh9C40YHRgtC40YLRjCBET00g0Y3Qu9C10LzQtdC90YIg0LIg0LrQvtGC0L7RgNC+0Lwg0L7RgtC+0LHRgNCw0LbQsNGO0YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyAo0L3QsNC/0YDQuNC80LXRgCDRh9GC0L7QsdGLINCy0YHRgtCw0LLQuNGC0Ywg0L3QstC+0YvQuSDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5KVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckNoYXQgPSBmdW5jdGlvbiBjbGVhckNoYXQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2sucmVtb3ZlQ2hpbGQodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2VMaXN0TWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIHVzZXJEYXRhTWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgbWVzc2FnZUxpc3RNYW5hZ2VyICovXHJcbi8qIGdsb2JhbCBjcmVhdGVNZXNzYWdlT2JqZWN0ICovXHJcbi8qIGdsb2JhbCBnZXRDdXJyZW50RGF0ZSAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgZXZlbnRFbWl0dGVyICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGdsb2JhbCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyICovXHJcbnZhciB1c2VyRGF0YU1hbmFnZXIgPSAgKGZ1bmN0aW9uIGNyZWF0ZVVzZXJEYXRhTWFuYWdlciAoY29uZmlnLCBldmVudEVtaXR0ZXIsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIpIHtcclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgLyogZXhwb3J0ZWQgZ2V0Q3VycmVudERhdGUgKi9cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgbWludXRlcyA9IChkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkgPyBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGVcclxuICAgICAgICAgICAgLmdldEhvdXJzKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLmNvbmNhdChcIjpcIiwgbWludXRlcyk7XHJcbiAgICB9XHJcbiAgICAvKiBleHBvcnRlZCBjcmVhdGVNZXNzYWdlT2JqZWN0ICovXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlT2JqZWN0IChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZCxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWQ6IGlzUmVhZCxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgLy8gYmFzaWNcclxuICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhQmFzaWMgKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZ2V0Q29ycmVzcG9uZGVuY2UgKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoYXQuZ2V0VXNlckNvcnJlc3BvbmRlbmNlKHVzZXJJZCkudGhlbiggZnVuY3Rpb24gZ2V0UmVzb2x2ZSAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdEJhc2ljIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgICAgIHZhciBtZXNzYWdlc09iamVjdCA9IFtdO1xyXG4gICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIHB1c2hEYXRhIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFba2V5XS5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzT2JqZWN0LnB1c2goZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgICAgIG5ld01lc3NhZ2VMaXN0ID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmNyZWF0ZU1lc3NhZ2VMaXN0KG1lc3NhZ2VzT2JqZWN0KTtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIudXBkYXRlTWVzc2FnZUxpc3QobmV3TWVzc2FnZUxpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJDb3JyZXNwb25kZW5jZUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCkoKS50aGVuKGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VzTGlzdCAoZGF0YSkge1xyXG4gICAgICAgICAgICB0aGF0LnVwZGF0ZU1lc3NhZ2VMaXN0KGRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tTG9uZ1BvbGxDb25uZWN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZ2V0TG9uZ1BvbGxDb3JyZXNwb25kZW5jZShyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHRoYXQuZ2V0VXNlckNvcnJlc3BvbmRlbmNlKHVzZXJJZCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyQ29ycmVzcG9uZGVuY2VGcm9tTG9uZ1BvbGxDb25uZWN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmKGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uID0gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTWVzc2FnZXModXNlcklkKTtcclxuICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIHNldHVwQ29ubmVjdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IDMgJiYgdGhpcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudEVtaXR0ZXIuZW1pdChkYXRhLnR5cGUsIGRhdGEub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5zZW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3RBZnRlckxvbmdQb2xsIChkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24gYWRkVG9NZXNzYWdlTGlzdExvbmdQb2xsIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFba2V5XS5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdChkYXRhW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gVXNlckRhdGFNYW5hZ2VyICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ID09PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhRnJvbUxvbmdQb2xsQ29ubmVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJDb3JyZXNwb25kZW5jZSA9IGdldFVzZXJDb3JyZXNwb25kZW5jZUZyb21Mb25nUG9sbENvbm5lY3Rpb24uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBldmVudEVtaXR0ZXIuYWRkU3Vic2NyaWJlKFwibWVzc2FnZVwiLCBmdW5jdGlvbiBzdWJzY3JpYmVNZXNzYWdlIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZU1lc3NhZ2VMaXN0KGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInJlYWRcIiwgZnVuY3Rpb24gc3Vic2NyaWJlUmVhZCAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlcyAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtZXNzYWdlLmlkID09PSBkYXRhLmlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVhZCA9IGRhdGEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJEYXRhID0gZ2V0VXNlckRhdGFCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJDb3JyZXNwb25kZW5jZSA9IGdldFVzZXJDb3JyZXNwb25kZW5jZUJhc2ljLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSB1cGRhdGVNZXNzYWdlTGlzdEJhc2ljLmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnNldHVwKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY2xlYXJNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZUxpc3QgKCkge1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5tZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSA9IGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSAodXNlcklkLCB1c2VyTmFtZSkge1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuYWRkTmV3VXNlclRvRGF0YVNvdXJjZSh1c2VySWQsIHVzZXJOYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlU2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gc2V0RmllbGQgKGZpZWxkTmFtZSkge1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0U2V0dGluZ0ZpZWxkKFxyXG4gICAgICAgICAgICBmaWVsZE5hbWUsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3NbZmllbGROYW1lXVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlVXNlck9ubGluZSA9IGZ1bmN0aW9uIHVwZGF0ZVVzZXJPbmxpbmUgKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGU7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVMYXN0T25saW5lKHVzZXJJZCwgZGF0ZS5nZXRUaW1lKCkpXHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZSAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZSA9IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lIHx8IGNvbmZpZy5BRE1JTl9OQU1FO1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gY3JlYXRlTWVzc2FnZU9iamVjdChcclxuICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgdXNlck5hbWUsXHJcbiAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgIT09IFwibG9uZ1BvbGxcIikge1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QobWVzc2FnZU9iamVjdCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zYXZlTWVzc2FnZVRvRGF0YVNvdXJjZShtZXNzYWdlT2JqZWN0KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCA9IGZ1bmN0aW9uIGdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50ICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXRNZXNzYWdlQXNSZWFkID0gZnVuY3Rpb24gc2V0TWVzc2FnZUFzUmVhZCAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3RzID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCgpO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBzZXRSZWFkIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZChcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3Quc2VuZGVyID09PSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyhjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2UoXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdFxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHRpbmdzID0gW3t1c2VySWQsIGZpZWxkTmFtZSwgZmllbGRWYWx1ZX0se30uLi5dXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIChzZXR0aW5ncykge1xyXG4gICAgICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24gc2F2ZVNldHRpbmcgKG5ld0ZpZWxkU2V0dGluZykge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldFNldHRpbmdGaWVsZChcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckRhdGFNYW5hZ2VyKCk7XHJcblxyXG59KShtYWluQ29uZmlnLCBldmVudEVtaXR0ZXIsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIpO1xyXG5cclxuLy8gbG9nXHJcblxyXG52YXIgbG9nID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG5cclxuICAgIC8qIGV4cG9ydGVkIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuICAgIC8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbiAgICAvLyDQntGH0LjRidCw0LXRgiBET00g0YHQvtC00LXRgNC20LDRidC40Lkg0Y3Qu9C10LzQtdC90YLRiyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBmdW5jdGlvbiBjbGVhckVsZW1lbnRDb250ZW50KGVsZW1lbnRTZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChlbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgICAgIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB3cml0ZU1lc3NhZ2UgKG1lc3NhZ2VzKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VFbGVtZW50O1xyXG4gICAgICAgIGlmKG1lc3NhZ2VzIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgbWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUVsZW1lbnQgPSBjcmVhdGVNZXNzYWdlRWxlbWVudChtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VFbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtZXNzYWdlRWxlbWVudCA9IGNyZWF0ZU1lc3NhZ2VFbGVtZW50KG1lc3NhZ2VzKTtcclxuICAgICAgICAgICAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZShtZXNzYWdlRWxlbWVudCkge1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9QQU5FTF9MT0dfQ0xBU1MpLmFwcGVuZENoaWxkKG1lc3NhZ2VFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlRWxlbWVudChtZXNzYWdlcykge1xyXG4gICAgICAgIHZhciByZXN1bHREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHJlc3VsdERpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfTE9HX0VMRU1FTlRfQ0xBU1MpO1xyXG5cclxuICAgICAgICB2YXIgY2FsbGJhY2tGb3JNZXNzYWdlc0RlcGxveSA9IGZ1bmN0aW9uIGFkZERhdGFUb1Jlc3VsdERpdiAoZGF0YSwgZGF0YU5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGlubmVyRGl2O1xyXG4gICAgICAgICAgICBpbm5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGlubmVyRGl2LmlubmVySFRNTCA9IGRhdGFOYW1lICsgXCI6IFwiICsgZGF0YTtcclxuICAgICAgICAgICAgcmVzdWx0RGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkZXBsb3lPYmplY3QobWVzc2FnZXMsIGNhbGxiYWNrRm9yTWVzc2FnZXNEZXBsb3kpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHREaXY7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVwbG95T2JqZWN0IChvYmplY3QsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMob2JqZWN0KS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZihvYmplY3Rba2V5XSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgZGVwbG95T2JqZWN0KG9iamVjdFtrZXldLCBjYWxsYmFjaylcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG9iamVjdFtrZXldLGtleSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB3cml0ZTogd3JpdGVNZXNzYWdlLFxyXG4gICAgICAgIGNsZWFyOiBjbGVhckVsZW1lbnRDb250ZW50LmJpbmQobnVsbCxcclxuICAgICAgICAgICAgY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9QQU5FTF9MT0dfQ0xBU1NcclxuICAgICAgICApXHJcbiAgICB9XHJcbn0obWFpbkNvbmZpZyk7XHJcblxyXG4vLyBkYXNoYm9hcmRcclxuXHJcbi8qIGV4cG9ydGVkIHVzZXJMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgY2xlYXJFbGVtZW50Q29udGVudCAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG4vKiBnbG9iYWwgc29ydGVyICovXHJcbnZhciB1c2VyTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gY3JlYXRlVXNlckxpc3QgKGNvbmZpZywgc29ydGVyKSB7XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvKiDQpNC+0YDQvNCw0YIg0L7QsdGK0LXQutGC0LAg0LIg0YHQv9C40YHQutC1INGO0LfQtdGA0LBcclxuICAgICAgKiB1c2VySWQ6IFwiSXZhbjMwMDAwMFwiLFxyXG4gICAgICAqIHVzZXJFbGVtZW50OiBVc2VyTGlzdE1hbmFnZXIuY3JlYXRlVXNlckVsZW1lbnQodXNlcklkLCB1c2VySXNPbmxpbmUpLFxyXG4gICAgICAqIG9ubGluZTogdXNlcklzT25saW5lLFxyXG4gICAgICAqIHZpc2libGU6IHRydWUsXHJcbiAgICAgICogc2VuZE5ld01lc3NhZ2U6IHVzZXJTZXR0aW5ncy5zZW5kTmV3TWVzc2FnZSxcclxuICAgICAgKiByZWFkTGFzdE1lc3NhZ2U6IHVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UsXHJcbiAgICAgICogbGFzdE9ubGluZTogdXNlclNldHRpbmdzLmxhc3RPbmxpbmUsXHJcbiAgICAgICogaXNNaW5pbWl6ZTogdXNlclNldHRpbmdzLmlzTWluaW1pemUsXHJcbiAgICAgICogdXNlck5hbWU6IHVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAqXHJcbiAgICAgICogdmlzaWJsZSAtINC+0YLQvtCx0YDQsNC20LDRgtGMINC70Lgg0Y7Qt9C10YDQsCDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICAgICAgKi9cclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIFVzZXJMaXN0TWFuYWdlcigpIHtcclxuICAgICAgICB0aGlzLnVMaXN0ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHt9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdGCIERPTSDQtdC70LXQvNC10L3RgiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjtC30LXRgNCwINCyINGB0L/QuNGB0LrQtVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVVc2VyRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVVzZXJFbGVtZW50KFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBpc09ubGluZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHVzZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciB1c2VySWREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciB1c2VySW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgdXNlckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0VMRU1FTlRfQ1NTX0NMQVNTKTtcclxuXHJcbiAgICAgICAgdXNlcklkRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1MpO1xyXG4gICAgICAgIHVzZXJJZERpdi5pbm5lckhUTUwgPSB1c2VySWQ7XHJcblxyXG4gICAgICAgIGlmIChpc09ubGluZSkge1xyXG4gICAgICAgICAgICB1c2VySW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PTkxJTkUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVzZXJJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXNlckRpdi5hcHBlbmRDaGlsZCh1c2VySWREaXYpO1xyXG4gICAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQodXNlckluZGljYXRvcik7XHJcblxyXG4gICAgICAgIHJldHVybiB1c2VyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldFVzZXJMaXN0ID0gZnVuY3Rpb24gc2V0VXNlckxpc3QgKHVzZXJMdXN0T2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IHVzZXJMdXN0T2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZFVzZXJUb1VzZXJzQXJyYXkgPSBmdW5jdGlvbiBhZGRVc2VyVG9Vc2Vyc0xpc3QoXHJcbiAgICAgICAgdXNlcixcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgdXNlcnNMaXN0XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdXNlcklzT25saW5lID0gdGhpcy51c2VySXNPbmxpbmUodXNlci5sYXN0T25saW5lKTtcclxuICAgICAgICB1c2Vyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICB1c2VyRWxlbWVudDogdGhpcy5jcmVhdGVVc2VyRWxlbWVudCh1c2VySWQsIHVzZXJJc09ubGluZSksXHJcbiAgICAgICAgICAgIG9ubGluZTogdXNlcklzT25saW5lLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBzZW5kTmV3TWVzc2FnZTogdXNlci5zZW5kTmV3TWVzc2FnZSxcclxuICAgICAgICAgICAgcmVhZExhc3RNZXNzYWdlOiB1c2VyLnJlYWRMYXN0TWVzc2FnZSxcclxuICAgICAgICAgICAgbGFzdE9ubGluZTogdXNlci5sYXN0T25saW5lLFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogdXNlci51c2VyTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVVzZXJPbmxpbmVTdGF0dXMgPSBmdW5jdGlvbiB1cGRhdGVVc2VyVmlldyAodXNlcklkLCBsYXN0T25saW5lKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRleCA9IHRoaXMuZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQodXNlcklkKTtcclxuICAgICAgICB0aGlzLnVMaXN0W3VzZXJJbmRleF0ubGFzdE9ubGluZSA9IGxhc3RPbmxpbmU7XHJcbiAgICAgICAgdGhpcy51TGlzdFt1c2VySW5kZXhdLm9ubGluZSA9IHRoaXMudXNlcklzT25saW5lKGxhc3RPbmxpbmUpO1xyXG4gICAgICAgIHRoaXMudUxpc3RbdXNlckluZGV4XS51c2VyRWxlbWVudCA9IHRoaXMuY3JlYXRlVXNlckVsZW1lbnQoXHJcbiAgICAgICAgICAgIHVzZXJJZCxcclxuICAgICAgICAgICAgdGhpcy51c2VySXNPbmxpbmUobGFzdE9ubGluZSlcclxuICAgICAgICApO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy8g0JLQvtC30LLRgNCw0YnQsNC10YIgaW5kZXgg0Y7Qt9C10YDQsCDQsiDRgdC/0LjRgdC60LUg0Y7Qt9C10YDQsCDQtdGB0LvQuCDQvtC9INGC0LDQvCDQvdCw0YXQvtC00LjRgtGB0Y8uINCSINC/0YDQvtGC0LjQstC90L4g0YHQu9GD0YfQsNC1INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIG51bGxcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQgPSBmdW5jdGlvbiBnZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlck1hbmFnZXIgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1c2VySW5kZXggPSBudWxsO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHVzZXJNYW5hZ2VyLnVMaXN0KS5tYXAoZnVuY3Rpb24gZ2V0S2V5IChrZXkpIHtcclxuICAgICAgICAgICAgaWYgKHVzZXJNYW5hZ2VyLnVMaXN0W2tleV0udXNlcklkID09PSB1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmRleCA9IGtleTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdXNlckluZGV4O1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8g0J7Qv9GA0LXQtNC10LvRj9C10YIg0L7QvdC70LDQudC9INGO0LfQtdGA0LAg0L3QsNGF0L7QtNGPINGA0LDQt9C90LjRhtGDINC80LXQttC00YMg0LTQsNGC0L7QuSDQv9C+0YHQu9C10LTQvdC10LPQviDQutC+0L3QtdC60YLQsCDRjtC30LXRgNCwINGBINCx0LQg0Lgg0YLQtdC60YPRidC40Lwg0LLRgNC10LzQtdC90LXQvFxyXG4gICAgLy8g0LLQvtC30LLRgNCw0YnQsNC10YIgdHJ1ZSDQtdGB0LvQuCDRjtC30LXRgCDQvtC90LvQsNC50L0sIGZhbHNlIC0g0L7RhNGE0LvQsNC50L1cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUudXNlcklzT25saW5lID0gZnVuY3Rpb24gdXNlcklzT25saW5lIChsYXN0VXNlck9ubGluZVRpbWUpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpIC0gbGFzdFVzZXJPbmxpbmVUaW1lIDw9IGNvbmZpZy5pbnRlcnZhbC5PTkxJTkVfSU5URVJWQUw7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCU0LXQu9Cw0LXRgiDQvdC10LLQuNC00LjQvNGL0LzQuCDRgtC10YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10Lkg0LIg0YHQv9C40YHQutC1LCDQsiDQuNC80LXQvdCw0YUg0LrQvtGC0L7RgNGL0YUg0L3QtdGCINC/0LXRgNC10LTQsNC90L3QvtC5INC/0L7QtNGB0YLRgNC+0LrQuFxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5maWx0ZXJCeU5hbWUgPSBmdW5jdGlvbiBmaWx0ZXJCeU5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy51TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGZpbHRlck5hbWUgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC52aXNpYmxlID0gZWxlbWVudC51c2VySWQuaW5kZXhPZihjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSkgIT09IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0YDRgtC40YDRg9C10YIg0YHQv9C40YHQvtC6INGO0LfQtdGA0L7QsiDQv9C+INC/0L7Qu9GOXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnNvcnRVc2Vyc0J5RmllbGQgPSBmdW5jdGlvbiBzb3J0VXNlcnNCeU9ubGluZSgpIHtcclxuICAgICAgICBzb3J0ZXIucXVpY2tTb3J0KHRoaXMudUxpc3QsIDAsIHRoaXMudUxpc3QubGVuZ3RoIC0gMSwgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jbGVhclVzZXJMaXN0ID0gZnVuY3Rpb24gY2xlYXJVc2VyTGlzdCAoKSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGC0L7QsdGA0LDQt9C40YLRjC8g0J7QsdC90L7QstC40YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDRjtC30LXRgNC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmRpc3BsYXlVc2VycyA9IGZ1bmN0aW9uIGRpc3BsYXlVc2VycygpIHtcclxuICAgICAgICBjbGVhckVsZW1lbnRDb250ZW50KGNvbmZpZy5ET00uVVNFUl9MSVNUX0NTU19DTEFTUyk7XHJcbiAgICAgICAgdGhpcy51TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGdldEVsZW0gKGVsZW0pIHtcclxuICAgICAgICAgICAgaWYgKGVsZW0udmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlVTRVJfTElTVF9DU1NfQ0xBU1MpLmFwcGVuZENoaWxkKGVsZW0udXNlckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgLy8gaW5jbHVkZVxyXG5cclxuICAgIC8qIGV4cG9ydGVkIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuICAgIC8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbiAgICAvLyDQntGH0LjRidCw0LXRgiBET00g0YHQvtC00LXRgNC20LDRidC40Lkg0Y3Qu9C10LzQtdC90YLRiyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBmdW5jdGlvbiBjbGVhckVsZW1lbnRDb250ZW50KGVsZW1lbnRTZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChlbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgICAgIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJMaXN0TWFuYWdlcigpXHJcblxyXG59KShtYWluQ29uZmlnLCBzb3J0ZXIpO1xyXG52YXIgY29udHJvbFBhbmVsID0gKGZ1bmN0aW9uIChjb25maWcsIGRhdGFDb25uZWN0b3IsIGxvZywgcGFyc2VyKSB7XHJcblxyXG4gICAgdmFyIGxvZ0VsZW1lbnQ7XHJcbiAgICB2YXIgc2VsZWN0Q29tbWFuZDtcclxuICAgIHZhciBzZW5kQnV0dG9uO1xyXG4gICAgdmFyIHBhcmFtZXRlckVsZW1lbnRzO1xyXG5cclxuICAgIHZhciBjb25uZWN0aW9uO1xyXG4gICAgdmFyIG1vZHVsZUluaXQ7XHJcbiAgICB2YXIgY3VycmVudENvbW1hbmQ7XHJcbiAgICB2YXIgcGF0aEZvckN1cnJlbnRDb21tYW5kUmVxdWVzdDtcclxuXHJcbiAgICB2YXIgY29tbWFuZHMgPSB7XHJcbiAgICAgICAgZ2V0SXA6IHtcclxuICAgICAgICAgICAgcGFyYW1ldGVyc051bWJlcjogMCxcclxuICAgICAgICAgICAgdHlwZTogXCJhc3luY1wiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhc2tRdWVzdGlvbjoge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzTnVtYmVyOiAzLFxyXG4gICAgICAgICAgICB0eXBlOiBcInBlbmRpbmdcIlxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kdWxlQ29udHJvbGxlciAoYWN0aW9uKSB7XHJcbiAgICAgICAgbW9kdWxlSW5pdFthY3Rpb25dLmZvckVhY2goZnVuY3Rpb24gaW52b2tlQ29udHJvbEZ1bmN0aW9ucyAoY29udHJvbEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xGdW5jdGlvbigpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0QWNjZXNzVG9ET00gKCkge1xyXG4gICAgICAgIGxvZ0VsZW1lbnQgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTKTtcclxuICAgICAgICBzZWxlY3RDb21tYW5kID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DT05UUk9MX1BBTkVMX1NFTEVDVF9DTEFTUyk7XHJcbiAgICAgICAgc2VuZEJ1dHRvbiA9ICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfU0VORF9DT01NQU5EX0JVVFRPTl9DTEFTUyk7XHJcbiAgICAgICAgcGFyYW1ldGVyRWxlbWVudHMgPSAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DT05UUk9MX1BBUkFNRVRFUlNfQ0xBU1MsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzZXR1cExvbmdQb2xsQ29ubmVjdGlvbiAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXIgPSAodXNlcklkKSA/IHVzZXJJZCA6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgICAgICBpZihjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29ubmVjdGlvbiA9IGRhdGFDb25uZWN0b3IuY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uKFxyXG4gICAgICAgICAgICBjb25maWcuQ09NTUFORF9QQVRIX1BSRUZJWCArIHVzZXIgKyBcIi9jb21tYW5kc1Jlc3BvbnNlLy5qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGxvZy5jbGVhcigpO1xyXG4gICAgICAgIGNvbm5lY3Rpb24ub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gY29tbWFuZENoYW5nZUNhbGxiYWNrICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gMyAmJiB0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSAgPSBwYXJzZXIucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ0VsZW1lbnQuaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZy53cml0ZShkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbm5lY3Rpb24uc2VuZCgpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xvc2VMb25nUG9sbENvbm5lY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXF1ZXN0Q29tbWFuZCAoY29tbWFuZE9iamVjdCwgcmVxdWVzdFBhdGgpIHtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShjb21tYW5kT2JqZWN0KTtcclxuICAgICAgICBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBqc29uRGF0YSxcclxuICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbW1hbmQgKCkge1xyXG4gICAgICAgIHZhciBwYXJhbWV0ZXJQcmVmaXggPSBcInBhcmFtZXRlclwiO1xyXG4gICAgICAgIGN1cnJlbnRDb21tYW5kID0ge1xyXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogc2VsZWN0Q29tbWFuZC52YWx1ZSxcclxuICAgICAgICAgICAgcGFyYW1ldGVyc051bWJlcjogY29tbWFuZHNbc2VsZWN0Q29tbWFuZC52YWx1ZV0ucGFyYW1ldGVyc051bWJlcixcclxuICAgICAgICAgICAgaXNFeGVjdXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgdHlwZU9mQ29tbWFuZDogY29tbWFuZHNbc2VsZWN0Q29tbWFuZC52YWx1ZV0udHlwZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGFyYW1ldGVyRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYoaW5kZXggPCBjdXJyZW50Q29tbWFuZC5wYXJhbWV0ZXJzTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29tbWFuZFtwYXJhbWV0ZXJQcmVmaXggKyBpbmRleF0gPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlUGF0aEZvckNvbW1hbmRSZXF1ZXN0ICh1c2VySWQsIGNvbW1hbmROYW1lKSB7XHJcbiAgICAgICAgdmFyIHVzZXIgPSAodXNlcklkKSA/IHVzZXJJZCA6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgICAgICBwYXRoRm9yQ3VycmVudENvbW1hbmRSZXF1ZXN0ID0gY29uZmlnLkNPTU1BTkRfUEFUSF9QUkVGSVggKyB1c2VyICsgXCIvY29tbWFuZHMvXCIgKyBjb21tYW5kTmFtZSArIFwiLmpzb25cIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZW5kQnV0dG9uTGlzdGVuZXIgKCkge1xyXG4gICAgICAgIGNyZWF0ZUNvbW1hbmQoKTtcclxuICAgICAgICBjcmVhdGVQYXRoRm9yQ29tbWFuZFJlcXVlc3QobnVsbCwgc2VsZWN0Q29tbWFuZC52YWx1ZSk7XHJcbiAgICAgICAgcmVxdWVzdENvbW1hbmQoY3VycmVudENvbW1hbmQsIHBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3QpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzZXR1cExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgc2VsZWN0Q29tbWFuZC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gYWxlcnQoc2VsZWN0Q29tbWFuZC52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VuZEJ1dHRvbkxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGVJbml0ID0ge1xyXG4gICAgICAgIGZpcnN0SW5pdDogW1xyXG4gICAgICAgICAgICBnZXRBY2Nlc3NUb0RPTSxcclxuICAgICAgICAgICAgc2V0dXBMaXN0ZW5lcnNcclxuICAgICAgICBdLFxyXG4gICAgICAgIHNldHVwOiBbXHJcbiAgICAgICAgICAgIHNldHVwTG9uZ1BvbGxDb25uZWN0aW9uXHJcbiAgICAgICAgXSxcclxuICAgICAgICBjbG9zZTogW1xyXG4gICAgICAgICAgICBjbG9zZUxvbmdQb2xsQ29ubmVjdGlvblxyXG4gICAgICAgIF1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udHJvbFBhbmVsKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLnNldHVwID0gbW9kdWxlQ29udHJvbGxlci5iaW5kKG51bGwsIFwic2V0dXBcIik7XHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLmNsb3NlID0gbW9kdWxlQ29udHJvbGxlci5iaW5kKG51bGwsIFwiY2xvc2VcIik7XHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLmZpcnN0SW5pdCA9IG1vZHVsZUNvbnRyb2xsZXIuYmluZChudWxsLCBcImZpcnN0SW5pdFwiKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IENvbnRyb2xQYW5lbCgpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZGF0YUNvbm5lY3RvciwgbG9nLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKTtcclxuLyogZXhwb3J0ZWQgZGFzaGJvYXJkICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHVzZXJMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgZXZlbnRFbWl0dGVyICovXHJcbi8qIGdsb2JhbCBzb3J0ZXIgKi9cclxuLyogZ2xvYmFsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIgKi9cclxudmFyIGRhc2hib2FyZCA9IChmdW5jdGlvbiBjcmVhdGVEYXNoYm9hcmRDb250cm9sbGVyKGNvbmZpZywgZGF0YVNvdXJjZSwgdURhdGFNYW5hZ2VyLCB1TGlzdE1hbmFnZXIsIHNvcnRlciwgZXZlbnRFbWl0dGVyLCBjUGFuZWwpe1xyXG5cclxuICAgIHZhciBpbnRlcnZhbElkID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigpIHtcclxuICAgICAgICB0aGlzLnNldHVwRXZlbnRFbWl0dGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLnNldHVwKGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucygpO1xyXG4gICAgICAgIGNQYW5lbC5maXJzdEluaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiBzZXR1cEV2ZW50RW1pdHRlciAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb25kaXRpb247XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInVzZXJMaXN0XCIsIGZ1bmN0aW9uICBzZXR1cERhdGEgKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgbmV3RGF0YTtcclxuICAgICAgICAgICAgaWYoZGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdEYXRhID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld0RhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG5ld0RhdGEpLm1hcChmdW5jdGlvbiBzZXRVc2VyU2V0dGluZyh1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci5hZGRVc2VyVG9Vc2Vyc0FycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RhdGFbdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnNMaXN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3QgPSB1TGlzdE1hbmFnZXIudUxpc3QuY29uY2F0KHVzZXJzTGlzdCk7XHJcbiAgICAgICAgICAgIGNvbmRpdGlvbiA9IHRoYXQuZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgdGhhdC5sb2NhbFNldHRpbmdzU2V0dXAoY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgdGhhdC5zZXR1cFVzZXJMaXN0RE9NKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcImxhc3RPbmxpbmVcIiwgZnVuY3Rpb24gbGFzdE9ubGluZVN1YiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlcklkID0gZGF0YVswXTtcclxuICAgICAgICAgICAgdmFyIGxhc3RPbmxpbmUgPSBkYXRhWzFdO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudXBkYXRlVXNlck9ubGluZVN0YXR1cyh1c2VySWQsIGxhc3RPbmxpbmUpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInNlbmROZXdNZXNzYWdlXCIsIGZ1bmN0aW9uIHNlbmROZXdNZXNzYWdlU3ViIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySW5kZXggPSB1TGlzdE1hbmFnZXIuZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQoZGF0YVswXSk7XHJcbiAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt1c2VySW5kZXhdLnNlbmROZXdNZXNzYWdlID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgdGhhdC50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICB2YXIgc2VyaWFsQ29uZGl0aW9uID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBmaWx0ZXI6IGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5LFxyXG4gICAgICAgICAgICBzb3J0OiBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnksXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VySWQ6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUsIHNlcmlhbENvbmRpdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgdmFyIHNlcmlhbENvbmRpdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgICAgIHZhciBjb25kaXRpb24gPSBudWxsO1xyXG4gICAgICAgIGlmIChzZXJpYWxDb25kaXRpb24pIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uID0gSlNPTi5wYXJzZShzZXJpYWxDb25kaXRpb24pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBjb25kaXRpb24uY3VycmVudFVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbjtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUubG9jYWxTZXR0aW5nc1NldHVwID0gZnVuY3Rpb24gbG9jYWxTZXR0aW5nc1NldHVwKGNvbmRpdGlvbikge1xyXG4gICAgICAgIGlmIChjb25kaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5maWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfRklMVEVSX0lOUFVUX0lEKS52YWx1ZSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uc29ydCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWUgPSBjb25kaXRpb24uc29ydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uY3VycmVudFVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gY29uZGl0aW9uLmN1cnJlbnRVc2VySWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcblxyXG4gICAgLy8g0YTQuNC70YzRgtGA0LDRhtC40Y8g0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gZmlsdGVyKCkge1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5maWx0ZXJCeU5hbWUoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLy8g0YHQvtGA0YLQuNGA0L7QstC60LAg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIHNvcnQoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnNvcnRVc2Vyc0J5RmllbGQoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuZGlzcGxheVVzZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwVXNlcnNMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXR1cFVzZXJzTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBBcnJheS5mcm9tKGNvbmZpZy51c2VycykuZm9yRWFjaChmdW5jdGlvbiBhZGRMaXN0ZW5lcnMgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC51c2VyTGlzdGVuZXIuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maXJzdENoaWxkLmlubmVyVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFVzZXJMaXN0RE9NID0gZnVuY3Rpb24gc2V0dXBVc2VyTGlzdERPTSAoKSB7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWNlc3NUb1VzZXJzTGlzdCgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBVc2Vyc0xpc3RlbmVycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRBY2Vzc1RvVXNlcnNMaXN0ID0gZnVuY3Rpb24gYWNjZXNzVG9Vc2Vyc0RPTSgpIHtcclxuICAgICAgICBjb25maWcudXNlcnMgPSBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICBjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUywgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJMaXN0ID0gZnVuY3Rpb24gZ2V0VXNlckxpc3QgKCkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIHZhciBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yID0gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTGlzdChudWxsKTtcclxuICAgICAgICBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Gcm9tRGF0YSAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50RW1pdHRlci5lbWl0KGRhdGEudHlwZSwgZGF0YS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yLnNlbmQoKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJMaXN0Q29ubmVjdGlvbiA9IGxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3I7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS51c2VyTGlzdGVuZXIgPSBmdW5jdGlvbiB1c2VyTGlzdGVuZXIodXNlcklkKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydENvbnZlcnNhdGlvbldpdGhVc2VyKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkKHVzZXJJZCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGC0LrRgNGL0LLQsNC10YIg0YfQsNGCINGBINGO0LfQtdGA0L7QvCwg0LfQsNCz0YDRg9C20LDQtdGCINC80LXRgdGB0LDQtNC20Lgg0Y7Qt9C10YDQsCDQuCDQvtGC0L7QsdGA0LDQttCw0LXRgiDQuNGFXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zdGFydENvbnZlcnNhdGlvbldpdGhVc2VyID0gZnVuY3Rpb24gc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlcihcclxuICAgICAgICB1c2VySWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgY1BhbmVsLnNldHVwKCk7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLmNsZWFyTWVzc2FnZUxpc3QoKTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEodXNlcklkKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzYXZlTG9jYWxEYXRhICgpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQUNUSVZFX1VTRVJfQkxPQ0spLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLklOVklTSUJMRV9DTEFTUyk7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWcodXNlcklkLCBmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgLy8g0J7QsdC90L7QstC70LXRgiDQvNCw0YHRgdC40LIg0YHQvtC+0LHRidC10L3QuNC5INCyINC80L7QtNGD0LvQtSDRh9Cw0YLQsCDQuCDQstGL0LLQvtC00LjRgiDQuNGFINC90LAg0Y3QutGA0LDQvVxyXG4gICAgLy8gRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0ID0gZnVuY3Rpb24gdXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0KFxyXG4gICAgLy8gKSB7XHJcbiAgICAvLyAgICAgdURhdGFNYW5hZ2VyLmdldFVzZXJEYXRhKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAvLyAgICAgdGhpcy5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAvLyB9O1xyXG5cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zID0gZnVuY3Rpb24gc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlciwgY29uZmlnLkFETUlOX05BTUUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuY2xvc2VDb252ZXJzYXRpb24uYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhhdC5maWx0ZXIuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgICAgICB0aGF0LnNvcnQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB1c2VyRGF0YU1hbmFnZXIuc2V0TWVzc2FnZUFzUmVhZC5iaW5kKHVzZXJEYXRhTWFuYWdlcikpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C+0LzQtdGH0LDQtdGCINC60LDQvdCw0Lsg0Y7Qt9C10YDQsCDQutCw0Log0L/RgNC+0YfQuNGC0LDQvdC90YvQuSAo0LXRgdC70Lgg0YLQsNC8INC10YHRgtGMINC90LXQv9GA0L7Rh9C40YLQsNC90L3Ri9C1INGB0L7QvtCx0YnQtdC90LjRjylcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQgPSBmdW5jdGlvbiBtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gdUxpc3RNYW5hZ2VyLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3VzZXJJbmRleF0uc2VuZE5ld01lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShbe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgZmllbGROYW1lOiBcInNlbmROZXdNZXNzYWdlXCIsXHJcbiAgICAgICAgICAgIGZpZWxkVmFsdWU6IGZhbHNlXHJcbiAgICAgICAgfV0pO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQl9Cw0LrRgNGL0LLQsNC10YIg0LrQsNC90LDQuyDQvtCx0YnQtdC90LjRjyDRgSDRjtC30LXRgNC+0Lwg0Lgg0YfQsNGCXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZUNvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uIGNsb3NlQ29udmVyc2F0aW9uICgpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0FDVElWRV9VU0VSX0JMT0NLKS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IG51bGw7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIGNQYW5lbC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQtNC+0LHQsNCy0LvRj9C10YIg0L3QvtCy0YvQuSDQtdC70LXQvNC10L3Rgi3QuNC90LTQuNC60LDRgtC+0YAg0LJcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIgPSBmdW5jdGlvbiB0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCkge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlRGl2O1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHVMaXN0TWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGJsaW5rKGtleSkge1xyXG4gICAgICAgICAgICBuZXdNZXNzYWdlRGl2ID0gdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRVxyXG4gICAgICAgICAgICApWzBdO1xyXG4gICAgICAgICAgICBpZiAodUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgIW5ld01lc3NhZ2VEaXYpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZURpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRSk7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5hcHBlbmRDaGlsZChuZXdNZXNzYWdlRGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgbmV3TWVzc2FnZURpdikge1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQucmVtb3ZlQ2hpbGQobmV3TWVzc2FnZURpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgPSBmdW5jdGlvbiBzZXR1cEludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaW50ZXJ2YWxJZC5wdXNoID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gaW50ZXJ2YWwgKCkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh1TGlzdE1hbmFnZXIudUxpc3QpLm1hcChmdW5jdGlvbiB1c2VyTGlzdFVwZGF0ZSAodmlld0lkKSB7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudXBkYXRlVXNlck9ubGluZVN0YXR1cyhcclxuICAgICAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rbdmlld0lkXS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3ZpZXdJZF0ubGFzdE9ubGluZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhhdC5zZXR1cFVzZXJMaXN0RE9NKCk7XHJcbiAgICAgICAgfSxjb25maWcuaW50ZXJ2YWwuVVBEQVRFX1VTRVJTX1RJTUUpXHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG4gICAgICAgIGludGVydmFsSWQuZm9yRWFjaChmdW5jdGlvbiBjbGVhciAoaWQpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpZClcclxuICAgICAgICB9KTtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY2xlYXJNZXNzYWdlTGlzdCgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5jbGVhclVzZXJMaXN0KCk7XHJcbiAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlckxpc3RDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgY1BhbmVsLmNsb3NlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgRGFzaGJvYXJkQ29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZGF0YVNvdXJjZSwgdXNlckRhdGFNYW5hZ2VyLCB1c2VyTGlzdE1hbmFnZXIsIHNvcnRlciwgZXZlbnRFbWl0dGVyLCBjb250cm9sUGFuZWwpO1xyXG4vKiBleHBvcnRlZCBsYXVuY2hlciAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgbGF1bmNoZXIgPSAoZnVuY3Rpb24gY3JlYXRlTGF1bmNoZXIgKGNvbmZpZykge1xyXG5cclxuICAgIHZhciBET01WYXJpYWJsZXMgPSB7fTtcclxuICAgIHZhciBrZXlPZlZhbHVlID0ge1xyXG4gICAgICAgIGNoYXRUaXRsZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0VXJsOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRDbGFzczoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0UG9zaXRpb25TZWxlY3Q6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFsbG93TWluaW1pemU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbGxvd0RyYWc6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaG93VGltZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVpcmVOYW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJhZGlvIGJ1dHRvbiAobGFzdCBlbGVtZW50LCBpdCdzIGltcG90ZW50KVxyXG4gICAgICAgIG5ldHdvcmtSYWRpb1hNUjoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB0cnVlOiBcIlhIUlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBuZXR3b3JrUmFkaW9Mb25nUG9sbDoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB0cnVlOiBcImxvbmdQb2xsXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5ldHdvcmtSYWRpb0ZldGNoOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwiZmV0Y2hcIlxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gTGF1bmNoZXIoKSB7fVxyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5nZXREYXRhRnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBnZXREYXRhRnJvbUVsZW1lbnQgKGtleSkge1xyXG4gICAgICAgIHZhciBzcmMgPSBcIlwiO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgdHlwZU9mVmFsdWU7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoRE9NVmFyaWFibGVzKS5tYXAoZnVuY3Rpb24gc2V0dXBEYXRhIChlbGVtZW50TmFtZSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYoa2V5W2VsZW1lbnROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mVmFsdWUgPSBET01WYXJpYWJsZXNbZWxlbWVudE5hbWVdLmdldEF0dHJpYnV0ZShcInR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZU9mVmFsdWUgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihET01WYXJpYWJsZXNbZWxlbWVudE5hbWVdLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSBcIicmXCIgKyBcInR5cGVPZlJlcXVlc3RcIiArIFwiPSdcIiArIHRoYXQuZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnROYW1lLCB0eXBlT2ZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gXCInJlwiICsgZWxlbWVudE5hbWUgKyBcIj0nXCIgKyB0aGF0LmdldEVsZW1lbnRWYWx1ZShlbGVtZW50TmFtZSwgdHlwZU9mVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IGVsZW1lbnROYW1lICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKHNyYy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIHNyYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzcmM7XHJcbiAgICB9O1xyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5nZXRFbGVtZW50VmFsdWUgPSBmdW5jdGlvbiBnZXRFbGVtZW50VmFsdWUgKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gRE9NVmFyaWFibGVzW25hbWVdW2tleU9mVmFsdWVbbmFtZV0udHlwZU9mVmFsdWVdO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTY3JpcHQgKCkge1xyXG4gICAgICAgIHZhciBzcmMgPSBjb25maWcubGF1bmNoZXIuc3JjU3RhcnQgKyB0aGlzLmdldERhdGFGcm9tRWxlbWVudChrZXlPZlZhbHVlKTtcclxuICAgICAgICBzcmMgKz0gY29uZmlnLmxhdW5jaGVyLnNyY0VuZDtcclxuICAgICAgICBET01WYXJpYWJsZXMuc2NyaXB0Q29kZS5pbm5lckhUTUwgPSBzcmM7XHJcbiAgICB9XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBjb25maWcubGF1bmNoZXIuYWZ0ZXIubWFwKChmdW5jdGlvbiBjcmVhdGVTY3JpcHRQYXJ0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIERPTVZhcmlhYmxlc1tlbGVtZW50XSA9ICBnZXRFbGVtZW50KGNvbmZpZy5sYXVuY2hlci5wYXR0ZXJuICsgZWxlbWVudCwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICBET01WYXJpYWJsZXNbZWxlbWVudF0uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGNyZWF0ZVNjcmlwdC5iaW5kKHRoYXQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiBjbG9zZUFwcCAoKSB7XHJcbiAgICAgICAgRE9NVmFyaWFibGVzID0ge307XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTGF1bmNoZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCBhYm91dCAqL1xyXG4vLyBTVFVCIC8vXHJcbnZhciBhYm91dCA9IChmdW5jdGlvbiBjcmVhdGVBYm91dFBhZ2VBcHAgKCkge1xyXG4gICAgZnVuY3Rpb24gQWJvdXQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIEFib3V0LnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIEFib3V0LnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uIGNsb3NlQXBwICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgQWJvdXQoKTtcclxuXHJcbn0pKCk7XHJcbi8qIGdsb2JhbCBkYXNoYm9hcmQgKi9cclxuLyogZ2xvYmFsIGxhdW5jaGVyICovXHJcbi8qIGdsb2JhbCBhYm91dCAqL1xyXG4vKiBnbG9iYWwgY2xlYXJFbGVtZW50Q29udGVudCAqL1xyXG4vKiBnbG9iYWwgdmlld0ZhY3RvcnkgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIG1haW5Db250cm9sbGVyID0gKGZ1bmN0aW9uIGNyZWF0ZU1haW5Db250cm9sbGVyIChjb25maWcpIHtcclxuXHJcbiAgICB2YXIgbWF0Y2hlc0h0bWxQYXRoID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogY29uZmlnLnJvdXRlci5EQVNIQk9BUkRfSFRNTF9QQVRILFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGNvbmZpZy5yb3V0ZXIuTEFVTkNIRVJfSFRNTF9QQVRILFxyXG4gICAgICAgIGFib3V0OiBjb25maWcucm91dGVyLkFCT1VUX0hUTUxfUEFUSFxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIGNsb3NlRnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLmNsb3NlQXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5jbG9zZUFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuY2xvc2VBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHN0YXJ0RnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLnN0YXJ0QXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5zdGFydEFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuc3RhcnRBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIgKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gaGFzQ2hhbmdlRXZlbnRBZGQgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhhdC5oYW5kbGVVcmwoZWxlbWVudC5uZXdVUkwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDQn9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLIC0g0YHRh9C40YLQsNGC0Ywg0YHQvtGB0YLQvtGP0L3QuNC1INC4INC30LDQv9GD0YHRgtC40YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQulxyXG4gICAgICAgIHRoYXQuaGFuZGxlVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIjZGFzaGJvYXJkXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiBVUkxcclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVVcmwgPSBmdW5jdGlvbiBoYW5kbGVVcmwodXJsKSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSBudWxsO1xyXG4gICAgICAgIGlmKHVybC5pbmRleE9mKFwiI1wiKSA9PT0gLTEpe1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaGFzaCA9IHVybC5zcGxpdCgnIycpLnBvcCgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VQcmV2aW91c1BhZ2UoaGFzaCk7XHJcblxyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhLicgKyBjb25maWcucm91dGVyLk5BVklHQVRJT05fQUNUSVZFX0NTUykuZm9yRWFjaChmdW5jdGlvbiByZW1vdmVDbGFzc0FjdGl2ZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLnJvdXRlci5OQVZJR0FUSU9OX0FDVElWRV9DU1MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmPVwiIycgKyBoYXNoICsgJ1wiXScpLmZvckVhY2goZnVuY3Rpb24gYWRkQ2xhc3NBY3RpdmUgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5yb3V0ZXIuTkFWSUdBVElPTl9BQ1RJVkVfQ1NTKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpO1xyXG4gICAgICAgIHZpZXdGYWN0b3J5LmNyZWF0ZVZpZXcobWF0Y2hlc0h0bWxQYXRoW2hhc2hdLCBudWxsLCBjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpLnRoZW4oZnVuY3Rpb24gaW52b2tlU3RhcnRGdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0RnVuY3Rpb25zW2hhc2hdKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VQcmV2aW91c1BhZ2UgPSBmdW5jdGlvbiBjbG9zZVByZXZpb3VzUGFnZShoYXNoKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoY2xvc2VGdW5jdGlvbnMpLm1hcChmdW5jdGlvbiBpbnZva2VDbG9zZUZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYoa2V5ICE9PSBoYXNoKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUZ1bmN0aW9uc1trZXldKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNYWluQ29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcblxyXG5tYWluQ29udHJvbGxlci5zdGFydEFwcCgpOyJdfQ==
