var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","networkRadioLongPoll","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?",srcEnd:"'&gt&lt/script&gt"},userList:{USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online"},chatSettings:{typeOfRequest:"longPoll"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},interval:{UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e3},router:{ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",ADMIN_NAME:"Admin",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var r=s?"#":".";return t?document.querySelectorAll(r+e):document.querySelector(r+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,r){var n;return 1<e.length&&(t<(n=function(e,t,s,r){for(var n,a,o,i,u=e[Math.floor((s+t)/2)][r],c=t,l=s;c<=l;){for(;e[c][r]>u;)c++;for(;e[l][r]<u;)l--;c<=l&&(o=l,i=(n=e)[a=c],n[a]=n[o],n[o]=i,c++,l--)}return c}(e,t,s,r))-1&&this.quickSort(e,t,n-1,r),n<s&&this.quickSort(e,n,s,r)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.setupDataBaseAPI=function(e){return"fetch"===e?{request:t.requestFetch,getNewConnectorAPI:t.setupDataBaseAPI}:"XHR"===e?{request:t.requestXMR,getNewConnectorAPI:t.setupDataBaseAPI}:{request:t.requestXMR,createLongPollConnection:t.longPoll,getNewConnectorAPI:t.setupDataBaseAPI}},s.prototype.requestFetch=function(e,t,s,r){return fetch(e,{headers:{Accept:r,"Content-Type":r},method:s,body:t}).then(function(e){return"application/json"===r?e.json():e.text()})},s.prototype.requestXMR=function(r,n,a,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(a,r,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},n?s.send(n):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},(t=new s).setupDataBaseAPI(e.typeOfRequest)}(dataConnectorConfig),dataSource=function(o,t){var s,n="userList",r="usersMessages",a="usersSettings",i={isMinimize:!1,readLastMessage:!0};function u(){}function c(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function l(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}return u.prototype.createRequestPath=function(e,t,s,r){var n=e;return null!==r&&(n+="/"+r),null!==t&&(n+="/"+t),null!==s&&(n+="/"+s),n+=".json"},u.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},u.prototype.setData=function(e,t,s,r,n){var a;return a="PUT"===t?this.createRequestPath(dataBaseUrl,r,s,e):this.createRequestPath(dataBaseUrl,r,null,e),o.request(a,JSON.stringify(n),t,"application/json")},u.prototype.addNewUserToDataSource=function(t,e){var s=new Date,r=this;i.userName=e,Object.keys(i).map(function(e){return r.setData(a,"PUT",e,t,i[e]),!0}),this.setData(n,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},u.prototype.getDataSourceAPI=function(e){return e&&(t.chatSettings.typeOfRequest=e),u.prototype.getData="longPoll"===t.chatSettings.typeOfRequest?c:l,{usersAPI:{getUserList:s.getData.bind(s,n),getUserSettings:s.getData.bind(s,a),getUserMessages:s.getData.bind(s,r),getSettingField:s.getData.bind(s,a),sendMessage:s.setData.bind(s,r,"POST"),setSettingField:s.setData.bind(s,a,"PUT"),addNewUserToDataSource:s.addNewUserToDataSource.bind(s),updateLastOnline:s.setData.bind(s,n,"PUT","lastOnline"),updateSendNewMessageFlag:s.setData.bind(s,n,"PUT","sendNewMessage"),updateMessageIsReadField:s.setData.bind(s,r,"PUT")},commonAPI:{getHTML:s.getHTML.bind(s),getDataSourceAPI:s.getDataSourceAPI.bind(s)}}},(s=new u).getDataSourceAPI()}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/},n=/event: put/,t=/data: null/,a=/","data":/,o=/"path":"\/-/,r=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=!0,u=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){if(s[e].test(t))return e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(a)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,r={},n={};return"read"===t?(r.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),r.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),r):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(a).shift(),r=JSON.parse(this.prepareDataBeforeJsonParse(e)),n[s]=r,n):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return i?(i=!1,this.getFirstData(e)):r.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseUsersSettings=function(e){return u?(u=!1,this.getFirstData(e)):[null,JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1))]},e.prototype.parse=function(e){console.log(e);var t=e.split(n),s=this.getTypeOfChanges(t[t.length-1]),r={type:s};if(this.hasNewData(t)){if("message"===s||"read"===s)return r.object=this.parseUsersMessages(t,s),r;if("sendNewMessage"===s||"lastOnline"===s||"userList"===s)return r.object=this.parseUserList(t,s),r;if("setting"===s)return r.object=this.parseUsersSettings(t,s),r}},new e}(),viewFactory=function(r){function e(){}return e.prototype.createView=function(s,r,n){var a=this;return new Promise(function(e,t){s?(r&&a.includeViewCssToPage(a.createCSSLink(r,"stylesheet","text/css","touch-soft-chat-css")),e(a.includeViewHTMLToPage(s,n))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return r.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,r){var n=document.createElement("link");return r&&n.setAttribute("id",r),t&&n.setAttribute("rel",t),s&&n.setAttribute("type",s),n.setAttribute("href",e),n},new e}(dataSource),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,r){var n=this.createMessageContainerDiv(r,s),a=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return n.appendChild(a),n.appendChild(o),n.appendChild(i),n},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,r=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:r,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var r=document.createElement("div");return s.forEach(function(e){r.classList.add(e)}),r.innerHTML=e,r},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,r){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort(),i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3===this.readyState&&200===this.status&&(t=r.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){return t[e].id=e,messageListManager.addMessageToMessageList(t[e]),!0}),messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){(e.id=t.id)&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){return t[e].id=e,s.push(t[e]),!0}),messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(e){var t,s,r,n=this.getMessageFromInputElement(),a=(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),o={sender:e,message:n,read:!1,date:a,id:r};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(console.log(e),e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),userListManager=function(a,e){function t(){this.uList=[]}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div");return s.classList.add(a.userList.USER_ELEMENT_CSS_CLASS),r.classList.add(a.userList.USER_ID_ELEMENT_CSS_CLASS),r.innerHTML=e,t?n.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_ONLINE):n.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(r),s.appendChild(n),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var r=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,r),online:r,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.updateUserOnlineStatus=function(e,t){var s=this.getUserFromUserListById(e);this.uList[s].lastOnline=t,this.uList[s].online=this.userIsOnline(t),this.uList[s].userElement=this.createUserElement(e,this.userIsOnline(t))},t.prototype.getUserFromUserListById=function(t){var s=this,r=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(r=e),!0}),r},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=a.interval.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(a.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,a.currentDashboardCondition.sortBy)},t.prototype.clearUserList=function(){this.uList=[]},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(a.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(a.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),dashboard=function(s,r,n,a,e,o){var t=[];function i(){this.setupEventEmitter()}return i.prototype.startApp=function(){n.setup(s),this.getUserList(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions()},i.prototype.setupEventEmitter=function(){var r=this;o.addSubscribe("userList",function(t){var s=[];t instanceof Array&&(t=t[1]),Object.keys(t).map(function(e){a.addUserToUsersArray(t[e],e,s)}),a.uList=a.uList.concat(s);var e=r.getCurrentUserIdFromLocalStorage();r.localSettingsSetup(e),r.setupUserListDOM()}),o.addSubscribe("lastOnline",function(e){var t=e[0],s=e[1];a.updateUserOnlineStatus(t,s)}),o.addSubscribe("sendNewMessage",function(e){var t=a.getUserFromUserListById(e[0]);a.uList[t].sendNewMessage=e[1],r.toggleNewMessageIndicatorToUser()})},i.prototype.saveCurrentConditionToLocalStorage=function(){var e=JSON.stringify({filter:s.currentDashboardCondition.filterBy,sort:s.currentDashboardCondition.sortBy,currentUserId:s.currentUserSettings.userId});localStorage.setItem(s.LOCAL_STORAGE_NAME,e)},i.prototype.getCurrentUserIdFromLocalStorage=function(){var e=localStorage.getItem(s.LOCAL_STORAGE_NAME),t=null;return e&&(t=JSON.parse(e),s.currentDashboardCondition.filterBy=t.filter,s.currentDashboardCondition.sortBy=t.sort,s.currentUserSettings.userId=t.currentUserId),t},i.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(s.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(s.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(s.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(s.currentUserSettings.userId)))},i.prototype.filter=function(){s.currentDashboardCondition.filterBy=getElement(s.DOM.CSS_FILTER_INPUT_ID).value,this.saveCurrentConditionToLocalStorage(),a.filterByName(s.currentDashboardCondition.filterBy),a.displayUsers()},i.prototype.sort=function(){s.currentDashboardCondition.sortBy=getElement(s.DOM.CSS_SORT_SELECT_ID).value,this.saveCurrentConditionToLocalStorage(),a.sortUsersByField(),a.displayUsers()},i.prototype.setupUsersListeners=function(){var t=this;Array.from(s.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})},i.prototype.setupUserListDOM=function(){a.displayUsers(),this.getAcessToUsersList(),this.toggleNewMessageIndicatorToUser(),this.setupUsersListeners()},i.prototype.getAcessToUsersList=function(){s.users=getElement(s.userList.USER_ELEMENT_CSS_CLASS,!0)},i.prototype.getUserList=function(){var e,t=r.usersAPI.getUserList(null);t.onreadystatechange=function(){this.status&&(e=longPollResponseParser.parse(this.responseText))&&o.emit(e.type,e.object)},t.send(),s.currentUserListConnection=t},i.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},i.prototype.startConversationWithUser=function(e){var t=this;s.currentUserSettings.userId=e,n.clearMessageList(),n.getUserData(e).then(function(){getElement(s.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.remove(s.INVISIBLE_CLASS),t.saveCurrentConditionToLocalStorage()}),r.usersAPI.updateSendNewMessageFlag(e,!1)},i.prototype.updateUserMessagesAndDisplayIt=function(){n.getUserData(s.currentUserSettings.userId),this.markMessageFromUserAsRead(s.currentUserSettings.userId)},i.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(s.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,s.ADMIN_NAME)),getElement(s.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(s.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(s.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},i.prototype.markMessageFromUserAsRead=function(e){var t=a.getUserFromUserListById(e);a.uList[t].sendNewMessage=!1,n.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},i.prototype.closeConversation=function(){getElement(s.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.add(s.INVISIBLE_CLASS),s.currentUserSettings.userId=null,s.currentMessageConnection.abort(),this.saveCurrentConditionToLocalStorage()},i.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(a.uList).map(function(e){return t=a.uList[e].userElement.getElementsByClassName(s.CSS_HAVE_NEW_MESSAGE_STYLE)[0],a.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(s.CSS_HAVE_NEW_MESSAGE_STYLE),a.uList[e].userElement.appendChild(t)),!a.uList[e].sendNewMessage&&t&&a.uList[e].userElement.removeChild(t),!0})},i.prototype.setupIntervalFunctions=function(){var e=this;t.push=setInterval(function(){Object.keys(a.uList).map(function(e){a.updateUserOnlineStatus(a.uList[e].userId,a.uList[e].lastOnline)}),e.setupUserListDOM()},s.interval.UPDATE_USERS_TIME)},i.prototype.closeApp=function(){t.forEach(function(e){clearInterval(e)}),userDataManager.clearMessageList(),a.clearUserList(),s.currentMessageConnection&&s.currentMessageConnection.abort(),s.currentUserListConnection.abort()},new i}(mainConfig,dataSource,userDataManager,userListManager,0,eventEmitter),launcher=function(s){var o={},r={chatTitle:{typeOfValue:"value"},chatUrl:{typeOfValue:"value"},chatClass:{typeOfValue:"value"},chatPositionSelect:{typeOfValue:"value"},allowMinimize:{typeOfValue:"checked"},allowDrag:{typeOfValue:"checked"},showTime:{typeOfValue:"checked"},requireName:{typeOfValue:"checked"},networkRadioXMR:{typeOfValue:"value",true:"XHR"},networkRadioLongPoll:{typeOfValue:"value",true:"longPoll"},networkRadioFetch:{typeOfValue:"value",true:"fetch"}};function e(){}return e.prototype.getDataFromElement=function(s){var r,n="",a=this;return Object.keys(o).map(function(e,t){return s[e]&&(0<t?"radio"===(r=o[e].getAttribute("type"))?o[e].checked&&(n+="'&typeOfRequest='"+a.getElementValue(e,r)):n+="'&"+e+"='"+a.getElementValue(e,r):n+=e+"='"+a.getElementValue(e)),!0}),n.length<1&&(n=null),n},e.prototype.getElementValue=function(e){return o[e][r[e].typeOfValue]},e.prototype.startApp=function(){var t=this;s.launcher.after.map(function(e){return o[e]=getElement(s.launcher.pattern+e,!1,!0),o[e].addEventListener("input",function(){var e=s.launcher.srcStart+this.getDataFromElement(r);e+=s.launcher.srcEnd,o.scriptCode.innerHTML=e}.bind(t)),!0})},e.prototype.closeApp=function(){o={}},new e}(mainConfig),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),mainController=function(s){var r={dashboard:s.router.DASHBOARD_HTML_PATH,configuration:s.router.LAUNCHER_HTML_PATH,about:s.router.ABOUT_HTML_PATH},n={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},a={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function e(){}return e.prototype.startApp=function(){var t=this;window.addEventListener("hashchange",function(e){t.handleUrl(e.newURL)}),t.handleUrl(window.location.href+"#dashboard")},e.prototype.handleUrl=function(e){var t;-1!==e.indexOf("#")&&(t=e.split("#").pop(),this.closePreviousPage(t),document.querySelectorAll("a."+s.router.NAVIGATION_ACTIVE_CSS).forEach(function(e){e.classList.remove(s.router.NAVIGATION_ACTIVE_CSS)}),document.querySelectorAll('a[href="#'+t+'"]').forEach(function(e){e.classList.add(s.router.NAVIGATION_ACTIVE_CSS)}),clearElementContent(s.router.CONTENT_CLASS),viewFactory.createView(r[t],null,s.router.CONTENT_CLASS).then(function(){a[t]()}))},e.prototype.closePreviousPage=function(t){Object.keys(n).map(function(e){return e!==t&&n[e](),!0})},new e}(mainConfig);mainController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwibGF1bmNoZXIiLCJwYXR0ZXJuIiwiYWZ0ZXIiLCJzcmNTdGFydCIsInNyY0VuZCIsInVzZXJMaXN0IiwiVVNFUl9FTEVNRU5UX0NTU19DTEFTUyIsIlVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1MiLCJVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT0ZGTElORSIsIlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PTkxJTkUiLCJjaGF0U2V0dGluZ3MiLCJ0eXBlT2ZSZXF1ZXN0IiwiY3VycmVudFVzZXJTZXR0aW5ncyIsInVzZXJJZCIsInVzZXJOYW1lIiwiY3VycmVudERhc2hib2FyZENvbmRpdGlvbiIsImZpbHRlckJ5Iiwic29ydEJ5IiwiaW50ZXJ2YWwiLCJVUERBVEVfVVNFUlNfVElNRSIsIk9OTElORV9JTlRFUlZBTCIsInJvdXRlciIsIkFCT1VUX0hUTUxfUEFUSCIsIkxBVU5DSEVSX0hUTUxfUEFUSCIsIkRBU0hCT0FSRF9IVE1MX1BBVEgiLCJDT05URU5UX0NMQVNTIiwiTkFWSUdBVElPTl9BQ1RJVkVfQ1NTIiwibWVzc2FnZXMiLCJDU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyIsIkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUiIsIkNTU19NRVNTQUdFX0NPTlRBSU5FUiIsIkNTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUUiLCJDU1NfQ0hBVF9NRVNTQUdFX0RBVEUiLCJDU1NfQ0hBVF9NRVNTQUdFIiwiSU5WSVNJQkxFX0NMQVNTIiwiREFUQV9CQVNFX1VSTCIsIkFETUlOX05BTUUiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsIkxPQ0FMX1NUT1JBR0VfTkFNRSIsIkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFIiwiZGF0YUJhc2VVcmwiLCJnZXRFbGVtZW50Iiwic2VsZWN0b3IiLCJpc0FsbCIsIml0SXNJZCIsInNlbGVjdG9yU3RhcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YUNvbm5lY3RvckNvbmZpZyIsInNvcnRlciIsIlNvcnRlciIsInByb3RvdHlwZSIsInF1aWNrU29ydCIsIml0ZW1zIiwibGVmdCIsInJpZ2h0Iiwic29ydEZpZWxkIiwiaW5kZXgiLCJsZW5ndGgiLCJmaXJzdEluZGV4Iiwic2Vjb25kSW5kZXgiLCJ0ZW1wIiwicGl2b3QiLCJNYXRoIiwiZmxvb3IiLCJpIiwiaiIsInBhcnRpdGlvbiIsInRoaXMiLCJjbGVhckVsZW1lbnRDb250ZW50IiwiZWxlbWVudFNlbGVjdG9yIiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImRhdGFDb25uZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnT2JqIiwiZGF0YUJhc2VDb25uZWN0b3IiLCJEYXRhQmFzZUNvbm5lY3RvciIsInNldHVwRGF0YUJhc2VBUEkiLCJyZXF1ZXN0IiwicmVxdWVzdEZldGNoIiwiZ2V0TmV3Q29ubmVjdG9yQVBJIiwicmVxdWVzdFhNUiIsImNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbiIsImxvbmdQb2xsIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3RUeXBlIiwiY29udGVudFR5cGUiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInRleHQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJKU09OIiwicGFyc2UiLCJvbmVycm9yIiwic3RhdHVzVGV4dCIsInNlbmQiLCJ0YXJnZXRVcmwiLCJ4aHR0cCIsImRhdGFTb3VyY2UiLCJjb25maWciLCJkYXRhU291cmNlSW5zdGFuY2UiLCJVU0VSX0xJU1QiLCJVU0VSX01FU1NBR0VTIiwiVVNFUlNfU0VUVElOR1MiLCJuZXdVc2VyRGF0YSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJEYXRhU291cmNlIiwibG9uZ1BvbGxDb25uZWN0IiwiZGF0YVR5cGUiLCJjcmVhdGVSZXF1ZXN0UGF0aCIsImJhc2ljQ29ubmVjdCIsImJpbmQiLCJkYXRhQmFzZVVSTCIsInJlcXVlc3RQb3N0Zml4IiwicmVxdWVzdFByZWZpeCIsInBhdGgiLCJnZXRIVE1MIiwic2V0RGF0YSIsImZpZWxkTmFtZSIsInZhbHVlIiwic3RyaW5naWZ5IiwiYWRkTmV3VXNlclRvRGF0YVNvdXJjZSIsImRhdGUiLCJEYXRlIiwidGhhdCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJzZXR0aW5nTmFtZSIsImxhc3RPbmxpbmUiLCJnZXRUaW1lIiwic2VuZE5ld01lc3NhZ2UiLCJnZXREYXRhU291cmNlQVBJIiwiZ2V0RGF0YSIsInVzZXJzQVBJIiwiZ2V0VXNlckxpc3QiLCJnZXRVc2VyU2V0dGluZ3MiLCJnZXRVc2VyTWVzc2FnZXMiLCJnZXRTZXR0aW5nRmllbGQiLCJzZW5kTWVzc2FnZSIsInNldFNldHRpbmdGaWVsZCIsInVwZGF0ZUxhc3RPbmxpbmUiLCJ1cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWciLCJ1cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQiLCJjb21tb25BUEkiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJldmVudHMiLCJhZGRTdWJzY3JpYmUiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInB1c2giLCJmaWx0ZXIiLCJlbGVtZW50Q2FsbGJhY2siLCJlbWl0IiwiZGF0YSIsImV2ZW50IiwiZm9yRWFjaCIsImNhbGwiLCJsb25nUG9sbFJlc3BvbnNlUGFyc2VyIiwidHlwZXNPZkNoYW5nZSIsIm1lc3NhZ2UiLCJzZXR0aW5nIiwicmVhZCIsImV2ZW50UmVndWxhciIsImhhc051bGxEYXRhIiwiZ2V0RGF0YVJlZ3VsYXIiLCJpdElzTmV3TWVzc2FnZVJlZ3VsYXIiLCJpdElzTmV3VXNlckxpc3RSZWd1bGFyIiwiaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uIiwiaXRJc0ZpcnN0VXNlclNldHRpbmdDb25uZWN0aW9uIiwiTG9uZ1BvbGxSZXNwb25zZVBhcnNlciIsImdldFR5cGVPZkNoYW5nZXMiLCJhbnN3ZXJEYXRhIiwidHlwZU5hbWUiLCJ0ZXN0IiwicHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UiLCJzcGxpdCIsInRyaW0iLCJzbGljZSIsInBhcnNlVXNlcnNNZXNzYWdlcyIsImNoYW5nZVR5cGUiLCJtZXNzYWdlSWQiLCJyZXN1bHRPYmplY3QiLCJpZCIsInBvcCIsInNoaWZ0IiwiZ2V0Rmlyc3REYXRhIiwiaGFzTmV3RGF0YSIsInBhcnNlVXNlckxpc3QiLCJnZXRVc2VySWQiLCJleGNlcHRpb24iLCJwYXJzZVVzZXJzU2V0dGluZ3MiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0IiwicmVzdWx0T2ZQYXJzZSIsInR5cGUiLCJvYmplY3QiLCJ2aWV3RmFjdG9yeSIsIlZpZXdGYWN0b3J5IiwiY3JlYXRlVmlldyIsImh0bWxQYXRoIiwiY3NzUGF0aCIsImNvbnRhaW5lckNsYXNzIiwiaW5jbHVkZVZpZXdDc3NUb1BhZ2UiLCJjcmVhdGVDU1NMaW5rIiwiaW5jbHVkZVZpZXdIVE1MVG9QYWdlIiwiRXJyb3IiLCJjb250YWluZXJEaXYiLCJodG1sIiwiaW5uZXJIVE1MIiwibGluayIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZpbGVQYXRoIiwicmVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJzZW5kZXIiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwiRElTUExBWV9NRVNTQUdFX0RBVEUiLCJtZXNzYWdlU2VuZGVyRGl2IiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIm1lc3NhZ2VEaXYiLCJESVNQTEFZX01FU1NBR0UiLCJnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQiLCJtZXNzYWdlc0lzUmVhZCIsImZpZWxkVmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0Rpc3BsYXkiLCJzdHlsZUNsYXNzZXMiLCJkaXYiLCJzdHlsZSIsImNyZWF0ZU1lc3NhZ2VMaXN0IiwibWVzc2FnZU9iamVjdHMiLCJuZXdNZXNzYWdlTGlzdCIsInVwZGF0ZU1lc3NhZ2VMaXN0IiwiZGlzcGxheU1lc3NhZ2VzIiwiYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqIiwiY2xlYXJDaGF0IiwibWVzc2FnZU9iamVjdCIsInVzZXJEYXRhTWFuYWdlciIsIlVzZXJEYXRhTWFuYWdlciIsImdldFVzZXJEYXRhIiwiZ2V0VXNlckNvcnJlc3BvbmRlbmNlIiwiY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uIiwiYWJvcnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwia2V5IiwibWVzc2FnZXNPYmplY3QiLCJjbGVhck1lc3NhZ2VMaXN0IiwiY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlIiwic2F2ZVNldHRpbmdGaWVsZCIsInVwZGF0ZVVzZXJPbmxpbmUiLCJzZW5kZXJOYW1lIiwibWludXRlcyIsImdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50IiwiZ2V0TWludXRlcyIsInRvU3RyaW5nIiwiZ2V0SG91cnMiLCJjb25jYXQiLCJzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSIsInNldE1lc3NhZ2VBc1JlYWQiLCJzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIiwic2V0dGluZ3MiLCJuZXdGaWVsZFNldHRpbmciLCJ1c2VyTGlzdE1hbmFnZXIiLCJVc2VyTGlzdE1hbmFnZXIiLCJ1TGlzdCIsImNyZWF0ZVVzZXJFbGVtZW50IiwiaXNPbmxpbmUiLCJ1c2VyRGl2IiwidXNlcklkRGl2IiwidXNlckluZGljYXRvciIsInNldFVzZXJMaXN0IiwidXNlckx1c3RPYmplY3QiLCJhZGRVc2VyVG9Vc2Vyc0FycmF5IiwidXNlciIsInVzZXJzTGlzdCIsInVzZXJJc09ubGluZSIsInVzZXJFbGVtZW50Iiwib25saW5lIiwidmlzaWJsZSIsInVwZGF0ZVVzZXJPbmxpbmVTdGF0dXMiLCJ1c2VySW5kZXgiLCJnZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCIsInVzZXJNYW5hZ2VyIiwibGFzdFVzZXJPbmxpbmVUaW1lIiwiZmlsdGVyQnlOYW1lIiwiaW5kZXhPZiIsInNvcnRVc2Vyc0J5RmllbGQiLCJjbGVhclVzZXJMaXN0IiwiZGlzcGxheVVzZXJzIiwiZWxlbSIsImRhc2hib2FyZCIsInVEYXRhTWFuYWdlciIsInVMaXN0TWFuYWdlciIsImludGVydmFsSWQiLCJEYXNoYm9hcmRDb250cm9sbGVyIiwic2V0dXBFdmVudEVtaXR0ZXIiLCJzdGFydEFwcCIsInNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMiLCJzZXR1cEludGVydmFsRnVuY3Rpb25zIiwiQXJyYXkiLCJjb25kaXRpb24iLCJnZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSIsImxvY2FsU2V0dGluZ3NTZXR1cCIsInNldHVwVXNlckxpc3RET00iLCJ0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyIiwic2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSIsInNlcmlhbENvbmRpdGlvbiIsInNvcnQiLCJjdXJyZW50VXNlcklkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJzdGFydENvbnZlcnNhdGlvbldpdGhVc2VyIiwic2V0dXBVc2Vyc0xpc3RlbmVycyIsImZyb20iLCJ1c2VycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1c2VyTGlzdGVuZXIiLCJpbm5lclRleHQiLCJnZXRBY2Vzc1RvVXNlcnNMaXN0IiwibG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvciIsImN1cnJlbnRVc2VyTGlzdENvbm5lY3Rpb24iLCJtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkIiwicmVtb3ZlIiwidXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0IiwiY2xvc2VDb252ZXJzYXRpb24iLCJuZXdNZXNzYWdlRGl2IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNldEludGVydmFsIiwidmlld0lkIiwiY2xvc2VBcHAiLCJjbGVhckludGVydmFsIiwiRE9NVmFyaWFibGVzIiwia2V5T2ZWYWx1ZSIsImNoYXRUaXRsZSIsInR5cGVPZlZhbHVlIiwiY2hhdFVybCIsImNoYXRDbGFzcyIsImNoYXRQb3NpdGlvblNlbGVjdCIsImFsbG93TWluaW1pemUiLCJhbGxvd0RyYWciLCJzaG93VGltZSIsInJlcXVpcmVOYW1lIiwibmV0d29ya1JhZGlvWE1SIiwidHJ1ZSIsIm5ldHdvcmtSYWRpb0xvbmdQb2xsIiwibmV0d29ya1JhZGlvRmV0Y2giLCJMYXVuY2hlciIsImdldERhdGFGcm9tRWxlbWVudCIsInNyYyIsImVsZW1lbnROYW1lIiwiZ2V0QXR0cmlidXRlIiwiY2hlY2tlZCIsImdldEVsZW1lbnRWYWx1ZSIsIm5hbWUiLCJzY3JpcHRDb2RlIiwiYWJvdXQiLCJBYm91dCIsIm1haW5Db250cm9sbGVyIiwibWF0Y2hlc0h0bWxQYXRoIiwiY29uZmlndXJhdGlvbiIsImNsb3NlRnVuY3Rpb25zIiwic3RhcnRGdW5jdGlvbnMiLCJNYWluQ29udHJvbGxlciIsIndpbmRvdyIsImhhbmRsZVVybCIsIm5ld1VSTCIsImxvY2F0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QVE4SCxHQUNQVCxFQUFlckgsTUFFWixLQUlSLElBQUl1SCxFQXBFTSxDQXNFbEIzWixZQUVIc1osZUFBZTlEIiwiZmlsZSI6ImRhc2hib2FyZEFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbmZpZ1xyXG5cclxuLyogZXhwb3J0ZWQgbWFpbkNvbmZpZyAqL1xyXG52YXIgbWFpbkNvbmZpZyA9IHtcclxuICAgIERPTToge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC90LXQvtCx0YXQvtC00LjQvNC+INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L/QuNGB0L7QuiDRjtC30LXRgNC+0LJcclxuICAgICAgICBVU0VSX0xJU1RfQ1NTX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2Vycy1saXN0XCIsXHJcbiAgICAgICAgLy8g0JHQu9C+0Log0LIg0LrQvtGC0L7RgNGL0Lkg0LfQsNCz0YDRg9C20LDQtdGC0YHRjyDRh9Cw0YJcclxuICAgICAgICBDU1NfQ0hBVF9DT05UQUlOU19CTE9DS19TVFlMRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdFwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTQu9GPINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjiDQv9C+INC90LDQttCw0YLQuNGOXHJcbiAgICAgICAgQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3NlbmQtYnV0dG9uXCIsXHJcbiAgICAgICAgLy8g0JrQu9Cw0YHRgSDQutC90L7Qv9C60Lgg0LfQsNC60YDRi9Cy0LDRjtGJ0LXQuSDRh9Cw0YJcclxuICAgICAgICBDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2Nsb3NlLWNoYXRcIixcclxuICAgICAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDQv9Cw0YDQsNC80LXRgtGA0LAg0YTQuNC70YzRgtGA0LDRhtC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgICAgICBDU1NfRklMVEVSX0lOUFVUX0lEOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9maWx0ZXItaW5wdXRcIixcclxuICAgICAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDQv9Cw0YDQsNC80LXRgtGA0LAg0YHQvtGA0YLQuNGA0L7QstC60Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgICAgICBDU1NfU09SVF9TRUxFQ1RfSUQ6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3NvcnRcIlxyXG5cclxuICAgIH0sXHJcbiAgICBsYXVuY2hlcjoge1xyXG4gICAgICAgIHBhdHRlcm46IFwidG91Y2hzb2Z0X2NoYXQtbGF1bmNoZXJfXCIsXHJcbiAgICAgICAgYWZ0ZXIgOiBbXHJcbiAgICAgICAgICAgIFwiY2hhdFRpdGxlXCIsIFwiY2hhdFVybFwiLCBcImNoYXRDbGFzc1wiLCBcImNoYXRQb3NpdGlvblNlbGVjdFwiLFxyXG4gICAgICAgICAgICBcImFsbG93TWluaW1pemVcIiwgXCJhbGxvd0RyYWdcIiwgXCJyZXF1aXJlTmFtZVwiLCBcInNob3dUaW1lXCIsIFwibmV0d29ya1JhZGlvWE1SXCIsXHJcbiAgICAgICAgICAgIFwibmV0d29ya1JhZGlvRmV0Y2hcIixcIm5ldHdvcmtSYWRpb0xvbmdQb2xsXCIsIFwic2NyaXB0Q29kZVwiXHJcbiAgICAgICAgXSxcclxuICAgICAgICBzcmNTdGFydDogXCImbHRzY3JpcHQgc3JjPSdodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL0hvbWV3b3JrXzIvbWFzdGVyL2pzL2NoYXQuanM/XCIsXHJcbiAgICAgICAgc3JjRW5kOiAgXCInJmd0Jmx0L3NjcmlwdCZndFwiXHJcbiAgICB9LFxyXG4gICAgdXNlckxpc3Q6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgdGLINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L7QsdGK0LXQutGC0L7QvCDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgVVNFUl9FTEVNRU5UX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlclwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPIGlkINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaWRcIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgtGLINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGB0YLQsNGC0YPRgdCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9mZmxpbmVcIixcclxuICAgICAgICBVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9ubGluZVwiXHJcbiAgICB9LFxyXG4gICAgY2hhdFNldHRpbmdzOiB7XHJcbiAgICAgICAgdHlwZU9mUmVxdWVzdDogXCJsb25nUG9sbFwiXHJcbiAgICB9LFxyXG4gICAgY3VycmVudFVzZXJTZXR0aW5nczoge1xyXG4gICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICB1c2VyTmFtZTogbnVsbFxyXG4gICAgfSxcclxuXHJcbiAgICBjdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uOiB7XHJcbiAgICAgICAgZmlsdGVyQnk6IG51bGwsXHJcbiAgICAgICAgc29ydEJ5OiBudWxsXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBpbnRlcnZhbDoge1xyXG4gICAgICAgIFVQREFURV9VU0VSU19USU1FOiA1MDAwLFxyXG4gICAgICAgIE9OTElORV9JTlRFUlZBTDogMTIwMDBcclxuICAgIH0sXHJcbiAgICByb3V0ZXI6IHtcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGFib3V0XHJcbiAgICAgICAgQUJPVVRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2Fib3V0Lmh0bWxcIixcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICBMQVVOQ0hFUl9IVE1MX1BBVEg6IFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9kYXNoYm9hcmQvY2hhdExhdW5jaGVyLmh0bWxcIixcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGRhc2hib2FyZFxyXG4gICAgICAgIERBU0hCT0FSRF9IVE1MX1BBVEg6IFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWxcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwLCDQsiDQutC+0YLQvtGA0YvQuSDQt9Cw0LPRgNGD0LbQsNC10YLRgdGPINC90LXQvtCx0YXQvtC00LjQvNCw0Y8g0YfQsNGB0YLRjCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgICAgQ09OVEVOVF9DTEFTUzogXCJjb250ZW50XCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEsINC+0YLQvNC10YfQsNGO0YnQuNC5INCw0LrRgtC40LLQvdGD0Y4g0YHRgtGA0LDQvdC40YbRgyDQsiDQv9Cw0L3QtdC70Lgg0L3QsNCy0LjQs9Cw0YbQuNC4XHJcbiAgICAgICAgTkFWSUdBVElPTl9BQ1RJVkVfQ1NTOiBcIm5hdmlnYXRpb24tYWN0aXZlXCJcclxuICAgIH0sXHJcbiAgICBtZXNzYWdlczoge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINC00LvRjyDRjdC70LXQvNC10L3QsNGCINGBINGB0L7QvtCx0YnQtdC90LjQtSwg0LXRgdC70Lgg0Y7Qt9C10YAg0L3QtSDQv9GA0L7Rh9C40YLQsNC7INGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9tZXNzYWdlLW5vdC1yZWFkXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZXNcIixcclxuXHJcbiAgICAgICAgLy8gbWVzc2FnZVxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0L3QsNGF0L7QtNC40YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyzQtNCw0YLQsCDQuCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19NRVNTQUdFX0NPTlRBSU5FUjogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWVsZW1lbnRzXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1zZW5kZXJcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINC00LDRgtGDINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfREFURTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWRhdGVcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0U6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZVwiXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDQutC70LDRgdGBINC/0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgSU5WSVNJQkxFX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9pbnZpc2libGUtZWxlbWVudFwiLFxyXG5cclxuICAgIERBVEFfQkFTRV9VUkw6IFwiaHR0cHM6Ly9vbmxpbmVjb25zdWx0YW50d2ViYXBwLmZpcmViYXNlaW8uY29tXCIsXHJcblxyXG5cclxuICAgIEFETUlOX05BTUU6IFwiQWRtaW5cIixcclxuXHJcbiAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDRgdC+0L7QsdGJ0LXQvdC40Y8g0L/QtdGA0LXQtCDQvtGC0L/RgNCw0LLQutC+0Lkg0Y7Qt9C10YDRg1xyXG4gICAgQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3RleHRhcmVhLWZvci1tZXNzYWdlXCIsXHJcblxyXG4gICAgTE9DQUxfU1RPUkFHRV9OQU1FOiBcImN1cnJlbnRDb25kaXRpb25cIixcclxuXHJcbiAgICAvLyDQtNC70Y8g0L3QvtCy0YvRhSDRgdC+0L7QsdGJ0LXQvdC40Lkg0L7RgiDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxyXG4gICAgLy8g0JXRgdC70Lgg0Y7Qt9C10YAg0L/RgNC40YHQu9Cw0Lsg0YHQvtC+0L7QsdGJ0LXQvdC40LUsINC90LAg0Y7Qt9C10YDQsCDQsiDRgdC/0LjRgdC60LUg0LLQtdGI0LDQtdGC0YHRjyDRjdGC0L7RgiDRgdGC0LjQu9GMXHJcbiAgICBDU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1oYXZlLW5ldy1tZXNzYWdlXCJcclxuXHJcblxyXG5cclxuXHJcbn07XHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLyogZXhwb3J0ZWQgZGF0YUJhc2VVcmwgKi9cclxuLyogZXhwb3J0ZWQgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgZGF0YUJhc2VVcmwgPSBtYWluQ29uZmlnLkRBVEFfQkFTRV9VUkw7XHJcblxyXG52YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tRE9NIChzZWxlY3RvciwgaXNBbGwsIGl0SXNJZCkge1xyXG4gICAgdmFyIHNlbGVjdG9yU3RhcnQgPSAoaXRJc0lkKSA/IFwiI1wiIDogXCIuXCI7XHJcbiAgICBpZihpc0FsbCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG59O1xyXG5cclxuXHJcbnZhciBkYXRhQ29ubmVjdG9yQ29uZmlnID0ge1xyXG4gICAgdHlwZU9mUmVxdWVzdDogbWFpbkNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdFxyXG59O1xyXG5cclxuLy8gc2VydmljZVxyXG5cclxuLyogZXhwb3J0ZWQgc29ydGVyICovXHJcbnZhciBzb3J0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlTmV3U29ydGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlcigpIHt9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU29ydGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3dhcChpdGVtcywgZmlyc3RJbmRleCwgc2Vjb25kSW5kZXgpIHtcclxuICAgICAgICB2YXIgdGVtcCA9IGl0ZW1zW2ZpcnN0SW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW2ZpcnN0SW5kZXhdID0gaXRlbXNbc2Vjb25kSW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW3NlY29uZEluZGV4XSA9IHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcGFydGl0aW9uKGl0ZW1zLCBsZWZ0LCByaWdodCwgc29ydEZpZWxkKSB7XHJcbiAgICAgICAgdmFyIHBpdm90ID0gaXRlbXNbTWF0aC5mbG9vcigocmlnaHQgKyBsZWZ0KSAvIDIpXVtzb3J0RmllbGRdO1xyXG4gICAgICAgIHZhciBpID0gbGVmdDtcclxuICAgICAgICB2YXIgaiA9IHJpZ2h0O1xyXG5cclxuICAgICAgICB3aGlsZSAoaSA8PSBqKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVtc1tpXVtzb3J0RmllbGRdID4gcGl2b3QpIHtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoaXRlbXNbal1bc29ydEZpZWxkXSA8IHBpdm90KSB7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPD0gaikge1xyXG4gICAgICAgICAgICAgICAgc3dhcChpdGVtcywgaSwgaik7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ydGVyLnByb3RvdHlwZS5xdWlja1NvcnQgPSBmdW5jdGlvbiBxdWlja1NvcnQoXHJcbiAgICAgICAgaXRlbXMsXHJcbiAgICAgICAgbGVmdCxcclxuICAgICAgICByaWdodCxcclxuICAgICAgICBzb3J0RmllbGRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBpbmRleDtcclxuICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHBhcnRpdGlvbihpdGVtcywgbGVmdCwgcmlnaHQsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgaW5kZXggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgbGVmdCwgaW5kZXggLSAxLCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgaW5kZXgsIHJpZ2h0LCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZVNvcnRlcigpO1xyXG59KSgpO1xyXG4vKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8vINCe0YfQuNGJ0LDQtdGCIERPTSDRgdC+0LTQtdGA0LbQsNGJ0LjQuSDRjdC70LXQvNC10L3RgtGLINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChlbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZGF0YWJhc2VcclxuXHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3IgKi9cclxuLyogZ2xvYmFsIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLy8g0JzQvtC00YPQu9GMINC/0YDQtdC00L7RgdGC0LDQstC70Y/QtdGCINGB0L/QvtGB0L7QsSDQvtGC0L/RgNCw0LLQutC4INC30LDQv9GA0L7RgdCwINC6INC40YHRgtC+0YfQvdC40LrRgyDQtNCw0L3QvdGL0YVcclxuLy8g0JTQu9GPINGA0LXQutCy0LXRgdGC0LAg0L3QtdC+0LHRhdC+0LTQuNC8INC/0YPRgtGMLCDRgtC10LvQviDQt9Cw0L/RgNC+0YHQsCwg0YLQuNC/INC30LDQv9GA0L7RgdCwXHJcbi8vIHJlcXVlc3Qg0LLQvtC30LLRgNCw0YnQsNC10YIgUHJvbWlzZVxyXG52YXIgZGF0YUNvbm5lY3RvciA9IChmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJKGRhdGFDb25uZWN0b3JDb25maWdPYmopIHtcclxuICAgIHZhciBkYXRhQmFzZUNvbm5lY3RvcjtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhQmFzZUNvbm5lY3RvcigpIHt9XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnNldHVwRGF0YUJhc2VBUEkgPSBmdW5jdGlvbiBzZXR1cERhdGFCYXNlQVBJICh0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIGRhdGFCYXNlQVBJO1xyXG4gICAgICAgIGlmICh0eXBlT2ZSZXF1ZXN0ID09PSBcImZldGNoXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0RmV0Y2gsXHJcbiAgICAgICAgICAgICAgICBnZXROZXdDb25uZWN0b3JBUEk6IGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUElcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVPZlJlcXVlc3QgPT09IFwiWEhSXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgZ2V0TmV3Q29ubmVjdG9yQVBJOiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uOiBkYXRhQmFzZUNvbm5lY3Rvci5sb25nUG9sbCxcclxuICAgICAgICAgICAgICAgIGdldE5ld0Nvbm5lY3RvckFQSTogZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YUJhc2VBUEk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbiByZXF1ZXN0RmV0Y2goXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0UGF0aCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IGNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHlcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlSlNPTihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RYTVIgPSBmdW5jdGlvbiByZXF1ZXN0WE1SKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0VHlwZSwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBsb2FkQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIGVycm9yQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdEJvZHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUubG9uZ1BvbGwgPSBmdW5jdGlvbiBsb25nUG9sbCAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGh0dHAub3BlbignR0VUJywgdGFyZ2V0VXJsLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAndGV4dC9ldmVudC1zdHJlYW0nKTtcclxuICAgICAgICByZXR1cm4geGh0dHA7XHJcbiAgICB9O1xyXG5cclxuICAgIGRhdGFCYXNlQ29ubmVjdG9yID0gbmV3IERhdGFCYXNlQ29ubmVjdG9yKCk7XHJcbiAgICByZXR1cm4gZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqLnR5cGVPZlJlcXVlc3QpO1xyXG5cclxufSkoZGF0YUNvbm5lY3RvckNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGRhdGFTb3VyY2UgKi9cclxuLyogZXhwb3J0ZWQgbWFpbkNvbmZpZyAqL1xyXG4vKiBnbG9iYWwgZGF0YUJhc2VVcmwgKi9cclxuLyogZ2xvYmFsIGRhdGFDb25uZWN0b3IgKi9cclxuLy8g0JzQvtC00YPQu9GMINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFXHJcbi8vINCS0YHQtSBBUEkg0YTRg9C90LrRhtC40Lgg0LLQvtC30LLRgNCw0YnQsNGO0YIg0L/RgNC+0LzQuNGB0YtcclxudmFyIGRhdGFTb3VyY2UgPSAoZnVuY3Rpb24gY3JlYXRlRGF0YVNvdXJjZSAoZGF0YUNvbm5lY3RvciwgY29uZmlnKSB7XHJcbiAgICB2YXIgZGF0YVNvdXJjZUluc3RhbmNlO1xyXG4gICAgdmFyIFVTRVJfTElTVCA9IFwidXNlckxpc3RcIjtcclxuICAgIHZhciBVU0VSX01FU1NBR0VTID0gXCJ1c2Vyc01lc3NhZ2VzXCI7XHJcbiAgICB2YXIgVVNFUlNfU0VUVElOR1MgPSBcInVzZXJzU2V0dGluZ3NcIjtcclxuICAgIHZhciBuZXdVc2VyRGF0YSA9IHtcclxuICAgICAgICBpc01pbmltaXplOiBmYWxzZSxcclxuICAgICAgICByZWFkTGFzdE1lc3NhZ2U6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YVNvdXJjZSgpIHt9XHJcblxyXG4gICAgZnVuY3Rpb24gbG9uZ1BvbGxDb25uZWN0IChkYXRhVHlwZSwgdXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IuY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uKHJlcXVlc3RQYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYXNpY0Nvbm5lY3QgKGRhdGFUeXBlLCB1c2VySWQpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0LmJpbmQobnVsbCwgcmVxdWVzdFBhdGgsIG51bGwsIFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgfVxyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmNyZWF0ZVJlcXVlc3RQYXRoID0gZnVuY3Rpb24gY3JlYXRlUmVxdWVzdFBhdGgoXHJcbiAgICAgICAgZGF0YUJhc2VVUkwsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHJlcXVlc3RQb3N0Zml4LFxyXG4gICAgICAgIHJlcXVlc3RQcmVmaXhcclxuICAgICkge1xyXG4gICAgICAgIHZhciBwYXRoID0gZGF0YUJhc2VVUkw7XHJcbiAgICAgICAgaWYocmVxdWVzdFByZWZpeCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgcmVxdWVzdFByZWZpeFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXNlcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyB1c2VySWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXF1ZXN0UG9zdGZpeCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgcmVxdWVzdFBvc3RmaXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhdGggKz0gXCIuanNvblwiO1xyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRIVE1MID0gZnVuY3Rpb24gZ2V0SFRNTCAocmVxdWVzdFBhdGgpIHtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgXCJHRVRcIiwgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCdcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uIHNldERhdGEgKGRhdGFUeXBlLCByZXF1ZXN0VHlwZSwgZmllbGROYW1lLCB1c2VySWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoO1xyXG4gICAgICAgIGlmKHJlcXVlc3RUeXBlID09PSBcIlBVVFwiKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBmaWVsZE5hbWUsIGRhdGFUeXBlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCwgZGF0YVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodmFsdWUpLFxyXG4gICAgICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5hZGROZXdVc2VyVG9EYXRhU291cmNlID0gZnVuY3Rpb24gYWRkTmV3VXNlclRvRGF0YVNvdXJjZSAodXNlcklkLCB1c2VyTmFtZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGU7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIG5ld1VzZXJEYXRhLnVzZXJOYW1lID0gdXNlck5hbWU7XHJcbiAgICAgICAgT2JqZWN0LmtleXMobmV3VXNlckRhdGEpLm1hcChmdW5jdGlvbiBhZGROZXdTZXR0aW5ncyAoc2V0dGluZ05hbWUpIHtcclxuICAgICAgICAgICAgdGhhdC5zZXREYXRhKFVTRVJTX1NFVFRJTkdTLCBcIlBVVFwiLCBzZXR0aW5nTmFtZSwgdXNlcklkLCBuZXdVc2VyRGF0YVtzZXR0aW5nTmFtZV0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNldERhdGEoVVNFUl9MSVNULCBcIlBVVFwiLCBudWxsLCB1c2VySWQsIHtcImxhc3RPbmxpbmVcIjogZGF0ZS5nZXRUaW1lKCksIFwic2VuZE5ld01lc3NhZ2VcIjogZmFsc2V9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YVNvdXJjZUFQSSA9IGZ1bmN0aW9uIGdldERhdGFTb3VyY2VBUEkgKHR5cGVPZlJlcXVlc3QpIHtcclxuICAgICAgICBpZih0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9IHR5cGVPZlJlcXVlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9PT0gXCJsb25nUG9sbFwiKSB7XHJcbiAgICAgICAgICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGEgPSBsb25nUG9sbENvbm5lY3RcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXREYXRhID0gYmFzaWNDb25uZWN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVzZXJzQVBJOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRVc2VyTGlzdDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9MSVNUXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgZ2V0VXNlclNldHRpbmdzOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HU1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFVzZXJNZXNzYWdlczogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFU1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFNldHRpbmdGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUlNfU0VUVElOR1NcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZTogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFUyxcclxuICAgICAgICAgICAgICAgICAgICBcIlBPU1RcIlxyXG5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBzZXRTZXR0aW5nRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBhZGROZXdVc2VyVG9EYXRhU291cmNlOiBkYXRhU291cmNlSW5zdGFuY2UuYWRkTmV3VXNlclRvRGF0YVNvdXJjZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUxhc3RPbmxpbmU6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTElTVCxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibGFzdE9ubGluZVwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlU2VuZE5ld01lc3NhZ2VGbGFnOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX0xJU1QsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNlbmROZXdNZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21tb25BUEk6IHtcclxuICAgICAgICAgICAgICAgIGdldEhUTUw6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRIVE1MLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKSxcclxuICAgICAgICAgICAgICAgIGdldERhdGFTb3VyY2VBUEk6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhU291cmNlQVBJLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10LwgaW5zdGFuY2Ug0L7QsdGK0LXQutGC0LAsINC30LDQtNCw0LXQvCBBUElcclxuICAgIGRhdGFTb3VyY2VJbnN0YW5jZSA9IG5ldyBEYXRhU291cmNlKCk7XHJcblxyXG5cclxuXHJcbiAgICByZXR1cm4gZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGFTb3VyY2VBUEkoKTtcclxufSkoZGF0YUNvbm5lY3RvciwgbWFpbkNvbmZpZyk7XHJcblxyXG4vLyBldmVudEVtaXR0ZXJcclxuXHJcbnZhciBldmVudEVtaXR0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlRXZlbnRFbWl0dGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkU3Vic2NyaWJlID0gZnVuY3Rpb24gYWRkU3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmKCAhdGhpcy5ldmVudHNbZXZlbnROYW1lXSApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaWJlICgpIHtcclxuICAgICAgICAgICAgdGhhdC5ldmVudHNbZXZlbnROYW1lXSA9IHRoYXQuZXZlbnRzW2V2ZW50TmFtZV0uZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Q2FsbGJhY2sgIT09IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaWJlXHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQgKGV2ZW50TmFtZSwgZGF0YSkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYoIGV2ZW50ICkge1xyXG4gICAgICAgICAgICBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChudWxsLCBkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG59KSgpO1xyXG52YXIgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciA9IChmdW5jdGlvbiBjcmVhdGVMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCkge1xyXG4gICAgdmFyIHR5cGVzT2ZDaGFuZ2UgPSB7XHJcbiAgICAgICAgbWVzc2FnZTogL21lc3NhZ2UvLFxyXG4gICAgICAgIHVzZXJMaXN0OiAvbGFzdE9ubGluZS57MSx9c2VuZE5ld01lc3NhZ2UvLFxyXG4gICAgICAgIGxhc3RPbmxpbmU6IC9cInBhdGhcIjpcIlxcL1xcd3sxLH1cXC9sYXN0T25saW5lLyxcclxuICAgICAgICBzZW5kTmV3TWVzc2FnZTogL1wicGF0aFwiOlwiXFwvXFx3ezEsfVxcL3NlbmROZXdNZXNzYWdlLyxcclxuICAgICAgICBzZXR0aW5nOiAvcmVhZExhc3RNZXNzYWdlLyxcclxuICAgICAgICByZWFkOiAvcmVhZC9cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGV2ZW50UmVndWxhciA9IC9ldmVudDogcHV0LztcclxuICAgIHZhciBoYXNOdWxsRGF0YSA9IC9kYXRhOiBudWxsLztcclxuICAgIHZhciBnZXREYXRhUmVndWxhciA9IC9cIixcImRhdGFcIjovO1xyXG4gICAgdmFyIGl0SXNOZXdNZXNzYWdlUmVndWxhciA9IC9cInBhdGhcIjpcIlxcLy0vO1xyXG4gICAgdmFyIGl0SXNOZXdVc2VyTGlzdFJlZ3VsYXIgPSAvXCJkYXRhXCI6e1wibGFzdE9ubGluZVwiOlxcZCssXCJzZW5kTmV3TWVzc2FnZVwiOi87XHJcbiAgICB2YXIgaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uID0gdHJ1ZTtcclxuICAgIHZhciBpdElzRmlyc3RVc2VyU2V0dGluZ0Nvbm5lY3Rpb24gPSB0cnVlO1xyXG5cclxuICAgIGZ1bmN0aW9uIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKSB7fVxyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmdldFR5cGVPZkNoYW5nZXMgPSBmdW5jdGlvbiBnZXRUeXBlT2ZDaGFuZ2VzKFxyXG4gICAgICAgIGFuc3dlckRhdGFcclxuICAgICkge1xyXG4gICAgICAgIHZhciB0eXBlID0gT2JqZWN0LmtleXModHlwZXNPZkNoYW5nZSkuZmlsdGVyKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDdXJyZW50VHlwZU9mQ2hhbmdlKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZXNPZkNoYW5nZVt0eXBlTmFtZV0udGVzdChhbnN3ZXJEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVbMF07XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlID0gZnVuY3Rpb24gcHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2Vyc01lc3NhZ2VzID0gZnVuY3Rpb24gcGFyc2VVc2Vyc01lc3NhZ2VzKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VJZDtcclxuICAgICAgICB2YXIgcmVzdWx0T2JqZWN0ID0ge307XHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwicmVhZFwiKSB7XHJcbiAgICAgICAgICAgIGRhdGEuaWQgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcvcmVhZFwiLFwiJylcclxuICAgICAgICAgICAgICAgIC5zaGlmdCgpO1xyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnL3JlYWRcIixcImRhdGFcIjonKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpdElzTmV3TWVzc2FnZVJlZ3VsYXIudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUlkID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilcclxuICAgICAgICAgICAgLnNoaWZ0KCk7XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgIHJlc3VsdE9iamVjdFttZXNzYWdlSWRdID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0T2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5oYXNOZXdEYXRhID0gZnVuY3Rpb24gaGFzTmV3RGF0YShyZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICFoYXNOdWxsRGF0YS50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSAmJiByZXNwb25zZS5sZW5ndGggPiAxXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2VyTGlzdCA9IGZ1bmN0aW9uIHBhcnNlVXNlckxpc3QoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgdXNlcklkO1xyXG4gICAgICAgIGlmIChpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdElzTmV3VXNlckxpc3RSZWd1bGFyLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIHVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLCBudWxsKTtcclxuICAgICAgICAgICAgZGF0YVt1c2VySWRdID0gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB1c2VySWQgPSB0aGlzLmdldFVzZXJJZChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWQsIGRhdGFdO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRGaXJzdERhdGEgPSBmdW5jdGlvbiBnZXRGaXJzdERhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBqc29uRGF0YTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0VXNlcklkID0gZnVuY3Rpb24gZ2V0VXNlcklkKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGNoYW5nZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAuc2hpZnQoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilbMF1cclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJzU2V0dGluZ3MgPSBmdW5jdGlvbiBwYXJzZVVzZXJzU2V0dGluZ3MoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmIChpdElzRmlyc3RVc2VyU2V0dGluZ0Nvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaXRJc0ZpcnN0VXNlclNldHRpbmdDb25uZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgICByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVsxXVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIFtudWxsLCBkYXRhXTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGV4dCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRleHQuc3BsaXQoZXZlbnRSZWd1bGFyKTtcclxuICAgICAgICB2YXIgY2hhbmdlVHlwZSA9IHRoaXMuZ2V0VHlwZU9mQ2hhbmdlcyhyZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdKTtcclxuICAgICAgICB2YXIgcmVzdWx0T2ZQYXJzZSA9IHsgdHlwZTogY2hhbmdlVHlwZSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmhhc05ld0RhdGEocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlVHlwZSA9PT0gXCJtZXNzYWdlXCIgfHwgY2hhbmdlVHlwZSA9PT0gXCJyZWFkXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJzTWVzc2FnZXMocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJzZW5kTmV3TWVzc2FnZVwiIHx8XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID09PSBcImxhc3RPbmxpbmVcIiB8fFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJ1c2VyTGlzdFwiXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlVXNlckxpc3QocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09IFwic2V0dGluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRPZlBhcnNlLm9iamVjdCA9IHRoaXMucGFyc2VVc2Vyc1NldHRpbmdzKHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCk7XHJcbn0pKCk7XHJcblxyXG4vLyB2aWV3XHJcblxyXG4vKiBleHBvcnRlZCB2aWV3RmFjdG9yeSAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG52YXIgdmlld0ZhY3RvcnkgPSAoZnVuY3Rpb24gY3JlYXRlVmlld0ZhY3RvcnkgKGRhdGFTb3VyY2UpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBWaWV3RmFjdG9yeSAoKSB7fVxyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVWaWV3ID0gZnVuY3Rpb24gY3JlYXRlQ2hhdFZpZXcgKGh0bWxQYXRoLCBjc3NQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gY3JlYXRlVmlld1Byb21pc2UgKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZihodG1sUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYoY3NzUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaW5jbHVkZVZpZXdDc3NUb1BhZ2UodGhhdC5jcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlc2hlZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0L2Nzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvdWNoLXNvZnQtY2hhdC1jc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGF0LmluY2x1ZGVWaWV3SFRNTFRvUGFnZShodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJodG1sUGF0aCBpcyBudWxsLiBQbGVhc2UgYWRkIGh0bWxQYXRoXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuaW5jbHVkZVZpZXdIVE1MVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRIVE1MVG9QYWdlIChodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpIHtcclxuICAgICAgICB2YXIgY29udGFpbmVyRGl2ID0gKGNvbnRhaW5lckNsYXNzKSA/IGdldEVsZW1lbnQoY29udGFpbmVyQ2xhc3MpIDogZG9jdW1lbnQuYm9keTtcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS5jb21tb25BUEkuZ2V0SFRNTChodG1sUGF0aCkudGhlbihmdW5jdGlvbiBzZXRIdG1sIChodG1sKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0Nzc1RvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0Q3NzVG9QYWdlIChsaW5rKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNTU0xpbmsgPSBmdW5jdGlvbiBjcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgIHJlbCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgVmlld0ZhY3RvcnkoKVxyXG5cclxufSkoZGF0YVNvdXJjZSk7XHJcblxyXG4vLyBjaGF0IG1hbmFnZXJcclxuXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINGA0LDQsdC+0YLRiyDRgdC+INGB0L/QuNGB0LrQvtC8INGB0L7QvtCx0YnQtdC90LjQuSDQntCU0J3QntCT0J4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbnZhciBtZXNzYWdlTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gc2V0dXBNZXNzYWdlTGlzdE1hbmFnZXIgKGNvbmZpZykge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vINCk0L7RgNC80LDRgiAgbWVzc2FnZUxpc3QgPSBbXHJcbiAgICAvLyAgICB7XHJcbiAgICAvLyAgICAgICBzZW5kZXI6IHNlbmRlclxyXG4gICAgLy8gICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIC8vICAgICAgIHJlYWQ6IHRydWUvZmFsc2VcclxuICAgIC8vICAgICAgIGRhdGU6IGRhdGVcclxuICAgIC8vICAgIH0sXHJcbiAgICAvLyBdXHJcbiAgICAvLyByZWFkIC0g0LHRi9C70L4g0LvQuCDQv9GA0L7Rh9C40YLQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIE1lc3NhZ2VMaXN0TWFuYWdlcigpIHt9XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5jRE9NID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlc0Jsb2NrOiBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFX0RBVEUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkICgpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICB2YXIgbWVzc2FnZXNJc1JlYWQgPSBbXTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSBjb25maWcuQURNSU5fTkFNRSB8fCBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZTtcclxuICAgICAgICB2YXIgdXNlcklkID0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIGZvcihpID0gdGhpcy5tZXNzYWdlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1lc3NhZ2VMaXN0W2ldLnNlbmRlciAhPT0gdXNlck5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLm1lc3NhZ2VMaXN0W2ldLnJlYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc0lzUmVhZC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogdGhpcy5tZXNzYWdlTGlzdFtpXS5pZCArIFwiL3JlYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzSXNSZWFkO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgKGlzUmVhZCwgc2VuZGVyKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX01FU1NBR0VfQ09OVEFJTkVSKTtcclxuICAgICAgICBpZiAoIWlzUmVhZCAmJiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSAhPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgPSBmdW5jdGlvbiBjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgKHRleHQsIGlzRGlzcGxheSwgc3R5bGVDbGFzc2VzKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc3R5bGVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gY2xhc3NBZGQgKHN0eWxlKSB7XHJcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKHN0eWxlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTUVTU0FHRSBFTEVNRU5UIC8vXHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VMaXN0IChtZXNzYWdlT2JqZWN0cykgIHtcclxuICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cykge1xyXG4gICAgICAgICAgICBtZXNzYWdlT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIGFkZEVsZW1lbnRUb01lc3NhZ2VMaXN0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3QgKG5ld01lc3NhZ2VMaXN0KSB7XHJcbiAgICAgICAgaWYodGhpcy5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnJlYWRMYXN0TWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IChcclxuICAgICAgICBtZXNzYWdlT2JqXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LnB1c2gobWVzc2FnZU9iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0LXRgNC10LHQuNGA0LDQtdGCINGB0L/QuNGB0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LksINGB0L7Qt9C00LDQtdGCINGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40LUg0LjQvCBET00g0Y3Qu9C10LzQtdC90YLRiyDQuCDQstGB0YLQsNCy0LvRj9C10YIg0LjRhSDQsiDRh9Cw0YJcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuZGlzcGxheU1lc3NhZ2VzID0gZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2VzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNsZWFyQ2hhdCgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBjcmVhdGVNZXNzYWdlIChtZXNzYWdlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGF0LmNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnJlYWRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhhdC5jRE9NLm1lc3NhZ2VzQmxvY2suYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YfQuNGB0YLQuNGC0YwgRE9NINGN0LvQtdC80LXQvdGCINCyINC60L7RgtC+0YDQvtC8INC+0YLQvtCx0YDQsNC20LDRjtGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8gKNC90LDQv9GA0LjQvNC10YAg0YfRgtC+0LHRiyDQstGB0YLQsNCy0LjRgtGMINC90LLQvtGL0Lkg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSlcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJDaGF0ID0gZnVuY3Rpb24gY2xlYXJDaGF0KCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLmNET00ubWVzc2FnZXNCbG9jay5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLnJlbW92ZUNoaWxkKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNZXNzYWdlTGlzdE1hbmFnZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4vKiBnbG9iYWwgZ2V0Q3VycmVudERhdGUgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGV2ZW50RW1pdHRlciAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgdXNlckRhdGFNYW5hZ2VyID0gIChmdW5jdGlvbiBjcmVhdGVVc2VyRGF0YU1hbmFnZXIgKGNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKSB7XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIC8qIGV4cG9ydGVkIGdldEN1cnJlbnREYXRlICovXHJcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSAoZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT09IDEpID8gXCIwXCIgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIHJldHVybiBkYXRlXHJcbiAgICAgICAgICAgIC5nZXRIb3VycygpXHJcbiAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgIC5jb25jYXQoXCI6XCIsIG1pbnV0ZXMpO1xyXG4gICAgfVxyXG4gICAgLyogZXhwb3J0ZWQgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZU9iamVjdCAoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWQsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlbmRlcjogc2VuZGVyLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICByZWFkOiBpc1JlYWQsXHJcbiAgICAgICAgICAgIGRhdGU6IGRhdGUsXHJcbiAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIC8vIGJhc2ljXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyRGF0YUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGdldENvcnJlc3BvbmRlbmNlIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpLnRoZW4oIGZ1bmN0aW9uIGdldFJlc29sdmUgKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYyAoZGF0YSkge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB2YXIgbWVzc2FnZXNPYmplY3QgPSBbXTtcclxuICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBwdXNoRGF0YSAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0uaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlc09iamVjdC5wdXNoKGRhdGFba2V5XSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICBuZXdNZXNzYWdlTGlzdCA9IG1lc3NhZ2VMaXN0TWFuYWdlci5jcmVhdGVNZXNzYWdlTGlzdChtZXNzYWdlc09iamVjdCk7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2VMaXN0KG5ld01lc3NhZ2VMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYyAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJNZXNzYWdlcyh1c2VySWQpKCkudGhlbihmdW5jdGlvbiB1cGRhdGVNZXNzYWdlc0xpc3QgKGRhdGEpIHtcclxuICAgICAgICAgICAgdGhhdC51cGRhdGVNZXNzYWdlTGlzdChkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGdldExvbmdQb2xsQ29ycmVzcG9uZGVuY2UocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpO1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckNvcnJlc3BvbmRlbmNlRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiA9IGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBzZXR1cENvbm5lY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSAzICYmIHRoaXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBsb25nUG9sbFJlc3BvbnNlUGFyc2VyLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uc2VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbCAoZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIGFkZFRvTWVzc2FnZUxpc3RMb25nUG9sbCAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0uaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QoZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFVzZXJEYXRhTWFuYWdlciAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9PT0gXCJsb25nUG9sbFwiKSB7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YUZyb21Mb25nUG9sbENvbm5lY3Rpb24uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyQ29ycmVzcG9uZGVuY2UgPSBnZXRVc2VyQ29ycmVzcG9uZGVuY2VGcm9tTG9uZ1BvbGxDb25uZWN0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSB1cGRhdGVNZXNzYWdlTGlzdEFmdGVyTG9uZ1BvbGwuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gc3Vic2NyaWJlTWVzc2FnZSAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC51cGRhdGVNZXNzYWdlTGlzdChkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJyZWFkXCIsIGZ1bmN0aW9uIHN1YnNjcmliZVJlYWQgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobWVzc2FnZS5pZCA9IGRhdGEuaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWFkID0gZGF0YS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YUJhc2ljLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckNvcnJlc3BvbmRlbmNlID0gZ2V0VXNlckNvcnJlc3BvbmRlbmNlQmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IHVwZGF0ZU1lc3NhZ2VMaXN0QmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuc2V0dXAoKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5jbGVhck1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gY2xlYXJNZXNzYWdlTGlzdCAoKSB7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlID0gZnVuY3Rpb24gY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlICh1c2VySWQsIHVzZXJOYW1lKSB7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5hZGROZXdVc2VyVG9EYXRhU291cmNlKHVzZXJJZCwgdXNlck5hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVTZXR0aW5nRmllbGQgPSBmdW5jdGlvbiBzZXRGaWVsZCAoZmllbGROYW1lKSB7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5zZXRTZXR0aW5nRmllbGQoXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZSxcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5nc1tmaWVsZE5hbWVdXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lID0gZnVuY3Rpb24gdXBkYXRlVXNlck9ubGluZSAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZTtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZUxhc3RPbmxpbmUodXNlcklkLCBkYXRlLmdldFRpbWUoKSlcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlIChzZW5kZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gY3JlYXRlTWVzc2FnZU9iamVjdChtZXNzYWdlLCBkYXRlLCBzZW5kZXJOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ICE9PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICBlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0TWVzc2FnZUFzUmVhZCA9IGZ1bmN0aW9uIHNldE1lc3NhZ2VBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0cyA9IG1lc3NhZ2VMaXN0TWFuYWdlci5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2VPYmplY3RzKTtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBzZXRSZWFkIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZChcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3Quc2VuZGVyID09PSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyhjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2UoXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdFxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHRpbmdzID0gW3t1c2VySWQsIGZpZWxkTmFtZSwgZmllbGRWYWx1ZX0se30uLi5dXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIChzZXR0aW5ncykge1xyXG4gICAgICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24gc2F2ZVNldHRpbmcgKG5ld0ZpZWxkU2V0dGluZykge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldFNldHRpbmdGaWVsZChcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckRhdGFNYW5hZ2VyKCk7XHJcblxyXG59KShtYWluQ29uZmlnLCBldmVudEVtaXR0ZXIsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIpO1xyXG5cclxuLy8gZGFzaGJvYXJkXHJcblxyXG4vKiBleHBvcnRlZCB1c2VyTGlzdE1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHNvcnRlciAqL1xyXG52YXIgdXNlckxpc3RNYW5hZ2VyID0gKGZ1bmN0aW9uIGNyZWF0ZVVzZXJMaXN0IChjb25maWcsIHNvcnRlcikge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLyog0KTQvtGA0LzQsNGCINC+0LHRitC10LrRgtCwINCyINGB0L/QuNGB0LrQtSDRjtC30LXRgNCwXHJcbiAgICAgICogdXNlcklkOiBcIkl2YW4zMDAwMDBcIixcclxuICAgICAgKiB1c2VyRWxlbWVudDogVXNlckxpc3RNYW5hZ2VyLmNyZWF0ZVVzZXJFbGVtZW50KHVzZXJJZCwgdXNlcklzT25saW5lKSxcclxuICAgICAgKiBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgKiB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAqIHNlbmROZXdNZXNzYWdlOiB1c2VyU2V0dGluZ3Muc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICogcmVhZExhc3RNZXNzYWdlOiB1c2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlLFxyXG4gICAgICAqIGxhc3RPbmxpbmU6IHVzZXJTZXR0aW5ncy5sYXN0T25saW5lLFxyXG4gICAgICAqIGlzTWluaW1pemU6IHVzZXJTZXR0aW5ncy5pc01pbmltaXplLFxyXG4gICAgICAqIHVzZXJOYW1lOiB1c2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgKlxyXG4gICAgICAqIHZpc2libGUgLSDQvtGC0L7QsdGA0LDQttCw0YLRjCDQu9C4INGO0LfQtdGA0LAg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICAgICovXHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmdW5jdGlvbiBVc2VyTGlzdE1hbmFnZXIoKSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7fTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0LXQu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y7Qt9C10YDQsCDQsiDRgdC/0LjRgdC60LVcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlVXNlckVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVVc2VyRWxlbWVudChcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgaXNPbmxpbmVcclxuICAgICkge1xyXG4gICAgICAgIHZhciB1c2VyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlcklkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlckluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIHVzZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUyk7XHJcblxyXG4gICAgICAgIHVzZXJJZERpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTKTtcclxuICAgICAgICB1c2VySWREaXYuaW5uZXJIVE1MID0gdXNlcklkO1xyXG5cclxuICAgICAgICBpZiAoaXNPbmxpbmUpIHtcclxuICAgICAgICAgICAgdXNlckluZGljYXRvci5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1c2VySW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQodXNlcklkRGl2KTtcclxuICAgICAgICB1c2VyRGl2LmFwcGVuZENoaWxkKHVzZXJJbmRpY2F0b3IpO1xyXG5cclxuICAgICAgICByZXR1cm4gdXNlckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXRVc2VyTGlzdCA9IGZ1bmN0aW9uIHNldFVzZXJMaXN0ICh1c2VyTHVzdE9iamVjdCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSB1c2VyTHVzdE9iamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRVc2VyVG9Vc2Vyc0FycmF5ID0gZnVuY3Rpb24gYWRkVXNlclRvVXNlcnNMaXN0KFxyXG4gICAgICAgIHVzZXIsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHVzZXJzTGlzdFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJc09ubGluZSA9IHRoaXMudXNlcklzT25saW5lKHVzZXIubGFzdE9ubGluZSk7XHJcbiAgICAgICAgdXNlcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgdXNlckVsZW1lbnQ6IHRoaXMuY3JlYXRlVXNlckVsZW1lbnQodXNlcklkLCB1c2VySXNPbmxpbmUpLFxyXG4gICAgICAgICAgICBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2VuZE5ld01lc3NhZ2U6IHVzZXIuc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWRMYXN0TWVzc2FnZTogdXNlci5yZWFkTGFzdE1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGxhc3RPbmxpbmU6IHVzZXIubGFzdE9ubGluZSxcclxuICAgICAgICAgICAgdXNlck5hbWU6IHVzZXIudXNlck5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlVXNlclZpZXcgKHVzZXJJZCwgbGFzdE9ubGluZSkge1xyXG4gICAgICAgIHZhciB1c2VySW5kZXggPSB0aGlzLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy51TGlzdFt1c2VySW5kZXhdLmxhc3RPbmxpbmUgPSBsYXN0T25saW5lO1xyXG4gICAgICAgIHRoaXMudUxpc3RbdXNlckluZGV4XS5vbmxpbmUgPSB0aGlzLnVzZXJJc09ubGluZShsYXN0T25saW5lKTtcclxuICAgICAgICB0aGlzLnVMaXN0W3VzZXJJbmRleF0udXNlckVsZW1lbnQgPSB0aGlzLmNyZWF0ZVVzZXJFbGVtZW50KFxyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIHRoaXMudXNlcklzT25saW5lKGxhc3RPbmxpbmUpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIGluZGV4INGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INGO0LfQtdGA0LAg0LXRgdC70Lgg0L7QvSDRgtCw0Lwg0L3QsNGF0L7QtNC40YLRgdGPLiDQkiDQv9GA0L7RgtC40LLQvdC+INGB0LvRg9GH0LDQtSDQstC+0LfQstGA0LDRidCw0LXRgiBudWxsXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkID0gZnVuY3Rpb24gZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJNYW5hZ2VyID0gdGhpcztcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gbnVsbDtcclxuICAgICAgICBPYmplY3Qua2V5cyh1c2VyTWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGdldEtleSAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyTWFuYWdlci51TGlzdFtrZXldLnVzZXJJZCA9PT0gdXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5kZXggPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJJbmRleDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdGCINC+0L3Qu9Cw0LnQvSDRjtC30LXRgNCwINC90LDRhdC+0LTRjyDRgNCw0LfQvdC40YbRgyDQvNC10LbQtNGDINC00LDRgtC+0Lkg0L/QvtGB0LvQtdC00L3QtdCz0L4g0LrQvtC90LXQutGC0LAg0Y7Qt9C10YDQsCDRgSDQsdC0INC4INGC0LXQutGD0YnQuNC8INCy0YDQtdC80LXQvdC10LxcclxuICAgIC8vINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUg0LXRgdC70Lgg0Y7Qt9C10YAg0L7QvdC70LDQudC9LCBmYWxzZSAtINC+0YTRhNC70LDQudC9XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnVzZXJJc09ubGluZSA9IGZ1bmN0aW9uIHVzZXJJc09ubGluZSAobGFzdFVzZXJPbmxpbmVUaW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAtIGxhc3RVc2VyT25saW5lVGltZSA8PSBjb25maWcuaW50ZXJ2YWwuT05MSU5FX0lOVEVSVkFMO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQlNC10LvQsNC10YIg0L3QtdCy0LjQtNC40LzRi9C80Lgg0YLQtdGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5INCyINGB0L/QuNGB0LrQtSwg0LIg0LjQvNC10L3QsNGFINC60L7RgtC+0YDRi9GFINC90LXRgiDQv9C10YDQtdC00LDQvdC90L7QuSDQv9C+0LTRgdGC0YDQvtC60LhcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuZmlsdGVyQnlOYW1lID0gZnVuY3Rpb24gZmlsdGVyQnlOYW1lKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBmaWx0ZXJOYW1lIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9IGVsZW1lbnQudXNlcklkLmluZGV4T2YoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpICE9PSAtMTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtGA0YLQuNGA0YPQtdGCINGB0L/QuNGB0L7QuiDRjtC30LXRgNC+0LIg0L/QviDQv9C+0LvRjlxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zb3J0VXNlcnNCeUZpZWxkID0gZnVuY3Rpb24gc29ydFVzZXJzQnlPbmxpbmUoKSB7XHJcbiAgICAgICAgc29ydGVyLnF1aWNrU29ydCh0aGlzLnVMaXN0LCAwLCB0aGlzLnVMaXN0Lmxlbmd0aCAtIDEsIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJVc2VyTGlzdCA9IGZ1bmN0aW9uIGNsZWFyVXNlckxpc3QgKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC+0LHRgNCw0LfQuNGC0YwvINCe0LHQvdC+0LLQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0Y7Qt9C10YDQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5VXNlcnMgPSBmdW5jdGlvbiBkaXNwbGF5VXNlcnMoKSB7XHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcuRE9NLlVTRVJfTElTVF9DU1NfQ0xBU1MpO1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBnZXRFbGVtIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5VU0VSX0xJU1RfQ1NTX0NMQVNTKS5hcHBlbmRDaGlsZChlbGVtLnVzZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIC8vIGluY2x1ZGVcclxuXHJcbiAgICAvKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbiAgICAvKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4gICAgLy8g0J7Rh9C40YnQsNC10YIgRE9NINGB0L7QtNC10YDQttCw0YnQuNC5INGN0LvQtdC80LXQvdGC0Ysg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBVc2VyTGlzdE1hbmFnZXIoKVxyXG5cclxufSkobWFpbkNvbmZpZywgc29ydGVyKTtcclxuLyogZXhwb3J0ZWQgZGFzaGJvYXJkICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHVzZXJMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgc29ydGVyICovXHJcbnZhciBkYXNoYm9hcmQgPSAoZnVuY3Rpb24gY3JlYXRlRGFzaGJvYXJkQ29udHJvbGxlcihjb25maWcsIGRhdGFTb3VyY2UsIHVEYXRhTWFuYWdlciwgdUxpc3RNYW5hZ2VyLCBzb3J0ZXIsIGV2ZW50RW1pdHRlcil7XHJcblxyXG4gICAgdmFyIGludGVydmFsSWQgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2V0dXAoY29uZmlnKTtcclxuICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gc2V0dXBFdmVudEVtaXR0ZXIgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBldmVudEVtaXR0ZXIuYWRkU3Vic2NyaWJlKFwidXNlckxpc3RcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBpZihkYXRhIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBzZXRVc2VyU2V0dGluZyh1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci5hZGRVc2VyVG9Vc2Vyc0FycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnNMaXN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0ID0gdUxpc3RNYW5hZ2VyLnVMaXN0LmNvbmNhdCh1c2Vyc0xpc3QpO1xyXG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gdGhhdC5nZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICB0aGF0LmxvY2FsU2V0dGluZ3NTZXR1cChjb25kaXRpb24pO1xyXG4gICAgICAgICAgICB0aGF0LnNldHVwVXNlckxpc3RET00oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBldmVudEVtaXR0ZXIuYWRkU3Vic2NyaWJlKFwibGFzdE9ubGluZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlcklkID0gZGF0YVswXTtcclxuICAgICAgICAgICAgdmFyIGxhc3RPbmxpbmUgPSBkYXRhWzFdO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudXBkYXRlVXNlck9ubGluZVN0YXR1cyh1c2VySWQsIGxhc3RPbmxpbmUpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInNlbmROZXdNZXNzYWdlXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySW5kZXggPSB1TGlzdE1hbmFnZXIuZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQoZGF0YVswXSk7XHJcbiAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt1c2VySW5kZXhdLnNlbmROZXdNZXNzYWdlID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgdGhhdC50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICB2YXIgc2VyaWFsQ29uZGl0aW9uID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBmaWx0ZXI6IGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5LFxyXG4gICAgICAgICAgICBzb3J0OiBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnksXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VySWQ6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUsIHNlcmlhbENvbmRpdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgdmFyIHNlcmlhbENvbmRpdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgICAgIHZhciBjb25kaXRpb24gPSBudWxsO1xyXG4gICAgICAgIGlmIChzZXJpYWxDb25kaXRpb24pIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uID0gSlNPTi5wYXJzZShzZXJpYWxDb25kaXRpb24pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBjb25kaXRpb24uY3VycmVudFVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbjtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUubG9jYWxTZXR0aW5nc1NldHVwID0gZnVuY3Rpb24gbG9jYWxTZXR0aW5nc1NldHVwKGNvbmRpdGlvbikge1xyXG4gICAgICAgIGlmIChjb25kaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5maWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfRklMVEVSX0lOUFVUX0lEKS52YWx1ZSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uc29ydCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWUgPSBjb25kaXRpb24uc29ydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uY3VycmVudFVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gY29uZGl0aW9uLmN1cnJlbnRVc2VySWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcblxyXG4gICAgLy8g0YTQuNC70YzRgtGA0LDRhtC40Y8g0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gZmlsdGVyKCkge1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5maWx0ZXJCeU5hbWUoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLy8g0YHQvtGA0YLQuNGA0L7QstC60LAg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIHNvcnQoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnNvcnRVc2Vyc0J5RmllbGQoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuZGlzcGxheVVzZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwVXNlcnNMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXR1cFVzZXJzTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBBcnJheS5mcm9tKGNvbmZpZy51c2VycykuZm9yRWFjaChmdW5jdGlvbiBhZGRMaXN0ZW5lcnMgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC51c2VyTGlzdGVuZXIuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maXJzdENoaWxkLmlubmVyVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFVzZXJMaXN0RE9NID0gZnVuY3Rpb24gc2V0dXBVc2VyTGlzdERPTSAoKSB7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWNlc3NUb1VzZXJzTGlzdCgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBVc2Vyc0xpc3RlbmVycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRBY2Vzc1RvVXNlcnNMaXN0ID0gZnVuY3Rpb24gYWNjZXNzVG9Vc2Vyc0RPTSgpIHtcclxuICAgICAgICBjb25maWcudXNlcnMgPSBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICBjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUywgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJMaXN0ID0gZnVuY3Rpb24gZ2V0VXNlckxpc3QgKCkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIHZhciBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yID0gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTGlzdChudWxsKTtcclxuICAgICAgICBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gbG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3Iuc2VuZCgpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlckxpc3RDb25uZWN0aW9uID0gbG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvcjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnVzZXJMaXN0ZW5lciA9IGZ1bmN0aW9uIHVzZXJMaXN0ZW5lcih1c2VySWQpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIodXNlcklkKTtcclxuICAgICAgICB0aGlzLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQodXNlcklkKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YLQutGA0YvQstCw0LXRgiDRh9Cw0YIg0YEg0Y7Qt9C10YDQvtC8LCDQt9Cw0LPRgNGD0LbQsNC10YIg0LzQtdGB0YHQsNC00LbQuCDRjtC30LXRgNCwINC4INC+0YLQvtCx0YDQsNC20LDQtdGCINC40YVcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIgPSBmdW5jdGlvbiBzdGFydENvbnZlcnNhdGlvbldpdGhVc2VyKFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuY2xlYXJNZXNzYWdlTGlzdCgpO1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5nZXRVc2VyRGF0YSh1c2VySWQpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHNhdmVMb2NhbERhdGEgKCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFKS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkudXBkYXRlU2VuZE5ld01lc3NhZ2VGbGFnKHVzZXJJZCwgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8g0J7QsdC90L7QstC70LXRgiDQvNCw0YHRgdC40LIg0YHQvtC+0LHRidC10L3QuNC5INCyINC80L7QtNGD0LvQtSDRh9Cw0YLQsCDQuCDQstGL0LLQvtC00LjRgiDQuNGFINC90LAg0Y3QutGA0LDQvVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0ID0gZnVuY3Rpb24gdXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0KFxyXG4gICAgKSB7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLmdldFVzZXJEYXRhKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zID0gZnVuY3Rpb24gc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlciwgY29uZmlnLkFETUlOX05BTUUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuY2xvc2VDb252ZXJzYXRpb24uYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhhdC5maWx0ZXIuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgICAgICB0aGF0LnNvcnQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB1c2VyRGF0YU1hbmFnZXIuc2V0TWVzc2FnZUFzUmVhZC5iaW5kKHVzZXJEYXRhTWFuYWdlcikpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C+0LzQtdGH0LDQtdGCINC60LDQvdCw0Lsg0Y7Qt9C10YDQsCDQutCw0Log0L/RgNC+0YfQuNGC0LDQvdC90YvQuSAo0LXRgdC70Lgg0YLQsNC8INC10YHRgtGMINC90LXQv9GA0L7Rh9C40YLQsNC90L3Ri9C1INGB0L7QvtCx0YnQtdC90LjRjylcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQgPSBmdW5jdGlvbiBtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gdUxpc3RNYW5hZ2VyLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3VzZXJJbmRleF0uc2VuZE5ld01lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShbe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgZmllbGROYW1lOiBcInNlbmROZXdNZXNzYWdlXCIsXHJcbiAgICAgICAgICAgIGZpZWxkVmFsdWU6IGZhbHNlXHJcbiAgICAgICAgfV0pO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQl9Cw0LrRgNGL0LLQsNC10YIg0LrQsNC90LDQuyDQvtCx0YnQtdC90LjRjyDRgSDRjtC30LXRgNC+0Lwg0Lgg0YfQsNGCXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZUNvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uIGNsb3NlQ29udmVyc2F0aW9uICgpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NIQVRfQ09OVEFJTlNfQkxPQ0tfU1RZTEUpLmNsYXNzTGlzdC5hZGQoY29uZmlnLklOVklTSUJMRV9DTEFTUyk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gbnVsbDtcclxuICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINC00L7QsdCw0LLQu9GP0LXRgiDQvdC+0LLRi9C5INC10LvQtdC80LXQvdGCLdC40L3QtNC40LrQsNGC0L7RgCDQslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlciA9IGZ1bmN0aW9uIHRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIoKSB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VEaXY7XHJcbiAgICAgICAgT2JqZWN0LmtleXModUxpc3RNYW5hZ2VyLnVMaXN0KS5tYXAoZnVuY3Rpb24gYmxpbmsoa2V5KSB7XHJcbiAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYgPSB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFXHJcbiAgICAgICAgICAgIClbMF07XHJcbiAgICAgICAgICAgIGlmICh1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS5zZW5kTmV3TWVzc2FnZSAmJiAhbmV3TWVzc2FnZURpdikge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFKTtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFtrZXldLnVzZXJFbGVtZW50LmFwcGVuZENoaWxkKG5ld01lc3NhZ2VEaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCF1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS5zZW5kTmV3TWVzc2FnZSAmJiBuZXdNZXNzYWdlRGl2KSB7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5yZW1vdmVDaGlsZChuZXdNZXNzYWdlRGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucyA9IGZ1bmN0aW9uIHNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBpbnRlcnZhbElkLnB1c2ggPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHVMaXN0TWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uICh2aWV3SWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51cGRhdGVVc2VyT25saW5lU3RhdHVzKFxyXG4gICAgICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt2aWV3SWRdLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rbdmlld0lkXS5sYXN0T25saW5lXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGF0LnNldHVwVXNlckxpc3RET00oKTtcclxuICAgICAgICB9LGNvbmZpZy5pbnRlcnZhbC5VUERBVEVfVVNFUlNfVElNRSlcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiBjbG9zZUFwcCAoKSB7XHJcbiAgICAgICAgaW50ZXJ2YWxJZC5mb3JFYWNoKGZ1bmN0aW9uIGNsZWFyIChpZCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGlkKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5jbGVhck1lc3NhZ2VMaXN0KCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmNsZWFyVXNlckxpc3QoKTtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyTGlzdENvbm5lY3Rpb24uYWJvcnQoKVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IERhc2hib2FyZENvbnRyb2xsZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcsIGRhdGFTb3VyY2UsIHVzZXJEYXRhTWFuYWdlciwgdXNlckxpc3RNYW5hZ2VyLCBzb3J0ZXIsIGV2ZW50RW1pdHRlcik7XHJcbi8qIGV4cG9ydGVkIGxhdW5jaGVyICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbnZhciBsYXVuY2hlciA9IChmdW5jdGlvbiBjcmVhdGVMYXVuY2hlciAoY29uZmlnKSB7XHJcblxyXG4gICAgdmFyIERPTVZhcmlhYmxlcyA9IHt9O1xyXG4gICAgdmFyIGtleU9mVmFsdWUgPSB7XHJcbiAgICAgICAgY2hhdFRpdGxlOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRVcmw6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hhdENsYXNzOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRQb3NpdGlvblNlbGVjdDoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYWxsb3dNaW5pbWl6ZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFsbG93RHJhZzoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNob3dUaW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWlyZU5hbWU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmFkaW8gYnV0dG9uIChsYXN0IGVsZW1lbnQsIGl0J3MgaW1wb3RlbnQpXHJcbiAgICAgICAgbmV0d29ya1JhZGlvWE1SOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwiWEhSXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5ldHdvcmtSYWRpb0xvbmdQb2xsOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwibG9uZ1BvbGxcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbmV0d29ya1JhZGlvRmV0Y2g6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIixcclxuICAgICAgICAgICAgdHJ1ZTogXCJmZXRjaFwiXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBMYXVuY2hlcigpIHt9XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLmdldERhdGFGcm9tRWxlbWVudCA9IGZ1bmN0aW9uIGdldERhdGFGcm9tRWxlbWVudCAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHNyYyA9IFwiXCI7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0eXBlT2ZWYWx1ZTtcclxuICAgICAgICBPYmplY3Qua2V5cyhET01WYXJpYWJsZXMpLm1hcChmdW5jdGlvbiBzZXR1cERhdGEgKGVsZW1lbnROYW1lLCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZihrZXlbZWxlbWVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlT2ZWYWx1ZSA9IERPTVZhcmlhYmxlc1tlbGVtZW50TmFtZV0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlT2ZWYWx1ZSA9PT0gXCJyYWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKERPTVZhcmlhYmxlc1tlbGVtZW50TmFtZV0uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IFwiJyZcIiArIFwidHlwZU9mUmVxdWVzdFwiICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUsIHR5cGVPZlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSBcIicmXCIgKyBlbGVtZW50TmFtZSArIFwiPSdcIiArIHRoYXQuZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnROYW1lLCB0eXBlT2ZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcmMgKz0gZWxlbWVudE5hbWUgKyBcIj0nXCIgKyB0aGF0LmdldEVsZW1lbnRWYWx1ZShlbGVtZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYoc3JjLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgc3JjID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNyYztcclxuICAgIH07XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLmdldEVsZW1lbnRWYWx1ZSA9IGZ1bmN0aW9uIGdldEVsZW1lbnRWYWx1ZSAobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBET01WYXJpYWJsZXNbbmFtZV1ba2V5T2ZWYWx1ZVtuYW1lXS50eXBlT2ZWYWx1ZV07XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdCAoKSB7XHJcbiAgICAgICAgdmFyIHNyYyA9IGNvbmZpZy5sYXVuY2hlci5zcmNTdGFydCArIHRoaXMuZ2V0RGF0YUZyb21FbGVtZW50KGtleU9mVmFsdWUpO1xyXG4gICAgICAgIHNyYyArPSBjb25maWcubGF1bmNoZXIuc3JjRW5kO1xyXG4gICAgICAgIERPTVZhcmlhYmxlcy5zY3JpcHRDb2RlLmlubmVySFRNTCA9IHNyYztcclxuICAgIH1cclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbmZpZy5sYXVuY2hlci5hZnRlci5tYXAoKGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdFBhcnQgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgRE9NVmFyaWFibGVzW2VsZW1lbnRdID0gIGdldEVsZW1lbnQoY29uZmlnLmxhdW5jaGVyLnBhdHRlcm4gKyBlbGVtZW50LCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIERPTVZhcmlhYmxlc1tlbGVtZW50XS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgY3JlYXRlU2NyaXB0LmJpbmQodGhhdCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uIGNsb3NlQXBwICgpIHtcclxuICAgICAgICBET01WYXJpYWJsZXMgPSB7fTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMYXVuY2hlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGFib3V0ICovXHJcbi8vIFNUVUIgLy9cclxudmFyIGFib3V0ID0gKGZ1bmN0aW9uIGNyZWF0ZUFib3V0UGFnZUFwcCAoKSB7XHJcbiAgICBmdW5jdGlvbiBBYm91dCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBYm91dCgpO1xyXG5cclxufSkoKTtcclxuLyogZ2xvYmFsIGRhc2hib2FyZCAqL1xyXG4vKiBnbG9iYWwgbGF1bmNoZXIgKi9cclxuLyogZ2xvYmFsIGFib3V0ICovXHJcbi8qIGdsb2JhbCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbi8qIGdsb2JhbCB2aWV3RmFjdG9yeSAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgbWFpbkNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gY3JlYXRlTWFpbkNvbnRyb2xsZXIgKGNvbmZpZykge1xyXG5cclxuICAgIHZhciBtYXRjaGVzSHRtbFBhdGggPSB7XHJcbiAgICAgICAgZGFzaGJvYXJkOiBjb25maWcucm91dGVyLkRBU0hCT0FSRF9IVE1MX1BBVEgsXHJcbiAgICAgICAgY29uZmlndXJhdGlvbjogY29uZmlnLnJvdXRlci5MQVVOQ0hFUl9IVE1MX1BBVEgsXHJcbiAgICAgICAgYWJvdXQ6IGNvbmZpZy5yb3V0ZXIuQUJPVVRfSFRNTF9QQVRIXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgY2xvc2VGdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgZGFzaGJvYXJkOiBkYXNoYm9hcmQuY2xvc2VBcHAuYmluZChkYXNoYm9hcmQpLFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGxhdW5jaGVyLmNsb3NlQXBwLmJpbmQobGF1bmNoZXIpLFxyXG4gICAgICAgIGFib3V0OiBhYm91dC5jbG9zZUFwcC5iaW5kKGFib3V0KVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc3RhcnRGdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgZGFzaGJvYXJkOiBkYXNoYm9hcmQuc3RhcnRBcHAuYmluZChkYXNoYm9hcmQpLFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGxhdW5jaGVyLnN0YXJ0QXBwLmJpbmQobGF1bmNoZXIpLFxyXG4gICAgICAgIGFib3V0OiBhYm91dC5zdGFydEFwcC5iaW5kKGFib3V0KVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBNYWluQ29udHJvbGxlciAoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbiBoYXNDaGFuZ2VFdmVudEFkZCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGF0LmhhbmRsZVVybChlbGVtZW50Lm5ld1VSTCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vINCf0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0YsgLSDRgdGH0LjRgtCw0YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0Lgg0LfQsNC/0YPRgdGC0LjRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6XHJcbiAgICAgICAgdGhhdC5oYW5kbGVVcmwod2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIiNkYXNoYm9hcmRcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6IFVSTFxyXG4gICAgTWFpbkNvbnRyb2xsZXIucHJvdG90eXBlLmhhbmRsZVVybCA9IGZ1bmN0aW9uIGhhbmRsZVVybCh1cmwpIHtcclxuICAgICAgICB2YXIgaGFzaCA9IG51bGw7XHJcbiAgICAgICAgaWYodXJsLmluZGV4T2YoXCIjXCIpID09PSAtMSl7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBoYXNoID0gdXJsLnNwbGl0KCcjJykucG9wKCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZVByZXZpb3VzUGFnZShoYXNoKTtcclxuXHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuJyArIGNvbmZpZy5yb3V0ZXIuTkFWSUdBVElPTl9BQ1RJVkVfQ1NTKS5mb3JFYWNoKGZ1bmN0aW9uIHJlbW92ZUNsYXNzQWN0aXZlIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcucm91dGVyLk5BVklHQVRJT05fQUNUSVZFX0NTUylcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWY9XCIjJyArIGhhc2ggKyAnXCJdJykuZm9yRWFjaChmdW5jdGlvbiBhZGRDbGFzc0FjdGl2ZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLnJvdXRlci5OQVZJR0FUSU9OX0FDVElWRV9DU1MpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjbGVhckVsZW1lbnRDb250ZW50KGNvbmZpZy5yb3V0ZXIuQ09OVEVOVF9DTEFTUyk7XHJcbiAgICAgICAgdmlld0ZhY3RvcnkuY3JlYXRlVmlldyhtYXRjaGVzSHRtbFBhdGhbaGFzaF0sIG51bGwsIGNvbmZpZy5yb3V0ZXIuQ09OVEVOVF9DTEFTUykudGhlbihmdW5jdGlvbiBpbnZva2VTdGFydEZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc3RhcnRGdW5jdGlvbnNbaGFzaF0oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5jbG9zZVByZXZpb3VzUGFnZSA9IGZ1bmN0aW9uIGNsb3NlUHJldmlvdXNQYWdlKGhhc2gpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhjbG9zZUZ1bmN0aW9ucykubWFwKGZ1bmN0aW9uIGludm9rZUNsb3NlRnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZihrZXkgIT09IGhhc2gpIHtcclxuICAgICAgICAgICAgICAgIGNsb3NlRnVuY3Rpb25zW2tleV0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1haW5Db250cm9sbGVyKCk7XHJcblxyXG59KShtYWluQ29uZmlnKTtcclxuXHJcbm1haW5Db250cm9sbGVyLnN0YXJ0QXBwKCk7Il19
