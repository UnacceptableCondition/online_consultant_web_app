var mainConfig={DOM:{MAIN_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft",AUTHORIZATION_MENU_CLASS:"root_chat_for_touchsoft_input-name-block",USER_NAME_INPUT_CLASS:"root_chat_for_touchsoft_input-name",SEND_USER_NAME_BUTTON:"root_chat_for_touchsoft_input-name-button",SEND_MESSAGE_MIN_SIZE_BUTTON:"root_chat_for_touchsoft_minimize-style__send-button",SEND_MESSAGE_FULL_SIZE_BUTTON:"root_chat_for_touchsoft__bottom_send-button",CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft__textarea",CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style__message-input",TITLE_BLOCK_CLASS:"root_chat_for_touchsoft-title",CHANGE_STYLE_BUTTON_MAX_SIZE:"root_chat_for_touchsoft__top_minimize-button",MINIMIZE_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style",SET_MIN_STYLE_BUTTON:"root_chat_for_touchsoft_minimize-style__max-button",SET_MAX_STYLE_BUTTON:"root_chat_for_touchsoft__top_minimize-button"},DATA_BASE_URL:"https://touchsoftchatproject.firebaseio.com",CSS_CURRENT_INPUT_CLASS:"root_chat_for_touchsoft__textarea",currentUserSettings:{userId:null,userName:null,isMinimize:!1,readLastMessage:!1,sendNewMessage:!1,lastOnline:(new Date).getTime()},chatSettings:{allowDrag:!1,position:"right",title:"TouchSoft Chat",allowMinimize:!0,outerCssClass:"touchsoft-chat_main-block",typeOfRequest:"fetch",requireName:!0},INVISIBLE_CLASS:"invisible",CHAT_POSITION_RIGHT:"root_chat_for_touchsoft_right-position",CHAT_POSITION_LEFT:"root_chat_for_touchsoft_left-position",LOCAL_STORAGE_NAME:"userID_touchsoft_chat",DEFAULT_USER_NAME:"guest",DEFAULT_CSS_CLASS_FOR_CHAT:"touchsoft-chat_main-block",DEFAULT_CHAT_TITLE:"TouchSoft Chat",HTML_FILE_PATH:"https://rawgit.com/UnacceptableCondition/Homework_2/master/html/chat.html",CSS_FILE_PATH:"https://rawgit.com/UnacceptableCondition/Homework_2/master/css/chat.css",CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root_chat_for_touchsoft__top_messages",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message",DISPLAY_MESSAGE_DATE:!0,DISPLAY_SENDER_NAME:!0,DISPLAY_MESSAGE:!0,UPDATE_USER_DATA_TIME:5e3};function parseSrcForParameters(t){var s={};return t.substr(t.indexOf("?")+1).split("&").forEach(function(t){var e=t.split("=");e[1]=e[1].replace(/'/g,""),s[e[0]]=e[1]}),s}function setOuterChatSettingToConfig(e,s){Object.keys(e).map(function(t){s.chatSettings[t]=e[t]})}setOuterChatSettingToConfig(parseSrcForParameters(document.currentScript.getAttribute("src")),mainConfig);var dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(t,e,s){var n=s?"#":".";return e?document.querySelectorAll(n+t):document.querySelector(n+t)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},dataConnector=function(t){var e;function s(){}return s.prototype.requestFetch=function(t,e,s,n){return fetch(t,{headers:{Accept:n,"Content-Type":n},method:s,body:e}).then(function(t){return"application/json"===n?t.json():t.text()})},s.prototype.requestXMR=function(n,i,o,r){return new Promise(function(t,e){var s=new XMLHttpRequest;s.open(o,n,!0),s.setRequestHeader("Content-Type",r),s.onload=function(){t("application/json"===r?JSON.parse(s.response):s.response)},s.onerror=function(){e(s.statusText)},i?s.send(i):s.send()})},e=new s,"fetch"===t.typeOfRequest?{request:e.requestFetch}:{request:e.requestXMR}}(dataConnectorConfig),dataSource=function(i){var t;function e(){i=i}return e.prototype.createRequestPath=function(t,e,s){var n=t+"/users";return null!==e&&(n+="/"+e),null!==s&&(n+="/"+s),n+=".json"},e.prototype.getHTML=function(t){return i.request(t,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},e.prototype.getUserData=function(t){var s={},e=this.createRequestPath(dataBaseUrl,t,null);return i.request(e,null,"GET","application/json").then(function(e){e&&Object.keys(e).map(function(t){return s[t]=e[t],!0})}).then(function(){return s})},e.prototype.getSettingField=function(t,e){var s=this.createRequestPath(dataBaseUrl,t,e);return i.request(s,null,"GET","application/json")},e.prototype.setSettingField=function(t,e,s){var n=this.createRequestPath(dataBaseUrl,t,e);return i.request(n,JSON.stringify(s),"PUT","application/json")},e.prototype.sendMessage=function(t,e){var s=this.createRequestPath(dataBaseUrl,t,"messages"),n=JSON.stringify({date:e.date,message:e.message,title:"message",user:e.sender,itIsRead:e.read});return i.request(s,n,"POST","application/json")},e.prototype.getAllUsers=function(){var s={},t=this.createRequestPath(dataBaseUrl,null,null);return i.request(t,null,"GET","application/json").then(function(e){e&&Object.keys(e).map(function(t){return s[t]=e[t],!0})}).then(function(){return s})},{usersAPI:{getUserData:(t=new e).getUserData.bind(t),sendMessage:t.sendMessage.bind(t),setField:t.setSettingField.bind(t),getField:t.getSettingField.bind(t),getAllUsers:t.getAllUsers.bind(t)},commonAPI:{getHTML:t.getHTML.bind(t)}}}(dataConnector),messageListManager=function(){function t(){}return t.prototype.setup=function(t){this.config=t,this.messageList=[],this.cDOM={messagesBlock:getElement(this.config.CSS_CHAT_MESSAGES_CONTAINER)}},t.prototype.createMessageElement=function(t,e,s,n){var i=this.createMessageContainerDiv(n,s),o=this.createDivForMessageBlock(e,this.config.DISPLAY_MESSAGE_DATE,[this.config.CSS_CHAT_MESSAGE_DATE]),r=this.createDivForMessageBlock(s,this.config.DISPLAY_SENDER_NAME,[this.config.CSS_CHAT_MESSAGE_SENDER_NAME]),a=this.createDivForMessageBlock(t,this.config.DISPLAY_MESSAGE,[this.config.CSS_CHAT_MESSAGE]);return i.appendChild(o),i.appendChild(r),i.appendChild(a),i},t.prototype.getMessageObjectsForMarkAsRead=function(t,e){var s,n=[],i=t||this.config.currentUserSettings.userName,o=e||this.config.currentUserSettings.userId;for(s=this.messageList.length-1;0<=s;s--)if(this.messageList[s].sender!==i){if(this.messageList[s].read)break;n.push({userId:o,fieldName:"messages/"+this.messageList[s].id+"/itIsRead",fieldValue:!0})}return n},t.prototype.createMessageContainerDiv=function(t,e){var s=document.createElement("div");return t||this.config.currentUserSettings.userName===e||s.classList.add(this.config.CSS_USER_NOT_READ_MESSAGES),s},t.prototype.createDivForMessageBlock=function(t,e,s){var n=document.createElement("div");return s.forEach(function(t){n.classList.add(t)}),n.innerHTML=t,n},t.prototype.createMessageList=function(t){var e=[];return t&&t.forEach(function(t){e.push(t)}),e},t.prototype.updateMessageList=function(t){this.messageList=t,this.displayMessages()},t.prototype.addMessageToMessageList=function(t){this.messageList.push(t),this.displayMessages()},t.prototype.displayMessages=function(){var e,s=this;this.clearChat(),this.messageList.forEach(function(t){e=s.createMessageElement(t.message,t.date,t.sender,t.read),s.cDOM.messagesBlock.appendChild(e)})},t.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new t}(),userDataManager=function(){function t(){}function i(t,e,s,n,i){return{sender:s,message:t,read:n,date:e,id:i}}return t.prototype.setup=function(t){this.config=t,messageListManager.setup(t)},t.prototype.getUserData=function(t){var n=this;return dataSource.usersAPI.getUserData(t).then(function(e){if(n.config.currentUserSettings.userName=e.userName,n.config.currentUserSettings.isMinimize=e.isMinimize,e.messages){var t,s=[];Object.keys(e.messages).map(function(t){s.push(i(e.messages[t].message,e.messages[t].date,e.messages[t].user,e.messages[t].itIsRead,t))}),t=messageListManager.createMessageList(s),messageListManager.updateMessageList(t)}})},t.prototype.createNewUserProfileToDataBase=function(){var e=this;Object.keys(this.config.currentUserSettings).map(function(t){e.saveSettingField(t)})},t.prototype.saveSettingField=function(t){this.saveUserSettingsToDataSource([{userId:this.config.currentUserSettings.userId,fieldName:t,fieldValue:this.config.currentUserSettings[t]}])},t.prototype.sendMessage=function(t){var e,s,n=i(this.getMessageFromInputElement(),(e=new Date,s=1===e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),e.getHours().toString().concat(":",s)),t,!1);messageListManager.addMessageToMessageList(n),this.saveMessageToDataSource(n)},t.prototype.getMessageFromInputElement=function(){var t=getElement(this.config.CSS_CURRENT_INPUT_CLASS),e=t.value;return t.value="",e},t.prototype.setMessageAsRead=function(){var t=messageListManager.getMessageObjectsForMarkAsRead();0<t.length&&this.saveUserSettingsToDataSource(t)},t.prototype.saveMessageToDataSource=function(t){if(t.sender===this.config.currentUserSettings.userName){console.log(t.sender);var e=[{userId:this.config.currentUserSettings.userId,fieldName:"sendNewMessage",fieldValue:!0}];this.saveUserSettingsToDataSource(e)}dataSource.usersAPI.sendMessage(this.config.currentUserSettings.userId,t)},t.prototype.saveUserSettingsToDataSource=function(t){t.forEach(function(t){dataSource.usersAPI.setField(t.userId,t.fieldName,t.fieldValue)})},new t}(),viewFactory=function(n){function t(){}return t.prototype.createView=function(s,n,i){var o=this;return new Promise(function(t,e){s?(n&&o.includeViewCssToPage(o.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),t(o.includeViewHTMLToPage(s,i))):e(new Error("htmlPath is null. Please add htmlPath"))})},t.prototype.includeViewHTMLToPage=function(t,e){var s=e?getElement(e):document.body;return n.commonAPI.getHTML(t).then(function(t){s.innerHTML=t})},t.prototype.includeViewCssToPage=function(t){document.head.appendChild(t)},t.prototype.createCSSLink=function(t,e,s,n){var i=document.createElement("link");return n&&i.setAttribute("id",n),e&&i.setAttribute("rel",e),s&&i.setAttribute("type",s),i.setAttribute("href",t),i},new t}(dataSource),chatCustomizer=function(){function t(){}return t.prototype.setup=function(t){this.config=t},t.prototype.setupOuterChatSettings=function(){this.allowMinimize(),this.setPositionOfMainBlock(),this.setTitle(),this.allowDragNDrop()},t.prototype.allowDragNDrop=function(){var t=getElement(this.config.DOM.TITLE_BLOCK_CLASS),u=getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS);"false"!==this.config.chatSettings.allowDrag&&t.addEventListener("mousedown",function(t){var e,s,n,i,o,r,a;function c(t){u.style.left=t.pageX-s+"px",u.style.top=t.pageY-n+"px"}e={top:(a=u.getBoundingClientRect()).top+window.pageYOffset,left:a.left+window.pageXOffset},s=t.pageX-e.left,n=t.pageY-e.top,i=function(t){c(t)},o=function(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o)},r=function(){return!1},c(t),u.style.zIndex=1e3,document.addEventListener("mousemove",i),document.addEventListener("mouseup",o),u.addEventListener("dragstart",r)})},t.prototype.setPositionOfMainBlock=function(){"right"===this.config.chatSettings.position?getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(this.config.CHAT_POSITION_RIGHT):getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(this.config.CHAT_POSITION_LEFT)},t.prototype.setTitle=function(){this.config.chatSettings.title.length<1&&(this.config.chatSettings.title=this.config.DEFAULT_CHAT_TITLE),getElement(this.config.DOM.TITLE_BLOCK_CLASS).innerHTML=this.config.chatSettings.title},t.prototype.allowMinimize=function(){"false"===this.config.chatSettings.allowMinimize&&getElement(this.config.DOM.CHANGE_STYLE_BUTTON_MAX_SIZE).classList.add(this.config.INVISIBLE_CLASS)},t.prototype.setMainCssClass=function(){console.log(this.config.chatSettings.outerCssClass),this.config.chatSettings.outerCssClass.length<1&&(this.config.chatSettings.outerCssClass=this.config.DEFAULT_CSS_CLASS_FOR_CHAT),getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS.parentNode).classList.add(this.config.chatSettings.outerCssClass)},new t}(),chatController=function(){function t(){}return t.prototype.setup=function(t){this.config=t},t.prototype.startApp=function(){var t=this;return this.setupChatView().then(function(){t.authorization(t.config.chatSettings.requireName),t.setupChatBasicListeners()}).then(function(){t.config.currentUserSettings.userId?userDataManager.getUserData(t.config.currentUserSettings.userId).then(function(){t.setupChatStyle(),t.setupIntervalFunctions(),t.setupChatSendListeners()}):t.setupChatStyle()}).then(function(){chatCustomizer.setup(t.config),chatCustomizer.setupOuterChatSettings()})},t.prototype.authorization=function(t){userDataManager.setup(this.config),this.config.currentUserSettings.userId=this.getUserIdFromLocalStorage(),this.config.currentUserSettings.userId||("false"===t?(this.config.currentUserSettings.userId=this.getHash(this.config.DEFAULT_USER_NAME),this.config.currentUserSettings.userName=this.config.DEFAULT_USER_NAME,this.saveUserIdToLocalStorage(this.config.currentUserSettings.userId),userDataManager.createNewUserProfileToDataBase()):this.toggleAuthorizationMenuVisible())},t.prototype.toggleAuthorizationMenuVisible=function(){getElement(this.config.DOM.AUTHORIZATION_MENU_CLASS).classList.toggle(this.config.INVISIBLE_CLASS)},t.prototype.getHash=function(t){return t+(new Date).getTime()},t.prototype.getUserNameFromInput=function(){this.config.currentUserSettings.userName=getElement(this.config.DOM.USER_NAME_INPUT_CLASS).value,this.config.currentUserSettings.userId=this.getHash(this.config.currentUserSettings.userName),userDataManager.setup(this.config),userDataManager.createNewUserProfileToDataBase(),this.saveUserIdToLocalStorage(this.config.currentUserSettings.userId),this.toggleAuthorizationMenuVisible(),this.setupIntervalFunctions(),this.setupChatSendListeners()},t.prototype.setupChatSendListeners=function(){getElement(this.config.DOM.SEND_MESSAGE_FULL_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,this.config.currentUserSettings.userName)),getElement(this.config.DOM.SEND_MESSAGE_MIN_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,this.config.currentUserSettings.userName)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},t.prototype.setupChatBasicListeners=function(){var t=this;getElement(t.config.DOM.SEND_USER_NAME_BUTTON).addEventListener("click",t.getUserNameFromInput.bind(t)),getElement(t.config.DOM.SET_MAX_STYLE_BUTTON).addEventListener("click",t.minMaxStyleToggle.bind(t)),getElement(t.config.DOM.SET_MIN_STYLE_BUTTON).addEventListener("click",t.minMaxStyleToggle.bind(t))},t.prototype.setupChatView=function(){return viewFactory.createView(this.config.HTML_FILE_PATH,this.config.CSS_FILE_PATH,null)},t.prototype.setupChatStyle=function(){this.config.currentUserSettings.isMinimize?getElement(this.config.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(this.config.INVISIBLE_CLASS):getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(this.config.INVISIBLE_CLASS)},t.prototype.minMaxStyleToggle=function(){getElement(this.config.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(this.config.INVISIBLE_CLASS),getElement(this.config.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(this.config.INVISIBLE_CLASS),this.config.currentUserSettings.isMinimize=!1===this.config.currentUserSettings.isMinimize,this.changeInputAndSendButtonClass(),userDataManager.saveSettingField("isMinimize")},t.prototype.activityNotify=function(){var t=new Date;this.config.currentUserSettings.lastOnline=t.getTime(),userDataManager.saveSettingField("lastOnline")},t.prototype.changeInputAndSendButtonClass=function(){this.config.currentUserSettings.isMinimize?this.config.CSS_CURRENT_INPUT_CLASS=this.config.DOM.CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:this.config.CSS_CURRENT_INPUT_CLASS=this.config.DOM.CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS},t.prototype.saveUserIdToLocalStorage=function(t){localStorage.setItem(this.config.LOCAL_STORAGE_NAME,t)},t.prototype.getUserIdFromLocalStorage=function(){return localStorage.getItem(this.config.LOCAL_STORAGE_NAME)},t.prototype.setupIntervalFunctions=function(){var t=this;setInterval(function(){userDataManager.getUserData(t.config.currentUserSettings.userId),t.activityNotify()},t.config.UPDATE_USER_DATA_TIME)},new t}();chatController.setup(mainConfig),chatController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRBcHAuanMiXSwibmFtZXMiOlsibWFpbkNvbmZpZyIsIkRPTSIsIk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUyIsIkFVVEhPUklaQVRJT05fTUVOVV9DTEFTUyIsIlVTRVJfTkFNRV9JTlBVVF9DTEFTUyIsIlNFTkRfVVNFUl9OQU1FX0JVVFRPTiIsIlNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT04iLCJTRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTiIsIkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTIiwiQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1MiLCJUSVRMRV9CTE9DS19DTEFTUyIsIkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUiLCJNSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTIiwiU0VUX01JTl9TVFlMRV9CVVRUT04iLCJTRVRfTUFYX1NUWUxFX0JVVFRPTiIsIkRBVEFfQkFTRV9VUkwiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJzZW5kTmV3TWVzc2FnZSIsImxhc3RPbmxpbmUiLCJEYXRlIiwiZ2V0VGltZSIsImNoYXRTZXR0aW5ncyIsImFsbG93RHJhZyIsInBvc2l0aW9uIiwidGl0bGUiLCJhbGxvd01pbmltaXplIiwib3V0ZXJDc3NDbGFzcyIsInR5cGVPZlJlcXVlc3QiLCJyZXF1aXJlTmFtZSIsIklOVklTSUJMRV9DTEFTUyIsIkNIQVRfUE9TSVRJT05fUklHSFQiLCJDSEFUX1BPU0lUSU9OX0xFRlQiLCJMT0NBTF9TVE9SQUdFX05BTUUiLCJERUZBVUxUX1VTRVJfTkFNRSIsIkRFRkFVTFRfQ1NTX0NMQVNTX0ZPUl9DSEFUIiwiREVGQVVMVF9DSEFUX1RJVExFIiwiSFRNTF9GSUxFX1BBVEgiLCJDU1NfRklMRV9QQVRIIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIkRJU1BMQVlfTUVTU0FHRV9EQVRFIiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIkRJU1BMQVlfTUVTU0FHRSIsIlVQREFURV9VU0VSX0RBVEFfVElNRSIsInBhcnNlU3JjRm9yUGFyYW1ldGVycyIsInNyYyIsInVzZXJDb25maWdPYmplY3QiLCJzdWJzdHIiLCJpbmRleE9mIiwic3BsaXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsInBhcmFtT2JqIiwicmVwbGFjZSIsInNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyIsIm91dGVyQ29uZmlnT2JqZWN0IiwiY29uZmlnIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsImdldEF0dHJpYnV0ZSIsImRhdGFCYXNlVXJsIiwiZ2V0RWxlbWVudCIsInNlbGVjdG9yIiwiaXNBbGwiLCJpdElzSWQiLCJzZWxlY3RvclN0YXJ0IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwicHJvdG90eXBlIiwicmVxdWVzdEZldGNoIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3RUeXBlIiwiY29udGVudFR5cGUiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInRleHQiLCJyZXF1ZXN0WE1SIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25sb2FkIiwiSlNPTiIsInBhcnNlIiwib25lcnJvciIsInN0YXR1c1RleHQiLCJzZW5kIiwicmVxdWVzdCIsImRhdGFTb3VyY2UiLCJkYXRhU291cmNlSW5zdGFuY2UiLCJEYXRhU291cmNlIiwiY3JlYXRlUmVxdWVzdFBhdGgiLCJkYXRhQmFzZVVSTCIsInJlcXVlc3RQb3N0Zml4IiwicGF0aCIsImdldEhUTUwiLCJnZXRVc2VyRGF0YSIsInVzZXJEYXRhIiwidGhpcyIsImRhdGEiLCJnZXRTZXR0aW5nRmllbGQiLCJmaWVsZE5hbWUiLCJzZXRTZXR0aW5nRmllbGQiLCJ2YWx1ZSIsInN0cmluZ2lmeSIsInNlbmRNZXNzYWdlIiwibWVzc2FnZU9iamVjdCIsImpzb25NZXNzYWdlIiwiZGF0ZSIsIm1lc3NhZ2UiLCJ1c2VyIiwic2VuZGVyIiwiaXRJc1JlYWQiLCJyZWFkIiwiZ2V0QWxsVXNlcnMiLCJ1c2Vyc0RhdGFMaXN0IiwidXNlcnNBUEkiLCJiaW5kIiwic2V0RmllbGQiLCJnZXRGaWVsZCIsImNvbW1vbkFQSSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwiY29uZmlnT2JqIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwibWVzc2FnZVNlbmRlckRpdiIsIm1lc3NhZ2VEaXYiLCJhcHBlbmRDaGlsZCIsImdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCIsInJlbGF0aXZlVXNlck5hbWUiLCJyZWxhdGl2ZVVzZXJJZCIsImkiLCJtZXNzYWdlc0lzUmVhZCIsImxlbmd0aCIsInB1c2giLCJpZCIsImZpZWxkVmFsdWUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNEaXNwbGF5Iiwic3R5bGVDbGFzc2VzIiwiZGl2Iiwic3R5bGUiLCJpbm5lckhUTUwiLCJjcmVhdGVNZXNzYWdlTGlzdCIsIm1lc3NhZ2VPYmplY3RzIiwibmV3TWVzc2FnZUxpc3QiLCJ1cGRhdGVNZXNzYWdlTGlzdCIsImRpc3BsYXlNZXNzYWdlcyIsImFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IiwibWVzc2FnZU9iaiIsInRoYXQiLCJjbGVhckNoYXQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ1c2VyRGF0YU1hbmFnZXIiLCJVc2VyRGF0YU1hbmFnZXIiLCJjcmVhdGVNZXNzYWdlT2JqZWN0IiwibWVzc2FnZXMiLCJtZXNzYWdlc09iamVjdCIsImNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSIsInNhdmVTZXR0aW5nRmllbGQiLCJzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIiwic2VuZGVyTmFtZSIsIm1pbnV0ZXMiLCJnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsImdldEhvdXJzIiwiY29uY2F0Iiwic2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UiLCJzZXRNZXNzYWdlQXNSZWFkIiwiY29uc29sZSIsImxvZyIsInVzZXJTZXR0aW5ncyIsInNldHRpbmdzIiwibmV3RmllbGRTZXR0aW5nIiwidmlld0ZhY3RvcnkiLCJWaWV3RmFjdG9yeSIsImNyZWF0ZVZpZXciLCJodG1sUGF0aCIsImNzc1BhdGgiLCJjb250YWluZXJDbGFzcyIsImluY2x1ZGVWaWV3Q3NzVG9QYWdlIiwiY3JlYXRlQ1NTTGluayIsImluY2x1ZGVWaWV3SFRNTFRvUGFnZSIsIkVycm9yIiwiY29udGFpbmVyRGl2IiwiaHRtbCIsImxpbmsiLCJoZWFkIiwiZmlsZVBhdGgiLCJyZWwiLCJ0eXBlIiwic2V0QXR0cmlidXRlIiwiY2hhdEN1c3RvbWl6ZXIiLCJDaGF0Q3VzdG9taXplciIsImNvbmZpZ09iamVjdCIsInNldHVwT3V0ZXJDaGF0U2V0dGluZ3MiLCJzZXRQb3NpdGlvbk9mTWFpbkJsb2NrIiwic2V0VGl0bGUiLCJhbGxvd0RyYWdORHJvcCIsImNsaWNrQmxvY2siLCJkcmFnQmxvY2siLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNvcmRzIiwic2hpZnRYIiwic2hpZnRZIiwibW92ZU9iaiIsInNldE51bGwiLCJlbmREcmFnIiwiYm94IiwibW92ZUF0IiwiZWxlbSIsImxlZnQiLCJwYWdlWCIsInRvcCIsInBhZ2VZIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJwYWdlWE9mZnNldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ6SW5kZXgiLCJzZXRNYWluQ3NzQ2xhc3MiLCJwYXJlbnROb2RlIiwiY2hhdENvbnRyb2xsZXIiLCJDaGF0Q29udHJvbGxlciIsImNoYXRDb250cm9sbGVyQ29uZmlnIiwic3RhcnRBcHAiLCJzZXR1cENoYXRWaWV3IiwiYXV0aG9yaXphdGlvbiIsInNldHVwQ2hhdEJhc2ljTGlzdGVuZXJzIiwic2V0dXBDaGF0U3R5bGUiLCJzZXR1cEludGVydmFsRnVuY3Rpb25zIiwic2V0dXBDaGF0U2VuZExpc3RlbmVycyIsInVzZXJOYW1lSXNSZXF1aXJlIiwiZ2V0VXNlcklkRnJvbUxvY2FsU3RvcmFnZSIsImdldEhhc2giLCJzYXZlVXNlcklkVG9Mb2NhbFN0b3JhZ2UiLCJ0b2dnbGVBdXRob3JpemF0aW9uTWVudVZpc2libGUiLCJ0b2dnbGUiLCJzdHIiLCJnZXRVc2VyTmFtZUZyb21JbnB1dCIsIm1pbk1heFN0eWxlVG9nZ2xlIiwiY2hhbmdlSW5wdXRBbmRTZW5kQnV0dG9uQ2xhc3MiLCJhY3Rpdml0eU5vdGlmeSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwic2V0SW50ZXJ2YWwiXSwibWFwcGluZ3MiOiJBQUVBLElBQUlBLFdBQWEsQ0FDYkMsSUFBSyxDQUNEQyw0QkFBNkIsMEJB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QUFVZ00sMEJBQTRCLFdBQ2pELE9BQU9VLGFBQWFFLFFBQVFuSyxLQUFLOUQsT0FBTzNCLHFCQU01Q3NPLEVBQWV0TCxVQUFVNkwsdUJBQXlCLFdBQzlDLElBQUlwRixFQUFPaEUsS0FDWG9LLFlBQWEsV0FDVGhHLGdCQUFnQnRFLFlBQVlrRSxFQUFLOUgsT0FBTy9DLG9CQUFvQkMsUUFDNUQ0SyxFQUFLZ0csa0JBQ05oRyxFQUFLOUgsT0FBT2Isd0JBR1osSUFBSXdOLEVBcExNLEdBd0xyQkQsZUFBZW5ILE1BQU12SixZQUNyQjBRLGVBQWVHIiwiZmlsZSI6ImNoYXRBcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2NvbmZpZ1xyXG5cclxudmFyIG1haW5Db25maWcgPSB7XHJcbiAgICBET006IHtcclxuICAgICAgICBNQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRcIixcclxuICAgICAgICBBVVRIT1JJWkFUSU9OX01FTlVfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfaW5wdXQtbmFtZS1ibG9ja1wiLFxyXG4gICAgICAgIFVTRVJfTkFNRV9JTlBVVF9DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9pbnB1dC1uYW1lXCIsXHJcbiAgICAgICAgU0VORF9VU0VSX05BTUVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X2lucHV0LW5hbWUtYnV0dG9uXCIsXHJcblxyXG4gICAgICAgIFNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbWluaW1pemUtc3R5bGVfX3NlbmQtYnV0dG9uXCIsXHJcblxyXG4gICAgICAgIFNFTkRfTUVTU0FHRV9GVUxMX1NJWkVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X19ib3R0b21fc2VuZC1idXR0b25cIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgiDQtNC70Y8g0LLQstC+0LTQsCDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfTUFYX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdGV4dGFyZWFcIixcclxuICAgICAgICBDU1NfTUlOX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZV9fbWVzc2FnZS1pbnB1dFwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCIHRpdGxlXHJcbiAgICAgICAgVElUTEVfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnQtdGl0bGVcIixcclxuICAgICAgICBDSEFOR0VfU1RZTEVfQlVUVE9OX01BWF9TSVpFOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190b3BfbWluaW1pemUtYnV0dG9uXCIsXHJcbiAgICAgICAgLy8g0YfQsNGCINCyINGB0YLQuNC70LUgbWluXHJcbiAgICAgICAgTUlOSU1JWkVfU1RZTEVfQ0hBVF9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZVwiLFxyXG4gICAgICAgIFNFVF9NSU5fU1RZTEVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X21pbmltaXplLXN0eWxlX19tYXgtYnV0dG9uXCIsXHJcbiAgICAgICAgU0VUX01BWF9TVFlMRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RvcF9taW5pbWl6ZS1idXR0b25cIlxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gZGF0YVNvdXJjZVxyXG4gICAgREFUQV9CQVNFX1VSTDogXCJodHRwczovL3RvdWNoc29mdGNoYXRwcm9qZWN0LmZpcmViYXNlaW8uY29tXCIsXHJcbiAgICAvLyDQn9Ce0J/QoNCQ0JLQmNCi0KwhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhXHJcblxyXG5cclxuICAgIC8vIHVzZXJEYXRhTWFuYWdlclxyXG4gICAgQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RleHRhcmVhXCIsXHJcblxyXG4gICAgLy8g0L3QsNGB0YLRgNC+0LnQutC4INGC0LXQutGD0YnQtdCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMXHJcbiAgICBjdXJyZW50VXNlclNldHRpbmdzOiB7XHJcbiAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgIHVzZXJOYW1lOiBudWxsLFxyXG4gICAgICAgIGlzTWluaW1pemU6IGZhbHNlLFxyXG4gICAgICAgIHJlYWRMYXN0TWVzc2FnZTogZmFsc2UsXHJcbiAgICAgICAgc2VuZE5ld01lc3NhZ2U6IGZhbHNlLFxyXG4gICAgICAgIGxhc3RPbmxpbmU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpXHJcbiAgICB9LFxyXG5cclxuICAgIGNoYXRTZXR0aW5nczoge1xyXG4gICAgICAgIGFsbG93RHJhZzogZmFsc2UsXHJcbiAgICAgICAgcG9zaXRpb246IFwicmlnaHRcIixcclxuICAgICAgICB0aXRsZTogXCJUb3VjaFNvZnQgQ2hhdFwiLFxyXG4gICAgICAgIGFsbG93TWluaW1pemU6IHRydWUsXHJcbiAgICAgICAgb3V0ZXJDc3NDbGFzczogJ3RvdWNoc29mdC1jaGF0X21haW4tYmxvY2snLFxyXG4gICAgICAgIHR5cGVPZlJlcXVlc3Q6IFwiZmV0Y2hcIixcclxuICAgICAgICByZXF1aXJlTmFtZTogdHJ1ZVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDQutC70LDRgdGBINC/0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgSU5WSVNJQkxFX0NMQVNTOiBcImludmlzaWJsZVwiLFxyXG4gICAgQ0hBVF9QT1NJVElPTl9SSUdIVDogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9yaWdodC1wb3NpdGlvblwiLFxyXG4gICAgQ0hBVF9QT1NJVElPTl9MRUZUOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X2xlZnQtcG9zaXRpb25cIixcclxuXHJcblxyXG4gICAgTE9DQUxfU1RPUkFHRV9OQU1FOiBcInVzZXJJRF90b3VjaHNvZnRfY2hhdFwiLFxyXG4gICAgREVGQVVMVF9VU0VSX05BTUU6IFwiZ3Vlc3RcIixcclxuXHJcbiAgICBERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVDogJ3RvdWNoc29mdC1jaGF0X21haW4tYmxvY2snLFxyXG4gICAgREVGQVVMVF9DSEFUX1RJVExFOiBcIlRvdWNoU29mdCBDaGF0XCIsXHJcblxyXG4gICAgLy8gY2hhdFZpZXdDb25maWdcclxuICAgIC8vINC+0YLQutGD0LTQsCDQt9Cw0LPRgNGD0LbQsNC10YIgaHRtbCDQuCBjc3Mg0YfQsNGC0LBcclxuICAgIEhUTUxfRklMRV9QQVRIOlxyXG4gICAgICAgIFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9Ib21ld29ya18yL21hc3Rlci9odG1sL2NoYXQuaHRtbFwiLFxyXG4gICAgQ1NTX0ZJTEVfUEFUSDpcclxuICAgICAgICBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vSG9tZXdvcmtfMi9tYXN0ZXIvY3NzL2NoYXQuY3NzXCIsXHJcblxyXG4gICAgLy8gbWVzc2FnZUxpc3RNYW5hZ2VyQ29uZmlnXHJcbiAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDQtNC70Y8g0Y3Qu9C10LzQtdC90LDRgiDRgSDRgdC+0L7QsdGJ0LXQvdC40LUsINC10YHQu9C4INGO0LfQtdGAINC90LUg0L/RgNC+0YfQuNGC0LDQuyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgIENTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9tZXNzYWdlLW5vdC1yZWFkXCIsXHJcbiAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190b3BfbWVzc2FnZXNcIixcclxuICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgIENTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1zZW5kZXJcIixcclxuICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LTQsNGC0YMg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICBDU1NfQ0hBVF9NRVNTQUdFX0RBVEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1kYXRlXCIsXHJcbiAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgQ1NTX0NIQVRfTUVTU0FHRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlXCIsXHJcblxyXG4gICAgRElTUExBWV9NRVNTQUdFX0RBVEU6IHRydWUsXHJcbiAgICBESVNQTEFZX1NFTkRFUl9OQU1FOiB0cnVlLFxyXG4gICAgRElTUExBWV9NRVNTQUdFOiB0cnVlLFxyXG5cclxuICAgIFVQREFURV9VU0VSX0RBVEFfVElNRTogNTAwMFxyXG59O1xyXG5cclxuLy8gSU5DTFVERVxyXG5mdW5jdGlvbiBwYXJzZVNyY0ZvclBhcmFtZXRlcnMoXHJcbiAgICBzcmNcclxuKSB7XHJcbiAgICB2YXIgdXNlckNvbmZpZ09iamVjdCA9IHt9O1xyXG4gICAgdmFyIGFyclBhcmFtID0gc3JjLnN1YnN0cihzcmMuaW5kZXhPZihcIj9cIikgKyAxKS5zcGxpdChcIiZcIik7XHJcbiAgICBhcnJQYXJhbS5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZUNvbmZpZ09iaiAoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBwYXJhbU9iaiA9IGVsZW1lbnQuc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIHBhcmFtT2JqWzFdID0gcGFyYW1PYmpbMV0ucmVwbGFjZSgvJy9nLCBcIlwiKTtcclxuICAgICAgICB1c2VyQ29uZmlnT2JqZWN0W3BhcmFtT2JqWzBdXSA9IHBhcmFtT2JqWzFdO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXNlckNvbmZpZ09iamVjdDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0T3V0ZXJDaGF0U2V0dGluZ1RvQ29uZmlnIChvdXRlckNvbmZpZ09iamVjdCwgY29uZmlnKSB7XHJcbiAgICBPYmplY3Qua2V5cyhvdXRlckNvbmZpZ09iamVjdCkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzW2tleV0gPSBvdXRlckNvbmZpZ09iamVjdFtrZXldO1xyXG4gICAgfSlcclxufVxyXG5cclxuLy8gSU5DTFVERVxyXG5cclxuc2V0T3V0ZXJDaGF0U2V0dGluZ1RvQ29uZmlnKHBhcnNlU3JjRm9yUGFyYW1ldGVycyhkb2N1bWVudC5jdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcInNyY1wiKSksIG1haW5Db25maWcpO1xyXG52YXIgZGF0YUJhc2VVcmwgPSBtYWluQ29uZmlnLkRBVEFfQkFTRV9VUkw7XHJcblxyXG52YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tRE9NIChzZWxlY3RvciwgaXNBbGwsIGl0SXNJZCkge1xyXG4gICAgdmFyIHNlbGVjdG9yU3RhcnQgPSAoaXRJc0lkKSA/IFwiI1wiIDogXCIuXCI7XHJcbiAgICBpZihpc0FsbCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG59O1xyXG5cclxuXHJcbnZhciBkYXRhQ29ubmVjdG9yQ29uZmlnID0ge1xyXG4gICAgdHlwZU9mUmVxdWVzdDogbWFpbkNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdFxyXG59O1xyXG5cclxuLy8gZGF0YWJhc2VcclxuXHJcbi8vINCc0L7QtNGD0LvRjCDQv9GA0LXQtNC+0YHRgtCw0LLQu9GP0LXRgiDRgdC/0L7RgdC+0LEg0L7RgtC/0YDQsNCy0LrQuCDQt9Cw0L/RgNC+0YHQsCDQuiDQuNGB0YLQvtGH0L3QuNC60YMg0LTQsNC90L3Ri9GFXHJcbi8vINCU0LvRjyDRgNC10LrQstC10YHRgtCwINC90LXQvtCx0YXQvtC00LjQvCDQv9GD0YLRjCwg0YLQtdC70L4g0LfQsNC/0YDQvtGB0LAsINGC0LjQvyDQt9Cw0L/RgNC+0YHQsFxyXG4vLyByZXF1ZXN0INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIFByb21pc2VcclxudmFyIGRhdGFDb25uZWN0b3IgPSAoZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqKSB7XHJcbiAgICB2YXIgZGF0YUJhc2VDb25uZWN0b3I7XHJcbiAgICB2YXIgZGF0YUJhc2VBUEk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YUJhc2VDb25uZWN0b3IoKSB7fVxyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbiByZXF1ZXN0RmV0Y2goXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0UGF0aCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IGNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHlcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlSlNPTihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RYTVIgPSBmdW5jdGlvbiByZXF1ZXN0WE1SKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0VHlwZSwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBsb2FkQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIGVycm9yQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdEJvZHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBkYXRhQmFzZUNvbm5lY3RvciA9IG5ldyBEYXRhQmFzZUNvbm5lY3RvcigpO1xyXG4gICAgaWYgKGRhdGFDb25uZWN0b3JDb25maWdPYmoudHlwZU9mUmVxdWVzdCA9PT0gXCJmZXRjaFwiKSB7XHJcbiAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RGZXRjaFxyXG4gICAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YUJhc2VBUEk7XHJcbn0pKGRhdGFDb25uZWN0b3JDb25maWcpO1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQtNCw0L3QvdGL0YVcclxuLy8g0JLRgdC1IEFQSSDRhNGD0L3QutGG0LjQuCDQstC+0LfQstGA0LDRidCw0Y7RgiDQv9GA0L7QvNC40YHRi1xyXG52YXIgZGF0YVNvdXJjZSA9IChmdW5jdGlvbiBjcmVhdGVEYXRhU291cmNlIChkYXRhQ29ubmVjdG9yKSB7XHJcbiAgICB2YXIgZGF0YVNvdXJjZUluc3RhbmNlO1xyXG4gICAgdmFyIGRhdGFTb3VyY2VBUEk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YVNvdXJjZSgpIHtcclxuICAgICAgICBkYXRhQ29ubmVjdG9yID0gZGF0YUNvbm5lY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5jcmVhdGVSZXF1ZXN0UGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RQYXRoKFxyXG4gICAgICAgIGRhdGFCYXNlVVJMLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICByZXF1ZXN0UG9zdGZpeFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBkYXRhQmFzZVVSTCArIFwiL3VzZXJzXCI7XHJcbiAgICAgICAgaWYgKHVzZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgdXNlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBvc3RmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQb3N0Zml4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXRoICs9IFwiLmpzb25cIjtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0SFRNTCA9IGZ1bmN0aW9uIGdldEhUTUwgKHJlcXVlc3RQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIFwiR0VUXCIsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KDQsNCx0L7RgtCwINGBINCa0J7QndCa0KDQldCi0J3Qq9CcINGO0LfQtdGA0L7QvFxyXG5cclxuICAgIC8vINCf0L7Qu9GD0YfQuNGC0Ywg0LLRgdC1INGB0L7QvtCx0YnQtdC90LjRjyDQuCDQvdCw0YHRgtGA0L7QudC60Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGZ1bmN0aW9uIGdldFVzZXJEYXRhKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VyRGF0YSA9IHt9O1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3JcclxuICAgICAgICAgICAgLnJlcXVlc3QocmVxdWVzdFBhdGgsIG51bGwsIFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzZXRVc2VyRGF0YShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBzZXREYXRhIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRhdGFba2V5XSA9IGRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHJldHVyblVzZXJzTGlzdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyRGF0YTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0L7Qu9GD0YfQsNC10YIg0L7Qv9GAINC/0L7Qu9C1INC90LDRgdGC0YDQvtC10Log0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRTZXR0aW5nRmllbGQgPSBmdW5jdGlvbiBnZXRBbW91bnRPZk5vUmVhZE1lc3NhZ2UoXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGZpZWxkTmFtZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBmaWVsZE5hbWUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcIkdFVFwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC+0L/RgCDQv9C+0LvQtSDQvdCw0YHRgtGA0L7QtdC6INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuc2V0U2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gZ2V0QW1vdW50T2ZOb1JlYWRNZXNzYWdlKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBmaWVsZE5hbWUsXHJcbiAgICAgICAgdmFsdWVcclxuICAgICkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgZmllbGROYW1lKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodmFsdWUpLFxyXG4gICAgICAgICAgICBcIlBVVFwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YLQv9GA0LDQstC40YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlVG9Vc2VyKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBtZXNzYWdlT2JqZWN0XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIFwibWVzc2FnZXNcIik7XHJcbiAgICAgICAgdmFyIGpzb25NZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGU6IG1lc3NhZ2VPYmplY3QuZGF0ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VPYmplY3QubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIm1lc3NhZ2VcIixcclxuICAgICAgICAgICAgICAgIHVzZXI6IG1lc3NhZ2VPYmplY3Quc2VuZGVyLFxyXG4gICAgICAgICAgICAgICAgaXRJc1JlYWQ6IG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAganNvbk1lc3NhZ2UsXHJcbiAgICAgICAgICAgIFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCg0LDQsdC+0YLQsCDRgdC+INCS0KHQldCc0Jgg0Y7Qt9C10YDQsNC80LhcclxuXHJcbiAgICAvLyDQv9C+0LvRg9GH0LjRgtGMINCy0YHQtSDQtNCw0L3QvdGL0LUsINCy0YHQtdGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRBbGxVc2VycyA9IGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xyXG4gICAgICAgIHZhciB1c2Vyc0RhdGFMaXN0ID0ge307XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3JcclxuICAgICAgICAgICAgLnJlcXVlc3QocmVxdWVzdFBhdGgsIG51bGwsIFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzZXRVc2Vyc0xpc3QoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24gc2V0RGF0YShrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnNEYXRhTGlzdFtrZXldID0gZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiByZXR1cm5Vc2Vyc0xpc3QoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcnNEYXRhTGlzdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdC8IGluc3RhbmNlINC+0LHRitC10LrRgtCwLCDQt9Cw0LTQsNC10LwgQVBJXHJcblxyXG4gICAgZGF0YVNvdXJjZUluc3RhbmNlID0gbmV3IERhdGFTb3VyY2UoKTtcclxuICAgIGRhdGFTb3VyY2VBUEkgPSB7XHJcbiAgICAgICAgdXNlcnNBUEk6IHtcclxuICAgICAgICAgICAgZ2V0VXNlckRhdGE6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRVc2VyRGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlOiBkYXRhU291cmNlSW5zdGFuY2Uuc2VuZE1lc3NhZ2UuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBzZXRGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLnNldFNldHRpbmdGaWVsZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGdldEZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0U2V0dGluZ0ZpZWxkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZ2V0QWxsVXNlcnM6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRBbGxVc2Vycy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbW1vbkFQSToge1xyXG4gICAgICAgICAgICBnZXRIVE1MOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0SFRNTC5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSlcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBkYXRhU291cmNlQVBJO1xyXG59KShkYXRhQ29ubmVjdG9yKTtcclxuXHJcbi8vIG1lc3NhZ2VNYW5hZ2VyXHJcblxyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgY2hhdE1hbmFnZXJDb25maWcgKi9cclxuLyogZXhwb3J0ZWQgY2hhdE1hbmFnZXIgKi9cclxuLy8g0JzQvtC00YPQu9GMINC00LvRjyDRgNCw0LHQvtGC0Ysg0YHQviDRgdC/0LjRgdC60L7QvCDRgdC+0L7QsdGJ0LXQvdC40Lkg0J7QlNCd0J7Qk9CeINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG52YXIgbWVzc2FnZUxpc3RNYW5hZ2VyID0gKGZ1bmN0aW9uIHNldHVwTWVzc2FnZUxpc3RNYW5hZ2VyICgpIHtcclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyDQpNC+0YDQvNCw0YIgIG1lc3NhZ2VMaXN0ID0gW1xyXG4gICAgLy8gICAge1xyXG4gICAgLy8gICAgICAgc2VuZGVyOiBzZW5kZXJcclxuICAgIC8vICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAvLyAgICAgICByZWFkOiB0cnVlL2ZhbHNlXHJcbiAgICAvLyAgICAgICBkYXRlOiBkYXRlXHJcbiAgICAvLyAgICB9LFxyXG4gICAgLy8gXVxyXG4gICAgLy8gcmVhZCAtINCx0YvQu9C+INC70Lgg0L/RgNC+0YfQuNGC0LDQvdC+INGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmdW5jdGlvbiBNZXNzYWdlTGlzdE1hbmFnZXIoKSB7fVxyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiAoY29uZmlnT2JqKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWdPYmo7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY0RPTSA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZXNCbG9jazogZ2V0RWxlbWVudChcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIE1FU1NBR0UgRUxFTUVOVCAvL1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdGCIERPTSDRjdC70LXQvNC10L3RgiDRgdC+0L7QsdGJ0LXQvdC40Y8g0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L3QsCDRjdC60YDQsNC90LVcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlRWxlbWVudChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlQ29udGFpbmVyRGl2ID0gdGhpcy5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2KGlzUmVhZCwgc2VuZGVyKTtcclxuICAgICAgICB2YXIgbWVzc2FnZURhdGVEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgbWVzc2FnZURhdGUsXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLkRJU1BMQVlfTUVTU0FHRV9EQVRFLFxyXG4gICAgICAgICAgICBbdGhpcy5jb25maWcuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuRElTUExBWV9TRU5ERVJfTkFNRSxcclxuICAgICAgICAgICAgW3RoaXMuY29uZmlnLkNTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUVdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbdGhpcy5jb25maWcuQ1NTX0NIQVRfTUVTU0FHRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEYXRlRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VTZW5kZXJEaXYpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCA9IGZ1bmN0aW9uICBnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgKHJlbGF0aXZlVXNlck5hbWUsIHJlbGF0aXZlVXNlcklkKSB7XHJcbiAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VzSXNSZWFkID0gW107XHJcbiAgICAgICAgdmFyIHVzZXJOYW1lID0gcmVsYXRpdmVVc2VyTmFtZSB8fCB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lO1xyXG4gICAgICAgIHZhciB1c2VySWQgPSByZWxhdGl2ZVVzZXJJZCB8fCB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgICAgICBmb3IoaSA9IHRoaXMubWVzc2FnZUxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tZXNzYWdlTGlzdFtpXS5zZW5kZXIgIT09IHVzZXJOYW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNJc1JlYWQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6XCJtZXNzYWdlcy9cIiArIHRoaXMubWVzc2FnZUxpc3RbaV0uaWQgKyBcIi9pdElzUmVhZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlc0lzUmVhZDtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiAoaXNSZWFkLCBzZW5kZXIpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaWYgKCFpc1JlYWQgJiYgdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSAhPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZCh0aGlzLmNvbmZpZy5DU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayA9IGZ1bmN0aW9uICh0ZXh0LCBpc0Rpc3BsYXksIHN0eWxlQ2xhc3Nlcykge1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN0eWxlQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZSkge1xyXG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChzdHlsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIE1FU1NBR0UgRUxFTUVOVCAvL1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlTGlzdCAobWVzc2FnZU9iamVjdHMpICB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdHMpIHtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBhZGRFbGVtZW50VG9NZXNzYWdlTGlzdCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdNZXNzYWdlTGlzdDtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0IChuZXdNZXNzYWdlTGlzdCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QgKFxyXG4gICAgICAgIG1lc3NhZ2VPYmpcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QucHVzaChtZXNzYWdlT2JqKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C10YDQtdCx0LjRgNCw0LXRgiDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5LCDRgdC+0LfQtNCw0LXRgiDRgdC+0L7RgtCy0LXRgtGB0LLRg9GO0YnQuNC1INC40LwgRE9NINGN0LvQtdC80LXQvdGC0Ysg0Lgg0LLRgdGC0LDQstC70Y/QtdGCINC40YUg0LIg0YfQsNGCXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmRpc3BsYXlNZXNzYWdlcyA9IGZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlcygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jbGVhckNoYXQoKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LmZvckVhY2goZnVuY3Rpb24gY3JlYXRlTWVzc2FnZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGhhdC5jcmVhdGVNZXNzYWdlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QuZGF0ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3Quc2VuZGVyLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5yZWFkXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoYXQuY0RPTS5tZXNzYWdlc0Jsb2NrLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGH0LjRgdGC0LjRgtGMIERPTSDRjdC70LXQvNC10L3RgiDQsiDQutC+0YLQvtGA0L7QvCDQvtGC0L7QsdGA0LDQttCw0Y7RgtGB0Y8g0YHQvtC+0LHRidC10L3QuNGPICjQvdCw0L/RgNC40LzQtdGAINGH0YLQvtCx0Ysg0LLRgdGC0LDQstC40YLRjCDQvdCy0L7Ri9C5INGB0L/QuNGB0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LkpXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNsZWFyQ2hhdCA9IGZ1bmN0aW9uIGNsZWFyQ2hhdCgpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNET00ubWVzc2FnZXNCbG9jay5yZW1vdmVDaGlsZCh0aGlzLmNET00ubWVzc2FnZXNCbG9jay5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTWVzc2FnZUxpc3RNYW5hZ2VyKCk7XHJcblxyXG59KSgpO1xyXG52YXIgdXNlckRhdGFNYW5hZ2VyID0gIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVc2VyRGF0YU1hbmFnZXIgKCkge1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElOQ0xVREVcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSAoZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT09IDEpID8gXCIwXCIgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIHJldHVybiBkYXRlXHJcbiAgICAgICAgICAgIC5nZXRIb3VycygpXHJcbiAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgIC5jb25jYXQoXCI6XCIsIG1pbnV0ZXMpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZU9iamVjdCAoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWQsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlbmRlcjogc2VuZGVyLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICByZWFkOiBpc1JlYWQsXHJcbiAgICAgICAgICAgIGRhdGU6IGRhdGUsXHJcbiAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoY29uZmlnT2JqKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWdPYmo7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnNldHVwKGNvbmZpZ09iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBmdW5jdGlvbiBnZXRVc2VyRGF0YSAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJEYXRhKHVzZXJJZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB0aGF0LmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lID0gZGF0YS51c2VyTmFtZTtcclxuICAgICAgICAgICAgdGhhdC5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID0gZGF0YS5pc01pbmltaXplO1xyXG4gICAgICAgICAgICBpZihkYXRhLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXNPYmplY3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEubWVzc2FnZXMpLm1hcChmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzT2JqZWN0LnB1c2goY3JlYXRlTWVzc2FnZU9iamVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1lc3NhZ2VzW21lc3NhZ2VdLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZXNbbWVzc2FnZV0udXNlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5pdElzUmVhZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdCA9IG1lc3NhZ2VMaXN0TWFuYWdlci5jcmVhdGVNZXNzYWdlTGlzdChtZXNzYWdlc09iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIudXBkYXRlTWVzc2FnZUxpc3QobmV3TWVzc2FnZUxpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGluY2x1ZGVcclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB0aGF0LnNhdmVTZXR0aW5nRmllbGQoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBpbmNsdWRlXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlU2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gc2V0RmllbGQgKGZpZWxkTmFtZSkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB0aGlzLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UoXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHRoYXQuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRoYXQuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3NbZmllbGROYW1lXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKVxyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24gc2VuZE1lc3NhZ2UgKHNlbmRlck5hbWUpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQoKTtcclxuICAgICAgICB2YXIgZGF0ZSA9IGdldEN1cnJlbnREYXRlKCk7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSBjcmVhdGVNZXNzYWdlT2JqZWN0KG1lc3NhZ2UsIGRhdGUsIHNlbmRlck5hbWUsIGZhbHNlKTtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QobWVzc2FnZU9iamVjdCk7XHJcbiAgICAgICAgdGhpcy5zYXZlTWVzc2FnZVRvRGF0YVNvdXJjZShtZXNzYWdlT2JqZWN0KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQodGhpcy5jb25maWcuQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MpO1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgZWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNldE1lc3NhZ2VBc1JlYWQgPSBmdW5jdGlvbiBzZXRNZXNzYWdlQXNSZWFkICgpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdHMgPSBtZXNzYWdlTGlzdE1hbmFnZXIuZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkKCk7XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdHMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3Quc2VuZGVyID09PSB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2VPYmplY3Quc2VuZGVyKTtcclxuICAgICAgICAgICAgdmFyIHVzZXJTZXR0aW5ncyA9IFt7XHJcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgZmllbGROYW1lOiBcInNlbmROZXdNZXNzYWdlXCIsXHJcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlOiB0cnVlXHJcbiAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UoXHJcbiAgICAgICAgICAgICAgICB1c2VyU2V0dGluZ3NcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTZXR0aW5ncyA9IFt7dXNlcklkLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWV9LHt9Li4uXVxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbiAobmV3RmllbGRTZXR0aW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0RmllbGQoXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhTWFuYWdlcigpO1xyXG5cclxufSkoKTtcclxuXHJcbi8vIHZpZXdcclxuXHJcbnZhciB2aWV3RmFjdG9yeSA9IChmdW5jdGlvbiAoZGF0YVNvdXJjZSkge1xyXG5cclxuICAgIGZ1bmN0aW9uIFZpZXdGYWN0b3J5ICgpIHt9XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZVZpZXcgPSBmdW5jdGlvbiBjcmVhdGVDaGF0VmlldyAoaHRtbFBhdGgsIGNzc1BhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgaWYoaHRtbFBhdGgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNzc1BhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmluY2x1ZGVWaWV3Q3NzVG9QYWdlKHRoYXQuY3JlYXRlQ1NTTGluayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXNoZWV0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGV4dC9jc3NcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3VjaC1zb2Z0LWNoYXQtY3NzXCJcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhhdC5pbmNsdWRlVmlld0hUTUxUb1BhZ2UoaHRtbFBhdGgsIGNvbnRhaW5lckNsYXNzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaHRtbFBhdGggaXMgbnVsbC4gUGxlYXNlIGFkZCBodG1sUGF0aFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3SFRNTFRvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0SFRNTFRvUGFnZSAoaHRtbFBhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckRpdiA9IChjb250YWluZXJDbGFzcykgPyBnZXRFbGVtZW50KGNvbnRhaW5lckNsYXNzKSA6IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UuY29tbW9uQVBJLmdldEhUTUwoaHRtbFBhdGgpLnRoZW4oZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyRGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3Q3NzVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRDc3NUb1BhZ2UgKGxpbmspIHtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlQ1NTTGluayA9IGZ1bmN0aW9uIGNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgZmlsZVBhdGgsXHJcbiAgICAgICAgcmVsLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVsKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwicmVsXCIsIHJlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwidHlwZVwiLCB0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGZpbGVQYXRoKTtcclxuICAgICAgICByZXR1cm4gbGluaztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBWaWV3RmFjdG9yeSgpXHJcblxyXG59KShkYXRhU291cmNlKTtcclxuXHJcbi8vIGNoYXRNYWluXHJcblxyXG52YXIgY2hhdEN1c3RvbWl6ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGZ1bmN0aW9uIENoYXRDdXN0b21pemVyKCkge31cclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoY29uZmlnT2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWdPYmplY3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5zZXR1cE91dGVyQ2hhdFNldHRpbmdzID0gZnVuY3Rpb24gc2V0dXBPdXRlckNoYXRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLmFsbG93TWluaW1pemUoKTtcclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uT2ZNYWluQmxvY2soKTtcclxuICAgICAgICB0aGlzLnNldFRpdGxlKCk7XHJcbiAgICAgICAgLy90aGlzLnNldE1haW5Dc3NDbGFzcygpO1xyXG4gICAgICAgIHRoaXMuYWxsb3dEcmFnTkRyb3AoKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLmFsbG93RHJhZ05Ecm9wID0gZnVuY3Rpb24gYWxsb3dEcmFnTkRyb3AoKSB7XHJcbiAgICAgICAgdmFyIGNsaWNrQmxvY2sgPSBnZXRFbGVtZW50KHRoaXMuY29uZmlnLkRPTS5USVRMRV9CTE9DS19DTEFTUyk7XHJcbiAgICAgICAgdmFyIGRyYWdCbG9jayA9IGdldEVsZW1lbnQodGhpcy5jb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUyk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy5hbGxvd0RyYWcgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsaWNrQmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbiBkcmFnQW5kRHJvcChlKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3JkcztcclxuICAgICAgICAgICAgdmFyIHNoaWZ0WDtcclxuICAgICAgICAgICAgdmFyIHNoaWZ0WTtcclxuICAgICAgICAgICAgdmFyIG1vdmVPYmo7XHJcbiAgICAgICAgICAgIHZhciBzZXROdWxsO1xyXG4gICAgICAgICAgICB2YXIgZW5kRHJhZztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENvb3JkcyhlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBib3gudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGJveC5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb3JkcyA9IGdldENvb3JkcyhkcmFnQmxvY2spO1xyXG4gICAgICAgICAgICBzaGlmdFggPSBlLnBhZ2VYIC0gY29yZHMubGVmdDtcclxuICAgICAgICAgICAgc2hpZnRZID0gZS5wYWdlWSAtIGNvcmRzLnRvcDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1vdmVBdChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnQmxvY2suc3R5bGUubGVmdCA9IGVsZW0ucGFnZVggLSBzaGlmdFggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBkcmFnQmxvY2suc3R5bGUudG9wID0gZWxlbS5wYWdlWSAtIHNoaWZ0WSArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbW92ZU9iaiA9IGZ1bmN0aW9uIG1vdmVPYmpEcmFnQW5kRHJvcChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBtb3ZlQXQoZWxlbSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzZXROdWxsID0gZnVuY3Rpb24gc2V0TnVsbERyYWdBbmREcm9wICgpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixtb3ZlT2JqICk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHNldE51bGwgKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGVuZERyYWcgPSBmdW5jdGlvbiBlbmREcmFnQW5kRHJvcCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIG1vdmVBdChlKTtcclxuICAgICAgICAgICAgZHJhZ0Jsb2NrLnN0eWxlLnpJbmRleCA9IDEwMDA7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdmVPYmopO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBzZXROdWxsKTtcclxuICAgICAgICAgICAgZHJhZ0Jsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgZW5kRHJhZyk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0UG9zaXRpb25PZk1haW5CbG9jayA9IGZ1bmN0aW9uIHNldFBvc2l0aW9uT2ZNYWluQmxvY2soKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy5wb3NpdGlvbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgICAgIGdldEVsZW1lbnQodGhpcy5jb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykuY2xhc3NMaXN0LmFkZChcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLkNIQVRfUE9TSVRJT05fUklHSFRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KHRoaXMuY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5DSEFUX1BPU0lUSU9OX0xFRlRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5zZXRUaXRsZSA9IGZ1bmN0aW9uIHNldFRpdGxlKCkge1xyXG4gICAgICAgIGlmKHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy50aXRsZS5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy50aXRsZSA9IHRoaXMuY29uZmlnLkRFRkFVTFRfQ0hBVF9USVRMRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0RWxlbWVudCh0aGlzLmNvbmZpZy5ET00uVElUTEVfQkxPQ0tfQ0xBU1MpLmlubmVySFRNTCA9IHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy50aXRsZTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLmFsbG93TWluaW1pemUgPSBmdW5jdGlvbiBhbGxvd01pbmltaXplKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jaGF0U2V0dGluZ3MuYWxsb3dNaW5pbWl6ZSA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgICAgIGdldEVsZW1lbnQodGhpcy5jb25maWcuRE9NLkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5zZXRNYWluQ3NzQ2xhc3MgPSBmdW5jdGlvbiBzZXRNYWluQ3NzQ2xhc3MoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5jb25maWcuY2hhdFNldHRpbmdzLm91dGVyQ3NzQ2xhc3MpO1xyXG4gICAgICAgIGlmKHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy5vdXRlckNzc0NsYXNzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuY2hhdFNldHRpbmdzLm91dGVyQ3NzQ2xhc3MgPSB0aGlzLmNvbmZpZy5ERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0RWxlbWVudCh0aGlzLmNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTLnBhcmVudE5vZGUpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNoYXRTZXR0aW5ncy5vdXRlckNzc0NsYXNzXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBDaGF0Q3VzdG9taXplcigpO1xyXG59KSgpO1xyXG52YXIgY2hhdENvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGZ1bmN0aW9uIENoYXRDb250cm9sbGVyKCkge31cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoY2hhdENvbnRyb2xsZXJDb25maWcpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNoYXRDb250cm9sbGVyQ29uZmlnO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dXBDaGF0VmlldygpLnRoZW4oIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhhdC5hdXRob3JpemF0aW9uKHRoYXQuY29uZmlnLmNoYXRTZXR0aW5ncy5yZXF1aXJlTmFtZSk7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0dXBDaGF0QmFzaWNMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYodGhhdC5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5nZXRVc2VyRGF0YSh0aGF0LmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXR1cENoYXRTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0dXBDaGF0U2VuZExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnNldHVwQ2hhdFN0eWxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2hhdEN1c3RvbWl6ZXIuc2V0dXAodGhhdC5jb25maWcpO1xyXG4gICAgICAgICAgICBjaGF0Q3VzdG9taXplci5zZXR1cE91dGVyQ2hhdFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGF1dGhvcml6YXRpb24gYmxvY2sgLy9cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuYXV0aG9yaXphdGlvbiA9IGZ1bmN0aW9uIGF1dGhvcml6YXRpb24gKHVzZXJOYW1lSXNSZXF1aXJlKSB7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNldHVwKHRoaXMuY29uZmlnKTtcclxuICAgICAgICB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIGlmKCF0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCkge1xyXG4gICAgICAgICAgICBpZih1c2VyTmFtZUlzUmVxdWlyZSA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IHRoaXMuZ2V0SGFzaCh0aGlzLmNvbmZpZy5ERUZBVUxUX1VTRVJfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lID0gdGhpcy5jb25maWcuREVGQVVMVF9VU0VSX05BTUU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVVc2VySWRUb0xvY2FsU3RvcmFnZSh0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUF1dGhvcml6YXRpb25NZW51VmlzaWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUudG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGdldEVsZW1lbnQodGhpcy5jb25maWcuRE9NLkFVVEhPUklaQVRJT05fTUVOVV9DTEFTUykuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBJTkNMVURFXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0SGFzaCA9IGZ1bmN0aW9uIGdldEhhc2goc3RyKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBzdHIgKyBkYXRlLmdldFRpbWUoKTtcclxuICAgIH07XHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgLy8g0JXRgdC70Lgg0YLRgNC10LHRg9C10YLRgdGPINCy0LLQtdGB0YLQuCDQuNC80Y8sINC/0L7Qu9GD0YfQsNC10Lwg0LXQs9C+INC4INC30LDQvdC+0YHQuNC8INGO0LfQtdGA0LAg0LIg0LHQtFxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJOYW1lRnJvbUlucHV0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgPSBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5ET00uVVNFUl9OQU1FX0lOUFVUX0NMQVNTXHJcbiAgICAgICAgKS52YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IHRoaXMuZ2V0SGFzaChcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNldHVwKHRoaXMuY29uZmlnKTtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlVXNlcklkVG9Mb2NhbFN0b3JhZ2UodGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cENoYXRTZW5kTGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHVwIENoYXQgLy9cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0U2VuZExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBzZXR1cCBjaGF0IGxpc3RlbmVyc1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBnZXRFbGVtZW50KHRoYXQuY29uZmlnLkRPTS5TRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNlbmRNZXNzYWdlLmJpbmQodXNlckRhdGFNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgdGhhdC5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZ2V0RWxlbWVudCh0aGF0LmNvbmZpZy5ET00uU0VORF9NRVNTQUdFX01JTl9TSVpFX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNlbmRNZXNzYWdlLmJpbmQodXNlckRhdGFNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgdGhhdC5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHVzZXJEYXRhTWFuYWdlci5zZXRNZXNzYWdlQXNSZWFkLmJpbmQodXNlckRhdGFNYW5hZ2VyKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRCYXNpY0xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZ2V0RWxlbWVudCh0aGF0LmNvbmZpZy5ET00uU0VORF9VU0VSX05BTUVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuZ2V0VXNlck5hbWVGcm9tSW5wdXQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudCh0aGF0LmNvbmZpZy5ET00uU0VUX01BWF9TVFlMRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgIHRoYXQubWluTWF4U3R5bGVUb2dnbGUuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudCh0aGF0LmNvbmZpZy5ET00uU0VUX01JTl9TVFlMRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgIHRoYXQubWluTWF4U3R5bGVUb2dnbGUuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0VmlldyA9IGZ1bmN0aW9uIHNldHVwQ2hhdFZpZXcgKCkge1xyXG4gICAgICAgIHJldHVybiB2aWV3RmFjdG9yeS5jcmVhdGVWaWV3KHRoaXMuY29uZmlnLkhUTUxfRklMRV9QQVRILCB0aGlzLmNvbmZpZy5DU1NfRklMRV9QQVRILCBudWxsKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwQ2hhdFN0eWxlID0gZnVuY3Rpb24gc2V0dXBDaGF0U3R5bGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLmlzTWluaW1pemUpIHtcclxuICAgICAgICAgICAgZ2V0RWxlbWVudCh0aGlzLmNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2V0RWxlbWVudCh0aGlzLmNvbmZpZy5ET00uTUlOSU1JWkVfU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLm1pbk1heFN0eWxlVG9nZ2xlID0gZnVuY3Rpb24gbWluTWF4U3R5bGVUb2dnbGUoKSB7XHJcbiAgICAgICAgZ2V0RWxlbWVudCh0aGlzLmNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQodGhpcy5jb25maWcuRE9NLk1JTklNSVpFX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID0gdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID09PSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNoYW5nZUlucHV0QW5kU2VuZEJ1dHRvbkNsYXNzKCk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNhdmVTZXR0aW5nRmllbGQoXCJpc01pbmltaXplXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuYWN0aXZpdHlOb3RpZnkgPSBmdW5jdGlvbiBhY3Rpdml0eU5vdGlmeSAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MubGFzdE9ubGluZSA9IGRhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5zYXZlU2V0dGluZ0ZpZWxkKFwibGFzdE9ubGluZVwiKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmNoYW5nZUlucHV0QW5kU2VuZEJ1dHRvbkNsYXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyA9IHRoaXMuY29uZmlnLkRPTS5DU1NfTUlOX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTU1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTID0gdGhpcy5jb25maWcuRE9NLkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBJTkNMVURFXHJcbiAgICAvLyBXT1JLIFdJVEggTE9DQUwgU1RPUkFHRSAvL1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlVXNlcklkVG9Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzYXZlVXNlcklkVG9Mb2NhbFN0b3JhZ2UodXNlcklkKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5jb25maWcuTE9DQUxfU1RPUkFHRV9OQU1FLCB1c2VySWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0VXNlcklkRnJvbUxvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIGdldFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UgKCkge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTE9DQUwgU1RPUkFHRSAvL1xyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cEludGVydmFsRnVuY3Rpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBzZXRJbnRlcnZhbCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEodGhhdC5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICB0aGF0LmFjdGl2aXR5Tm90aWZ5KCk7XHJcbiAgICAgICAgfSwgdGhhdC5jb25maWcuVVBEQVRFX1VTRVJfREFUQV9USU1FKVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IENoYXRDb250cm9sbGVyKCk7XHJcblxyXG59KSgpO1xyXG5cclxuY2hhdENvbnRyb2xsZXIuc2V0dXAobWFpbkNvbmZpZyk7XHJcbmNoYXRDb250cm9sbGVyLnN0YXJ0QXBwKCk7Il19
