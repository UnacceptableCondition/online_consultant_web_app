var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?title='",srcEnd:"'&gt&lt/script&gt"},ADMIN_NAME:"Admin",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message",chatSettings:{typeOfRequest:"fetch"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",DATA_BASE_URL:"https://touchsoftchatproject.firebaseio.com",UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e4,ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/dev/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/dev/html/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/dev/html/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,n){var r;return 1<e.length&&(t<(r=function(e,t,s,n){for(var r,o,i,a,u=e[Math.floor((s+t)/2)][n],c=t,d=s;c<=d;){for(;e[c][n]>u;)c++;for(;e[d][n]<u;)d--;c<=d&&(i=d,a=(r=e)[o=c],r[o]=r[i],r[i]=a,c++,d--)}return c}(e,t,s,n))-1&&this.quickSort(e,t,r-1,n),r<s&&this.quickSort(e,r,s,n)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,r,o,i){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(o,n,!0),s.setRequestHeader("Content-Type",i),s.onload=function(){e("application/json"===i?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},r?s.send(r):s.send()})},t=new s,"fetch"===e.typeOfRequest?{request:t.requestFetch}:{request:t.requestXMR}}(dataConnectorConfig),dataSource=function(r){var e;function t(){r=r}return t.prototype.createRequestPath=function(e,t,s){var n=e+"/users";return null!==t&&(n+="/"+t),null!==s&&(n+="/"+s),n+=".json"},t.prototype.getHTML=function(e){return r.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},t.prototype.getUserData=function(e){var s={},t=this.createRequestPath(dataBaseUrl,e,null);return r.request(t,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},t.prototype.getSettingField=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,t);return r.request(s,null,"GET","application/json")},t.prototype.setSettingField=function(e,t,s){var n=this.createRequestPath(dataBaseUrl,e,t);return r.request(n,JSON.stringify(s),"PUT","application/json")},t.prototype.sendMessage=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,"messages"),n=JSON.stringify({date:t.date,message:t.message,title:"message",user:t.sender,itIsRead:t.read});return r.request(s,n,"POST","application/json")},t.prototype.getAllUsers=function(){var s={},e=this.createRequestPath(dataBaseUrl,null,null);return r.request(e,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},{usersAPI:{getUserData:(e=new t).getUserData.bind(e),sendMessage:e.sendMessage.bind(e),setField:e.setSettingField.bind(e),getField:e.getSettingField.bind(e),getAllUsers:e.getAllUsers.bind(e)},commonAPI:{getHTML:e.getHTML.bind(e)}}}(dataConnector),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,r){var o=this;return new Promise(function(e,t){s?(n&&o.includeViewCssToPage(o.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(o.includeViewHTMLToPage(s,r))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var r=document.createElement("link");return n&&r.setAttribute("id",n),t&&r.setAttribute("rel",t),s&&r.setAttribute("type",s),r.setAttribute("href",e),r},new e}(dataSource),messageListManager=function(){function e(){}return e.prototype.setup=function(e){this.config=e,this.messageList=[],this.cDOM={messagesBlock:getElement(this.config.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var r=this.createMessageContainerDiv(n,s),o=this.createDivForMessageBlock(t,this.config.DISPLAY_MESSAGE_DATE,[this.config.CSS_CHAT_MESSAGE_DATE]),i=this.createDivForMessageBlock(s,this.config.DISPLAY_SENDER_NAME,[this.config.CSS_CHAT_MESSAGE_SENDER_NAME]),a=this.createDivForMessageBlock(e,this.config.DISPLAY_MESSAGE,[this.config.CSS_CHAT_MESSAGE]);return r.appendChild(o),r.appendChild(i),r.appendChild(a),r},e.prototype.getMessageObjectsForMarkAsRead=function(e,t){var s,n=[],r=e||this.config.currentUserSettings.userName,o=t||this.config.currentUserSettings.userId;for(s=this.messageList.length-1;0<=s;s--)if(this.messageList[s].sender!==r){if(this.messageList[s].read)break;n.push({userId:o,fieldName:"messages/"+this.messageList[s].id+"/itIsRead",fieldValue:!0})}return n},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return e||this.config.currentUserSettings.userName===t||s.classList.add(this.config.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e),this.displayMessages()},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(),userDataManager=function(){function e(){}function r(e,t,s,n,r){return{sender:s,message:e,read:n,date:t,id:r}}return e.prototype.setup=function(e){this.config=e,messageListManager.setup(e)},e.prototype.getUserData=function(e){var n=this;return dataSource.usersAPI.getUserData(e).then(function(t){if(n.config.currentUserSettings.userName=t.userName,n.config.currentUserSettings.isMinimize=t.isMinimize,t.messages){var e,s=[];Object.keys(t.messages).map(function(e){s.push(r(t.messages[e].message,t.messages[e].date,t.messages[e].user,t.messages[e].itIsRead,e))}),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}})},e.prototype.createNewUserProfileToDataBase=function(){var t=this;Object.keys(this.config.currentUserSettings).map(function(e){t.saveSettingField(e)})},e.prototype.saveSettingField=function(e){this.saveUserSettingsToDataSource([{userId:this.config.currentUserSettings.userId,fieldName:e,fieldValue:this.config.currentUserSettings[e]}])},e.prototype.sendMessage=function(e){var t,s,n=r(this.getMessageFromInputElement(),(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),e,!1);messageListManager.addMessageToMessageList(n),this.saveMessageToDataSource(n)},e.prototype.getMessageFromInputElement=function(){var e=getElement(this.config.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&this.saveUserSettingsToDataSource(e)},e.prototype.saveMessageToDataSource=function(e){if(e.sender===this.config.currentUserSettings.userName){console.log(e.sender);var t=[{userId:this.config.currentUserSettings.userId,fieldName:"sendNewMessage",fieldValue:!0}];this.saveUserSettingsToDataSource(t)}dataSource.usersAPI.sendMessage(this.config.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setField(e.userId,e.fieldName,e.fieldValue)})},new e}(),userListManager=function(o,e){function t(){this.uList={}}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return s.classList.add(o.USER_ELEMENT_CSS_CLASS),n.classList.add(o.USER_ID_ELEMENT_CSS_CLASS),n.innerHTML=e,t?r.classList.add(o.USER_INDICATOR_CSS_CLASS_ONLINE):r.classList.add(o.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(n),s.appendChild(r),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var n=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,n),online:n,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.getUserFromUserListById=function(t){var s=this,n=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(n=e),!0}),n},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=o.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(o.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,o.currentDashboardCondition.sortBy)},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(o.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(o.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),dashboard=function(r,e,s,o,t){var n=[];function i(){}return i.prototype.startApp=function(){o.setup(r,t),s.setup(r),this.setupUsersListBlock(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions()},i.prototype.saveCurrentConditionToLocalStorage=function(){var e=JSON.stringify({filter:r.currentDashboardCondition.filterBy,sort:r.currentDashboardCondition.sortBy,currentUserId:r.currentUserSettings.userId});localStorage.setItem(r.LOCAL_STORAGE_NAME,e)},i.prototype.getCurrentUserIdFromLocalStorage=function(){var e=localStorage.getItem(r.LOCAL_STORAGE_NAME),t=null;return e&&(t=JSON.parse(e),r.currentDashboardCondition.filterBy=t.filter,r.currentDashboardCondition.sortBy=t.sort,r.currentUserSettings.userId=t.currentUserId),t},i.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(r.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(r.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(r.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(r.currentUserSettings.userId)))},i.prototype.filter=function(){r.currentDashboardCondition.filterBy=getElement(r.DOM.CSS_FILTER_INPUT_ID).value,this.saveCurrentConditionToLocalStorage(),o.filterByName(r.currentDashboardCondition.filterBy),o.displayUsers()},i.prototype.sort=function(){r.currentDashboardCondition.sortBy=getElement(r.DOM.CSS_SORT_SELECT_ID).value,this.saveCurrentConditionToLocalStorage(),o.sortUsersByField(),o.displayUsers()},i.prototype.setupUsersListBlock=function(e){this.setupUsersListeners(e)},i.prototype.setupUsersListeners=function(e){var t=this;return this.getAcessToUsersList(e).then(function(){Array.from(r.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})})},i.prototype.getAcessToUsersList=function(e){return this.displayUsersList(e).then(function(){r.users=getElement(r.USER_ELEMENT_CSS_CLASS,!0)})},i.prototype.displayUsersList=function(e){var t=this;return this.setUsersListToUsersModule(e).then(function(){o.displayUsers()}).then(function(){t.toggleNewMessageIndicatorToUser()})},i.prototype.setUsersListToUsersModule=function(t){var s=this;return t?new Promise(function(e){e(o.setUserList(t))}):this.getUserList().then(function(e){o.setUserList(e)}).then(function(){var e=s.getCurrentUserIdFromLocalStorage();s.localSettingsSetup(e)})},i.prototype.getUserList=function(){var s=[];return e.usersAPI.getAllUsers().then(function(t){Object.keys(t).map(function(e){return o.addUserToUsersArray(t[e],e,s),!0})}).then(function(){return s})},i.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},i.prototype.startConversationWithUser=function(e){var t=this;r.currentUserSettings.userId=e,s.getUserData(e).then(function(){getElement(r.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.remove(r.INVISIBLE_CLASS),t.saveCurrentConditionToLocalStorage()})},i.prototype.updateUsers=function(){var s=this,n=[];e.usersAPI.getAllUsers().then(function(t){Object.keys(t).map(function(e){return o.addUserToUsersArray(t[e],e,n),r.currentUserSettings.userId&&s.updateUserMessagesAndDisplayIt(),!0})}).then(function(){o.uList=n,r.currentDashboardCondition.filterBy&&s.filter(),r.currentDashboardCondition.sortBy&&s.sort(),s.setupUsersListeners(n)})},i.prototype.updateUserMessagesAndDisplayIt=function(){s.getUserData(r.currentUserSettings.userId),this.markMessageFromUserAsRead(r.currentUserSettings.userId)},i.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(r.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,r.ADMIN_NAME)),getElement(r.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(r.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(r.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e))},i.prototype.markMessageFromUserAsRead=function(e){var t=o.getUserFromUserListById(e);o.uList[t].sendNewMessage=!1,s.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},i.prototype.closeConversation=function(){getElement(r.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.add(r.INVISIBLE_CLASS),r.currentUserSettings.userId=null,this.saveCurrentConditionToLocalStorage()},i.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(o.uList).map(function(e){return t=o.uList[e].userElement.getElementsByClassName(r.CSS_HAVE_NEW_MESSAGE_STYLE)[0],o.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(r.CSS_HAVE_NEW_MESSAGE_STYLE),o.uList[e].userElement.appendChild(t)),!o.uList[e].sendNewMessage&&t&&o.uList[e].userElement.removeChild(t),!0})},i.prototype.setupIntervalFunctions=function(){var e=this;n.push(setInterval(function(){e.updateUsers()},r.UPDATE_USERS_TIME))},i.prototype.closeApp=function(){n.forEach(function(e){clearInterval(e)})},new i}(mainConfig,dataSource,userDataManager,userListManager,sorter),launcher=function(e){var t={};function s(){}function n(){var e=mainConfig.launcher.srcStart+t.chatTitle.value+"'&chatUrl='"+t.chatUrl.value+"'&cssClass='"+t.chatClass.value+"'&position='"+t.chatPositionSelect.value+"'&allowMinimize='"+t.allowMinimize.checked+"'&allowDrag='"+t.allowDrag.checked+"'&showDateTime='"+t.showTime.checked+"'&requireName='"+t.requireName.checked+"'&requests='";t.networkRadioXMR.checked?e+="XHR'":e+="fetch'",e+=mainConfig.launcher.srcEnd,t.scriptCode.innerHTML=e}return s.prototype.startApp=function(){mainConfig.launcher.after.map(function(e){t[e]=getElement(mainConfig.launcher.pattern+e,!1,!0),t[e].addEventListener("input",n)})},s.prototype.closeApp=function(){t={}},new s}(),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),matchesHtmlPath={dashboard:mainConfig.DASHBOARD_HTML_PATH,configuration:mainConfig.LAUNCHER_HTML_PATH,about:mainConfig.ABOUT_HTML_PATH},closeFunctions={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},startFunctions={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function handleUrl(e){var t;-1!==e.indexOf("#")&&(closePreviousPage(t=e.split("#").pop()),getElement("a."+mainConfig.NAVIGATION_ACTIVE_CSS,!0).forEach(function(e){e.classList.remove(mainConfig.NAVIGATION_ACTIVE_CSS)}),getElement('a[href="'+t+'"]',!0).forEach(function(e){e.classList.add(mainConfig.NAVIGATION_ACTIVE_CSS)}),clearElementContent(mainConfig.CONTENT_CLASS),viewFactory.createView(matchesHtmlPath[t],null,mainConfig.CONTENT_CLASS).then(function(){startFunctions[t]()}))}function closePreviousPage(t){Object.keys(closeFunctions).map(function(e){e!==t&&closeFunctions[e]()})}window.addEventListener("hashchange",function(e){handleUrl(e.newURL)}),handleUrl(window.location.href+"#dashboard");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwibGF1bmNoZXIiLCJwYXR0ZXJuIiwiYWZ0ZXIiLCJzcmNTdGFydCIsInNyY0VuZCIsIkFETUlOX05BTUUiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJVU0VSX0VMRU1FTlRfQ1NTX0NMQVNTIiwiVVNFUl9JRF9FTEVNRU5UX0NTU19DTEFTUyIsIlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FIiwiVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09OTElORSIsIkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTIiwiTE9DQUxfU1RPUkFHRV9OQU1FIiwiQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEUiLCJjaGF0U2V0dGluZ3MiLCJ0eXBlT2ZSZXF1ZXN0IiwiY3VycmVudFVzZXJTZXR0aW5ncyIsInVzZXJJZCIsInVzZXJOYW1lIiwiY3VycmVudERhc2hib2FyZENvbmRpdGlvbiIsImZpbHRlckJ5Iiwic29ydEJ5IiwiSU5WSVNJQkxFX0NMQVNTIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJEQVRBX0JBU0VfVVJMIiwiVVBEQVRFX1VTRVJTX1RJTUUiLCJPTkxJTkVfSU5URVJWQUwiLCJBQk9VVF9IVE1MX1BBVEgiLCJMQVVOQ0hFUl9IVE1MX1BBVEgiLCJEQVNIQk9BUkRfSFRNTF9QQVRIIiwiQ09OVEVOVF9DTEFTUyIsIk5BVklHQVRJT05fQUNUSVZFX0NTUyIsImRhdGFCYXNlVXJsIiwiZ2V0RWxlbWVudCIsInNlbGVjdG9yIiwiaXNBbGwiLCJpdElzSWQiLCJzZWxlY3RvclN0YXJ0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicXVlcnlTZWxlY3RvciIsImRhdGFDb25uZWN0b3JDb25maWciLCJzb3J0ZXIiLCJTb3J0ZXIiLCJwcm90b3R5cGUiLCJxdWlja1NvcnQiLCJpdGVtcyIsImxlZnQiLCJyaWdodCIsInNvcnRGaWVsZCIsImluZGV4IiwibGVuZ3RoIiwiZmlyc3RJbmRleCIsInNlY29uZEluZGV4IiwidGVtcCIsInBpdm90IiwiTWF0aCIsImZsb29yIiwiaSIsImoiLCJwYXJ0aXRpb24iLCJ0aGlzIiwiY2xlYXJFbGVtZW50Q29udGVudCIsImVsZW1lbnRTZWxlY3RvciIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkYXRhQ29ubmVjdG9yIiwiZGF0YUNvbm5lY3RvckNvbmZpZ09iaiIsImRhdGFCYXNlQ29ubmVjdG9yIiwiRGF0YUJhc2VDb25uZWN0b3IiLCJyZXF1ZXN0RmV0Y2giLCJyZXF1ZXN0UGF0aCIsInJlcXVlc3RCb2R5IiwicmVxdWVzdFR5cGUiLCJjb250ZW50VHlwZSIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsIkNvbnRlbnQtVHlwZSIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwidGV4dCIsInJlcXVlc3RYTVIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJKU09OIiwicGFyc2UiLCJvbmVycm9yIiwic3RhdHVzVGV4dCIsInNlbmQiLCJyZXF1ZXN0IiwiZGF0YVNvdXJjZSIsImRhdGFTb3VyY2VJbnN0YW5jZSIsIkRhdGFTb3VyY2UiLCJjcmVhdGVSZXF1ZXN0UGF0aCIsImRhdGFCYXNlVVJMIiwicmVxdWVzdFBvc3RmaXgiLCJwYXRoIiwiZ2V0SFRNTCIsImdldFVzZXJEYXRhIiwidXNlckRhdGEiLCJkYXRhIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImdldFNldHRpbmdGaWVsZCIsImZpZWxkTmFtZSIsInNldFNldHRpbmdGaWVsZCIsInZhbHVlIiwic3RyaW5naWZ5Iiwic2VuZE1lc3NhZ2UiLCJtZXNzYWdlT2JqZWN0IiwianNvbk1lc3NhZ2UiLCJkYXRlIiwibWVzc2FnZSIsInRpdGxlIiwidXNlciIsInNlbmRlciIsIml0SXNSZWFkIiwicmVhZCIsImdldEFsbFVzZXJzIiwidXNlcnNEYXRhTGlzdCIsInVzZXJzQVBJIiwiYmluZCIsInNldEZpZWxkIiwiZ2V0RmllbGQiLCJjb21tb25BUEkiLCJ2aWV3RmFjdG9yeSIsIlZpZXdGYWN0b3J5IiwiY3JlYXRlVmlldyIsImh0bWxQYXRoIiwiY3NzUGF0aCIsImNvbnRhaW5lckNsYXNzIiwidGhhdCIsImluY2x1ZGVWaWV3Q3NzVG9QYWdlIiwiY3JlYXRlQ1NTTGluayIsImluY2x1ZGVWaWV3SFRNTFRvUGFnZSIsIkVycm9yIiwiY29udGFpbmVyRGl2IiwiaHRtbCIsImlubmVySFRNTCIsImxpbmsiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJmaWxlUGF0aCIsInJlbCIsInR5cGUiLCJpZCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJtZXNzYWdlTGlzdE1hbmFnZXIiLCJNZXNzYWdlTGlzdE1hbmFnZXIiLCJzZXR1cCIsImNvbmZpZ09iaiIsImNvbmZpZyIsIm1lc3NhZ2VMaXN0IiwiY0RPTSIsIm1lc3NhZ2VzQmxvY2siLCJjcmVhdGVNZXNzYWdlRWxlbWVudCIsIm1lc3NhZ2VEYXRlIiwiaXNSZWFkIiwibWVzc2FnZUNvbnRhaW5lckRpdiIsImNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYiLCJtZXNzYWdlRGF0ZURpdiIsImNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayIsIkRJU1BMQVlfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwibWVzc2FnZVNlbmRlckRpdiIsIkRJU1BMQVlfU0VOREVSX05BTUUiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwibWVzc2FnZURpdiIsIkRJU1BMQVlfTUVTU0FHRSIsIkNTU19DSEFUX01FU1NBR0UiLCJnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQiLCJyZWxhdGl2ZVVzZXJOYW1lIiwicmVsYXRpdmVVc2VySWQiLCJtZXNzYWdlc0lzUmVhZCIsInB1c2giLCJmaWVsZFZhbHVlIiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNEaXNwbGF5Iiwic3R5bGVDbGFzc2VzIiwiZGl2IiwiZm9yRWFjaCIsInN0eWxlIiwiY3JlYXRlTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqZWN0cyIsIm5ld01lc3NhZ2VMaXN0IiwidXBkYXRlTWVzc2FnZUxpc3QiLCJkaXNwbGF5TWVzc2FnZXMiLCJhZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCIsIm1lc3NhZ2VPYmoiLCJjbGVhckNoYXQiLCJ1c2VyRGF0YU1hbmFnZXIiLCJVc2VyRGF0YU1hbmFnZXIiLCJjcmVhdGVNZXNzYWdlT2JqZWN0IiwiaXNNaW5pbWl6ZSIsIm1lc3NhZ2VzIiwibWVzc2FnZXNPYmplY3QiLCJjcmVhdGVOZXdVc2VyUHJvZmlsZVRvRGF0YUJhc2UiLCJzYXZlU2V0dGluZ0ZpZWxkIiwic2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZSIsInNlbmRlck5hbWUiLCJtaW51dGVzIiwiZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQiLCJEYXRlIiwiZ2V0TWludXRlcyIsInRvU3RyaW5nIiwiZ2V0SG91cnMiLCJjb25jYXQiLCJzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSIsInNldE1lc3NhZ2VBc1JlYWQiLCJjb25zb2xlIiwibG9nIiwidXNlclNldHRpbmdzIiwic2V0dGluZ3MiLCJuZXdGaWVsZFNldHRpbmciLCJ1c2VyTGlzdE1hbmFnZXIiLCJVc2VyTGlzdE1hbmFnZXIiLCJ1TGlzdCIsImNyZWF0ZVVzZXJFbGVtZW50IiwiaXNPbmxpbmUiLCJ1c2VyRGl2IiwidXNlcklkRGl2IiwidXNlckluZGljYXRvciIsInNldFVzZXJMaXN0IiwidXNlckx1c3RPYmplY3QiLCJhZGRVc2VyVG9Vc2Vyc0FycmF5IiwidXNlcnNMaXN0IiwidXNlcklzT25saW5lIiwibGFzdE9ubGluZSIsInVzZXJFbGVtZW50Iiwib25saW5lIiwidmlzaWJsZSIsInNlbmROZXdNZXNzYWdlIiwicmVhZExhc3RNZXNzYWdlIiwiZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQiLCJ1c2VyTWFuYWdlciIsInVzZXJJbmRleCIsImxhc3RVc2VyT25saW5lVGltZSIsImdldFRpbWUiLCJmaWx0ZXJCeU5hbWUiLCJpbmRleE9mIiwic29ydFVzZXJzQnlGaWVsZCIsImRpc3BsYXlVc2VycyIsImVsZW0iLCJkYXNoYm9hcmQiLCJ1RGF0YU1hbmFnZXIiLCJ1TGlzdE1hbmFnZXIiLCJpbnRlcnZhbElkIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsInN0YXJ0QXBwIiwic2V0dXBVc2Vyc0xpc3RCbG9jayIsInNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMiLCJzZXR1cEludGVydmFsRnVuY3Rpb25zIiwic2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSIsInNlcmlhbENvbmRpdGlvbiIsImZpbHRlciIsInNvcnQiLCJjdXJyZW50VXNlcklkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNvbmRpdGlvbiIsImxvY2FsU2V0dGluZ3NTZXR1cCIsInN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIiLCJuZXdVc2VyTGlzdCIsInNldHVwVXNlcnNMaXN0ZW5lcnMiLCJnZXRBY2Vzc1RvVXNlcnNMaXN0IiwiQXJyYXkiLCJmcm9tIiwidXNlcnMiLCJhZGRFdmVudExpc3RlbmVyIiwidXNlckxpc3RlbmVyIiwiaW5uZXJUZXh0IiwiZGlzcGxheVVzZXJzTGlzdCIsInNldFVzZXJzTGlzdFRvVXNlcnNNb2R1bGUiLCJ0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyIiwiZ2V0VXNlckxpc3QiLCJ1c2Vyc0xpc3RPYmplY3QiLCJtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkIiwicmVtb3ZlIiwidXBkYXRlVXNlcnMiLCJpbnRlcm1lZGlhdGVMaXN0IiwidXNlckxpc3QiLCJ1cGRhdGVVc2VyTWVzc2FnZXNBbmREaXNwbGF5SXQiLCJjbG9zZUNvbnZlcnNhdGlvbiIsIm5ld01lc3NhZ2VEaXYiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic2V0SW50ZXJ2YWwiLCJjbG9zZUFwcCIsImNsZWFySW50ZXJ2YWwiLCJET01WYXJpYWJsZXMiLCJMYXVuY2hlciIsImNyZWF0ZVNjcmlwdCIsInNyYyIsImNoYXRUaXRsZSIsImNoYXRVcmwiLCJjaGF0Q2xhc3MiLCJjaGF0UG9zaXRpb25TZWxlY3QiLCJhbGxvd01pbmltaXplIiwiY2hlY2tlZCIsImFsbG93RHJhZyIsInNob3dUaW1lIiwicmVxdWlyZU5hbWUiLCJuZXR3b3JrUmFkaW9YTVIiLCJzY3JpcHRDb2RlIiwiYWJvdXQiLCJBYm91dCIsIm1hdGNoZXNIdG1sUGF0aCIsImNvbmZpZ3VyYXRpb24iLCJjbG9zZUZ1bmN0aW9ucyIsInN0YXJ0RnVuY3Rpb25zIiwiaGFuZGxlVXJsIiwidXJsIiwiaGFzaCIsImNsb3NlUHJldmlvdXNQYWdlIiwic3BsaXQiLCJwb3AiLCJ3aW5kb3ciLCJuZXdVUkwiLCJsb2NhdGlvbiIsImhyZWYiXSwibWFwcGluZ3MiOiJBQUVBLElBQUlBLFdBQWEsQ0FDYkMsSUFBSyxDQUVEQyxvQkFBcUIsc0NBRXJCQyw4QkFBK0IsZ0NBRS9CQyw4QkFBK0IsdUNBRS9CQyw0QkFBNkIsc0NBRTdCQyxvQkFBcUIsd0NBRXJCQyxtQkFBb0IsaUNBSXhCQyxTQUFVLENBQ05DLFFBQVMsMkJBQ1RDLE1BQVEsQ0FDSixZQUFhLFVBQVcsWUFBYSxxQkFDckMsZ0JBQWlCLFlBQWEsY0FBZSxXQUFZLGtCQUN6RCxvQkFBcUIsY0FFekJDLFNBQVUsK0ZBQ1ZDLE9BQVMscUJBR2JDLFdBQVksUUFHWkMsNEJBQTZCLHlDQUc3QkMsdUJBQXdCLGdDQUN4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QSxJQUFRcU4sR0FDUEosZUFBZWpOLE9BTTVCeU4sT0FBTy9DLGlCQUFpQixhQUFjLFNBQVU3TixHQUM1Q3NRLFVBQVV0USxFQUFRNlEsVUFJdEJQLFVBQVVNLE9BQU9FLFNBQVNDLEtBQU8iLCJmaWxlIjoiZGFzaGJvYXJkQXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gY29uZmlnXHJcblxyXG52YXIgbWFpbkNvbmZpZyA9IHtcclxuICAgIERPTToge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC90LXQvtCx0YXQvtC00LjQvNC+INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L/QuNGB0L7QuiDRjtC30LXRgNC+0LJcclxuICAgICAgICBVU0VSX0xJU1RfQ1NTX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2Vycy1saXN0XCIsXHJcbiAgICAgICAgLy8g0JHQu9C+0Log0LIg0LrQvtGC0L7RgNGL0Lkg0LfQsNCz0YDRg9C20LDQtdGC0YHRjyDRh9Cw0YJcclxuICAgICAgICBDU1NfQ0hBVF9DT05UQUlOU19CTE9DS19TVFlMRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdFwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTQu9GPINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjiDQv9C+INC90LDQttCw0YLQuNGOXHJcbiAgICAgICAgQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3NlbmQtYnV0dG9uXCIsXHJcbiAgICAgICAgLy8g0JrQu9Cw0YHRgSDQutC90L7Qv9C60Lgg0LfQsNC60YDRi9Cy0LDRjtGJ0LXQuSDRh9Cw0YJcclxuICAgICAgICBDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2Nsb3NlLWNoYXRcIixcclxuICAgICAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDQv9Cw0YDQsNC80LXRgtGA0LAg0YTQuNC70YzRgtGA0LDRhtC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgICAgICBDU1NfRklMVEVSX0lOUFVUX0lEOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9maWx0ZXItaW5wdXRcIixcclxuICAgICAgICAvLyBJRCBET00g0Y3Qu9C10LzQtdC90YLQsCDQtNGP0Lsg0LLQstC+0LTQsCDQv9Cw0YDQsNC80LXRgtGA0LAg0YHQvtGA0YLQuNGA0L7QstC60Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgICAgICBDU1NfU09SVF9TRUxFQ1RfSUQ6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3NvcnRcIlxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgbGF1bmNoZXI6IHtcclxuICAgICAgICBwYXR0ZXJuOiBcInRvdWNoc29mdF9jaGF0LWxhdW5jaGVyX1wiLFxyXG4gICAgICAgIGFmdGVyIDogW1xyXG4gICAgICAgICAgICBcImNoYXRUaXRsZVwiLCBcImNoYXRVcmxcIiwgXCJjaGF0Q2xhc3NcIiwgXCJjaGF0UG9zaXRpb25TZWxlY3RcIixcclxuICAgICAgICAgICAgXCJhbGxvd01pbmltaXplXCIsIFwiYWxsb3dEcmFnXCIsIFwicmVxdWlyZU5hbWVcIiwgXCJzaG93VGltZVwiLCBcIm5ldHdvcmtSYWRpb1hNUlwiLFxyXG4gICAgICAgICAgICBcIm5ldHdvcmtSYWRpb0ZldGNoXCIsIFwic2NyaXB0Q29kZVwiXHJcbiAgICAgICAgXSxcclxuICAgICAgICBzcmNTdGFydDogXCImbHRzY3JpcHQgc3JjPSdodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL0hvbWV3b3JrXzIvbWFzdGVyL2pzL2NoYXQuanM/dGl0bGU9J1wiLFxyXG4gICAgICAgIHNyY0VuZDogIFwiJyZndCZsdC9zY3JpcHQmZ3RcIlxyXG4gICAgfSxcclxuXHJcbiAgICBBRE1JTl9OQU1FOiBcIkFkbWluXCIsXHJcblxyXG4gICAgLy8g0LrQu9Cw0YHRgSDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VzXCIsXHJcblxyXG4gICAgLy8gQ3NzINC60LvQsNGB0YHRiyDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC+0LHRitC10LrRgtC+0Lwg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgVVNFUl9FTEVNRU5UX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlclwiLFxyXG4gICAgVVNFUl9JRF9FTEVNRU5UX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1pZFwiLFxyXG4gICAgVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItb2ZmbGluZVwiLFxyXG4gICAgVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09OTElORTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1vbmxpbmVcIixcclxuXHJcblxyXG4gICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINC/0LXRgNC10LQg0L7RgtC/0YDQsNCy0LrQvtC5INGO0LfQtdGA0YNcclxuICAgIENTU19DVVJSRU5UX0lOUFVUX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF90ZXh0YXJlYS1mb3ItbWVzc2FnZVwiLFxyXG5cclxuICAgIExPQ0FMX1NUT1JBR0VfTkFNRTogXCJjdXJyZW50Q29uZGl0aW9uXCIsXHJcblxyXG4gICAgLy8g0LTQu9GPINC90L7QstGL0YUg0YHQvtC+0LHRidC10L3QuNC5INC+0YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgIC8vINCV0YHQu9C4INGO0LfQtdGAINC/0YDQuNGB0LvQsNC7INGB0L7QvtC+0LHRidC10L3QuNC1LCDQvdCwINGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INCy0LXRiNCw0LXRgtGB0Y8g0Y3RgtC+0YIg0YHRgtC40LvRjFxyXG4gICAgQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaGF2ZS1uZXctbWVzc2FnZVwiLFxyXG4gICAgLy9cclxuXHJcbiAgICBjaGF0U2V0dGluZ3M6IHtcclxuICAgICAgICB0eXBlT2ZSZXF1ZXN0OiBcImZldGNoXCJcclxuICAgIH0sXHJcblxyXG4gICAgY3VycmVudFVzZXJTZXR0aW5nczoge1xyXG4gICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICB1c2VyTmFtZTogbnVsbFxyXG4gICAgfSxcclxuXHJcbiAgICBjdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uOiB7XHJcbiAgICAgICAgZmlsdGVyQnk6IG51bGwsXHJcbiAgICAgICAgc29ydEJ5OiBudWxsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINC60LvQsNGB0YEg0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtCwXHJcbiAgICBJTlZJU0lCTEVfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2ludmlzaWJsZS1lbGVtZW50XCIsXHJcbiAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDQtNC70Y8g0Y3Qu9C10LzQtdC90LDRgiDRgSDRgdC+0L7QsdGJ0LXQvdC40LUsINC10YHQu9C4INGO0LfQtdGAINC90LUg0L/RgNC+0YfQuNGC0LDQuyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgIENTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9tZXNzYWdlLW5vdC1yZWFkXCIsXHJcblxyXG4gICAgREFUQV9CQVNFX1VSTDogXCJodHRwczovL3RvdWNoc29mdGNoYXRwcm9qZWN0LmZpcmViYXNlaW8uY29tXCIsXHJcblxyXG4gICAgVVBEQVRFX1VTRVJTX1RJTUU6IDUwMDAsXHJcbiAgICBPTkxJTkVfSU5URVJWQUw6IDEyMDAwMCxcclxuXHJcblxyXG4gICAgQUJPVVRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvZGV2L2h0bWwvZGFzaGJvYXJkL2Fib3V0Lmh0bWxcIixcclxuICAgIExBVU5DSEVSX0hUTUxfUEFUSDogXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2Rldi9odG1sL2NoYXRMYXVuY2hlci5odG1sXCIsXHJcbiAgICBEQVNIQk9BUkRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvZGV2L2h0bWwvZGFzaGJvYXJkLmh0bWxcIixcclxuICAgIENPTlRFTlRfQ0xBU1M6IFwiY29udGVudFwiLFxyXG5cclxuICAgIE5BVklHQVRJT05fQUNUSVZFX0NTUzogXCJuYXZpZ2F0aW9uLWFjdGl2ZVwiXHJcbn07XHJcbnZhciBkYXRhQmFzZVVybCA9IG1haW5Db25maWcuREFUQV9CQVNFX1VSTDtcclxuXHJcbnZhciBnZXRFbGVtZW50ID0gZnVuY3Rpb24gZ2V0RWxlbWVudEZyb21ET00gKHNlbGVjdG9yLCBpc0FsbCwgaXRJc0lkKSB7XHJcbiAgICB2YXIgc2VsZWN0b3JTdGFydCA9IChpdElzSWQpID8gXCIjXCIgOiBcIi5cIjtcclxuICAgIGlmKGlzQWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JTdGFydCArIHNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbn07XHJcblxyXG5cclxudmFyIGRhdGFDb25uZWN0b3JDb25maWcgPSB7XHJcbiAgICB0eXBlT2ZSZXF1ZXN0OiBtYWluQ29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0XHJcbn07XHJcblxyXG4vLyBzZXJ2aWNlXHJcblxyXG4vKiBleHBvcnRlZCBzb3J0ZXIgKi9cclxudmFyIHNvcnRlciA9IChmdW5jdGlvbiBjcmVhdGVOZXdTb3J0ZXIgKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydGVyKCkge31cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTb3J0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzd2FwKGl0ZW1zLCBmaXJzdEluZGV4LCBzZWNvbmRJbmRleCkge1xyXG4gICAgICAgIHZhciB0ZW1wID0gaXRlbXNbZmlyc3RJbmRleF07XHJcbiAgICAgICAgaXRlbXNbZmlyc3RJbmRleF0gPSBpdGVtc1tzZWNvbmRJbmRleF07XHJcbiAgICAgICAgaXRlbXNbc2Vjb25kSW5kZXhdID0gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYXJ0aXRpb24oaXRlbXMsIGxlZnQsIHJpZ2h0LCBzb3J0RmllbGQpIHtcclxuICAgICAgICB2YXIgcGl2b3QgPSBpdGVtc1tNYXRoLmZsb29yKChyaWdodCArIGxlZnQpIC8gMildW3NvcnRGaWVsZF07XHJcbiAgICAgICAgdmFyIGkgPSBsZWZ0O1xyXG4gICAgICAgIHZhciBqID0gcmlnaHQ7XHJcblxyXG4gICAgICAgIHdoaWxlIChpIDw9IGopIHtcclxuICAgICAgICAgICAgd2hpbGUgKGl0ZW1zW2ldW3NvcnRGaWVsZF0gPiBwaXZvdCkge1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVtc1tqXVtzb3J0RmllbGRdIDwgcGl2b3QpIHtcclxuICAgICAgICAgICAgICAgIGotLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA8PSBqKSB7XHJcbiAgICAgICAgICAgICAgICBzd2FwKGl0ZW1zLCBpLCBqKTtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGotLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH1cclxuXHJcbiAgICBTb3J0ZXIucHJvdG90eXBlLnF1aWNrU29ydCA9IGZ1bmN0aW9uIHF1aWNrU29ydChcclxuICAgICAgICBpdGVtcyxcclxuICAgICAgICBsZWZ0LFxyXG4gICAgICAgIHJpZ2h0LFxyXG4gICAgICAgIHNvcnRGaWVsZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGluZGV4O1xyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gcGFydGl0aW9uKGl0ZW1zLCBsZWZ0LCByaWdodCwgc29ydEZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKGxlZnQgPCBpbmRleCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVpY2tTb3J0KGl0ZW1zLCBsZWZ0LCBpbmRleCAtIDEsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGluZGV4IDwgcmlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVpY2tTb3J0KGl0ZW1zLCBpbmRleCwgcmlnaHQsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gY3JlYXRlU29ydGVyKCk7XHJcbn0pKCk7XHJcbi8vINCe0YfQuNGJ0LDQtdGCIERPTSDRgdC+0LTQtdGA0LbQsNGJ0LjQuSDRjdC70LXQvNC10L3RgtGLINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChlbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZGF0YWJhc2VcclxuXHJcbi8vINCc0L7QtNGD0LvRjCDQv9GA0LXQtNC+0YHRgtCw0LLQu9GP0LXRgiDRgdC/0L7RgdC+0LEg0L7RgtC/0YDQsNCy0LrQuCDQt9Cw0L/RgNC+0YHQsCDQuiDQuNGB0YLQvtGH0L3QuNC60YMg0LTQsNC90L3Ri9GFXHJcbi8vINCU0LvRjyDRgNC10LrQstC10YHRgtCwINC90LXQvtCx0YXQvtC00LjQvCDQv9GD0YLRjCwg0YLQtdC70L4g0LfQsNC/0YDQvtGB0LAsINGC0LjQvyDQt9Cw0L/RgNC+0YHQsFxyXG4vLyByZXF1ZXN0INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIFByb21pc2VcclxudmFyIGRhdGFDb25uZWN0b3IgPSAoZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqKSB7XHJcbiAgICB2YXIgZGF0YUJhc2VDb25uZWN0b3I7XHJcbiAgICB2YXIgZGF0YUJhc2VBUEk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YUJhc2VDb25uZWN0b3IoKSB7fVxyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbiByZXF1ZXN0RmV0Y2goXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0UGF0aCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IGNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHlcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlSlNPTihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RYTVIgPSBmdW5jdGlvbiByZXF1ZXN0WE1SKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0VHlwZSwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBsb2FkQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIGVycm9yQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdEJvZHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBkYXRhQmFzZUNvbm5lY3RvciA9IG5ldyBEYXRhQmFzZUNvbm5lY3RvcigpO1xyXG4gICAgaWYgKGRhdGFDb25uZWN0b3JDb25maWdPYmoudHlwZU9mUmVxdWVzdCA9PT0gXCJmZXRjaFwiKSB7XHJcbiAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RGZXRjaFxyXG4gICAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YUJhc2VBUEk7XHJcbn0pKGRhdGFDb25uZWN0b3JDb25maWcpO1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQtNCw0L3QvdGL0YVcclxuLy8g0JLRgdC1IEFQSSDRhNGD0L3QutGG0LjQuCDQstC+0LfQstGA0LDRidCw0Y7RgiDQv9GA0L7QvNC40YHRi1xyXG52YXIgZGF0YVNvdXJjZSA9IChmdW5jdGlvbiBjcmVhdGVEYXRhU291cmNlIChkYXRhQ29ubmVjdG9yKSB7XHJcbiAgICB2YXIgZGF0YVNvdXJjZUluc3RhbmNlO1xyXG4gICAgdmFyIGRhdGFTb3VyY2VBUEk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YVNvdXJjZSgpIHtcclxuICAgICAgICBkYXRhQ29ubmVjdG9yID0gZGF0YUNvbm5lY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5jcmVhdGVSZXF1ZXN0UGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RQYXRoKFxyXG4gICAgICAgIGRhdGFCYXNlVVJMLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICByZXF1ZXN0UG9zdGZpeFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBkYXRhQmFzZVVSTCArIFwiL3VzZXJzXCI7XHJcbiAgICAgICAgaWYgKHVzZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgdXNlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBvc3RmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQb3N0Zml4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXRoICs9IFwiLmpzb25cIjtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0SFRNTCA9IGZ1bmN0aW9uIGdldEhUTUwgKHJlcXVlc3RQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIFwiR0VUXCIsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KDQsNCx0L7RgtCwINGBINCa0J7QndCa0KDQldCi0J3Qq9CcINGO0LfQtdGA0L7QvFxyXG5cclxuICAgIC8vINCf0L7Qu9GD0YfQuNGC0Ywg0LLRgdC1INGB0L7QvtCx0YnQtdC90LjRjyDQuCDQvdCw0YHRgtGA0L7QudC60Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGZ1bmN0aW9uIGdldFVzZXJEYXRhKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VyRGF0YSA9IHt9O1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3JcclxuICAgICAgICAgICAgLnJlcXVlc3QocmVxdWVzdFBhdGgsIG51bGwsIFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzZXRVc2VyRGF0YShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBzZXREYXRhIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRhdGFba2V5XSA9IGRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHJldHVyblVzZXJzTGlzdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyRGF0YTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0L7Qu9GD0YfQsNC10YIg0L7Qv9GAINC/0L7Qu9C1INC90LDRgdGC0YDQvtC10Log0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRTZXR0aW5nRmllbGQgPSBmdW5jdGlvbiBnZXRBbW91bnRPZk5vUmVhZE1lc3NhZ2UoXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGZpZWxkTmFtZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBmaWVsZE5hbWUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcIkdFVFwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC+0L/RgCDQv9C+0LvQtSDQvdCw0YHRgtGA0L7QtdC6INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuc2V0U2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gZ2V0QW1vdW50T2ZOb1JlYWRNZXNzYWdlKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBmaWVsZE5hbWUsXHJcbiAgICAgICAgdmFsdWVcclxuICAgICkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgZmllbGROYW1lKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodmFsdWUpLFxyXG4gICAgICAgICAgICBcIlBVVFwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YLQv9GA0LDQstC40YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlVG9Vc2VyKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBtZXNzYWdlT2JqZWN0XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIFwibWVzc2FnZXNcIik7XHJcbiAgICAgICAgdmFyIGpzb25NZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGU6IG1lc3NhZ2VPYmplY3QuZGF0ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VPYmplY3QubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIm1lc3NhZ2VcIixcclxuICAgICAgICAgICAgICAgIHVzZXI6IG1lc3NhZ2VPYmplY3Quc2VuZGVyLFxyXG4gICAgICAgICAgICAgICAgaXRJc1JlYWQ6IG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAganNvbk1lc3NhZ2UsXHJcbiAgICAgICAgICAgIFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCg0LDQsdC+0YLQsCDRgdC+INCS0KHQldCc0Jgg0Y7Qt9C10YDQsNC80LhcclxuXHJcbiAgICAvLyDQv9C+0LvRg9GH0LjRgtGMINCy0YHQtSDQtNCw0L3QvdGL0LUsINCy0YHQtdGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRBbGxVc2VycyA9IGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xyXG4gICAgICAgIHZhciB1c2Vyc0RhdGFMaXN0ID0ge307XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3JcclxuICAgICAgICAgICAgLnJlcXVlc3QocmVxdWVzdFBhdGgsIG51bGwsIFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzZXRVc2Vyc0xpc3QoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24gc2V0RGF0YShrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnNEYXRhTGlzdFtrZXldID0gZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiByZXR1cm5Vc2Vyc0xpc3QoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcnNEYXRhTGlzdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdC8IGluc3RhbmNlINC+0LHRitC10LrRgtCwLCDQt9Cw0LTQsNC10LwgQVBJXHJcblxyXG4gICAgZGF0YVNvdXJjZUluc3RhbmNlID0gbmV3IERhdGFTb3VyY2UoKTtcclxuICAgIGRhdGFTb3VyY2VBUEkgPSB7XHJcbiAgICAgICAgdXNlcnNBUEk6IHtcclxuICAgICAgICAgICAgZ2V0VXNlckRhdGE6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRVc2VyRGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlOiBkYXRhU291cmNlSW5zdGFuY2Uuc2VuZE1lc3NhZ2UuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBzZXRGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLnNldFNldHRpbmdGaWVsZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGdldEZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0U2V0dGluZ0ZpZWxkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZ2V0QWxsVXNlcnM6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRBbGxVc2Vycy5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbW1vbkFQSToge1xyXG4gICAgICAgICAgICBnZXRIVE1MOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0SFRNTC5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSlcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBkYXRhU291cmNlQVBJO1xyXG59KShkYXRhQ29ubmVjdG9yKTtcclxuXHJcbi8vIHZpZXdcclxuXHJcbnZhciB2aWV3RmFjdG9yeSA9IChmdW5jdGlvbiAoZGF0YVNvdXJjZSkge1xyXG5cclxuICAgIGZ1bmN0aW9uIFZpZXdGYWN0b3J5ICgpIHt9XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZVZpZXcgPSBmdW5jdGlvbiBjcmVhdGVDaGF0VmlldyAoaHRtbFBhdGgsIGNzc1BhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgaWYoaHRtbFBhdGgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNzc1BhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmluY2x1ZGVWaWV3Q3NzVG9QYWdlKHRoYXQuY3JlYXRlQ1NTTGluayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXNoZWV0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGV4dC9jc3NcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3VjaC1zb2Z0LWNoYXQtY3NzXCJcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhhdC5pbmNsdWRlVmlld0hUTUxUb1BhZ2UoaHRtbFBhdGgsIGNvbnRhaW5lckNsYXNzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaHRtbFBhdGggaXMgbnVsbC4gUGxlYXNlIGFkZCBodG1sUGF0aFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3SFRNTFRvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0SFRNTFRvUGFnZSAoaHRtbFBhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckRpdiA9IChjb250YWluZXJDbGFzcykgPyBnZXRFbGVtZW50KGNvbnRhaW5lckNsYXNzKSA6IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UuY29tbW9uQVBJLmdldEhUTUwoaHRtbFBhdGgpLnRoZW4oZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyRGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3Q3NzVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRDc3NUb1BhZ2UgKGxpbmspIHtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlQ1NTTGluayA9IGZ1bmN0aW9uIGNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgZmlsZVBhdGgsXHJcbiAgICAgICAgcmVsLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVsKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwicmVsXCIsIHJlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwidHlwZVwiLCB0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGZpbGVQYXRoKTtcclxuICAgICAgICByZXR1cm4gbGluaztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBWaWV3RmFjdG9yeSgpXHJcblxyXG59KShkYXRhU291cmNlKTtcclxuXHJcbi8vIGNoYXQgbWFuYWdlclxyXG5cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGNoYXRNYW5hZ2VyQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIGNoYXRNYW5hZ2VyICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0YDQsNCx0L7RgtGLINGB0L4g0YHQv9C40YHQutC+0Lwg0YHQvtC+0LHRidC10L3QuNC5INCe0JTQndCe0JPQniDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxudmFyIG1lc3NhZ2VMaXN0TWFuYWdlciA9IChmdW5jdGlvbiBzZXR1cE1lc3NhZ2VMaXN0TWFuYWdlciAoKSB7XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8g0KTQvtGA0LzQsNGCICBtZXNzYWdlTGlzdCA9IFtcclxuICAgIC8vICAgIHtcclxuICAgIC8vICAgICAgIHNlbmRlcjogc2VuZGVyXHJcbiAgICAvLyAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgLy8gICAgICAgcmVhZDogdHJ1ZS9mYWxzZVxyXG4gICAgLy8gICAgICAgZGF0ZTogZGF0ZVxyXG4gICAgLy8gICAgfSxcclxuICAgIC8vIF1cclxuICAgIC8vIHJlYWQgLSDQsdGL0LvQviDQu9C4INC/0YDQvtGH0LjRgtCw0L3QviDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgZnVuY3Rpb24gTWVzc2FnZUxpc3RNYW5hZ2VyKCkge31cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gKGNvbmZpZ09iaikge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnT2JqO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLmNET00gPSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQmxvY2s6IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5DU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5ESVNQTEFZX01FU1NBR0VfREFURSxcclxuICAgICAgICAgICAgW3RoaXMuY29uZmlnLkNTU19DSEFUX01FU1NBR0VfREFURV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZVNlbmRlckRpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFt0aGlzLmNvbmZpZy5DU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLkRJU1BMQVlfTUVTU0FHRSxcclxuICAgICAgICAgICAgW3RoaXMuY29uZmlnLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkIChyZWxhdGl2ZVVzZXJOYW1lLCByZWxhdGl2ZVVzZXJJZCkge1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlc0lzUmVhZCA9IFtdO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZSA9IHJlbGF0aXZlVXNlck5hbWUgfHwgdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZTtcclxuICAgICAgICB2YXIgdXNlcklkID0gcmVsYXRpdmVVc2VySWQgfHwgdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQ7XHJcbiAgICAgICAgZm9yKGkgPSB0aGlzLm1lc3NhZ2VMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubWVzc2FnZUxpc3RbaV0uc2VuZGVyICE9PSB1c2VyTmFtZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMubWVzc2FnZUxpc3RbaV0ucmVhZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzSXNSZWFkLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOlwibWVzc2FnZXMvXCIgKyB0aGlzLm1lc3NhZ2VMaXN0W2ldLmlkICsgXCIvaXRJc1JlYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZXNJc1JlYWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgKGlzUmVhZCwgc2VuZGVyKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGlmICghaXNSZWFkICYmIHRoaXMuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgIT09IHNlbmRlcikge1xyXG4gICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcuQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgPSBmdW5jdGlvbiAodGV4dCwgaXNEaXNwbGF5LCBzdHlsZUNsYXNzZXMpIHtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdHlsZUNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoc3R5bGUpIHtcclxuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoc3R5bGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUxpc3QgKG1lc3NhZ2VPYmplY3RzKSAge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gYWRkRWxlbWVudFRvTWVzc2FnZUxpc3QgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VMaXN0LnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdCAobmV3TWVzc2FnZUxpc3QpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IChcclxuICAgICAgICBtZXNzYWdlT2JqXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LnB1c2gobWVzc2FnZU9iaik7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QtdGA0LXQsdC40YDQsNC10YIg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSwg0YHQvtC30LTQsNC10YIg0YHQvtC+0YLQstC10YLRgdCy0YPRjtGJ0LjQtSDQuNC8IERPTSDRjdC70LXQvNC10L3RgtGLINC4INCy0YHRgtCw0LLQu9GP0LXRgiDQuNGFINCyINGH0LDRglxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZXMgPSBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoYXQuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGF0LmNET00ubWVzc2FnZXNCbG9jay5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7Rh9C40YHRgtC40YLRjCBET00g0Y3Qu9C10LzQtdC90YIg0LIg0LrQvtGC0L7RgNC+0Lwg0L7RgtC+0LHRgNCw0LbQsNGO0YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyAo0L3QsNC/0YDQuNC80LXRgCDRh9GC0L7QsdGLINCy0YHRgtCw0LLQuNGC0Ywg0L3QstC+0YvQuSDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5KVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckNoYXQgPSBmdW5jdGlvbiBjbGVhckNoYXQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2sucmVtb3ZlQ2hpbGQodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2VMaXN0TWFuYWdlcigpO1xyXG5cclxufSkoKTtcclxudmFyIHVzZXJEYXRhTWFuYWdlciA9ICAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVXNlckRhdGFNYW5hZ2VyICgpIHtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHZhciBtaW51dGVzID0gKGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkubGVuZ3RoID09PSAxKSA/IFwiMFwiICsgZGF0ZS5nZXRNaW51dGVzKCkgOiBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICByZXR1cm4gZGF0ZVxyXG4gICAgICAgICAgICAuZ2V0SG91cnMoKVxyXG4gICAgICAgICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAuY29uY2F0KFwiOlwiLCBtaW51dGVzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VPYmplY3QgKFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgZGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZW5kZXI6IHNlbmRlcixcclxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgICAgICAgICAgcmVhZDogaXNSZWFkLFxyXG4gICAgICAgICAgICBkYXRlOiBkYXRlLFxyXG4gICAgICAgICAgICBpZDogaWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElOQ0xVREVcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAgKGNvbmZpZ09iaikge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnT2JqO1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5zZXR1cChjb25maWdPYmopO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJEYXRhID0gZnVuY3Rpb24gZ2V0VXNlckRhdGEgKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyRGF0YSh1c2VySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdGhhdC5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSA9IGRhdGEudXNlck5hbWU7XHJcbiAgICAgICAgICAgIHRoYXQuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSA9IGRhdGEuaXNNaW5pbWl6ZTtcclxuICAgICAgICAgICAgaWYoZGF0YS5tZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzT2JqZWN0ID0gW107XHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhLm1lc3NhZ2VzKS5tYXAoZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc09iamVjdC5wdXNoKGNyZWF0ZU1lc3NhZ2VPYmplY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZXNbbWVzc2FnZV0ubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1lc3NhZ2VzW21lc3NhZ2VdLnVzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZXNbbWVzc2FnZV0uaXRJc1JlYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QgPSBtZXNzYWdlTGlzdE1hbmFnZXIuY3JlYXRlTWVzc2FnZUxpc3QobWVzc2FnZXNPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2VMaXN0KG5ld01lc3NhZ2VMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbmNsdWRlXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncykubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdGhhdC5zYXZlU2V0dGluZ0ZpZWxkKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gaW5jbHVkZVxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZVNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIHNldEZpZWxkIChmaWVsZE5hbWUpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlKFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB0aGF0LmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlOiB0aGF0LmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzW2ZpZWxkTmFtZV1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIClcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlIChzZW5kZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gY3JlYXRlTWVzc2FnZU9iamVjdChtZXNzYWdlLCBkYXRlLCBzZW5kZXJOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KHRoaXMuY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXRNZXNzYWdlQXNSZWFkID0gZnVuY3Rpb24gc2V0TWVzc2FnZUFzUmVhZCAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3RzID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCgpO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlKG1lc3NhZ2VPYmplY3RzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVNZXNzYWdlVG9EYXRhU291cmNlID0gZnVuY3Rpb24gc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0LnNlbmRlciA9PT0gdGhpcy5jb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlT2JqZWN0LnNlbmRlcik7XHJcbiAgICAgICAgICAgIHZhciB1c2VyU2V0dGluZ3MgPSBbe1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiB0aGlzLmNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogXCJzZW5kTmV3TWVzc2FnZVwiLFxyXG4gICAgICAgICAgICAgICAgZmllbGRWYWx1ZTogdHJ1ZVxyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlKFxyXG4gICAgICAgICAgICAgICAgdXNlclNldHRpbmdzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2UoXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICBtZXNzYWdlT2JqZWN0XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2V0dGluZ3MgPSBbe3VzZXJJZCwgZmllbGROYW1lLCBmaWVsZFZhbHVlfSx7fS4uLl1cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChzZXR0aW5ncykge1xyXG4gICAgICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24gKG5ld0ZpZWxkU2V0dGluZykge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldEZpZWxkKFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcuZmllbGRWYWx1ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgcmV0dXJuIG5ldyBVc2VyRGF0YU1hbmFnZXIoKTtcclxuXHJcbn0pKCk7XHJcblxyXG4vLyBkYXNoYm9hcmRcclxuXHJcbnZhciB1c2VyTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gY3JlYXRlVXNlckxpc3QgKGNvbmZpZywgc29ydGVyKSB7XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvKiDQpNC+0YDQvNCw0YIg0L7QsdGK0LXQutGC0LAg0LIg0YHQv9C40YHQutC1INGO0LfQtdGA0LBcclxuICAgICAgKiB1c2VySWQ6IFwiSXZhbjMwMDAwMFwiLFxyXG4gICAgICAqIHVzZXJFbGVtZW50OiBVc2VyTGlzdE1hbmFnZXIuY3JlYXRlVXNlckVsZW1lbnQodXNlcklkLCB1c2VySXNPbmxpbmUpLFxyXG4gICAgICAqIG9ubGluZTogdXNlcklzT25saW5lLFxyXG4gICAgICAqIHZpc2libGU6IHRydWUsXHJcbiAgICAgICogc2VuZE5ld01lc3NhZ2U6IHVzZXJTZXR0aW5ncy5zZW5kTmV3TWVzc2FnZSxcclxuICAgICAgKiByZWFkTGFzdE1lc3NhZ2U6IHVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UsXHJcbiAgICAgICogbGFzdE9ubGluZTogdXNlclNldHRpbmdzLmxhc3RPbmxpbmUsXHJcbiAgICAgICogaXNNaW5pbWl6ZTogdXNlclNldHRpbmdzLmlzTWluaW1pemUsXHJcbiAgICAgICogdXNlck5hbWU6IHVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAqXHJcbiAgICAgICogdmlzaWJsZSAtINC+0YLQvtCx0YDQsNC20LDRgtGMINC70Lgg0Y7Qt9C10YDQsCDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICAgICAgKi9cclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIFVzZXJMaXN0TWFuYWdlcigpIHtcclxuICAgICAgICB0aGlzLnVMaXN0ID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdGCIERPTSDQtdC70LXQvNC10L3RgiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjtC30LXRgNCwINCyINGB0L/QuNGB0LrQtVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVVc2VyRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVVzZXJFbGVtZW50KFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBpc09ubGluZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHVzZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciB1c2VySWREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciB1c2VySW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgdXNlckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5VU0VSX0VMRU1FTlRfQ1NTX0NMQVNTKTtcclxuXHJcbiAgICAgICAgdXNlcklkRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLlVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1MpO1xyXG4gICAgICAgIHVzZXJJZERpdi5pbm5lckhUTUwgPSB1c2VySWQ7XHJcblxyXG4gICAgICAgIGlmIChpc09ubGluZSkge1xyXG4gICAgICAgICAgICB1c2VySW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PTkxJTkUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVzZXJJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZChjb25maWcuVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXNlckRpdi5hcHBlbmRDaGlsZCh1c2VySWREaXYpO1xyXG4gICAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQodXNlckluZGljYXRvcik7XHJcblxyXG4gICAgICAgIHJldHVybiB1c2VyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldFVzZXJMaXN0ID0gZnVuY3Rpb24gc2V0VXNlckxpc3QgKHVzZXJMdXN0T2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IHVzZXJMdXN0T2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZFVzZXJUb1VzZXJzQXJyYXkgPSBmdW5jdGlvbiBhZGRVc2VyVG9Vc2Vyc0xpc3QoXHJcbiAgICAgICAgdXNlcixcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgdXNlcnNMaXN0XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdXNlcklzT25saW5lID0gdGhpcy51c2VySXNPbmxpbmUodXNlci5sYXN0T25saW5lKTtcclxuICAgICAgICB1c2Vyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICB1c2VyRWxlbWVudDogdGhpcy5jcmVhdGVVc2VyRWxlbWVudCh1c2VySWQsIHVzZXJJc09ubGluZSksXHJcbiAgICAgICAgICAgIG9ubGluZTogdXNlcklzT25saW5lLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBzZW5kTmV3TWVzc2FnZTogdXNlci5zZW5kTmV3TWVzc2FnZSxcclxuICAgICAgICAgICAgcmVhZExhc3RNZXNzYWdlOiB1c2VyLnJlYWRMYXN0TWVzc2FnZSxcclxuICAgICAgICAgICAgbGFzdE9ubGluZTogdXNlci5sYXN0T25saW5lLFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogdXNlci51c2VyTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXRgiBpbmRleCDRjtC30LXRgNCwINCyINGB0L/QuNGB0LrQtSDRjtC30LXRgNCwINC10YHQu9C4INC+0L0g0YLQsNC8INC90LDRhdC+0LTQuNGC0YHRjy4g0JIg0L/RgNC+0YLQuNCy0L3QviDRgdC70YPRh9Cw0LUg0LLQvtC30LLRgNCw0YnQsNC10YIgbnVsbFxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCA9IGZ1bmN0aW9uIGdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VyTWFuYWdlciA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRleCA9IG51bGw7XHJcbiAgICAgICAgT2JqZWN0LmtleXModXNlck1hbmFnZXIudUxpc3QpLm1hcChmdW5jdGlvbiBnZXRLZXkgKGtleSkge1xyXG4gICAgICAgICAgICBpZiAodXNlck1hbmFnZXIudUxpc3Rba2V5XS51c2VySWQgPT09IHVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdXNlckluZGV4ID0ga2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1c2VySW5kZXg7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyDQntC/0YDQtdC00LXQu9GP0LXRgiDQvtC90LvQsNC50L0g0Y7Qt9C10YDQsCDQvdCw0YXQvtC00Y8g0YDQsNC30L3QuNGG0YMg0LzQtdC20LTRgyDQtNCw0YLQvtC5INC/0L7RgdC70LXQtNC90LXQs9C+INC60L7QvdC10LrRgtCwINGO0LfQtdGA0LAg0YEg0LHQtCDQuCDRgtC10LrRg9GJ0LjQvCDQstGA0LXQvNC10L3QtdC8XHJcbiAgICAvLyDQstC+0LfQstGA0LDRidCw0LXRgiB0cnVlINC10YHQu9C4INGO0LfQtdGAINC+0L3Qu9Cw0LnQvSwgZmFsc2UgLSDQvtGE0YTQu9Cw0LnQvVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS51c2VySXNPbmxpbmUgPSBmdW5jdGlvbiB1c2VySXNPbmxpbmUgKGxhc3RVc2VyT25saW5lVGltZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLSBsYXN0VXNlck9ubGluZVRpbWUgPD0gY29uZmlnLk9OTElORV9JTlRFUlZBTDtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JTQtdC70LDQtdGCINC90LXQstC40LTQuNC80YvQvNC4INGC0LXRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSDQsiDRgdC/0LjRgdC60LUsINCyINC40LzQtdC90LDRhSDQutC+0YLQvtGA0YvRhSDQvdC10YIg0L/QtdGA0LXQtNCw0L3QvdC+0Lkg0L/QvtC00YHRgtGA0L7QutC4XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmZpbHRlckJ5TmFtZSA9IGZ1bmN0aW9uIGZpbHRlckJ5TmFtZSgpIHtcclxuICAgICAgICB0aGlzLnVMaXN0LmZvckVhY2goZnVuY3Rpb24gZmlsdGVyTmFtZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnZpc2libGUgPSBlbGVtZW50LnVzZXJJZC5pbmRleE9mKGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5KSAhPT0gLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7RgNGC0LjRgNGD0LXRgiDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyINC/0L4g0L/QvtC70Y5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc29ydFVzZXJzQnlGaWVsZCA9IGZ1bmN0aW9uIHNvcnRVc2Vyc0J5T25saW5lKCkge1xyXG4gICAgICAgIHNvcnRlci5xdWlja1NvcnQodGhpcy51TGlzdCwgMCwgdGhpcy51TGlzdC5sZW5ndGggLSAxLCBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGC0L7QsdGA0LDQt9C40YLRjC8g0J7QsdC90L7QstC40YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDRjtC30LXRgNC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmRpc3BsYXlVc2VycyA9IGZ1bmN0aW9uIGRpc3BsYXlVc2VycygpIHtcclxuICAgICAgICBjbGVhckVsZW1lbnRDb250ZW50KGNvbmZpZy5ET00uVVNFUl9MSVNUX0NTU19DTEFTUyk7XHJcbiAgICAgICAgdGhpcy51TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGdldEVsZW0gKGVsZW0pIHtcclxuICAgICAgICAgICAgaWYgKGVsZW0udmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlVTRVJfTElTVF9DU1NfQ0xBU1MpLmFwcGVuZENoaWxkKGVsZW0udXNlckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgLy8gaW5jbHVkZVxyXG5cclxuICAgIC8vINCe0YfQuNGJ0LDQtdGCIERPTSDRgdC+0LTQtdGA0LbQsNGJ0LjQuSDRjdC70LXQvNC10L3RgtGLINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuICAgIGZ1bmN0aW9uIGNsZWFyRWxlbWVudENvbnRlbnQoZWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGVsZW1lbnRTZWxlY3Rvcik7XHJcbiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckxpc3RNYW5hZ2VyKClcclxuXHJcbn0pKG1haW5Db25maWcsIHNvcnRlcik7XHJcbnZhciBkYXNoYm9hcmQgPSAoZnVuY3Rpb24gY3JlYXRlQ29udHJvbGxlcihjb25maWcsIGRhdGFTb3VyY2UsIHVEYXRhTWFuYWdlciwgdUxpc3RNYW5hZ2VyLCBzb3J0ZXIpe1xyXG5cclxuICAgIHZhciBpbnRlcnZhbElkID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigpIHt9XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnNldHVwKGNvbmZpZywgc29ydGVyKTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2V0dXAoY29uZmlnKTtcclxuICAgICAgICB0aGlzLnNldHVwVXNlcnNMaXN0QmxvY2soKTtcclxuICAgICAgICB0aGlzLnNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIERBU0hCT0FSRF9DT05ESVRJT05cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIHZhciBzZXJpYWxDb25kaXRpb24gPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGZpbHRlcjogY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnksXHJcbiAgICAgICAgICAgIHNvcnQ6IGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSxcclxuICAgICAgICAgICAgY3VycmVudFVzZXJJZDogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSwgc2VyaWFsQ29uZGl0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICB2YXIgc2VyaWFsQ29uZGl0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSk7XHJcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgaWYgKHNlcmlhbENvbmRpdGlvbikge1xyXG4gICAgICAgICAgICBjb25kaXRpb24gPSBKU09OLnBhcnNlKHNlcmlhbENvbmRpdGlvbik7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5ID0gY29uZGl0aW9uLmZpbHRlcjtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5ID0gY29uZGl0aW9uLnNvcnQ7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IGNvbmRpdGlvbi5jdXJyZW50VXNlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29uZGl0aW9uO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5sb2NhbFNldHRpbmdzU2V0dXAgPSBmdW5jdGlvbiBsb2NhbFNldHRpbmdzU2V0dXAoY29uZGl0aW9uKSB7XHJcbiAgICAgICAgaWYgKGNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uLmZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLnZhbHVlID0gY29uZGl0aW9uLmZpbHRlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5zb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NPUlRfU0VMRUNUX0lEKS52YWx1ZSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5jdXJyZW50VXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBjb25kaXRpb24uY3VycmVudFVzZXJJZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlcihjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIERBU0hCT0FSRF9DT05ESVRJT05cclxuXHJcbiAgICAvLyDRhNC40LvRjNGC0YDQsNGG0LjRjyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiBmaWx0ZXIoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0ZJTFRFUl9JTlBVVF9JRCkudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmZpbHRlckJ5TmFtZShjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAvLyDRgdC+0YDRgtC40YDQvtCy0LrQsCDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gc29ydCgpIHtcclxuICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnkgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NPUlRfU0VMRUNUX0lEKS52YWx1ZTtcclxuICAgICAgICB0aGlzLnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuc29ydFVzZXJzQnlGaWVsZCgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8gdXNlcnNNb2R1bGUgLSDRhtC10L/QvtGH0LrQsCDQv9GA0L7QvNC40YHQvtCyINC+0LHQvdC+0LLQu9GP0Y7RidCw0Y8gdXNlcnNMaXN0INC4INC10LPQviDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDQvdCwINGN0LrRgNCw0L3QtVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBVc2Vyc0xpc3RCbG9jayA9IGZ1bmN0aW9uIHNldHVwVXNlcnNMaXN0QmxvY2sgKG5ld1VzZXJMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5zZXR1cFVzZXJzTGlzdGVuZXJzKG5ld1VzZXJMaXN0KTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBVc2Vyc0xpc3RlbmVycyA9IGZ1bmN0aW9uIHNldHVwVXNlcnNMaXN0ZW5lcnMoXHJcbiAgICAgICAgbmV3VXNlckxpc3RcclxuICAgICkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBY2Vzc1RvVXNlcnNMaXN0KG5ld1VzZXJMaXN0KS50aGVuKGZ1bmN0aW9uIGdldEFjY2VzcyAoKSB7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oY29uZmlnLnVzZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIGFkZExpc3RlbmVycyAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnVzZXJMaXN0ZW5lci5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpcnN0Q2hpbGQuaW5uZXJUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldEFjZXNzVG9Vc2Vyc0xpc3QgPSBmdW5jdGlvbiBhY2Nlc3NUb1VzZXJzRE9NKFxyXG4gICAgICAgIG5ld1VzZXJMaXN0XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheVVzZXJzTGlzdChuZXdVc2VyTGlzdCkudGhlbihmdW5jdGlvbiBzZXRET00gKCkge1xyXG4gICAgICAgICAgICBjb25maWcudXNlcnMgPSBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLlVTRVJfRUxFTUVOVF9DU1NfQ0xBU1MsIHRydWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0L7RgtC+0LHRgNCw0LfQuNGC0Ywg0YHQv9C40YHQvtC6INGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZGlzcGxheVVzZXJzTGlzdCA9IGZ1bmN0aW9uIGRpc3BsYXlVc2Vyc0xpc3QobmV3VXNlckxpc3QpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0VXNlcnNMaXN0VG9Vc2Vyc01vZHVsZShuZXdVc2VyTGlzdCkudGhlbihmdW5jdGlvbiBkaXNwbGF5VUxpc3QgKCkge1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIuZGlzcGxheVVzZXJzKCk7XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoYXQudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8g0JTQvtCx0LDQstC70Y/QtdGCINGO0LfQtdGAINC70LjRgdGCINCyINGO0LfQtdGAINC70LjRgdGCINC80L7QtNGD0LvRjC4g0JLQsNC20L3Qvjog0LXRgdC70Lgg0L/QtdGA0LXQtNCw0L0g0LrQsNC6INC/0LDRgNCw0LzQtdGC0YAg0L3QvtCy0YvQuSDRjtC30LXRgCDQu9C40YHRglxyXG4gICAgLy8gKNC90YPQttC90L4g0LTQu9GPINC+0LHQvdC+0LLQu9C10L3QuNGPKSwg0YLQviDQtNC+0LHQsNCy0LvRj9C10YLRgdGPINC+0L0sINC40L3QsNGH0LUg0LTQsNC90L3Ri9C1INCx0LXRgNGD0YLRgdGPINGBINGB0LXRgNCy0LXRgNCwXHJcbiAgICAvLyDQvtCx0YrQtdC60YIgUHJvbWlzZSDRgdC+0LfQtNCw0LXRgtGB0Y8g0LTQu9GPINGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4XHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXRVc2Vyc0xpc3RUb1VzZXJzTW9kdWxlID0gZnVuY3Rpb24gc2V0VXNlcnNMaXN0VG9Vc2Vyc01vZHVsZShcclxuICAgICAgICBuZXdVc2VyTGlzdFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmICghbmV3VXNlckxpc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlckxpc3QoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gZ2V0VXNlckxpc3RPYmogKHVzZXJzTGlzdE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci5zZXRVc2VyTGlzdCh1c2Vyc0xpc3RPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIGxvY2FsU2V0dGluZ3NTZXR1cCgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gdGhhdC5nZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQubG9jYWxTZXR0aW5nc1NldHVwKGNvbmRpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGVsc2VSZXNvbHZlIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUodUxpc3RNYW5hZ2VyLnNldFVzZXJMaXN0KG5ld1VzZXJMaXN0KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJMaXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB1c2Vyc0xpc3QgPSBbXTtcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gc2V0VXNlckRhdGEodXNlckRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXModXNlckRhdGEpLm1hcChmdW5jdGlvbiBzZXRVc2VyU2V0dGluZyh1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci5hZGRVc2VyVG9Vc2Vyc0FycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhW3VzZXJJZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJzTGlzdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIHJldHVyblVzZXJzTGlzdCAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1c2Vyc0xpc3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS51c2VyTGlzdGVuZXIgPSBmdW5jdGlvbiB1c2VyTGlzdGVuZXIodXNlcklkKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydENvbnZlcnNhdGlvbldpdGhVc2VyKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkKHVzZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YLQutGA0YvQstCw0LXRgiDRh9Cw0YIg0YEg0Y7Qt9C10YDQvtC8LCDQt9Cw0LPRgNGD0LbQsNC10YIg0LzQtdGB0YHQsNC00LbQuCDRjtC30LXRgNCwINC4INC+0YLQvtCx0YDQsNC20LDQtdGCINC40YVcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIgPSBmdW5jdGlvbiBzdGFydENvbnZlcnNhdGlvbldpdGhVc2VyKFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEodXNlcklkKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAgKCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFKS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyDQntCx0L3QvtCy0LvRj9C10YIg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5IC0g0LTQvtCx0LDQstC70Y/QtdGCINC90L7QstGL0LUg0YDQtdCz0LjRgdGC0YDQsNGG0LjQuCArINC+0LHQvdC+0LLQu9GP0LXRgiDQvtC90LvQsNC50L0g0YHRgtCw0YLRg9GBICsg0LXRgdC70LhcclxuICAgIC8vINGD0YHRgtCw0L3QvtCy0LvQtdC9INGE0LvQsNCzIGlzQ29udmVyc2F0aW9uIC0g0L7QsdC90L7QstC70Y/QtdGCINGB0L7QvtCx0YnQtdC90LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVXNlcnMgPSBmdW5jdGlvbiB1cGRhdGVVc2VycygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGludGVybWVkaWF0ZUxpc3QgPSBbXTtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJXHJcbiAgICAgICAgICAgIC5nZXRBbGxVc2VycygpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHVwZGF0ZSAodXNlckxpc3QpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHVzZXJMaXN0KS5tYXAoZnVuY3Rpb24gYWRkVXNlcnModXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLmFkZFVzZXJUb1VzZXJzQXJyYXkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJMaXN0W3VzZXJJZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJtZWRpYXRlTGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZVVzZXJNZXNzYWdlc0FuZERpc3BsYXlJdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzZXROZXdMaXN0ICgpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdCA9IGludGVybWVkaWF0ZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmZpbHRlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc29ydCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhhdC5zZXR1cFVzZXJzTGlzdGVuZXJzKGludGVybWVkaWF0ZUxpc3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7QsdC90L7QstC70LXRgiDQvNCw0YHRgdC40LIg0YHQvtC+0LHRidC10L3QuNC5INCyINC80L7QtNGD0LvQtSDRh9Cw0YLQsCDQuCDQstGL0LLQvtC00LjRgiDQuNGFINC90LAg0Y3QutGA0LDQvVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0ID0gZnVuY3Rpb24gdXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0KFxyXG4gICAgKSB7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLmdldFVzZXJEYXRhKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zID0gZnVuY3Rpb24gc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlciwgY29uZmlnLkFETUlOX05BTUUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuY2xvc2VDb252ZXJzYXRpb24uYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhhdC5maWx0ZXIuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgICAgICB0aGF0LnNvcnQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0L7QvNC10YfQsNC10YIg0LrQsNC90LDQuyDRjtC30LXRgNCwINC60LDQuiDQv9GA0L7Rh9C40YLQsNC90L3Ri9C5ICjQtdGB0LvQuCDRgtCw0Lwg0LXRgdGC0Ywg0L3QtdC/0YDQvtGH0LjRgtCw0L3QvdGL0LUg0YHQvtC+0LHRidC10L3QuNGPKVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUubWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZCA9IGZ1bmN0aW9uIG1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQgKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VySW5kZXggPSB1TGlzdE1hbmFnZXIuZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQodXNlcklkKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3RbdXNlckluZGV4XS5zZW5kTmV3TWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlKFt7XHJcbiAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWU6IFwic2VuZE5ld01lc3NhZ2VcIixcclxuICAgICAgICAgICAgZmllbGRWYWx1ZTogZmFsc2VcclxuICAgICAgICB9XSk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCX0LDQutGA0YvQstCw0LXRgiDQutCw0L3QsNC7INC+0LHRidC10L3QuNGPINGBINGO0LfQtdGA0L7QvCDQuCDRh9Cw0YJcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlQ29udmVyc2F0aW9uID0gZnVuY3Rpb24gY2xvc2VDb252ZXJzYXRpb24gKCkge1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ0hBVF9DT05UQUlOU19CTE9DS19TVFlMRSkuY2xhc3NMaXN0LmFkZChjb25maWcuSU5WSVNJQkxFX0NMQVNTKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQtNC+0LHQsNCy0LvRj9C10YIg0L3QvtCy0YvQuSDQtdC70LXQvNC10L3Rgi3QuNC90LTQuNC60LDRgtC+0YAg0LJcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIgPSBmdW5jdGlvbiB0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCkge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlRGl2O1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHVMaXN0TWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGJsaW5rKGtleSkge1xyXG4gICAgICAgICAgICBuZXdNZXNzYWdlRGl2ID0gdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRVxyXG4gICAgICAgICAgICApWzBdO1xyXG4gICAgICAgICAgICBpZiAodUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgIW5ld01lc3NhZ2VEaXYpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZURpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRSk7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5hcHBlbmRDaGlsZChuZXdNZXNzYWdlRGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgbmV3TWVzc2FnZURpdikge1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQucmVtb3ZlQ2hpbGQobmV3TWVzc2FnZURpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgPSBmdW5jdGlvbiBzZXR1cEludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaW50ZXJ2YWxJZC5wdXNoKHNldEludGVydmFsKGZ1bmN0aW9uIHNldEludGVydmFsVXBkYXRlVXNlcnMgKCkge1xyXG4gICAgICAgICAgICB0aGF0LnVwZGF0ZVVzZXJzKCk7XHJcbiAgICAgICAgfSwgY29uZmlnLlVQREFURV9VU0VSU19USU1FKSlcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW50ZXJ2YWxJZC5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGlkKVxyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgRGFzaGJvYXJkQ29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZGF0YVNvdXJjZSwgdXNlckRhdGFNYW5hZ2VyLCB1c2VyTGlzdE1hbmFnZXIsIHNvcnRlcik7XHJcbnZhciBsYXVuY2hlciA9IChmdW5jdGlvbiBjcmVhdGVMYXVuY2hlciAoY29uZmlnKSB7XHJcblxyXG4gICAgdmFyIERPTVZhcmlhYmxlcyA9IHt9O1xyXG5cclxuICAgIGZ1bmN0aW9uIExhdW5jaGVyKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTY3JpcHQgKCkge1xyXG4gICAgICAgIHZhciBzcmMgPSBtYWluQ29uZmlnLmxhdW5jaGVyLnNyY1N0YXJ0ICtcclxuICAgICAgICBET01WYXJpYWJsZXMuY2hhdFRpdGxlLnZhbHVlICsgXCInJmNoYXRVcmw9J1wiICtcclxuICAgICAgICBET01WYXJpYWJsZXMuY2hhdFVybC52YWx1ZSArIFwiJyZjc3NDbGFzcz0nXCIgK1xyXG4gICAgICAgIERPTVZhcmlhYmxlcy5jaGF0Q2xhc3MudmFsdWUgKyBcIicmcG9zaXRpb249J1wiICtcclxuICAgICAgICBET01WYXJpYWJsZXMuY2hhdFBvc2l0aW9uU2VsZWN0LnZhbHVlICsgXCInJmFsbG93TWluaW1pemU9J1wiICtcclxuICAgICAgICBET01WYXJpYWJsZXMuYWxsb3dNaW5pbWl6ZS5jaGVja2VkICsgXCInJmFsbG93RHJhZz0nXCIgK1xyXG4gICAgICAgIERPTVZhcmlhYmxlcy5hbGxvd0RyYWcuY2hlY2tlZCArIFwiJyZzaG93RGF0ZVRpbWU9J1wiICtcclxuICAgICAgICBET01WYXJpYWJsZXMuc2hvd1RpbWUuY2hlY2tlZCArIFwiJyZyZXF1aXJlTmFtZT0nXCIgK1xyXG4gICAgICAgIERPTVZhcmlhYmxlcy5yZXF1aXJlTmFtZS5jaGVja2VkICsgXCInJnJlcXVlc3RzPSdcIjtcclxuICAgICAgICBpZihET01WYXJpYWJsZXMubmV0d29ya1JhZGlvWE1SLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgc3JjICs9IFwiWEhSJ1wiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNyYyArPSBcImZldGNoJ1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzcmMgKz0gbWFpbkNvbmZpZy5sYXVuY2hlci5zcmNFbmQ7XHJcbiAgICAgICAgRE9NVmFyaWFibGVzLnNjcmlwdENvZGUuaW5uZXJIVE1MID0gc3JjO1xyXG4gICAgfVxyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICBtYWluQ29uZmlnLmxhdW5jaGVyLmFmdGVyLm1hcCgoZnVuY3Rpb24gY3JlYXRlU2NyaXB0UGFydCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBET01WYXJpYWJsZXNbZWxlbWVudF0gPSAgZ2V0RWxlbWVudChtYWluQ29uZmlnLmxhdW5jaGVyLnBhdHRlcm4gKyBlbGVtZW50LCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIERPTVZhcmlhYmxlc1tlbGVtZW50XS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgY3JlYXRlU2NyaXB0KTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uIGNsb3NlQXBwICgpIHtcclxuICAgICAgICBET01WYXJpYWJsZXMgPSB7fTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMYXVuY2hlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbi8vIFNUVUIgLy9cclxudmFyIGFib3V0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFib3V0KCkge1xyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBYm91dCgpO1xyXG5cclxufSkoKTtcclxudmFyIG1hdGNoZXNIdG1sUGF0aCA9IHtcclxuICAgIGRhc2hib2FyZDogbWFpbkNvbmZpZy5EQVNIQk9BUkRfSFRNTF9QQVRILFxyXG4gICAgY29uZmlndXJhdGlvbjogbWFpbkNvbmZpZy5MQVVOQ0hFUl9IVE1MX1BBVEgsXHJcbiAgICBhYm91dDogbWFpbkNvbmZpZy5BQk9VVF9IVE1MX1BBVEhcclxufTtcclxuXHJcblxyXG52YXIgY2xvc2VGdW5jdGlvbnMgPSB7XHJcbiAgICBkYXNoYm9hcmQ6IGRhc2hib2FyZC5jbG9zZUFwcC5iaW5kKGRhc2hib2FyZCksXHJcbiAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5jbG9zZUFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgIGFib3V0OiBhYm91dC5jbG9zZUFwcC5iaW5kKGFib3V0KVxyXG59O1xyXG5cclxudmFyIHN0YXJ0RnVuY3Rpb25zID0ge1xyXG4gICAgZGFzaGJvYXJkOiBkYXNoYm9hcmQuc3RhcnRBcHAuYmluZChkYXNoYm9hcmQpLFxyXG4gICAgY29uZmlndXJhdGlvbjogbGF1bmNoZXIuc3RhcnRBcHAuYmluZChsYXVuY2hlciksXHJcbiAgICBhYm91dDogYWJvdXQuc3RhcnRBcHAuYmluZChhYm91dClcclxufTtcclxuXHJcbi8vINCh0L7Qt9C00LDRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6IFVSTFxyXG5mdW5jdGlvbiBoYW5kbGVVcmwodXJsKSB7XHJcbiAgICB2YXIgaGFzaCA9IG51bGw7XHJcbiAgICBpZih1cmwuaW5kZXhPZihcIiNcIikgPT09IC0xKXtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGhhc2ggPSB1cmwuc3BsaXQoJyMnKS5wb3AoKTtcclxuICAgIGNsb3NlUHJldmlvdXNQYWdlKGhhc2gpO1xyXG5cclxuXHJcbiAgICBnZXRFbGVtZW50KCdhLicgKyBtYWluQ29uZmlnLk5BVklHQVRJT05fQUNUSVZFX0NTUywgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShtYWluQ29uZmlnLk5BVklHQVRJT05fQUNUSVZFX0NTUylcclxuICAgIH0pO1xyXG4gICAgZ2V0RWxlbWVudCgnYVtocmVmPVwiJyArIGhhc2ggKyAnXCJdJywgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChtYWluQ29uZmlnLk5BVklHQVRJT05fQUNUSVZFX0NTUyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjbGVhckVsZW1lbnRDb250ZW50KG1haW5Db25maWcuQ09OVEVOVF9DTEFTUyk7XHJcbiAgICB2aWV3RmFjdG9yeS5jcmVhdGVWaWV3KG1hdGNoZXNIdG1sUGF0aFtoYXNoXSwgbnVsbCwgbWFpbkNvbmZpZy5DT05URU5UX0NMQVNTKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgc3RhcnRGdW5jdGlvbnNbaGFzaF0oKTtcclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VQcmV2aW91c1BhZ2UoaGFzaCkge1xyXG4gICAgIE9iamVjdC5rZXlzKGNsb3NlRnVuY3Rpb25zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICBpZihrZXkgIT09IGhhc2gpIHtcclxuICAgICAgICAgICAgIGNsb3NlRnVuY3Rpb25zW2tleV0oKTtcclxuICAgICAgICAgfVxyXG4gICAgIH0pXHJcbn1cclxuXHJcbi8vINCf0L7QtNC/0LjRgdCw0YLRjNGB0Y8g0L3QsCDQuNC30LzQtdC90LXQvdC40Y8gVVJMXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgIGhhbmRsZVVybChlbGVtZW50Lm5ld1VSTCk7XHJcbn0pO1xyXG5cclxuLy8g0J/RgNC4INC30LDQs9GA0YPQt9C60LUg0YHRgtGA0LDQvdC40YbRiyAtINGB0YfQuNGC0LDRgtGMINGB0L7RgdGC0L7Rj9C90LjQtSDQuCDQt9Cw0L/Rg9GB0YLQuNGC0Ywg0L7QsdGA0LDQsdC+0YLRh9C40LpcclxuaGFuZGxlVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIjZGFzaGJvYXJkXCIpOyJdfQ==
