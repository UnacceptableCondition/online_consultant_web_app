var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","networkRadioLongPoll","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?",srcEnd:"'&gt&lt/script&gt"},userList:{USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online"},chatSettings:{typeOfRequest:"longPoll"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},interval:{UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e3},router:{ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",ADMIN_NAME:"Admin",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,n){var r;return 1<e.length&&(t<(r=function(e,t,s,n){for(var r,a,o,i,u=e[Math.floor((s+t)/2)][n],c=t,l=s;c<=l;){for(;e[c][n]>u;)c++;for(;e[l][n]<u;)l--;c<=l&&(o=l,i=(r=e)[a=c],r[a]=r[o],r[o]=i,c++,l--)}return c}(e,t,s,n))-1&&this.quickSort(e,t,r-1,n),r<s&&this.quickSort(e,r,s,n)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.setupDataBaseAPI=function(e){return"fetch"===e?{request:t.requestFetch,getNewConnectorAPI:t.setupDataBaseAPI}:"XHR"===e?{request:t.requestXMR,getNewConnectorAPI:t.setupDataBaseAPI}:{request:t.requestXMR,createLongPollConnection:t.longPoll,getNewConnectorAPI:t.setupDataBaseAPI}},s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,r,a,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(a,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},r?s.send(r):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},(t=new s).setupDataBaseAPI(e.typeOfRequest)}(dataConnectorConfig),dataSource=function(o,t){var s,r="userList",n="usersMessages",a="usersSettings",i={isMinimize:!1,readLastMessage:!0};function u(){}function c(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function l(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}return u.prototype.createRequestPath=function(e,t,s,n){var r=e;return null!==n&&(r+="/"+n),null!==t&&(r+="/"+t),null!==s&&(r+="/"+s),r+=".json"},u.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},u.prototype.setData=function(e,t,s,n,r){var a;return a="PUT"===t?this.createRequestPath(dataBaseUrl,n,s,e):this.createRequestPath(dataBaseUrl,n,null,e),o.request(a,JSON.stringify(r),t,"application/json")},u.prototype.addNewUserToDataSource=function(t,e){var s=new Date,n=this;i.userName=e,Object.keys(i).map(function(e){n.setData(a,"PUT",e,t,i[e])}),this.setData(r,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},u.prototype.getDataSourceAPI=function(e){return e&&(t.chatSettings.typeOfRequest=e),u.prototype.getData="longPoll"===t.chatSettings.typeOfRequest?c:l,{usersAPI:{getUserList:s.getData.bind(s,r),getUserSettings:s.getData.bind(s,a),getUserMessages:s.getData.bind(s,n),getSettingField:s.getData.bind(s,a),sendMessage:s.setData.bind(s,n,"POST"),setSettingField:s.setData.bind(s,a,"PUT"),addNewUserToDataSource:s.addNewUserToDataSource.bind(s),updateLastOnline:s.setData.bind(s,r,"PUT","lastOnline"),updateSendNewMessageFlag:s.setData.bind(s,r,"PUT","sendNewMessage"),updateMessageIsReadField:s.setData.bind(s,n,"PUT")},commonAPI:{getHTML:s.getHTML.bind(s),getDataSourceAPI:s.getDataSourceAPI.bind(s)}}},(s=new u).getDataSourceAPI()}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/},r=/event: put/,t=/data: null/,a=/","data":/,o=/"path":"\/-/,n=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=!0,u=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){if(s[e].test(t))return e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(a)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,n={},r={};return"read"===t?(n.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),n.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),n):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(a).shift(),n=JSON.parse(this.prepareDataBeforeJsonParse(e)),r[s]=n,r):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return i?(i=!1,this.getFirstData(e)):n.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseUsersSettings=function(e){return u?(u=!1,this.getFirstData(e)):[null,JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1))]},e.prototype.parse=function(e){console.log(e);var t=e.split(r),s=this.getTypeOfChanges(t[t.length-1]),n={type:s};if(this.hasNewData(t)){if("message"===s||"read"===s)return n.object=this.parseUsersMessages(t,s),n;if("sendNewMessage"===s||"lastOnline"===s||"userList"===s)return n.object=this.parseUserList(t,s),n;if("setting"===s)return n.object=this.parseUsersSettings(t,s),n}},new e}(),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,r){var a=this;return new Promise(function(e,t){s?(n&&a.includeViewCssToPage(a.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(a.includeViewHTMLToPage(s,r))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var r=document.createElement("link");return n&&r.setAttribute("id",n),t&&r.setAttribute("rel",t),s&&r.setAttribute("type",s),r.setAttribute("href",e),r},new e}(dataSource),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var r=this.createMessageContainerDiv(n,s),a=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return r.appendChild(a),r.appendChild(o),r.appendChild(i),r},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,n=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:n,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,n){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort();i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3==this.readyState&&200==this.status&&(t=n.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){t[e].id=e,messageListManager.addMessageToMessageList(t[e])});messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){(e.id=t.id)&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){t[e].id=e,s.push(t[e])});messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(e){var t,s,n,r=this.getMessageFromInputElement(),a=(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),o={sender:e,message:r,read:!1,date:a,id:n};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(console.log(e),e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),userListManager=function(a,e){function t(){this.uList=[]}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return s.classList.add(a.userList.USER_ELEMENT_CSS_CLASS),n.classList.add(a.userList.USER_ID_ELEMENT_CSS_CLASS),n.innerHTML=e,t?r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_ONLINE):r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(n),s.appendChild(r),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var n=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,n),online:n,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.updateUserOnlineStatus=function(e,t){var s=this.getUserFromUserListById(e);this.uList[s].lastOnline=t,this.uList[s].online=this.userIsOnline(t),this.uList[s].userElement=this.createUserElement(e,this.userIsOnline(t))},t.prototype.getUserFromUserListById=function(t){var s=this,n=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(n=e),!0}),n},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=a.interval.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(a.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,a.currentDashboardCondition.sortBy)},t.prototype.clearUserList=function(){this.uList=[]},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(a.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(a.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),dashboard=function(s,n,r,a,e,o){var t=[];function i(){this.setupEventEmitter()}return i.prototype.startApp=function(){r.setup(s),this.getUserList(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions()},i.prototype.setupEventEmitter=function(){var n=this;o.addSubscribe("userList",function(t){var s=[];t instanceof Array&&(t=t[1]),Object.keys(t).map(function(e){a.addUserToUsersArray(t[e],e,s)}),a.uList=a.uList.concat(s);var e=n.getCurrentUserIdFromLocalStorage();n.localSettingsSetup(e),n.setupUserListDOM()}),o.addSubscribe("lastOnline",function(e){var t=e[0],s=e[1];a.updateUserOnlineStatus(t,s)}),o.addSubscribe("sendNewMessage",function(e){var t=a.getUserFromUserListById(e[0]);a.uList[t].sendNewMessage=e[1],n.toggleNewMessageIndicatorToUser()})},i.prototype.saveCurrentConditionToLocalStorage=function(){var e=JSON.stringify({filter:s.currentDashboardCondition.filterBy,sort:s.currentDashboardCondition.sortBy,currentUserId:s.currentUserSettings.userId});localStorage.setItem(s.LOCAL_STORAGE_NAME,e)},i.prototype.getCurrentUserIdFromLocalStorage=function(){var e=localStorage.getItem(s.LOCAL_STORAGE_NAME),t=null;return e&&(t=JSON.parse(e),s.currentDashboardCondition.filterBy=t.filter,s.currentDashboardCondition.sortBy=t.sort,s.currentUserSettings.userId=t.currentUserId),t},i.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(s.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(s.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(s.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(s.currentUserSettings.userId)))},i.prototype.filter=function(){s.currentDashboardCondition.filterBy=getElement(s.DOM.CSS_FILTER_INPUT_ID).value,this.saveCurrentConditionToLocalStorage(),a.filterByName(s.currentDashboardCondition.filterBy),a.displayUsers()},i.prototype.sort=function(){s.currentDashboardCondition.sortBy=getElement(s.DOM.CSS_SORT_SELECT_ID).value,this.saveCurrentConditionToLocalStorage(),a.sortUsersByField(),a.displayUsers()},i.prototype.setupUsersListeners=function(){var t=this;Array.from(s.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})},i.prototype.setupUserListDOM=function(){a.displayUsers(),this.getAcessToUsersList(),this.toggleNewMessageIndicatorToUser(),this.setupUsersListeners()},i.prototype.getAcessToUsersList=function(){s.users=getElement(s.userList.USER_ELEMENT_CSS_CLASS,!0)},i.prototype.getUserList=function(){var e,t=n.usersAPI.getUserList(null);t.onreadystatechange=function(){this.status&&(e=longPollResponseParser.parse(this.responseText))&&o.emit(e.type,e.object)},t.send(),s.currentUserListConnection=t},i.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},i.prototype.startConversationWithUser=function(e){var t=this;s.currentUserSettings.userId=e,r.clearMessageList(),r.getUserData(e).then(function(){getElement(s.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.remove(s.INVISIBLE_CLASS),t.saveCurrentConditionToLocalStorage()}),n.usersAPI.updateSendNewMessageFlag(e,!1)},i.prototype.updateUserMessagesAndDisplayIt=function(){r.getUserData(s.currentUserSettings.userId),this.markMessageFromUserAsRead(s.currentUserSettings.userId)},i.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(s.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,s.ADMIN_NAME)),getElement(s.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(s.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(s.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},i.prototype.markMessageFromUserAsRead=function(e){var t=a.getUserFromUserListById(e);a.uList[t].sendNewMessage=!1,r.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},i.prototype.closeConversation=function(){getElement(s.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.add(s.INVISIBLE_CLASS),s.currentUserSettings.userId=null,s.currentMessageConnection.abort(),this.saveCurrentConditionToLocalStorage()},i.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(a.uList).map(function(e){return t=a.uList[e].userElement.getElementsByClassName(s.CSS_HAVE_NEW_MESSAGE_STYLE)[0],a.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(s.CSS_HAVE_NEW_MESSAGE_STYLE),a.uList[e].userElement.appendChild(t)),!a.uList[e].sendNewMessage&&t&&a.uList[e].userElement.removeChild(t),!0})},i.prototype.setupIntervalFunctions=function(){var e=this;t.push=setInterval(function(){Object.keys(a.uList).map(function(e){a.updateUserOnlineStatus(a.uList[e].userId,a.uList[e].lastOnline)}),e.setupUserListDOM()},s.interval.UPDATE_USERS_TIME)},i.prototype.closeApp=function(){t.forEach(function(e){clearInterval(e)}),userDataManager.clearMessageList(),a.clearUserList(),s.currentMessageConnection&&s.currentMessageConnection.abort(),s.currentUserListConnection.abort()},new i}(mainConfig,dataSource,userDataManager,userListManager,0,eventEmitter),launcher=function(s){var o={},n={chatTitle:{typeOfValue:"value"},chatUrl:{typeOfValue:"value"},chatClass:{typeOfValue:"value"},chatPositionSelect:{typeOfValue:"value"},allowMinimize:{typeOfValue:"checked"},allowDrag:{typeOfValue:"checked"},showTime:{typeOfValue:"checked"},requireName:{typeOfValue:"checked"},networkRadioXMR:{typeOfValue:"value",true:"XHR"},networkRadioLongPoll:{typeOfValue:"value",true:"longPoll"},networkRadioFetch:{typeOfValue:"value",true:"fetch"}};function e(){}return e.prototype.getDataFromElement=function(s){var n,r="",a=this;return Object.keys(o).map(function(e,t){return s[e]&&(0<t?"radio"===(n=o[e].getAttribute("type"))?o[e].checked&&(r+="'&typeOfRequest='"+a.getElementValue(e,n)):r+="'&"+e+"='"+a.getElementValue(e,n):r+=e+"='"+a.getElementValue(e)),!0}),r.length<1&&(r=null),r},e.prototype.getElementValue=function(e){return o[e][n[e].typeOfValue]},e.prototype.startApp=function(){var t=this;s.launcher.after.map(function(e){return o[e]=getElement(s.launcher.pattern+e,!1,!0),o[e].addEventListener("input",function(){var e=s.launcher.srcStart+this.getDataFromElement(n);e+=s.launcher.srcEnd,o.scriptCode.innerHTML=e}.bind(t)),!0})},e.prototype.closeApp=function(){o={}},new e}(mainConfig),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),mainController=function(s){var n={dashboard:s.router.DASHBOARD_HTML_PATH,configuration:s.router.LAUNCHER_HTML_PATH,about:s.router.ABOUT_HTML_PATH},r={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},a={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function e(){}return e.prototype.startApp=function(){var t=this;window.addEventListener("hashchange",function(e){t.handleUrl(e.newURL)}),t.handleUrl(window.location.href+"#dashboard")},e.prototype.handleUrl=function(e){var t;-1!==e.indexOf("#")&&(t=e.split("#").pop(),this.closePreviousPage(t),document.querySelectorAll("a."+s.router.NAVIGATION_ACTIVE_CSS).forEach(function(e){e.classList.remove(s.router.NAVIGATION_ACTIVE_CSS)}),document.querySelectorAll('a[href="#'+t+'"]').forEach(function(e){e.classList.add(s.router.NAVIGATION_ACTIVE_CSS)}),clearElementContent(s.router.CONTENT_CLASS),viewFactory.createView(n[t],null,s.router.CONTENT_CLASS).then(function(){a[t]()}))},e.prototype.closePreviousPage=function(t){Object.keys(r).map(function(e){return e!==t&&r[e](),!0})},new e}(mainConfig);mainController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwibGF1bmNoZXIiLCJwYXR0ZXJuIiwiYWZ0ZXIiLCJzcmNTdGFydCIsInNyY0VuZCIsInVzZXJMaXN0IiwiVVNFUl9FTEVNRU5UX0NTU19DTEFTUyIsIlVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1MiLCJVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT0ZGTElORSIsIlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PTkxJTkUiLCJjaGF0U2V0dGluZ3MiLCJ0eXBlT2ZSZXF1ZXN0IiwiY3VycmVudFVzZXJTZXR0aW5ncyIsInVzZXJJZCIsInVzZXJOYW1lIiwiY3VycmVudERhc2hib2FyZENvbmRpdGlvbiIsImZpbHRlckJ5Iiwic29ydEJ5IiwiaW50ZXJ2YWwiLCJVUERBVEVfVVNFUlNfVElNRSIsIk9OTElORV9JTlRFUlZBTCIsInJvdXRlciIsIkFCT1VUX0hUTUxfUEFUSCIsIkxBVU5DSEVSX0hUTUxfUEFUSCIsIkRBU0hCT0FSRF9IVE1MX1BBVEgiLCJDT05URU5UX0NMQVNTIiwiTkFWSUdBVElPTl9BQ1RJVkVfQ1NTIiwibWVzc2FnZXMiLCJDU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyIsIkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUiIsIkNTU19NRVNTQUdFX0NPTlRBSU5FUiIsIkNTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUUiLCJDU1NfQ0hBVF9NRVNTQUdFX0RBVEUiLCJDU1NfQ0hBVF9NRVNTQUdFIiwiSU5WSVNJQkxFX0NMQVNTIiwiREFUQV9CQVNFX1VSTCIsIkFETUlOX05BTUUiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsIkxPQ0FMX1NUT1JBR0VfTkFNRSIsIkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFIiwiZGF0YUJhc2VVcmwiLCJnZXRFbGVtZW50Iiwic2VsZWN0b3IiLCJpc0FsbCIsIml0SXNJZCIsInNlbGVjdG9yU3RhcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YUNvbm5lY3RvckNvbmZpZyIsInNvcnRlciIsIlNvcnRlciIsInByb3RvdHlwZSIsInF1aWNrU29ydCIsIml0ZW1zIiwibGVmdCIsInJpZ2h0Iiwic29ydEZpZWxkIiwiaW5kZXgiLCJsZW5ndGgiLCJmaXJzdEluZGV4Iiwic2Vjb25kSW5kZXgiLCJ0ZW1wIiwicGl2b3QiLCJNYXRoIiwiZmxvb3IiLCJpIiwiaiIsInBhcnRpdGlvbiIsInRoaXMiLCJjbGVhckVsZW1lbnRDb250ZW50IiwiZWxlbWVudFNlbGVjdG9yIiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImRhdGFDb25uZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnT2JqIiwiZGF0YUJhc2VDb25uZWN0b3IiLCJEYXRhQmFzZUNvbm5lY3RvciIsInNldHVwRGF0YUJhc2VBUEkiLCJyZXF1ZXN0IiwicmVxdWVzdEZldGNoIiwiZ2V0TmV3Q29ubmVjdG9yQVBJIiwicmVxdWVzdFhNUiIsImNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbiIsImxvbmdQb2xsIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3RUeXBlIiwiY29udGVudFR5cGUiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInRleHQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJKU09OIiwicGFyc2UiLCJvbmVycm9yIiwic3RhdHVzVGV4dCIsInNlbmQiLCJ0YXJnZXRVcmwiLCJ4aHR0cCIsImRhdGFTb3VyY2UiLCJjb25maWciLCJkYXRhU291cmNlSW5zdGFuY2UiLCJVU0VSX0xJU1QiLCJVU0VSX01FU1NBR0VTIiwiVVNFUlNfU0VUVElOR1MiLCJuZXdVc2VyRGF0YSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJEYXRhU291cmNlIiwibG9uZ1BvbGxDb25uZWN0IiwiZGF0YVR5cGUiLCJjcmVhdGVSZXF1ZXN0UGF0aCIsImJhc2ljQ29ubmVjdCIsImJpbmQiLCJkYXRhQmFzZVVSTCIsInJlcXVlc3RQb3N0Zml4IiwicmVxdWVzdFByZWZpeCIsInBhdGgiLCJnZXRIVE1MIiwic2V0RGF0YSIsImZpZWxkTmFtZSIsInZhbHVlIiwic3RyaW5naWZ5IiwiYWRkTmV3VXNlclRvRGF0YVNvdXJjZSIsImRhdGUiLCJEYXRlIiwidGhhdCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJzZXR0aW5nTmFtZSIsImxhc3RPbmxpbmUiLCJnZXRUaW1lIiwic2VuZE5ld01lc3NhZ2UiLCJnZXREYXRhU291cmNlQVBJIiwiZ2V0RGF0YSIsInVzZXJzQVBJIiwiZ2V0VXNlckxpc3QiLCJnZXRVc2VyU2V0dGluZ3MiLCJnZXRVc2VyTWVzc2FnZXMiLCJnZXRTZXR0aW5nRmllbGQiLCJzZW5kTWVzc2FnZSIsInNldFNldHRpbmdGaWVsZCIsInVwZGF0ZUxhc3RPbmxpbmUiLCJ1cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWciLCJ1cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQiLCJjb21tb25BUEkiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJldmVudHMiLCJhZGRTdWJzY3JpYmUiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInB1c2giLCJmaWx0ZXIiLCJlbGVtZW50Q2FsbGJhY2siLCJlbWl0IiwiZGF0YSIsImV2ZW50IiwiZm9yRWFjaCIsImNhbGwiLCJsb25nUG9sbFJlc3BvbnNlUGFyc2VyIiwidHlwZXNPZkNoYW5nZSIsIm1lc3NhZ2UiLCJzZXR0aW5nIiwicmVhZCIsImV2ZW50UmVndWxhciIsImhhc051bGxEYXRhIiwiZ2V0RGF0YVJlZ3VsYXIiLCJpdElzTmV3TWVzc2FnZVJlZ3VsYXIiLCJpdElzTmV3VXNlckxpc3RSZWd1bGFyIiwiaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uIiwiaXRJc0ZpcnN0VXNlclNldHRpbmdDb25uZWN0aW9uIiwiTG9uZ1BvbGxSZXNwb25zZVBhcnNlciIsImdldFR5cGVPZkNoYW5nZXMiLCJhbnN3ZXJEYXRhIiwidHlwZU5hbWUiLCJ0ZXN0IiwicHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UiLCJzcGxpdCIsInRyaW0iLCJzbGljZSIsInBhcnNlVXNlcnNNZXNzYWdlcyIsImNoYW5nZVR5cGUiLCJtZXNzYWdlSWQiLCJyZXN1bHRPYmplY3QiLCJpZCIsInBvcCIsInNoaWZ0IiwiZ2V0Rmlyc3REYXRhIiwiaGFzTmV3RGF0YSIsInBhcnNlVXNlckxpc3QiLCJnZXRVc2VySWQiLCJleGNlcHRpb24iLCJwYXJzZVVzZXJzU2V0dGluZ3MiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0IiwicmVzdWx0T2ZQYXJzZSIsInR5cGUiLCJvYmplY3QiLCJ2aWV3RmFjdG9yeSIsIlZpZXdGYWN0b3J5IiwiY3JlYXRlVmlldyIsImh0bWxQYXRoIiwiY3NzUGF0aCIsImNvbnRhaW5lckNsYXNzIiwiaW5jbHVkZVZpZXdDc3NUb1BhZ2UiLCJjcmVhdGVDU1NMaW5rIiwiaW5jbHVkZVZpZXdIVE1MVG9QYWdlIiwiRXJyb3IiLCJjb250YWluZXJEaXYiLCJodG1sIiwiaW5uZXJIVE1MIiwibGluayIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZpbGVQYXRoIiwicmVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJzZW5kZXIiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwiRElTUExBWV9NRVNTQUdFX0RBVEUiLCJtZXNzYWdlU2VuZGVyRGl2IiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIm1lc3NhZ2VEaXYiLCJESVNQTEFZX01FU1NBR0UiLCJnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQiLCJtZXNzYWdlc0lzUmVhZCIsImZpZWxkVmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0Rpc3BsYXkiLCJzdHlsZUNsYXNzZXMiLCJkaXYiLCJzdHlsZSIsImNyZWF0ZU1lc3NhZ2VMaXN0IiwibWVzc2FnZU9iamVjdHMiLCJuZXdNZXNzYWdlTGlzdCIsInVwZGF0ZU1lc3NhZ2VMaXN0IiwiZGlzcGxheU1lc3NhZ2VzIiwiYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqIiwiY2xlYXJDaGF0IiwibWVzc2FnZU9iamVjdCIsInVzZXJEYXRhTWFuYWdlciIsIlVzZXJEYXRhTWFuYWdlciIsImdldFVzZXJEYXRhIiwiZ2V0VXNlckNvcnJlc3BvbmRlbmNlIiwiY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uIiwiYWJvcnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwia2V5IiwibWVzc2FnZXNPYmplY3QiLCJjbGVhck1lc3NhZ2VMaXN0IiwiY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlIiwic2F2ZVNldHRpbmdGaWVsZCIsInVwZGF0ZVVzZXJPbmxpbmUiLCJzZW5kZXJOYW1lIiwibWludXRlcyIsImdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50IiwiZ2V0TWludXRlcyIsInRvU3RyaW5nIiwiZ2V0SG91cnMiLCJjb25jYXQiLCJzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSIsInNldE1lc3NhZ2VBc1JlYWQiLCJzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIiwic2V0dGluZ3MiLCJuZXdGaWVsZFNldHRpbmciLCJ1c2VyTGlzdE1hbmFnZXIiLCJVc2VyTGlzdE1hbmFnZXIiLCJ1TGlzdCIsImNyZWF0ZVVzZXJFbGVtZW50IiwiaXNPbmxpbmUiLCJ1c2VyRGl2IiwidXNlcklkRGl2IiwidXNlckluZGljYXRvciIsInNldFVzZXJMaXN0IiwidXNlckx1c3RPYmplY3QiLCJhZGRVc2VyVG9Vc2Vyc0FycmF5IiwidXNlciIsInVzZXJzTGlzdCIsInVzZXJJc09ubGluZSIsInVzZXJFbGVtZW50Iiwib25saW5lIiwidmlzaWJsZSIsInVwZGF0ZVVzZXJPbmxpbmVTdGF0dXMiLCJ1c2VySW5kZXgiLCJnZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCIsInVzZXJNYW5hZ2VyIiwibGFzdFVzZXJPbmxpbmVUaW1lIiwiZmlsdGVyQnlOYW1lIiwiaW5kZXhPZiIsInNvcnRVc2Vyc0J5RmllbGQiLCJjbGVhclVzZXJMaXN0IiwiZGlzcGxheVVzZXJzIiwiZWxlbSIsImRhc2hib2FyZCIsInVEYXRhTWFuYWdlciIsInVMaXN0TWFuYWdlciIsImludGVydmFsSWQiLCJEYXNoYm9hcmRDb250cm9sbGVyIiwic2V0dXBFdmVudEVtaXR0ZXIiLCJzdGFydEFwcCIsInNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMiLCJzZXR1cEludGVydmFsRnVuY3Rpb25zIiwiQXJyYXkiLCJjb25kaXRpb24iLCJnZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSIsImxvY2FsU2V0dGluZ3NTZXR1cCIsInNldHVwVXNlckxpc3RET00iLCJ0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyIiwic2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSIsInNlcmlhbENvbmRpdGlvbiIsInNvcnQiLCJjdXJyZW50VXNlcklkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJzdGFydENvbnZlcnNhdGlvbldpdGhVc2VyIiwic2V0dXBVc2Vyc0xpc3RlbmVycyIsImZyb20iLCJ1c2VycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1c2VyTGlzdGVuZXIiLCJpbm5lclRleHQiLCJnZXRBY2Vzc1RvVXNlcnNMaXN0IiwibG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvciIsImN1cnJlbnRVc2VyTGlzdENvbm5lY3Rpb24iLCJtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkIiwicmVtb3ZlIiwidXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0IiwiY2xvc2VDb252ZXJzYXRpb24iLCJuZXdNZXNzYWdlRGl2IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNldEludGVydmFsIiwidmlld0lkIiwiY2xvc2VBcHAiLCJjbGVhckludGVydmFsIiwiRE9NVmFyaWFibGVzIiwia2V5T2ZWYWx1ZSIsImNoYXRUaXRsZSIsInR5cGVPZlZhbHVlIiwiY2hhdFVybCIsImNoYXRDbGFzcyIsImNoYXRQb3NpdGlvblNlbGVjdCIsImFsbG93TWluaW1pemUiLCJhbGxvd0RyYWciLCJzaG93VGltZSIsInJlcXVpcmVOYW1lIiwibmV0d29ya1JhZGlvWE1SIiwidHJ1ZSIsIm5ldHdvcmtSYWRpb0xvbmdQb2xsIiwibmV0d29ya1JhZGlvRmV0Y2giLCJMYXVuY2hlciIsImdldERhdGFGcm9tRWxlbWVudCIsInNyYyIsImVsZW1lbnROYW1lIiwiZ2V0QXR0cmlidXRlIiwiY2hlY2tlZCIsImdldEVsZW1lbnRWYWx1ZSIsIm5hbWUiLCJzY3JpcHRDb2RlIiwiYWJvdXQiLCJBYm91dCIsIm1haW5Db250cm9sbGVyIiwibWF0Y2hlc0h0bWxQYXRoIiwiY29uZmlndXJhdGlvbiIsImNsb3NlRnVuY3Rpb25zIiwic3RhcnRGdW5jdGlvbnMiLCJNYWluQ29udHJvbGxlciIsIndpbmRvdyIsImhhbmRsZVVybCIsIm5ld1VSTCIsImxvY2F0aW9uIiwiaHJlZiIsInVybCIsImhhc2giLCJjbG9zZVByZXZpb3VzUGFnZSJdLCJtYXBwaW5ncyI6IkFBR0EsSUFBSUEsV0FBYSxDQUNiQyxJQUFLLENBRURDLG9CQUFxQixzQ0FFckJDLDhCQUErQixnQ0FFL0JDLDhCQUErQix1Q0FFL0JDLDRCQUE2QixzQ0FFN0JDLG9CQUFxQix3Q0FFckJDLG1CQUFvQixpQ0FHeEJDLFNBQVUsQ0FDTkMsUUFBUywyQkFDVEMsTUFBUSxDQUNKLFlBQWEsVUFBVyxZQUFhLHFCQUNyQyxnQkFBaUIsWUFBYSxjQUFlLFdBQVksa0JBQ3pELG9CQUFvQix1QkFBd0IsY0FFaERDLFNBQVUsd0ZBQ1ZDLE9BQVMscUJBRWJDLFNBQVUsQ0FHTkMsdUJBQXdCLGdDQUV4QkMsMEJBQTJCLG1DQUUzQkMsaUNBQWtDLHdDQUNsQ0MsZ0NBQWlDLHdDQUVyQ0MsYUFBYyxDQUNWQyxjQUFlLFlBRW5CQyxvQkFBcUIsQ0FDakJDLE9BQVEsS0FDUkMsU0FBVSxNQUdkQywwQkFBMkIsQ0FDdkJDLFNBQVUsS0FDVkMsT0FBUSxNQUlaQyxTQUFVLENBQ05DLGtCQUFtQixJQUNuQkMsZ0JBQWlCLE1BRXJCQyxPQUFRLENBRUpDLGdCQUFpQiwwR0FFakJDLG1CQUFvQixpSEFFcEJDLG9CQUFxQiw4R0FFckJDLGNBQWUsVUFFZkMsc0JBQXVCLHFCQUUzQkMsU0FBVSxDQUVOQywyQkFBNEIsNENBRTVCQyw0QkFBNkIseUNBSTdCQyxzQkFBdUIsaURBRXZCQyw2QkFBOEIsK0NBRTlCQyxzQkFBdUIsNkNBRXZCQyxpQkFBa0IseUNBS3RCQyxnQkFBaUIsNkNBRWpCQyxjQUFlLGdEQUdmQyxXQUFZLFFBR1pDLHdCQUF5QixnREFFekJDLG1CQUFvQixtQkFJcEJDLDJCQUE0QixrREFVNUJDLFlBQWNoRCxXQUFXMkMsY0FFekJNLFdBQWEsU0FBNEJDLEVBQVVDLEVBQU9DLEdBQzFELElBQUlDLEVBQWdCLEVBQVcsSUFBTSxJQUNyQyxPQUFHRixFQUNRRyxTQUFTQyxpQkFBaUJGLEVBQWdCSCxHQUU5Q0ksU0FBU0UsY0FBY0gsRUFBZ0JILElBSTlDTyxvQkFBc0IsQ0FDdEJ0QyxjQUFlbkIsV0FBV2tCLGFBQWFDLGVBTXZDdUMsT0FBUyxXQUNULFNBQVNDLEtBb0RULE9BbkJBQSxFQUFPQyxVQUFVQyxVQUFZLFNBQ3pCQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVBLElBQUlDLEVBVUosT0FUbUIsRUFBZkosRUFBTUssU0FFRkosR0FESkcsRUE3QlIsU0FBbUJKLEVBQU9DLEVBQU1DLEVBQU9DLEdBS25DLElBSkEsSUFQVUgsRUFBT00sRUFBWUMsRUFDekJDLEVBTUFDLEVBQVFULEVBQU1VLEtBQUtDLE9BQU9ULEVBQVFELEdBQVEsSUFBSUUsR0FDOUNTLEVBQUlYLEVBQ0pZLEVBQUlYLEVBRURVLEdBQUtDLEdBQUcsQ0FDWCxLQUFPYixFQUFNWSxHQUFHVCxHQUFhTSxHQUN6QkcsSUFFSixLQUFPWixFQUFNYSxHQUFHVixHQUFhTSxHQUN6QkksSUFFQUQsR0FBS0MsSUFsQmdCTixFQW1CTk0sRUFsQm5CTCxHQURNUixFQW1CR0EsR0FuQklNLEVBbUJHTSxHQWpCcEJaLEVBQU1NLEdBQWNOLEVBQU1PLEdBQzFCUCxFQUFNTyxHQUFlQyxFQWlCYkksSUFDQUMsS0FHUixPQUFPRCxFQVdLRSxDQUFVZCxFQUFPQyxFQUFNQyxFQUFPQyxJQUNuQixHQUNmWSxLQUFLaEIsVUFBVUMsRUFBT0MsRUFBTUcsRUFBUSxFQUFHRCxHQUV2Q0MsRUFBUUYsR0FDUmEsS0FBS2hCLFVBQVVDLEVBQU9JLEVBQU9GLEVBQU9DLElBR3JDSCxHQTlDQSxJQUFJSCxFQUpOLEdBMERiLFNBQVNtQixvQkFBb0JDLEdBRXpCLElBREEsSUFBSUMsRUFBVS9CLFdBQVc4QixHQUNsQkMsRUFBUUMsWUFDWEQsRUFBUUUsWUFBWUYsRUFBUUMsWUFXcEMsSUFBSUUsY0FBZ0IsU0FBMkJDLEdBQzNDLElBQUlDLEVBRUosU0FBU0MsS0FpRlQsT0EvRUFBLEVBQWtCMUIsVUFBVTJCLGlCQUFtQixTQUEyQnBFLEdBbUJ0RSxNQWpCc0IsVUFBbEJBLEVBQ2MsQ0FDVnFFLFFBQVNILEVBQWtCSSxhQUMzQkMsbUJBQW9CTCxFQUFrQkUsa0JBRWpCLFFBQWxCcEUsRUFDTyxDQUNWcUUsUUFBU0gsRUFBa0JNLFdBQzNCRCxtQkFBb0JMLEVBQWtCRSxrQkFHNUIsQ0FDVkMsUUFBU0gsRUFBa0JNLFdBQzNCQyx5QkFBMEJQLEVBQWtCUSxTQUM1Q0gsbUJBQW9CTCxFQUFrQkUsbUJBTWxERCxFQUFrQjFCLFVBQVU2QixhQUFlLFNBQ3ZDSyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVBLE9BQU9DLE1BQU1KLEVBQWEsQ0FDdEJLLFFBQVMsQ0FDTEMsT0FBUUgsRUFDUkksZUFBZ0JKLEdBRXBCSyxPQUFRTixFQUNSTyxLQUFNUixJQUNQUyxLQUFLLFNBQXlCQyxHQUM3QixNQUFtQixxQkFBaEJSLEVBQ1FRLEVBQVNDLE9BRWJELEVBQVNFLFVBSXhCckIsRUFBa0IxQixVQUFVK0IsV0FBYSxTQUNyQ0csRUFDQUMsRUFDQUMsRUFDQUMsR0FFQSxPQUFPLElBQUlXLFFBQVEsU0FBaUJDLEVBQVNDLEdBQ3pDLElBQUlDLEVBQU0sSUFBSUMsZUFDZEQsRUFBSUUsS0FBS2pCLEVBQWFGLEdBQWEsR0FDbkNpQixFQUFJRyxpQkFBaUIsZUFBZ0JqQixHQUNyQ2MsRUFBSUksT0FBUyxXQUVMTixFQURlLHFCQUFoQlosRUFDU21CLEtBQUtDLE1BQU1OLEVBQUlOLFVBRWZNLEVBQUlOLFdBR3BCTSxFQUFJTyxRQUFVLFdBQ1ZSLEVBQU9DLEVBQUlRLGFBRVh4QixFQUNBZ0IsRUFBSVMsS0FBS3pCLEdBRVRnQixFQUFJUyxVQUtoQmxDLEVBQWtCMUIsVUFBVWlDLFNBQVcsU0FBbUI0QixHQUN0RCxJQUFJQyxFQUFRLElBQUlWLGVBR2hCLE9BRkFVLEVBQU1ULEtBQUssTUFBT1EsR0FBVyxHQUM3QkMsRUFBTVIsaUJBQWlCLFNBQVUscUJBQzFCUSxJQUdYckMsRUFBb0IsSUFBSUMsR0FDQ0MsaUJBQWlCSCxFQUF1QmpFLGVBcEZqRCxDQXNGakJzQyxxQkFNQ2tFLFdBQWEsU0FBNEJ4QyxFQUFleUMsR0FDeEQsSUFBSUMsRUFDQUMsRUFBWSxXQUNaQyxFQUFnQixnQkFDaEJDLEVBQWlCLGdCQUNqQkMsRUFBYyxDQUNkQyxZQUFZLEVBQ1pDLGlCQUFpQixHQUdyQixTQUFTQyxLQUVULFNBQVNDLEVBQWlCQyxFQUFVakgsR0FDaEMsSUFBSXlFLEVBQWNqQixLQUFLMEQsa0JBQWtCdkYsWUFBYTNCLEVBQVEsS0FBTWlILEdBQ3BFLE9BQU9uRCxFQUFjUyx5QkFBeUJFLEdBR2xELFNBQVMwQyxFQUFjRixFQUFVakgsR0FDN0IsSUFBSXlFLEVBQWNqQixLQUFLMEQsa0JBQWtCdkYsWUFBYTNCLEVBQVEsS0FBTWlILEdBQ3BFLE9BQU9uRCxFQUFjSyxRQUFRaUQsS0FBSyxLQUFNM0MsRUFBYSxLQUFNLE1BQU8sb0JBZ0l0RSxPQTdIQXNDLEVBQVd4RSxVQUFVMkUsa0JBQW9CLFNBQ3JDRyxFQUNBckgsRUFDQXNILEVBQ0FDLEdBRUEsSUFBSUMsRUFBT0gsRUFXWCxPQVZxQixPQUFsQkUsSUFDQ0MsR0FBUSxJQUFNRCxHQUVILE9BQVh2SCxJQUNBd0gsR0FBUSxJQUFNeEgsR0FFSyxPQUFuQnNILElBQ0FFLEdBQVEsSUFBTUYsR0FFbEJFLEdBQVEsU0FJWlQsRUFBV3hFLFVBQVVrRixRQUFVLFNBQWtCaEQsR0FDN0MsT0FBT1gsRUFBY0ssUUFDakJNLEVBQ0EsS0FDQSxNQUFPLHFEQUtmc0MsRUFBV3hFLFVBQVVtRixRQUFVLFNBQWtCVCxFQUFVdEMsRUFBYWdELEVBQVczSCxFQUFRNEgsR0FDdkYsSUFBSW5ELEVBTUosT0FKSUEsRUFEZSxRQUFoQkUsRUFDZW5CLEtBQUswRCxrQkFBa0J2RixZQUFhM0IsRUFBUTJILEVBQVdWLEdBRXZEekQsS0FBSzBELGtCQUFrQnZGLFlBQWEzQixFQUFRLEtBQU1pSCxHQUU3RG5ELEVBQWNLLFFBQ2pCTSxFQUNBc0IsS0FBSzhCLFVBQVVELEdBQ2ZqRCxFQUNBLHFCQUlSb0MsRUFBV3hFLFVBQVV1Rix1QkFBeUIsU0FBaUM5SCxFQUFRQyxHQUNuRixJQUFJOEgsRUFBTyxJQUFJQyxLQUNYQyxFQUFPekUsS0FDWG9ELEVBQVkzRyxTQUFXQSxFQUN2QmlJLE9BQU9DLEtBQUt2QixHQUFhd0IsSUFBSSxTQUFVQyxHQUNuQ0osRUFBS1AsUUFBUWYsRUFBZ0IsTUFBTzBCLEVBQWFySSxFQUFRNEcsRUFBWXlCLE1BRXpFN0UsS0FBS2tFLFFBQVFqQixFQUFXLE1BQU8sS0FBTXpHLEVBQVEsQ0FBQ3NJLFdBQWNQLEVBQUtRLFVBQVdDLGdCQUFrQixLQUdsR3pCLEVBQVd4RSxVQUFVa0csaUJBQW1CLFNBQTJCM0ksR0FTL0QsT0FSR0EsSUFDQ3lHLEVBQU8xRyxhQUFhQyxjQUFnQkEsR0FHcENpSCxFQUFXeEUsVUFBVW1HLFFBRGdCLGFBQXRDbkMsRUFBTzFHLGFBQWFDLGNBQ1lrSCxFQUVBRyxFQUU1QixDQUNId0IsU0FBVSxDQUNOQyxZQUFhcEMsRUFBbUJrQyxRQUFRdEIsS0FDcENaLEVBQ0FDLEdBRUpvQyxnQkFBaUJyQyxFQUFtQmtDLFFBQVF0QixLQUN4Q1osRUFDQUcsR0FFSm1DLGdCQUFpQnRDLEVBQW1Ca0MsUUFBUXRCLEtBQ3hDWixFQUNBRSxHQUVKcUMsZ0JBQWlCdkMsRUFBbUJrQyxRQUFRdEIsS0FDeENaLEVBQ0FHLEdBRUpxQyxZQUFheEMsRUFBbUJrQixRQUFRTixLQUNwQ1osRUFDQUUsRUFDQSxRQUdKdUMsZ0JBQWlCekMsRUFBbUJrQixRQUFRTixLQUN4Q1osRUFDQUcsRUFDQSxPQUVKbUIsdUJBQXdCdEIsRUFBbUJzQix1QkFBdUJWLEtBQzlEWixHQUVKMEMsaUJBQWtCMUMsRUFBbUJrQixRQUFRTixLQUN6Q1osRUFDQUMsRUFDQSxNQUNBLGNBRUowQyx5QkFBMEIzQyxFQUFtQmtCLFFBQVFOLEtBQ2pEWixFQUNBQyxFQUNBLE1BQ0Esa0JBRUoyQyx5QkFBMEI1QyxFQUFtQmtCLFFBQVFOLEtBQ2pEWixFQUNBRSxFQUNBLFFBR1IyQyxVQUFXLENBQ1A1QixRQUFTakIsRUFBbUJpQixRQUFRTCxLQUFLWixHQUN6Q2lDLGlCQUFrQmpDLEVBQW1CaUMsaUJBQWlCckIsS0FBS1osT0FNdkVBLEVBQXFCLElBQUlPLEdBSUMwQixtQkFuSmIsQ0FvSmQzRSxjQUFlbkYsWUFtQ2QySyxhQUFlLFdBQ2YsU0FBU0MsSUFDTC9GLEtBQUtnRyxPQUFTLEdBNkJsQixPQTFCQUQsRUFBYWhILFVBQVVrSCxhQUFlLFNBQXNCQyxFQUFXQyxHQUNuRSxJQUFJMUIsRUFBT3pFLEtBYVgsT0FaS0EsS0FBS2dHLE9BQU9FLEtBQ2JsRyxLQUFLZ0csT0FBT0UsR0FBYSxJQUc3QmxHLEtBQUtnRyxPQUFPRSxHQUFXRSxLQUFLRCxHQUU1QixXQUNJMUIsRUFBS3VCLE9BQU9FLEdBQWF6QixFQUFLdUIsT0FBT0UsR0FBV0csT0FBTyxTQUFVQyxHQUM3RCxPQUFPQSxJQUFvQkgsTUFPdkNKLEVBQWFoSCxVQUFVd0gsS0FBTyxTQUFlTCxFQUFXTSxHQUNwRCxJQUFJQyxFQUFRekcsS0FBS2dHLE9BQU9FLEdBQ3BCTyxHQUNBQSxFQUFNQyxRQUFRLFNBQVVQLEdBQ3BCQSxFQUFTUSxLQUFLLEtBQU1ILE1BS3pCLElBQUlULEVBL0JJLEdBaUNmYSx1QkFBeUIsV0FDekIsSUFBSUMsRUFBZ0IsQ0FDaEJDLFFBQVMsVUFDVDlLLFNBQVUsZ0NBQ1Y4SSxXQUFZLCtCQUNaRSxlQUFnQixtQ0FDaEIrQixRQUFTLGtCQUNUQyxLQUFNLFFBR05DLEVBQWUsYUFDZkMsRUFBYyxhQUNkQyxFQUFpQixZQUNqQkMsRUFBd0IsY0FDeEJDLEVBQXlCLDZDQUN6QkMsR0FBOEIsRUFDOUJDLEdBQWlDLEVBRXJDLFNBQVNDLEtBaUtULE9BL0pBQSxFQUF1QnpJLFVBQVUwSSxpQkFBbUIsU0FDaERDLEdBU0EsT0FQV2hELE9BQU9DLEtBQUtrQyxHQUFlUixPQUNsQyxTQUFnQ3NCLEdBQzVCLEdBQUlkLEVBQWNjLEdBQVVDLEtBQUtGLEdBQzdCLE9BQU9DLElBSVAsSUFHaEJILEVBQXVCekksVUFBVThJLDJCQUE2QixTQUMxRGpHLEdBRUEsT0FBT0EsRUFBU0EsRUFBU3RDLE9BQVMsR0FDN0J3SSxNQUFNWCxHQUFnQixHQUN0QlksT0FDQUMsTUFBTSxHQUFJLElBR25CUixFQUF1QnpJLFVBQVVrSixtQkFBcUIsU0FDbERyRyxFQUNBc0csR0FFQSxJQUNJQyxFQURBM0IsRUFBTyxHQUVQNEIsRUFBZSxHQUNuQixNQUFtQixTQUFmRixHQUNBMUIsRUFBSzZCLEdBQUt6RyxFQUFTQSxFQUFTdEMsT0FBUyxHQUNoQ3dJLE1BQU0sb0JBQ05RLE1BQ0FSLE1BQU0sWUFDTlMsUUFDTC9CLEVBQUtwQyxNQUFReEMsRUFBU0EsRUFBU3RDLE9BQVMsR0FDbkN3SSxNQUFNLGtCQUNOUSxNQUNBUCxPQUNBQyxNQUFNLEdBQUksR0FDUnhCLEdBRU5ZLEVBQXNCUSxLQUFLaEcsRUFBU0EsRUFBU3RDLE9BQVMsS0FHM0Q2SSxFQUFZdkcsRUFBU0EsRUFBU3RDLE9BQVMsR0FDbEN3SSxNQUFNLG9CQUNOUSxNQUNBUixNQUFNWCxHQUNOb0IsUUFDTC9CLEVBQU9qRSxLQUFLQyxNQUFNeEMsS0FBSzZILDJCQUEyQmpHLElBQ2xEd0csRUFBYUQsR0FBYTNCLEVBQ25CNEIsR0FUSXBJLEtBQUt3SSxhQUFhNUcsSUFZakM0RixFQUF1QnpJLFVBQVUwSixXQUFhLFNBQW9CN0csR0FDOUQsT0FDS3NGLEVBQVlVLEtBQUtoRyxFQUFTQSxFQUFTdEMsT0FBUyxLQUF5QixFQUFsQnNDLEVBQVN0QyxRQUlyRWtJLEVBQXVCekksVUFBVTJKLGNBQWdCLFNBQzdDOUcsRUFDQXNHLEdBRUEsSUFBSTFCLEVBQU8sR0FFWCxPQUFJYyxHQUNBQSxHQUE4QixFQUN2QnRILEtBQUt3SSxhQUFhNUcsSUFFekJ5RixFQUF1Qk8sS0FBS2hHLEVBQVNBLEVBQVN0QyxPQUFTLEtBRXZEa0gsRUFEU3hHLEtBQUsySSxVQUFVL0csRUFBU0EsRUFBU3RDLE9BQVMsR0FBSSxPQUN4Q1UsS0FBS3dJLGFBQWE1RyxHQUMxQjRFLElBRVhBLEVBQU9qRSxLQUFLQyxNQUNSWixFQUFTQSxFQUFTdEMsT0FBUyxHQUN0QndJLE1BQU1YLEdBQWdCLEdBQ3RCWSxPQUNBQyxNQUFNLEdBQUksSUFHWixDQURFaEksS0FBSzJJLFVBQVUvRyxFQUFTQSxFQUFTdEMsT0FBUyxHQUFJNEksR0FDdkMxQixLQUdwQmdCLEVBQXVCekksVUFBVXlKLGFBQWUsU0FDNUM1RyxHQUdBLElBRUksT0FEV1csS0FBS0MsTUFBTXhDLEtBQUs2SCwyQkFBMkJqRyxJQUV4RCxNQUFPZ0gsR0FDTCxPQUFPLE9BSWZwQixFQUF1QnpJLFVBQVU0SixVQUFZLFNBQ3pDL0csRUFDQXNHLEdBRUEsT0FBSUEsRUFDT3RHLEVBQ0ZrRyxNQUFNSSxHQUNOSyxRQUNBVCxNQUFNLG9CQUNOUSxNQUNBTixNQUFNLEdBQUksR0FFUnBHLEVBQ0ZrRyxNQUFNLG9CQUNOUSxNQUNBUixNQUFNLEtBQUssR0FDWEMsT0FDQUMsTUFBTSxHQUFJLElBSXZCUixFQUF1QnpJLFVBQVU4SixtQkFBcUIsU0FDbERqSCxHQUdBLE9BQUkyRixHQUNBQSxHQUFpQyxFQUMxQnZILEtBQUt3SSxhQUFhNUcsSUFRdEIsQ0FBQyxLQU5EVyxLQUFLQyxNQUNSWixFQUFTQSxFQUFTdEMsT0FBUyxHQUN0QndJLE1BQU1YLEdBQWdCLEdBQ3RCWSxPQUNBQyxNQUFNLEdBQUksTUFLdkJSLEVBQXVCekksVUFBVXlELE1BQVEsU0FBZVYsR0FDcERnSCxRQUFRQyxJQUFJakgsR0FDWixJQUFJa0gsRUFBU2xILEVBQUtnRyxNQUFNYixHQUNwQmlCLEVBQWFsSSxLQUFLeUgsaUJBQWlCdUIsRUFBT0EsRUFBTzFKLE9BQVMsSUFDMUQySixFQUFnQixDQUFFQyxLQUFNaEIsR0FDNUIsR0FBSWxJLEtBQUt5SSxXQUFXTyxHQUFTLENBQ3pCLEdBQW1CLFlBQWZkLEdBQTJDLFNBQWZBLEVBRTVCLE9BREFlLEVBQWNFLE9BQVNuSixLQUFLaUksbUJBQW1CZSxFQUFRZCxHQUNoRGUsRUFDSixHQUNZLG1CQUFmZixHQUNlLGVBQWZBLEdBQ2UsYUFBZkEsRUFHQSxPQURBZSxFQUFjRSxPQUFTbkosS0FBSzBJLGNBQWNNLEVBQVFkLEdBQzNDZSxFQUNKLEdBQW1CLFlBQWZmLEVBRVAsT0FEQWUsRUFBY0UsT0FBU25KLEtBQUs2SSxtQkFBbUJHLEVBQVFkLEdBQ2hEZSxJQUtaLElBQUl6QixFQW5MYyxHQTJMekI0QixZQUFjLFNBQTZCdEcsR0FFM0MsU0FBU3VHLEtBb0RULE9BbERBQSxFQUFZdEssVUFBVXVLLFdBQWEsU0FBeUJDLEVBQVVDLEVBQVNDLEdBQzNFLElBQUloRixFQUFPekUsS0FDWCxPQUFPLElBQUkrQixRQUFRLFNBQTRCQyxFQUFTQyxHQUNqRHNILEdBQ0lDLEdBQ0MvRSxFQUFLaUYscUJBQXFCakYsRUFBS2tGLGNBQzNCSCxFQUNBLGFBQ0EsV0FDQSx3QkFHUnhILEVBQVF5QyxFQUFLbUYsc0JBQXNCTCxFQUFVRSxLQUU3Q3hILEVBQU8sSUFBSTRILE1BQU0sNkNBSzdCUixFQUFZdEssVUFBVTZLLHNCQUF3QixTQUFnQ0wsRUFBVUUsR0FDcEYsSUFBSUssRUFBZSxFQUFtQjFMLFdBQVdxTCxHQUFrQmhMLFNBQVNpRCxLQUM1RSxPQUFPb0IsRUFBVytDLFVBQVU1QixRQUFRc0YsR0FBVTVILEtBQUssU0FBa0JvSSxHQUNqRUQsRUFBYUUsVUFBWUQsS0FJakNWLEVBQVl0SyxVQUFVMksscUJBQXVCLFNBQStCTyxHQUN4RXhMLFNBQVN5TCxLQUFLQyxZQUFZRixJQUc5QlosRUFBWXRLLFVBQVU0SyxjQUFnQixTQUNsQ1MsRUFDQUMsRUFDQW5CLEVBQ0FiLEdBRUEsSUFBSTRCLEVBQU94TCxTQUFTNkwsY0FBYyxRQVdsQyxPQVZJakMsR0FDQTRCLEVBQUtNLGFBQWEsS0FBTWxDLEdBRXhCZ0MsR0FDQUosRUFBS00sYUFBYSxNQUFPRixHQUV6Qm5CLEdBQ0FlLEVBQUtNLGFBQWEsT0FBUXJCLEdBRTlCZSxFQUFLTSxhQUFhLE9BQVFILEdBQ25CSCxHQUdKLElBQUlaLEVBdERHLENBd0RmdkcsWUFRQzBILG1CQUFxQixTQUFtQ3pILEdBWXhELFNBQVMwSCxLQTZJVCxPQTNJQUEsRUFBbUIxTCxVQUFVMkwsTUFBUSxXQUNqQzFLLEtBQUsySyxZQUFjLEdBQ25CM0ssS0FBSzRLLEtBQU8sQ0FDUkMsY0FBZXpNLFdBQ1gyRSxFQUFPekYsU0FBU0UsK0JBUzVCaU4sRUFBbUIxTCxVQUFVK0wscUJBQXVCLFNBQ2hEaEUsRUFDQWlFLEVBQ0FDLEVBQ0FDLEdBRUEsSUFBSUMsRUFBc0JsTCxLQUFLbUwsMEJBQTBCRixFQUFRRCxHQUM3REksRUFBaUJwTCxLQUFLcUwseUJBQ3RCTixFQUNBaEksRUFBT3VJLHFCQUNQLENBQUN2SSxFQUFPekYsU0FBU0ssd0JBR2pCNE4sRUFBbUJ2TCxLQUFLcUwseUJBQ3hCTCxFQUNBakksRUFBT3lJLG9CQUNQLENBQUN6SSxFQUFPekYsU0FBU0ksK0JBR2pCK04sRUFBYXpMLEtBQUtxTCx5QkFDbEJ2RSxFQUNBL0QsRUFBTzJJLGdCQUNQLENBQUMzSSxFQUFPekYsU0FBU00sbUJBT3JCLE9BSkFzTixFQUFvQmYsWUFBWWlCLEdBQ2hDRixFQUFvQmYsWUFBWW9CLEdBQ2hDTCxFQUFvQmYsWUFBWXNCLEdBRXpCUCxHQUdYVCxFQUFtQjFMLFVBQVU0TSwrQkFBaUMsV0FDMUQsSUFBSTlMLEVBQ0ErTCxFQUFpQixHQUNqQm5QLEVBQVdzRyxFQUFPaEYsWUFBY2dGLEVBQU94RyxvQkFBb0JFLFNBQzNERCxFQUFTdUcsRUFBT3hHLG9CQUFvQkMsT0FDeEMsSUFBSXFELEVBQUlHLEtBQUsySyxZQUFZckwsT0FBUyxFQUFRLEdBQUxPLEVBQVFBLElBQ3pDLEdBQUdHLEtBQUsySyxZQUFZOUssR0FBR21MLFNBQVd2TyxFQUNsQyxDQUNJLEdBQUl1RCxLQUFLMkssWUFBWTlLLEdBQUdtSCxLQVVwQixNQVRBNEUsRUFBZXhGLEtBQ1gsQ0FDSTVKLE9BQVFBLEVBQ1IySCxVQUFXbkUsS0FBSzJLLFlBQVk5SyxHQUFHd0ksR0FBSyxRQUNwQ3dELFlBQVksSUFHcEI3TCxLQUFLMkssWUFBWTlLLEdBQUdtSCxNQUFPLEVBTXZDLE9BQU80RSxHQUtYbkIsRUFBbUIxTCxVQUFVb00sMEJBQTRCLFNBQW9DRixFQUFRRCxHQUNqRyxJQUFJRSxFQUFzQnpNLFNBQVM2TCxjQUFjLE9BS2pELE9BSkFZLEVBQW9CWSxVQUFVQyxJQUFJaEosRUFBT3pGLFNBQVNHLHVCQUM3Q3dOLEdBQVVsSSxFQUFPeEcsb0JBQW9CRSxXQUFhdU8sR0FDbkRFLEVBQW9CWSxVQUFVQyxJQUFJaEosRUFBT3pGLFNBQVNDLDRCQUUvQzJOLEdBR1hULEVBQW1CMUwsVUFBVXNNLHlCQUEyQixTQUFtQ3ZKLEVBQU1rSyxFQUFXQyxHQUN4RyxJQUFJQyxFQUFNek4sU0FBUzZMLGNBQWMsT0FLakMsT0FKQTJCLEVBQWF2RixRQUFRLFNBQW1CeUYsR0FDcENELEVBQUlKLFVBQVVDLElBQUlJLEtBRXRCRCxFQUFJbEMsVUFBWWxJLEVBQ1RvSyxHQUtYekIsRUFBbUIxTCxVQUFVcU4sa0JBQW9CLFNBQTRCQyxHQUN6RSxJQUFJQyxFQUFpQixHQU1yQixPQUxHRCxHQUNDQSxFQUFlM0YsUUFBUSxTQUFrQ3ZHLEdBQ3JEbU0sRUFBZWxHLEtBQUtqRyxLQUdyQm1NLEdBR1g3QixFQUFtQjFMLFVBQVV3TixrQkFBb0IsU0FBNEJELEdBQ3ZCLEVBQS9DdE0sS0FBSzJMLGlDQUFpQ3JNLFNBQ3JDeUQsRUFBT3hHLG9CQUFvQitHLGlCQUFrQixHQUVqRHRELEtBQUsySyxZQUFjMkIsRUFDbkJ0TSxLQUFLd00sbUJBR1QvQixFQUFtQjFMLFVBQVUwTix3QkFBMEIsU0FDbkRDLEdBRUExTSxLQUFLMkssWUFBWXZFLEtBQUtzRyxJQUkxQmpDLEVBQW1CMUwsVUFBVXlOLGdCQUFrQixXQUMzQyxJQUNJck0sRUFEQXNFLEVBQU96RSxLQUVYQSxLQUFLMk0sWUFDTDNNLEtBQUsySyxZQUFZakUsUUFBUSxTQUF3QmtHLEdBQzdDek0sRUFBVXNFLEVBQUtxRyxxQkFDWDhCLEVBQWM5RixRQUNkOEYsRUFBY3JJLEtBQ2RxSSxFQUFjNUIsT0FDZDRCLEVBQWM1RixNQUVsQnZDLEVBQUttRyxLQUFLQyxjQUFjVixZQUFZaEssTUFLNUNzSyxFQUFtQjFMLFVBQVU0TixVQUFZLFdBQ3JDLEtBQU8zTSxLQUFLNEssS0FBS0MsY0FBY3pLLFlBQzNCSixLQUFLNEssS0FBS0MsY0FBY3hLLFlBQVlMLEtBQUs0SyxLQUFLQyxjQUFjekssYUFJN0QsSUFBSXFLLEVBekpVLENBMkp0QnRQLFlBU0MwUixnQkFBbUIsU0FBaUM5SixFQUFRK0MsRUFBY2MsR0FDMUUsU0FBU2tHLElBQ0wsSUFBSXJJLEVBQU96RSxLQUM4QixhQUF0QytDLEVBQU8xRyxhQUFhQyxlQUNuQndRLEVBQWdCL04sVUFBVWdPLFlBMEZsQyxTQUEyQ3ZRLEdBQ3ZDLElBQUlpSSxFQUFPekUsS0FDWCxPQUFPLElBQUkrQixRQUFRLFNBQVNDLEdBQ3hCeUMsRUFBS3VJLHNCQUFzQnhRLEdBQzNCd0YsT0E5RjBFNEIsS0FBSzVELE1BQy9FOE0sRUFBZ0IvTixVQUFVaU8sc0JBaUdsQyxTQUFxRHhRLEdBQ2pELElBQUlnSyxFQUNEekQsRUFBT2tLLDBCQUNObEssRUFBT2tLLHlCQUF5QkMsUUFFcENuSyxFQUFPa0sseUJBQTJCbkssV0FBV3FDLFNBQVNHLGdCQUFnQjlJLEdBQ3RFdUcsRUFBT2tLLHlCQUF5QkUsbUJBQXFCLFdBQzFCLEdBQW5Cbk4sS0FBS29OLFlBQWtDLEtBQWZwTixLQUFLcU4sU0FDN0I3RyxFQUFPSSxFQUF1QnBFLE1BQU14QyxLQUFLc04sZ0JBRXJDeEgsRUFBYVMsS0FBS0MsRUFBSzBDLEtBQU0xQyxFQUFLMkMsU0FJOUNwRyxFQUFPa0sseUJBQXlCdEssUUEvR2tFaUIsS0FBSzVELE1BQ25HOE0sRUFBZ0IvTixVQUFVd04sa0JBaUhsQyxTQUF5Qy9GLEdBQ2xDQSxHQUNDOUIsT0FBT0MsS0FBSzZCLEdBQU01QixJQUFJLFNBQVUySSxHQUM1Qi9HLEVBQUsrRyxHQUFLbEYsR0FBS2tGLEVBQ2YvQyxtQkFBbUJpQyx3QkFBd0JqRyxFQUFLK0csTUFHeEQvQyxtQkFBbUJnQyxtQkF4SDhENUksS0FBSzVELE1BQ2xGOEYsRUFBYUcsYUFBYSxVQUFXLFNBQVVPLEdBQzNDL0IsRUFBSzhILGtCQUFrQi9GLEtBRTNCVixFQUFhRyxhQUFhLE9BQVEsU0FBVU8sR0FDckNBLEdBQ0NnRSxtQkFBbUJHLFlBQVlqRSxRQUFRLFNBQVVJLElBQzFDQSxFQUFRdUIsR0FBSzdCLEVBQUs2QixNQUNqQnZCLEVBQVFFLEtBQU9SLEVBQUtwQyxNQUNwQm9HLG1CQUFtQmdDLHlCQU1uQ00sRUFBZ0IvTixVQUFVZ08sWUEwQ2xDLFNBQTJCdlEsR0FDdkIsSUFBSWlJLEVBQU96RSxLQUNYLE9BQU8sSUFBSStCLFFBQVEsU0FBVUMsR0FDekIsT0FBT3lDLEVBQUt1SSxzQkFBc0J4USxHQUFRbUYsS0FBTSxXQUN4Q0ssU0E5Q2lENEIsS0FBSzVELE1BQzlEOE0sRUFBZ0IvTixVQUFVaU8sc0JBaUVsQyxTQUFxQ3hRLEdBQ2pDLElBQUlpSSxFQUFPekUsS0FDWCxPQUFPOEMsV0FBV3FDLFNBQVNHLGdCQUFnQjlJLEVBQXBDc0csR0FBOENuQixLQUFLLFNBQVU2RSxHQUNoRS9CLEVBQUs4SCxrQkFBa0IvRixNQXBFc0Q1QyxLQUFLNUQsTUFDbEY4TSxFQUFnQi9OLFVBQVV3TixrQkFrRGxDLFNBQWlDL0YsR0FDekIsSUFBSThGLEVBQ0FrQixFQUFpQixHQUNsQmhILEdBQ0M5QixPQUFPQyxLQUFLNkIsR0FBTTVCLElBQUksU0FBVTJJLEdBQzVCL0csRUFBSytHLEdBQUtsRixHQUFLa0YsRUFDZkMsRUFBZXBILEtBQUtJLEVBQUsrRyxNQUdqQy9DLG1CQUFtQmdDLGtCQUNuQkYsRUFBaUI5QixtQkFBbUI0QixrQkFBa0JvQixHQUN0RGhELG1CQUFtQitCLGtCQUFrQkQsSUE3RGdDMUksS0FBSzVELE9Bd0xsRixPQXRKQThNLEVBQWdCL04sVUFBVTJMLE1BQVEsV0FDOUJGLG1CQUFtQkUsU0F1RXZCb0MsRUFBZ0IvTixVQUFVME8saUJBQW1CLFdBQ3pDakQsbUJBQW1CRyxZQUFjLElBR3JDbUMsRUFBZ0IvTixVQUFVMk8sK0JBQWlDLFNBQXlDbFIsRUFBUUMsR0FDeEdxRyxXQUFXcUMsU0FBU2IsdUJBQXVCOUgsRUFBUUMsSUFHdkRxUSxFQUFnQi9OLFVBQVU0TyxpQkFBbUIsU0FBbUJ4SixHQUM1RHJCLFdBQVdxQyxTQUFTTSxnQkFDaEJ0QixFQUNBcEIsRUFBT3hHLG9CQUFvQkMsT0FDM0J1RyxFQUFPeEcsb0JBQW9CNEgsS0FJbkMySSxFQUFnQi9OLFVBQVU2TyxpQkFBbUIsU0FBMkJwUixHQUNwRSxJQUFJK0gsRUFBTyxJQUFJQyxLQUNmMUIsV0FBV3FDLFNBQVNPLGlCQUFpQmxKLEVBQVErSCxFQUFLUSxZQUd0RCtILEVBQWdCL04sVUFBVXlHLFlBQWMsU0FBc0JxSSxHQUMxRCxJQXhISXRKLEVBQ0F1SixFQVlKekYsRUEyR0l2QixFQUFVOUcsS0FBSytOLDZCQUNmeEosR0F6SEFBLEVBQU8sSUFBSUMsS0FDWHNKLEVBQW1ELElBQXhDdkosRUFBS3lKLGFBQWFDLFdBQVczTyxPQUFnQixJQUFNaUYsRUFBS3lKLGFBQWV6SixFQUFLeUosYUFDcEZ6SixFQUNGMkosV0FDQUQsV0FDQUUsT0FBTyxJQUFLTCxJQXFIYmxCLEVBM0dHLENBQ0g1QixPQTBHbUQ2QyxFQXpHbkQvRyxRQXlHb0NBLEVBeEdwQ0UsTUF3RytELEVBdkcvRHpDLEtBdUc2Q0EsRUF0RzdDOEQsR0FBSUEsR0F1R2lDLGFBQXRDdEYsRUFBTzFHLGFBQWFDLGdCQUNuQmtPLG1CQUFtQmlDLHdCQUF3QkcsR0FDM0NwQyxtQkFBbUJnQyxtQkFFdkJ4TSxLQUFLb08sd0JBQXdCeEIsSUFHakNFLEVBQWdCL04sVUFBVWdQLDJCQUE2QixXQUNuRCxJQUFJNU4sRUFBVS9CLFdBQVcyRSxFQUFPL0UseUJBQzVCb0csRUFBUWpFLEVBQVFpRSxNQUVwQixPQURBakUsRUFBUWlFLE1BQVEsR0FDVEEsR0FHWDBJLEVBQWdCL04sVUFBVXNQLGlCQUFtQixXQUN6QyxJQUFJaEMsRUFBaUI3QixtQkFBbUJtQixpQ0FDYixFQUF4QlUsRUFBZS9NLFNBQ2R3SixRQUFRQyxJQUFJc0QsR0FDWkEsRUFBZTNGLFFBQVEsU0FBa0J2RyxHQUNyQzJDLFdBQVdxQyxTQUFTUyx5QkFDaEJ6RixFQUFRZ0UsVUFDUmhFLEVBQVEzRCxPQUNSMkQsRUFBUTBMLGNBR2hCOUksRUFBT3hHLG9CQUFvQitHLGlCQUFrQixHQUVqRGtILG1CQUFtQmdDLG1CQUd2Qk0sRUFBZ0IvTixVQUFVcVAsd0JBQTBCLFNBQWtDeEIsR0FDL0VBLEVBQWM1QixTQUFXakksRUFBT3hHLG9CQUFvQkUsVUFDbkRxRyxXQUFXcUMsU0FBU1EseUJBQXlCNUMsRUFBT3hHLG9CQUFvQkMsUUFBTyxHQUVuRnNHLFdBQVdxQyxTQUFTSyxZQUNoQixLQUNBekMsRUFBT3hHLG9CQUFvQkMsT0FDM0JvUSxJQUtSRSxFQUFnQi9OLFVBQVV1UCw2QkFBK0IsU0FBdUNDLEdBQzVGQSxFQUFTN0gsUUFBUSxTQUFzQjhILEdBQ25DMUwsV0FBV3FDLFNBQVNNLGdCQUNoQitJLEVBQWdCckssVUFDaEJxSyxFQUFnQmhTLE9BQ2hCZ1MsRUFBZ0IzQyxlQU1yQixJQUFJaUIsRUEvTVEsQ0FpTnBCM1IsV0FBWTJLLGFBQWNjLHdCQVN6QjZILGdCQUFrQixTQUEwQjFMLEVBQVFsRSxHQWdCcEQsU0FBUzZQLElBQ0wxTyxLQUFLMk8sTUFBUSxHQTZIakIsT0ExSEFELEVBQWdCM1AsVUFBVTJMLE1BQVEsYUFHbENnRSxFQUFnQjNQLFVBQVU2UCxrQkFBb0IsU0FDMUNwUyxFQUNBcVMsR0FFQSxJQUFJQyxFQUFVclEsU0FBUzZMLGNBQWMsT0FDakN5RSxFQUFZdFEsU0FBUzZMLGNBQWMsT0FDbkMwRSxFQUFnQnZRLFNBQVM2TCxjQUFjLE9BZ0IzQyxPQWRBd0UsRUFBUWhELFVBQVVDLElBQUloSixFQUFPL0csU0FBU0Msd0JBRXRDOFMsRUFBVWpELFVBQVVDLElBQUloSixFQUFPL0csU0FBU0UsMkJBQ3hDNlMsRUFBVS9FLFVBQVl4TixFQUVsQnFTLEVBQ0FHLEVBQWNsRCxVQUFVQyxJQUFJaEosRUFBTy9HLFNBQVNJLGlDQUU1QzRTLEVBQWNsRCxVQUFVQyxJQUFJaEosRUFBTy9HLFNBQVNHLGtDQUdoRDJTLEVBQVEzRSxZQUFZNEUsR0FDcEJELEVBQVEzRSxZQUFZNkUsR0FFYkYsR0FHWEosRUFBZ0IzUCxVQUFVa1EsWUFBYyxTQUFzQkMsR0FDMURsUCxLQUFLMk8sTUFBUU8sR0FHakJSLEVBQWdCM1AsVUFBVW9RLG9CQUFzQixTQUM1Q0MsRUFDQTVTLEVBQ0E2UyxHQUVBLElBQUlDLEVBQWV0UCxLQUFLc1AsYUFBYUYsRUFBS3RLLFlBQzFDdUssRUFBVWpKLEtBQUssQ0FDWDVKLE9BQVFBLEVBQ1IrUyxZQUFhdlAsS0FBSzRPLGtCQUFrQnBTLEVBQVE4UyxHQUM1Q0UsT0FBUUYsRUFDUkcsU0FBUyxFQUNUekssZUFBZ0JvSyxFQUFLcEssZUFDckIxQixnQkFBaUI4TCxFQUFLOUwsZ0JBQ3RCd0IsV0FBWXNLLEVBQUt0SyxXQUNqQnJJLFNBQVUyUyxFQUFLM1MsWUFJdkJpUyxFQUFnQjNQLFVBQVUyUSx1QkFBeUIsU0FBeUJsVCxFQUFRc0ksR0FDaEYsSUFBSTZLLEVBQVkzUCxLQUFLNFAsd0JBQXdCcFQsR0FDN0N3RCxLQUFLMk8sTUFBTWdCLEdBQVc3SyxXQUFhQSxFQUNuQzlFLEtBQUsyTyxNQUFNZ0IsR0FBV0gsT0FBU3hQLEtBQUtzUCxhQUFheEssR0FDakQ5RSxLQUFLMk8sTUFBTWdCLEdBQVdKLFlBQWN2UCxLQUFLNE8sa0JBQ3JDcFMsRUFDQXdELEtBQUtzUCxhQUFheEssS0FNMUI0SixFQUFnQjNQLFVBQVU2USx3QkFBMEIsU0FBaUNwVCxHQUNqRixJQUFJcVQsRUFBYzdQLEtBQ2QyUCxFQUFZLEtBT2hCLE9BTkFqTCxPQUFPQyxLQUFLa0wsRUFBWWxCLE9BQU8vSixJQUFJLFNBQWlCMkksR0FJaEQsT0FISXNDLEVBQVlsQixNQUFNcEIsR0FBSy9RLFNBQVdBLElBQ2xDbVQsRUFBWXBDLElBRVQsSUFFSm9DLEdBTVhqQixFQUFnQjNQLFVBQVV1USxhQUFlLFNBQXVCUSxHQUU1RCxPQURXLElBQUl0TCxNQUNITyxVQUFZK0ssR0FBc0IvTSxFQUFPbEcsU0FBU0UsaUJBSWxFMlIsRUFBZ0IzUCxVQUFVZ1IsYUFBZSxXQUNyQy9QLEtBQUsyTyxNQUFNakksUUFBUSxTQUFxQnZHLEdBQ3BDQSxFQUFRc1AsU0FBaUYsSUFBdkV0UCxFQUFRM0QsT0FBT3dULFFBQVFqTixFQUFPckcsMEJBQTBCQyxhQUtsRitSLEVBQWdCM1AsVUFBVWtSLGlCQUFtQixXQUN6Q3BSLEVBQU9HLFVBQVVnQixLQUFLMk8sTUFBTyxFQUFHM08sS0FBSzJPLE1BQU1yUCxPQUFTLEVBQUd5RCxFQUFPckcsMEJBQTBCRSxTQUc1RjhSLEVBQWdCM1AsVUFBVW1SLGNBQWdCLFdBQ3RDbFEsS0FBSzJPLE1BQVEsSUFJakJELEVBQWdCM1AsVUFBVW9SLGFBQWUsWUFnQnpDLFNBQTZCalEsR0FDekIsSUFBSUMsRUFBVS9CLFdBQVc4QixHQUN6QixLQUFPQyxFQUFRQyxZQUNYRCxFQUFRRSxZQUFZRixFQUFRQyxZQWxCaENILENBQW9COEMsRUFBTzNILElBQUlDLHFCQUMvQjJFLEtBQUsyTyxNQUFNakksUUFBUSxTQUFrQjBKLEdBQzdCQSxFQUFLWCxTQUNMclIsV0FBVzJFLEVBQU8zSCxJQUFJQyxxQkFBcUI4TyxZQUFZaUcsRUFBS2IsZ0JBbUJqRSxJQUFJYixFQTlJTyxDQWdKbkJ2VCxXQUFZMEQsUUFRWHdSLFVBQVksU0FBb0N0TixFQUFRRCxFQUFZd04sRUFBY0MsRUFBYzFSLEVBQVFpSCxHQUV4RyxJQUFJMEssRUFBYSxHQUVqQixTQUFTQyxJQUNMelEsS0FBSzBRLG9CQStQVCxPQTVQQUQsRUFBb0IxUixVQUFVNFIsU0FBVyxXQUNyQ0wsRUFBYTVGLE1BQU0zSCxHQUNuQi9DLEtBQUtvRixjQUNMcEYsS0FBSzRRLCtCQUNMNVEsS0FBSzZRLDBCQUdUSixFQUFvQjFSLFVBQVUyUixrQkFBb0IsV0FDOUMsSUFBSWpNLEVBQU96RSxLQUNYOEYsRUFBYUcsYUFBYSxXQUFZLFNBQVVPLEdBQzVDLElBQUk2SSxFQUFZLEdBQ2I3SSxhQUFnQnNLLFFBQ2Z0SyxFQUFPQSxFQUFLLElBRWhCOUIsT0FBT0MsS0FBSzZCLEdBQU01QixJQUFJLFNBQXdCcEksR0FDMUMrVCxFQUFhcEIsb0JBQ1QzSSxFQUFLaEssR0FDTEEsRUFDQTZTLEtBR1JrQixFQUFhNUIsTUFBUTRCLEVBQWE1QixNQUFNUixPQUFPa0IsR0FDL0MsSUFBSTBCLEVBQVl0TSxFQUFLdU0sbUNBQ3JCdk0sRUFBS3dNLG1CQUFtQkYsR0FDeEJ0TSxFQUFLeU0scUJBRVRwTCxFQUFhRyxhQUFhLGFBQWMsU0FBVU8sR0FDOUMsSUFBSWhLLEVBQVNnSyxFQUFLLEdBQ2QxQixFQUFhMEIsRUFBSyxHQUN0QitKLEVBQWFiLHVCQUF1QmxULEVBQVFzSSxLQUVoRGdCLEVBQWFHLGFBQWEsaUJBQWtCLFNBQVVPLEdBQ2xELElBQUltSixFQUFZWSxFQUFhWCx3QkFBd0JwSixFQUFLLElBQzFEK0osRUFBYTVCLE1BQU1nQixHQUFXM0ssZUFBaUJ3QixFQUFLLEdBQ3BEL0IsRUFBSzBNLHFDQU1iVixFQUFvQjFSLFVBQVVxUyxtQ0FBcUMsV0FDL0QsSUFBSUMsRUFBa0I5TyxLQUFLOEIsVUFBVSxDQUNqQ2dDLE9BQVF0RCxFQUFPckcsMEJBQTBCQyxTQUN6QzJVLEtBQU12TyxFQUFPckcsMEJBQTBCRSxPQUN2QzJVLGNBQWV4TyxFQUFPeEcsb0JBQW9CQyxTQUU5Q2dWLGFBQWFDLFFBQVExTyxFQUFPOUUsbUJBQW9Cb1QsSUFHcERaLEVBQW9CMVIsVUFBVWlTLGlDQUFtQyxXQUM3RCxJQUFJSyxFQUFrQkcsYUFBYUUsUUFBUTNPLEVBQU85RSxvQkFDOUM4UyxFQUFZLEtBT2hCLE9BTklNLElBQ0FOLEVBQVl4TyxLQUFLQyxNQUFNNk8sR0FDdkJ0TyxFQUFPckcsMEJBQTBCQyxTQUFXb1UsRUFBVTFLLE9BQ3REdEQsRUFBT3JHLDBCQUEwQkUsT0FBU21VLEVBQVVPLEtBQ3BEdk8sRUFBT3hHLG9CQUFvQkMsT0FBU3VVLEVBQVVRLGVBRTNDUixHQUdYTixFQUFvQjFSLFVBQVVrUyxtQkFBcUIsU0FBNEJGLEdBQ3ZFQSxJQUNJQSxFQUFVMUssU0FDVmpJLFdBQVcyRSxFQUFPM0gsSUFBSUsscUJBQXFCMkksTUFBUTJNLEVBQVUxSyxPQUM3RHJHLEtBQUtxRyxVQUVMMEssRUFBVU8sT0FDVmxULFdBQVcyRSxFQUFPM0gsSUFBSU0sb0JBQW9CMEksTUFBUTJNLEVBQVVPLEtBQzVEdFIsS0FBS3NSLFFBRUxQLEVBQVVRLGdCQUNWeE8sRUFBT3hHLG9CQUFvQkMsT0FBU3VVLEVBQVVRLGNBQzlDdlIsS0FBSzJSLDBCQUEwQjVPLEVBQU94RyxvQkFBb0JDLFdBT3RFaVUsRUFBb0IxUixVQUFVc0gsT0FBUyxXQUNuQ3RELEVBQU9yRywwQkFBMEJDLFNBQVd5QixXQUFXMkUsRUFBTzNILElBQUlLLHFCQUFxQjJJLE1BQ3ZGcEUsS0FBS29SLHFDQUNMYixFQUFhUixhQUFhaE4sRUFBT3JHLDBCQUEwQkMsVUFDM0Q0VCxFQUFhSixnQkFJakJNLEVBQW9CMVIsVUFBVXVTLEtBQU8sV0FDakN2TyxFQUFPckcsMEJBQTBCRSxPQUFTd0IsV0FBVzJFLEVBQU8zSCxJQUFJTSxvQkFBb0IwSSxNQUNwRnBFLEtBQUtvUixxQ0FDTGIsRUFBYU4sbUJBQ2JNLEVBQWFKLGdCQUdqQk0sRUFBb0IxUixVQUFVNlMsb0JBQXNCLFdBQ2hELElBQUluTixFQUFPekUsS0FDWDhRLE1BQU1lLEtBQUs5TyxFQUFPK08sT0FBT3BMLFFBQVEsU0FBdUJ2RyxHQUNoREEsRUFBUTRSLGlCQUNKLFFBQ0F0TixFQUFLdU4sYUFBYXBPLEtBQ2RhLEVBQ0F0RSxFQUFRQyxXQUFXNlIsZUFNdkN4QixFQUFvQjFSLFVBQVVtUyxpQkFBbUIsV0FDN0NYLEVBQWFKLGVBQ2JuUSxLQUFLa1Msc0JBQ0xsUyxLQUFLbVIsa0NBQ0xuUixLQUFLNFIsdUJBR1RuQixFQUFvQjFSLFVBQVVtVCxvQkFBc0IsV0FDaERuUCxFQUFPK08sTUFBUTFULFdBQ1gyRSxFQUFPL0csU0FBU0Msd0JBQXdCLElBSWhEd1UsRUFBb0IxUixVQUFVcUcsWUFBYyxXQUN4QyxJQUFJb0IsRUFDQTJMLEVBQTRCclAsRUFBV3FDLFNBQVNDLFlBQVksTUFDaEUrTSxFQUEwQmhGLG1CQUFxQixXQUN2Q25OLEtBQUtxTixTQUNMN0csRUFBT0ksdUJBQXVCcEUsTUFBTXhDLEtBQUtzTixnQkFFckN4SCxFQUFhUyxLQUFLQyxFQUFLMEMsS0FBTTFDLEVBQUsyQyxTQUk5Q2dKLEVBQTBCeFAsT0FDMUJJLEVBQU9xUCwwQkFBNEJELEdBSXZDMUIsRUFBb0IxUixVQUFVaVQsYUFBZSxTQUFzQnhWLEdBQy9Ed0QsS0FBSzJSLDBCQUEwQm5WLEdBQy9Cd0QsS0FBS3FTLDBCQUEwQjdWLElBS25DaVUsRUFBb0IxUixVQUFVNFMsMEJBQTRCLFNBQ3REblYsR0FFQSxJQUFJaUksRUFBT3pFLEtBQ1grQyxFQUFPeEcsb0JBQW9CQyxPQUFTQSxFQUNwQzhULEVBQWE3QyxtQkFDYjZDLEVBQWF2RCxZQUFZdlEsR0FDcEJtRixLQUFLLFdBQ0Z2RCxXQUFXMkUsRUFBTzNILElBQUlFLCtCQUErQndRLFVBQVV3RyxPQUFPdlAsRUFBT2xGLGlCQUM3RTRHLEVBQUsyTSx1Q0FFYnRPLEVBQVdxQyxTQUFTUSx5QkFBeUJuSixHQUFRLElBS3pEaVUsRUFBb0IxUixVQUFVd1QsK0JBQWlDLFdBRTNEakMsRUFBYXZELFlBQVloSyxFQUFPeEcsb0JBQW9CQyxRQUNwRHdELEtBQUtxUywwQkFBMEJ0UCxFQUFPeEcsb0JBQW9CQyxTQUk5RGlVLEVBQW9CMVIsVUFBVTZSLDZCQUErQixXQUN6RCxJQUFJbk0sRUFBT3pFLEtBQ1g1QixXQUFXMkUsRUFBTzNILElBQUlHLCtCQUErQndXLGlCQUNqRCxRQUNBbEYsZ0JBQWdCckgsWUFBWTVCLEtBQUtpSixnQkFBaUI5SixFQUFPaEYsYUFFN0RLLFdBQVcyRSxFQUFPM0gsSUFBSUksNkJBQTZCdVcsaUJBQy9DLFFBQ0F0TixFQUFLK04sa0JBQWtCNU8sS0FBS2EsSUFFaENyRyxXQUFXMkUsRUFBTzNILElBQUlLLHFCQUFxQnNXLGlCQUN2QyxRQUNBdE4sRUFBSzRCLE9BQU96QyxLQUFLYSxJQUVyQnJHLFdBQVcyRSxFQUFPM0gsSUFBSU0sb0JBQW9CcVcsaUJBQ3RDLFFBQ0F0TixFQUFLNk0sS0FBSzFOLEtBQUthLElBRW5CaEcsU0FBU3NULGlCQUFpQixZQUFhbEYsZ0JBQWdCd0IsaUJBQWlCekssS0FBS2lKLG1CQUlqRjRELEVBQW9CMVIsVUFBVXNULDBCQUE0QixTQUFvQzdWLEdBQzFGLElBQUltVCxFQUFZWSxFQUFhWCx3QkFBd0JwVCxHQUNyRCtULEVBQWE1QixNQUFNZ0IsR0FBVzNLLGdCQUFpQixFQUMvQ3NMLEVBQWFoQyw2QkFBNkIsQ0FBQyxDQUN2QzlSLE9BQVFBLEVBQ1IySCxVQUFXLGlCQUNYMEgsWUFBWSxLQUVoQjdMLEtBQUttUixtQ0FJVFYsRUFBb0IxUixVQUFVeVQsa0JBQW9CLFdBQzlDcFUsV0FBVzJFLEVBQU8zSCxJQUFJRSwrQkFBK0J3USxVQUFVQyxJQUFJaEosRUFBT2xGLGlCQUMxRWtGLEVBQU94RyxvQkFBb0JDLE9BQVMsS0FDcEN1RyxFQUFPa0sseUJBQXlCQyxRQUNoQ2xOLEtBQUtvUixzQ0FJVFgsRUFBb0IxUixVQUFVb1MsZ0NBQWtDLFdBQzVELElBQUlzQixFQUNKL04sT0FBT0MsS0FBSzRMLEVBQWE1QixPQUFPL0osSUFBSSxTQUFlMkksR0FZL0MsT0FYQWtGLEVBQWdCbEMsRUFBYTVCLE1BQU1wQixHQUFLZ0MsWUFBWW1ELHVCQUNoRDNQLEVBQU83RSw0QkFDVCxHQUNFcVMsRUFBYTVCLE1BQU1wQixHQUFLdkksaUJBQW1CeU4sS0FDM0NBLEVBQWdCaFUsU0FBUzZMLGNBQWMsUUFDekJ3QixVQUFVQyxJQUFJaEosRUFBTzdFLDRCQUNuQ3FTLEVBQWE1QixNQUFNcEIsR0FBS2dDLFlBQVlwRixZQUFZc0ksS0FFaERsQyxFQUFhNUIsTUFBTXBCLEdBQUt2SSxnQkFBa0J5TixHQUMxQ2xDLEVBQWE1QixNQUFNcEIsR0FBS2dDLFlBQVlsUCxZQUFZb1MsSUFFN0MsS0FJZmhDLEVBQW9CMVIsVUFBVThSLHVCQUF5QixXQUNuRCxJQUFJcE0sRUFBT3pFLEtBQ1h3USxFQUFXcEssS0FBT3VNLFlBQVksV0FDMUJqTyxPQUFPQyxLQUFLNEwsRUFBYTVCLE9BQU8vSixJQUFJLFNBQVVnTyxHQUMxQ3JDLEVBQWFiLHVCQUNUYSxFQUFhNUIsTUFBTWlFLEdBQVFwVyxPQUMzQitULEVBQWE1QixNQUFNaUUsR0FBUTlOLGNBR25DTCxFQUFLeU0sb0JBQ1BuTyxFQUFPbEcsU0FBU0Msb0JBR3RCMlQsRUFBb0IxUixVQUFVOFQsU0FBVyxXQUNyQ3JDLEVBQVc5SixRQUFRLFNBQWdCMkIsR0FDL0J5SyxjQUFjekssS0FFbEJ3RSxnQkFBZ0JZLG1CQUNoQjhDLEVBQWFMLGdCQUNWbk4sRUFBT2tLLDBCQUNObEssRUFBT2tLLHlCQUF5QkMsUUFFcENuSyxFQUFPcVAsMEJBQTBCbEYsU0FHOUIsSUFBSXVELEVBcFFDLENBc1FidFYsV0FBWTJILFdBQVkrSixnQkFBaUI0QixnQkFBaUI1UCxFQUFRaUgsY0FJakVuSyxTQUFXLFNBQTBCb0gsR0FFckMsSUFBSWdRLEVBQWUsR0FDZkMsRUFBYSxDQUNiQyxVQUFXLENBQ1BDLFlBQWEsU0FFakJDLFFBQVMsQ0FDTEQsWUFBYSxTQUVqQkUsVUFBVyxDQUNQRixZQUFhLFNBRWpCRyxtQkFBb0IsQ0FDaEJILFlBQWEsU0FHakJJLGNBQWUsQ0FDWEosWUFBYSxXQUVqQkssVUFBVyxDQUNQTCxZQUFhLFdBRWpCTSxTQUFVLENBQ05OLFlBQWEsV0FFakJPLFlBQWEsQ0FDVFAsWUFBYSxXQUlqQlEsZ0JBQWlCLENBQ2JSLFlBQWEsUUFDYlMsS0FBTSxPQUVWQyxxQkFBc0IsQ0FDbEJWLFlBQWEsUUFDYlMsS0FBTSxZQUVWRSxrQkFBbUIsQ0FDZlgsWUFBYSxRQUNiUyxLQUFNLFVBSWQsU0FBU0csS0FvRFQsT0FsREFBLEVBQVMvVSxVQUFVZ1YsbUJBQXFCLFNBQTZCeEcsR0FDakUsSUFFSTJGLEVBRkFjLEVBQU0sR0FDTnZQLEVBQU96RSxLQXNCWCxPQXBCQTBFLE9BQU9DLEtBQUtvTyxHQUFjbk8sSUFBSSxTQUFvQnFQLEVBQWE1VSxHQWUzRCxPQWRHa08sRUFBSTBHLEtBQ1EsRUFBUjVVLEVBRW9CLFdBRG5CNlQsRUFBY0gsRUFBYWtCLEdBQWFDLGFBQWEsU0FFOUNuQixFQUFha0IsR0FBYUUsVUFDekJILEdBQU8sb0JBQWdDdlAsRUFBSzJQLGdCQUFnQkgsRUFBYWYsSUFHN0VjLEdBQU8sS0FBT0MsRUFBYyxLQUFPeFAsRUFBSzJQLGdCQUFnQkgsRUFBYWYsR0FHekVjLEdBQU9DLEVBQWMsS0FBT3hQLEVBQUsyUCxnQkFBZ0JILEtBR2xELElBRVJELEVBQUkxVSxPQUFTLElBQ1owVSxFQUFNLE1BRUhBLEdBR1hGLEVBQVMvVSxVQUFVcVYsZ0JBQWtCLFNBQTBCQyxHQUMzRCxPQUFPdEIsRUFBYXNCLEdBQU1yQixFQUFXcUIsR0FBTW5CLGNBUy9DWSxFQUFTL1UsVUFBVTRSLFNBQVcsV0FDMUIsSUFBSWxNLEVBQU96RSxLQUNYK0MsRUFBT3BILFNBQVNFLE1BQU0rSSxJQUFJLFNBQTRCekUsR0FHbEQsT0FGQTRTLEVBQWE1UyxHQUFZL0IsV0FBVzJFLEVBQU9wSCxTQUFTQyxRQUFVdUUsR0FBUyxHQUFPLEdBQzlFNFMsRUFBYTVTLEdBQVM0UixpQkFBaUIsUUFWL0MsV0FDSSxJQUFJaUMsRUFBTWpSLEVBQU9wSCxTQUFTRyxTQUFXa0UsS0FBSytULG1CQUFtQmYsR0FDN0RnQixHQUFPalIsRUFBT3BILFNBQVNJLE9BQ3ZCZ1gsRUFBYXVCLFdBQVd0SyxVQUFZZ0ssR0FPNkJwUSxLQUFLYSxLQUMzRCxLQUlmcVAsRUFBUy9VLFVBQVU4VCxTQUFXLFdBQzFCRSxFQUFlLElBR1osSUFBSWUsRUFqR0EsQ0FtR1ozWSxZQUdDb1osTUFBUSxXQUNSLFNBQVNDLEtBWVQsT0FSQUEsRUFBTXpWLFVBQVU0UixTQUFXLGFBSTNCNkQsRUFBTXpWLFVBQVU4VCxTQUFXLGFBSXBCLElBQUkyQixFQWJILEdBc0JSQyxlQUFpQixTQUFnQzFSLEdBRWpELElBQUkyUixFQUFrQixDQUNsQnJFLFVBQVd0TixFQUFPL0YsT0FBT0csb0JBQ3pCd1gsY0FBZTVSLEVBQU8vRixPQUFPRSxtQkFDN0JxWCxNQUFPeFIsRUFBTy9GLE9BQU9DLGlCQUlyQjJYLEVBQWlCLENBQ2pCdkUsVUFBV0EsVUFBVXdDLFNBQVNqUCxLQUFLeU0sV0FDbkNzRSxjQUFlaFosU0FBU2tYLFNBQVNqUCxLQUFLakksVUFDdEM0WSxNQUFPQSxNQUFNMUIsU0FBU2pQLEtBQUsyUSxRQUczQk0sRUFBaUIsQ0FDakJ4RSxVQUFXQSxVQUFVTSxTQUFTL00sS0FBS3lNLFdBQ25Dc0UsY0FBZWhaLFNBQVNnVixTQUFTL00sS0FBS2pJLFVBQ3RDNFksTUFBT0EsTUFBTTVELFNBQVMvTSxLQUFLMlEsUUFHL0IsU0FBU08sS0ErQ1QsT0EzQ0FBLEVBQWUvVixVQUFVNFIsU0FBVyxXQUNoQyxJQUFJbE0sRUFBT3pFLEtBQ1grVSxPQUFPaEQsaUJBQWlCLGFBQWMsU0FBNEI1UixHQUM5RHNFLEVBQUt1USxVQUFVN1UsRUFBUThVLFVBSTNCeFEsRUFBS3VRLFVBQVVELE9BQU9HLFNBQVNDLEtBQU8sZUFJMUNMLEVBQWUvVixVQUFVaVcsVUFBWSxTQUFtQkksR0FDcEQsSUFBSUMsR0FDcUIsSUFBdEJELEVBQUlwRixRQUFRLE9BR2ZxRixFQUFPRCxFQUFJdE4sTUFBTSxLQUFLUSxNQUN0QnRJLEtBQUtzVixrQkFBa0JELEdBR3ZCNVcsU0FBU0MsaUJBQWlCLEtBQU9xRSxFQUFPL0YsT0FBT0ssdUJBQXVCcUosUUFBUSxTQUE0QnZHLEdBQ3RHQSxFQUFRMkwsVUFBVXdHLE9BQU92UCxFQUFPL0YsT0FBT0sseUJBRTNDb0IsU0FBU0MsaUJBQWlCLFlBQWMyVyxFQUFPLE1BQU0zTyxRQUFRLFNBQXlCdkcsR0FDbEZBLEVBQVEyTCxVQUFVQyxJQUFJaEosRUFBTy9GLE9BQU9LLHlCQUd4QzRDLG9CQUFvQjhDLEVBQU8vRixPQUFPSSxlQUNsQ2dNLFlBQVlFLFdBQVdvTCxFQUFnQlcsR0FBTyxLQUFNdFMsRUFBTy9GLE9BQU9JLGVBQWV1RSxLQUFLLFdBQ2xGa1QsRUFBZVEsU0FLdkJQLEVBQWUvVixVQUFVdVcsa0JBQW9CLFNBQTJCRCxHQUNwRTNRLE9BQU9DLEtBQUtpUSxHQUFnQmhRLElBQUksU0FBOEIySSxHQUkxRCxPQUhHQSxJQUFROEgsR0FDUFQsRUFBZXJILE1BRVosS0FJUixJQUFJdUgsRUFwRU0sQ0FzRWxCM1osWUFFSHNaLGVBQWU5RCIsImZpbGUiOiJkYXNoYm9hcmRBcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb25maWdcclxuXHJcbi8qIGV4cG9ydGVkIG1haW5Db25maWcgKi9cclxudmFyIG1haW5Db25maWcgPSB7XHJcbiAgICBET006IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQvdC10L7QsdGF0L7QtNC40LzQviDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgVVNFUl9MSVNUX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlcnMtbGlzdFwiLFxyXG4gICAgICAgIC8vINCR0LvQvtC6INCyINC60L7RgtC+0YDRi9C5INC30LDQs9GA0YPQttCw0LXRgtGB0Y8g0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NIQVRfQ09OVEFJTlNfQkxPQ0tfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXRcIixcclxuICAgICAgICAvLyDQmtC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y4g0L/QviDQvdCw0LbQsNGC0LjRjlxyXG4gICAgICAgIENTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zZW5kLWJ1dHRvblwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEg0LrQvdC+0L/QutC4INC30LDQutGA0YvQstCw0Y7RidC10Lkg0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jbG9zZS1jaGF0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGE0LjQu9GM0YLRgNCw0YbQuNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX0ZJTFRFUl9JTlBVVF9JRDogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfZmlsdGVyLWlucHV0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGB0L7RgNGC0LjRgNC+0LLQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX1NPUlRfU0VMRUNUX0lEOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zb3J0XCJcclxuXHJcbiAgICB9LFxyXG4gICAgbGF1bmNoZXI6IHtcclxuICAgICAgICBwYXR0ZXJuOiBcInRvdWNoc29mdF9jaGF0LWxhdW5jaGVyX1wiLFxyXG4gICAgICAgIGFmdGVyIDogW1xyXG4gICAgICAgICAgICBcImNoYXRUaXRsZVwiLCBcImNoYXRVcmxcIiwgXCJjaGF0Q2xhc3NcIiwgXCJjaGF0UG9zaXRpb25TZWxlY3RcIixcclxuICAgICAgICAgICAgXCJhbGxvd01pbmltaXplXCIsIFwiYWxsb3dEcmFnXCIsIFwicmVxdWlyZU5hbWVcIiwgXCJzaG93VGltZVwiLCBcIm5ldHdvcmtSYWRpb1hNUlwiLFxyXG4gICAgICAgICAgICBcIm5ldHdvcmtSYWRpb0ZldGNoXCIsXCJuZXR3b3JrUmFkaW9Mb25nUG9sbFwiLCBcInNjcmlwdENvZGVcIlxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgc3JjU3RhcnQ6IFwiJmx0c2NyaXB0IHNyYz0naHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9Ib21ld29ya18yL21hc3Rlci9qcy9jaGF0LmpzP1wiLFxyXG4gICAgICAgIHNyY0VuZDogIFwiJyZndCZsdC9zY3JpcHQmZ3RcIlxyXG4gICAgfSxcclxuICAgIHVzZXJMaXN0OiB7XHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YHRiyDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC+0LHRitC10LrRgtC+0Lwg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfRUxFTUVOVF9DU1NfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXJcIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyBpZCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAgICBVU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLWlkXCIsXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YLRiyDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRgdGC0LDRgtGD0YHQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAgICBVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT0ZGTElORTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1vZmZsaW5lXCIsXHJcbiAgICAgICAgVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09OTElORTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1vbmxpbmVcIlxyXG4gICAgfSxcclxuICAgIGNoYXRTZXR0aW5nczoge1xyXG4gICAgICAgIHR5cGVPZlJlcXVlc3Q6IFwibG9uZ1BvbGxcIlxyXG4gICAgfSxcclxuICAgIGN1cnJlbnRVc2VyU2V0dGluZ3M6IHtcclxuICAgICAgICB1c2VySWQ6IG51bGwsXHJcbiAgICAgICAgdXNlck5hbWU6IG51bGxcclxuICAgIH0sXHJcblxyXG4gICAgY3VycmVudERhc2hib2FyZENvbmRpdGlvbjoge1xyXG4gICAgICAgIGZpbHRlckJ5OiBudWxsLFxyXG4gICAgICAgIHNvcnRCeTogbnVsbFxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgaW50ZXJ2YWw6IHtcclxuICAgICAgICBVUERBVEVfVVNFUlNfVElNRTogNTAwMCxcclxuICAgICAgICBPTkxJTkVfSU5URVJWQUw6IDEyMDAwXHJcbiAgICB9LFxyXG4gICAgcm91dGVyOiB7XHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBhYm91dFxyXG4gICAgICAgIEFCT1VUX0hUTUxfUEFUSDogXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2FwcC9odG1sL2Rhc2hib2FyZC9hYm91dC5odG1sXCIsXHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgTEFVTkNIRVJfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2NoYXRMYXVuY2hlci5odG1sXCIsXHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBkYXNoYm9hcmRcclxuICAgICAgICBEQVNIQk9BUkRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2Rhc2hib2FyZC5odG1sXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCwg0LIg0LrQvtGC0L7RgNGL0Lkg0LfQsNCz0YDRg9C20LDQtdGC0YHRjyDQvdC10L7QsdGF0L7QtNC40LzQsNGPINGH0LDRgdGC0Ywg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICAgIENPTlRFTlRfQ0xBU1M6IFwiY29udGVudFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBLCDQvtGC0LzQtdGH0LDRjtGJ0LjQuSDQsNC60YLQuNCy0L3Rg9GOINGB0YLRgNCw0L3QuNGG0YMg0LIg0L/QsNC90LXQu9C4INC90LDQstC40LPQsNGG0LjQuFxyXG4gICAgICAgIE5BVklHQVRJT05fQUNUSVZFX0NTUzogXCJuYXZpZ2F0aW9uLWFjdGl2ZVwiXHJcbiAgICB9LFxyXG4gICAgbWVzc2FnZXM6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDQtNC70Y8g0Y3Qu9C10LzQtdC90LDRgiDRgSDRgdC+0L7QsdGJ0LXQvdC40LUsINC10YHQu9C4INGO0LfQtdGAINC90LUg0L/RgNC+0YfQuNGC0LDQuyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfbWVzc2FnZS1ub3QtcmVhZFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VzXCIsXHJcblxyXG4gICAgICAgIC8vIG1lc3NhZ2VcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC90LDRhdC+0LTQuNGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8s0LTQsNGC0LAg0Lgg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfTUVTU0FHRV9DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1lbGVtZW50c1wiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2Utc2VuZGVyXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQtNCw0YLRgyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX0RBVEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1kYXRlXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VcIlxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8g0LrQu9Cw0YHRgSDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0LBcclxuICAgIElOVklTSUJMRV9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfaW52aXNpYmxlLWVsZW1lbnRcIixcclxuXHJcbiAgICBEQVRBX0JBU0VfVVJMOiBcImh0dHBzOi8vb25saW5lY29uc3VsdGFudHdlYmFwcC5maXJlYmFzZWlvLmNvbVwiLFxyXG5cclxuXHJcbiAgICBBRE1JTl9OQU1FOiBcIkFkbWluXCIsXHJcblxyXG4gICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINC/0LXRgNC10LQg0L7RgtC/0YDQsNCy0LrQvtC5INGO0LfQtdGA0YNcclxuICAgIENTU19DVVJSRU5UX0lOUFVUX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF90ZXh0YXJlYS1mb3ItbWVzc2FnZVwiLFxyXG5cclxuICAgIExPQ0FMX1NUT1JBR0VfTkFNRTogXCJjdXJyZW50Q29uZGl0aW9uXCIsXHJcblxyXG4gICAgLy8g0LTQu9GPINC90L7QstGL0YUg0YHQvtC+0LHRidC10L3QuNC5INC+0YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgIC8vINCV0YHQu9C4INGO0LfQtdGAINC/0YDQuNGB0LvQsNC7INGB0L7QvtC+0LHRidC10L3QuNC1LCDQvdCwINGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INCy0LXRiNCw0LXRgtGB0Y8g0Y3RgtC+0YIg0YHRgtC40LvRjFxyXG4gICAgQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaGF2ZS1uZXctbWVzc2FnZVwiXHJcblxyXG5cclxuXHJcblxyXG59O1xyXG4vKiBleHBvcnRlZCBkYXRhQ29ubmVjdG9yQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIGRhdGFCYXNlVXJsICovXHJcbi8qIGV4cG9ydGVkIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIGRhdGFCYXNlVXJsID0gbWFpbkNvbmZpZy5EQVRBX0JBU0VfVVJMO1xyXG5cclxudmFyIGdldEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRFbGVtZW50RnJvbURPTSAoc2VsZWN0b3IsIGlzQWxsLCBpdElzSWQpIHtcclxuICAgIHZhciBzZWxlY3RvclN0YXJ0ID0gKGl0SXNJZCkgPyBcIiNcIiA6IFwiLlwiO1xyXG4gICAgaWYoaXNBbGwpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JTdGFydCArIHNlbGVjdG9yKTtcclxufTtcclxuXHJcblxyXG52YXIgZGF0YUNvbm5lY3RvckNvbmZpZyA9IHtcclxuICAgIHR5cGVPZlJlcXVlc3Q6IG1haW5Db25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3RcclxufTtcclxuXHJcbi8vIHNlcnZpY2VcclxuXHJcbi8qIGV4cG9ydGVkIHNvcnRlciAqL1xyXG52YXIgc29ydGVyID0gKGZ1bmN0aW9uIGNyZWF0ZU5ld1NvcnRlciAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZXIoKSB7fVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNvcnRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHN3YXAoaXRlbXMsIGZpcnN0SW5kZXgsIHNlY29uZEluZGV4KSB7XHJcbiAgICAgICAgdmFyIHRlbXAgPSBpdGVtc1tmaXJzdEluZGV4XTtcclxuICAgICAgICBpdGVtc1tmaXJzdEluZGV4XSA9IGl0ZW1zW3NlY29uZEluZGV4XTtcclxuICAgICAgICBpdGVtc1tzZWNvbmRJbmRleF0gPSB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnRpdGlvbihpdGVtcywgbGVmdCwgcmlnaHQsIHNvcnRGaWVsZCkge1xyXG4gICAgICAgIHZhciBwaXZvdCA9IGl0ZW1zW01hdGguZmxvb3IoKHJpZ2h0ICsgbGVmdCkgLyAyKV1bc29ydEZpZWxkXTtcclxuICAgICAgICB2YXIgaSA9IGxlZnQ7XHJcbiAgICAgICAgdmFyIGogPSByaWdodDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGkgPD0gaikge1xyXG4gICAgICAgICAgICB3aGlsZSAoaXRlbXNbaV1bc29ydEZpZWxkXSA+IHBpdm90KSB7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKGl0ZW1zW2pdW3NvcnRGaWVsZF0gPCBwaXZvdCkge1xyXG4gICAgICAgICAgICAgICAgai0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpIDw9IGopIHtcclxuICAgICAgICAgICAgICAgIHN3YXAoaXRlbXMsIGksIGopO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgai0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG5cclxuICAgIFNvcnRlci5wcm90b3R5cGUucXVpY2tTb3J0ID0gZnVuY3Rpb24gcXVpY2tTb3J0KFxyXG4gICAgICAgIGl0ZW1zLFxyXG4gICAgICAgIGxlZnQsXHJcbiAgICAgICAgcmlnaHQsXHJcbiAgICAgICAgc29ydEZpZWxkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgaW5kZXg7XHJcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgaW5kZXggPSBwYXJ0aXRpb24oaXRlbXMsIGxlZnQsIHJpZ2h0LCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICBpZiAobGVmdCA8IGluZGV4IC0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWlja1NvcnQoaXRlbXMsIGxlZnQsIGluZGV4IC0gMSwgc29ydEZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCByaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWlja1NvcnQoaXRlbXMsIGluZGV4LCByaWdodCwgc29ydEZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBjcmVhdGVTb3J0ZXIoKTtcclxufSkoKTtcclxuLyogZXhwb3J0ZWQgY2xlYXJFbGVtZW50Q29udGVudCAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vLyDQntGH0LjRidCw0LXRgiBET00g0YHQvtC00LXRgNC20LDRidC40Lkg0Y3Qu9C10LzQtdC90YLRiyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbmZ1bmN0aW9uIGNsZWFyRWxlbWVudENvbnRlbnQoZWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGRhdGFiYXNlXHJcblxyXG4vKiBleHBvcnRlZCBkYXRhQ29ubmVjdG9yICovXHJcbi8qIGdsb2JhbCBkYXRhQ29ubmVjdG9yQ29uZmlnICovXHJcbi8vINCc0L7QtNGD0LvRjCDQv9GA0LXQtNC+0YHRgtCw0LLQu9GP0LXRgiDRgdC/0L7RgdC+0LEg0L7RgtC/0YDQsNCy0LrQuCDQt9Cw0L/RgNC+0YHQsCDQuiDQuNGB0YLQvtGH0L3QuNC60YMg0LTQsNC90L3Ri9GFXHJcbi8vINCU0LvRjyDRgNC10LrQstC10YHRgtCwINC90LXQvtCx0YXQvtC00LjQvCDQv9GD0YLRjCwg0YLQtdC70L4g0LfQsNC/0YDQvtGB0LAsINGC0LjQvyDQt9Cw0L/RgNC+0YHQsFxyXG4vLyByZXF1ZXN0INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIFByb21pc2VcclxudmFyIGRhdGFDb25uZWN0b3IgPSAoZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqKSB7XHJcbiAgICB2YXIgZGF0YUJhc2VDb25uZWN0b3I7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YUJhc2VDb25uZWN0b3IoKSB7fVxyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5zZXR1cERhdGFCYXNlQVBJID0gZnVuY3Rpb24gc2V0dXBEYXRhQmFzZUFQSSAodHlwZU9mUmVxdWVzdCkge1xyXG4gICAgICAgIHZhciBkYXRhQmFzZUFQSTtcclxuICAgICAgICBpZiAodHlwZU9mUmVxdWVzdCA9PT0gXCJmZXRjaFwiKSB7XHJcbiAgICAgICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdEZldGNoLFxyXG4gICAgICAgICAgICAgICAgZ2V0TmV3Q29ubmVjdG9yQVBJOiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlT2ZSZXF1ZXN0ID09PSBcIlhIUlwiKSB7XHJcbiAgICAgICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdFhNUixcclxuICAgICAgICAgICAgICAgIGdldE5ld0Nvbm5lY3RvckFQSTogZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdFhNUixcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbjogZGF0YUJhc2VDb25uZWN0b3IubG9uZ1BvbGwsXHJcbiAgICAgICAgICAgICAgICBnZXROZXdDb25uZWN0b3JBUEk6IGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUElcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGFCYXNlQVBJO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24gcmVxdWVzdEZldGNoKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2gocmVxdWVzdFBhdGgsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQWNjZXB0OiBjb250ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IGNvbnRlbnRUeXBlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiBnZXRSZXNwb25zZUpTT04ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYoY29udGVudFR5cGUgPT09IFwiYXBwbGljYXRpb24vanNvblwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0WE1SID0gZnVuY3Rpb24gcmVxdWVzdFhNUihcclxuICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICByZXF1ZXN0Qm9keSxcclxuICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICBjb250ZW50VHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIHJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4ocmVxdWVzdFR5cGUsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgY29udGVudFR5cGUpO1xyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gbG9hZENhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiBlcnJvckNhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoeGhyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEJvZHkpIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKHJlcXVlc3RCb2R5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLmxvbmdQb2xsID0gZnVuY3Rpb24gbG9uZ1BvbGwgKHRhcmdldFVybCkge1xyXG4gICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhodHRwLm9wZW4oJ0dFVCcsIHRhcmdldFVybCwgdHJ1ZSk7XHJcbiAgICAgICAgeGh0dHAuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ3RleHQvZXZlbnQtc3RyZWFtJyk7XHJcbiAgICAgICAgcmV0dXJuIHhodHRwO1xyXG4gICAgfTtcclxuXHJcbiAgICBkYXRhQmFzZUNvbm5lY3RvciA9IG5ldyBEYXRhQmFzZUNvbm5lY3RvcigpO1xyXG4gICAgcmV0dXJuIGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUEkoZGF0YUNvbm5lY3RvckNvbmZpZ09iai50eXBlT2ZSZXF1ZXN0KTtcclxuXHJcbn0pKGRhdGFDb25uZWN0b3JDb25maWcpO1xyXG4vKiBleHBvcnRlZCBkYXRhU291cmNlICovXHJcbi8qIGdsb2JhbCBkYXRhQmFzZVVybCAqL1xyXG4vKiBnbG9iYWwgZGF0YUNvbm5lY3RvciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQtNCw0L3QvdGL0YVcclxuLy8g0JLRgdC1IEFQSSDRhNGD0L3QutGG0LjQuCDQstC+0LfQstGA0LDRidCw0Y7RgiDQv9GA0L7QvNC40YHRi1xyXG52YXIgZGF0YVNvdXJjZSA9IChmdW5jdGlvbiBjcmVhdGVEYXRhU291cmNlIChkYXRhQ29ubmVjdG9yLCBjb25maWcpIHtcclxuICAgIHZhciBkYXRhU291cmNlSW5zdGFuY2U7XHJcbiAgICB2YXIgVVNFUl9MSVNUID0gXCJ1c2VyTGlzdFwiO1xyXG4gICAgdmFyIFVTRVJfTUVTU0FHRVMgPSBcInVzZXJzTWVzc2FnZXNcIjtcclxuICAgIHZhciBVU0VSU19TRVRUSU5HUyA9IFwidXNlcnNTZXR0aW5nc1wiO1xyXG4gICAgdmFyIG5ld1VzZXJEYXRhID0ge1xyXG4gICAgICAgIGlzTWluaW1pemU6IGZhbHNlLFxyXG4gICAgICAgIHJlYWRMYXN0TWVzc2FnZTogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhU291cmNlKCkge31cclxuXHJcbiAgICBmdW5jdGlvbiBsb25nUG9sbENvbm5lY3QgKGRhdGFUeXBlLCB1c2VySWQpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5jcmVhdGVMb25nUG9sbENvbm5lY3Rpb24ocmVxdWVzdFBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJhc2ljQ29ubmVjdCAoZGF0YVR5cGUsIHVzZXJJZCkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCwgZGF0YVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QuYmluZChudWxsLCByZXF1ZXN0UGF0aCwgbnVsbCwgXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcbiAgICB9XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuY3JlYXRlUmVxdWVzdFBhdGggPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0UGF0aChcclxuICAgICAgICBkYXRhQmFzZVVSTCxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgcmVxdWVzdFBvc3RmaXgsXHJcbiAgICAgICAgcmVxdWVzdFByZWZpeFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBkYXRhQmFzZVVSTDtcclxuICAgICAgICBpZihyZXF1ZXN0UHJlZml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UHJlZml4XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQb3N0Zml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UG9zdGZpeDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF0aCArPSBcIi5qc29uXCI7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldEhUTUwgPSBmdW5jdGlvbiBnZXRIVE1MIChyZXF1ZXN0UGF0aCkge1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcIkdFVFwiLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04J1xyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24gc2V0RGF0YSAoZGF0YVR5cGUsIHJlcXVlc3RUeXBlLCBmaWVsZE5hbWUsIHVzZXJJZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGg7XHJcbiAgICAgICAgaWYocmVxdWVzdFR5cGUgPT09IFwiUFVUXCIpIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIGZpZWxkTmFtZSwgZGF0YVR5cGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSksXHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhU291cmNlICh1c2VySWQsIHVzZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZTtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgbmV3VXNlckRhdGEudXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgICAgICBPYmplY3Qua2V5cyhuZXdVc2VyRGF0YSkubWFwKGZ1bmN0aW9uIChzZXR0aW5nTmFtZSkge1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEoVVNFUlNfU0VUVElOR1MsIFwiUFVUXCIsIHNldHRpbmdOYW1lLCB1c2VySWQsIG5ld1VzZXJEYXRhW3NldHRpbmdOYW1lXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKFVTRVJfTElTVCwgXCJQVVRcIiwgbnVsbCwgdXNlcklkLCB7XCJsYXN0T25saW5lXCI6IGRhdGUuZ2V0VGltZSgpLCBcInNlbmROZXdNZXNzYWdlXCI6IGZhbHNlfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGFTb3VyY2VBUEkgPSBmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJICh0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgaWYodHlwZU9mUmVxdWVzdCkge1xyXG4gICAgICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPSB0eXBlT2ZSZXF1ZXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPT09IFwibG9uZ1BvbGxcIikge1xyXG4gICAgICAgICAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXREYXRhID0gbG9uZ1BvbGxDb25uZWN0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YSA9IGJhc2ljQ29ubmVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1c2Vyc0FQSToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VXNlckxpc3Q6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTElTVFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFVzZXJTZXR0aW5nczogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUlNfU0VUVElOR1NcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBnZXRVc2VyTWVzc2FnZXM6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVNcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBnZXRTZXR0aW5nRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2U6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQT1NUXCJcclxuXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2V0U2V0dGluZ0ZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HUyxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgYWRkTmV3VXNlclRvRGF0YVNvdXJjZTogZGF0YVNvdXJjZUluc3RhbmNlLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVMYXN0T25saW5lOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX0xJU1QsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgICAgICAgICBcImxhc3RPbmxpbmVcIlxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZzogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9MSVNULFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzZW5kTmV3TWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZUlzUmVhZEZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX01FU1NBR0VTLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tbW9uQVBJOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRIVE1MOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0SFRNTC5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSksXHJcbiAgICAgICAgICAgICAgICBnZXREYXRhU291cmNlQVBJOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YVNvdXJjZUFQSS5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdC8IGluc3RhbmNlINC+0LHRitC10LrRgtCwLCDQt9Cw0LTQsNC10LwgQVBJXHJcbiAgICBkYXRhU291cmNlSW5zdGFuY2UgPSBuZXcgRGF0YVNvdXJjZSgpO1xyXG5cclxuXHJcblxyXG4gICAgcmV0dXJuIGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhU291cmNlQVBJKCk7XHJcbn0pKGRhdGFDb25uZWN0b3IsIG1haW5Db25maWcpO1xyXG4vL1xyXG4vLyB2YXIgdXNlcklkID0gXCJBdGplcnMyMTUzMDI3Nzc0NDk1OFwiO1xyXG4vLyB2YXIgbWVzc2FnZSA9IHtcclxuLy8gICAgIGRhdGU6IFwidGVzdERhdGVcIixcclxuLy8gICAgIGl0SXNSZWFkOiB0cnVlLFxyXG4vLyAgICAgbWVzc2FnZTogXCJ0ZXN0TWVzc2FnZVwiLFxyXG4vLyAgICAgdXNlcjogXCJpdmFuXCJcclxuLy8gfTtcclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5zZW5kTWVzc2FnZShudWxsLCB1c2VySWQsIG1lc3NhZ2UpO1xyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKG51bGwsIHVzZXJJZCwgIG1lc3NhZ2UpO1xyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKHt0ZXN0OiBcInRlc3RcIn0sIHVzZXJJZCwgICBtZXNzYWdlKTtcclxuXHJcblxyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJNZXNzYWdlcyh1c2VySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4vLyB9KTtcclxuXHJcbi8vIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0U2V0dGluZ0ZpZWxkKFwidGVzdEZpZWxkXCIsIHVzZXJJZCwgZmFsc2UpO1xyXG4vLyB2YXIgdXNlck5hbWUgPSBcImF0amVyc1wiO1xyXG5cclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5hZGROZXdVc2VyVG9EYXRhU291cmNlKHVzZXJJZCwgdXNlck5hbWUpO1xyXG5cclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTGlzdChudWxsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuLy8gfSk7XHJcblxyXG5cclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVMYXN0T25saW5lKHVzZXJJZCwgMTExMTExMTExKTtcclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyU2V0dGluZ3ModXNlcklkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuLy8gfSk7XHJcblxyXG4vLyBldmVudEVtaXR0ZXJcclxuXHJcbnZhciBldmVudEVtaXR0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlRXZlbnRFbWl0dGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkU3Vic2NyaWJlID0gZnVuY3Rpb24gYWRkU3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmKCAhdGhpcy5ldmVudHNbZXZlbnROYW1lXSApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaWJlICgpIHtcclxuICAgICAgICAgICAgdGhhdC5ldmVudHNbZXZlbnROYW1lXSA9IHRoYXQuZXZlbnRzW2V2ZW50TmFtZV0uZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Q2FsbGJhY2sgIT09IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaWJlXHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQgKGV2ZW50TmFtZSwgZGF0YSkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYoIGV2ZW50ICkge1xyXG4gICAgICAgICAgICBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChudWxsLCBkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG59KSgpO1xyXG52YXIgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciA9IChmdW5jdGlvbiBjcmVhdGVMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCkge1xyXG4gICAgdmFyIHR5cGVzT2ZDaGFuZ2UgPSB7XHJcbiAgICAgICAgbWVzc2FnZTogL21lc3NhZ2UvLFxyXG4gICAgICAgIHVzZXJMaXN0OiAvbGFzdE9ubGluZS57MSx9c2VuZE5ld01lc3NhZ2UvLFxyXG4gICAgICAgIGxhc3RPbmxpbmU6IC9cInBhdGhcIjpcIlxcL1xcd3sxLH1cXC9sYXN0T25saW5lLyxcclxuICAgICAgICBzZW5kTmV3TWVzc2FnZTogL1wicGF0aFwiOlwiXFwvXFx3ezEsfVxcL3NlbmROZXdNZXNzYWdlLyxcclxuICAgICAgICBzZXR0aW5nOiAvcmVhZExhc3RNZXNzYWdlLyxcclxuICAgICAgICByZWFkOiAvcmVhZC9cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGV2ZW50UmVndWxhciA9IC9ldmVudDogcHV0LztcclxuICAgIHZhciBoYXNOdWxsRGF0YSA9IC9kYXRhOiBudWxsLztcclxuICAgIHZhciBnZXREYXRhUmVndWxhciA9IC9cIixcImRhdGFcIjovO1xyXG4gICAgdmFyIGl0SXNOZXdNZXNzYWdlUmVndWxhciA9IC9cInBhdGhcIjpcIlxcLy0vO1xyXG4gICAgdmFyIGl0SXNOZXdVc2VyTGlzdFJlZ3VsYXIgPSAvXCJkYXRhXCI6e1wibGFzdE9ubGluZVwiOlxcZCssXCJzZW5kTmV3TWVzc2FnZVwiOi87XHJcbiAgICB2YXIgaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uID0gdHJ1ZTtcclxuICAgIHZhciBpdElzRmlyc3RVc2VyU2V0dGluZ0Nvbm5lY3Rpb24gPSB0cnVlO1xyXG5cclxuICAgIGZ1bmN0aW9uIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKSB7fVxyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmdldFR5cGVPZkNoYW5nZXMgPSBmdW5jdGlvbiBnZXRUeXBlT2ZDaGFuZ2VzKFxyXG4gICAgICAgIGFuc3dlckRhdGFcclxuICAgICkge1xyXG4gICAgICAgIHZhciB0eXBlID0gT2JqZWN0LmtleXModHlwZXNPZkNoYW5nZSkuZmlsdGVyKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDdXJyZW50VHlwZU9mQ2hhbmdlKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZXNPZkNoYW5nZVt0eXBlTmFtZV0udGVzdChhbnN3ZXJEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVbMF07XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlID0gZnVuY3Rpb24gcHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2Vyc01lc3NhZ2VzID0gZnVuY3Rpb24gcGFyc2VVc2Vyc01lc3NhZ2VzKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VJZDtcclxuICAgICAgICB2YXIgcmVzdWx0T2JqZWN0ID0ge307XHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwicmVhZFwiKSB7XHJcbiAgICAgICAgICAgIGRhdGEuaWQgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcvcmVhZFwiLFwiJylcclxuICAgICAgICAgICAgICAgIC5zaGlmdCgpO1xyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnL3JlYWRcIixcImRhdGFcIjonKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpdElzTmV3TWVzc2FnZVJlZ3VsYXIudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUlkID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilcclxuICAgICAgICAgICAgLnNoaWZ0KCk7XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgIHJlc3VsdE9iamVjdFttZXNzYWdlSWRdID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0T2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5oYXNOZXdEYXRhID0gZnVuY3Rpb24gaGFzTmV3RGF0YShyZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICFoYXNOdWxsRGF0YS50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSAmJiByZXNwb25zZS5sZW5ndGggPiAxXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2VyTGlzdCA9IGZ1bmN0aW9uIHBhcnNlVXNlckxpc3QoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgdXNlcklkO1xyXG4gICAgICAgIGlmIChpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdElzTmV3VXNlckxpc3RSZWd1bGFyLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIHVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLCBudWxsKTtcclxuICAgICAgICAgICAgZGF0YVt1c2VySWRdID0gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB1c2VySWQgPSB0aGlzLmdldFVzZXJJZChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWQsIGRhdGFdO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRGaXJzdERhdGEgPSBmdW5jdGlvbiBnZXRGaXJzdERhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBqc29uRGF0YTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0VXNlcklkID0gZnVuY3Rpb24gZ2V0VXNlcklkKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGNoYW5nZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAuc2hpZnQoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilbMF1cclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJzU2V0dGluZ3MgPSBmdW5jdGlvbiBwYXJzZVVzZXJzU2V0dGluZ3MoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmIChpdElzRmlyc3RVc2VyU2V0dGluZ0Nvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaXRJc0ZpcnN0VXNlclNldHRpbmdDb25uZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgICByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVsxXVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIFtudWxsLCBkYXRhXTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGV4dCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRleHQuc3BsaXQoZXZlbnRSZWd1bGFyKTtcclxuICAgICAgICB2YXIgY2hhbmdlVHlwZSA9IHRoaXMuZ2V0VHlwZU9mQ2hhbmdlcyhyZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdKTtcclxuICAgICAgICB2YXIgcmVzdWx0T2ZQYXJzZSA9IHsgdHlwZTogY2hhbmdlVHlwZSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmhhc05ld0RhdGEocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlVHlwZSA9PT0gXCJtZXNzYWdlXCIgfHwgY2hhbmdlVHlwZSA9PT0gXCJyZWFkXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJzTWVzc2FnZXMocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJzZW5kTmV3TWVzc2FnZVwiIHx8XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID09PSBcImxhc3RPbmxpbmVcIiB8fFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJ1c2VyTGlzdFwiXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlVXNlckxpc3QocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09IFwic2V0dGluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRPZlBhcnNlLm9iamVjdCA9IHRoaXMucGFyc2VVc2Vyc1NldHRpbmdzKHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCk7XHJcbn0pKCk7XHJcblxyXG4vLyB2aWV3XHJcblxyXG4vKiBleHBvcnRlZCB2aWV3RmFjdG9yeSAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG52YXIgdmlld0ZhY3RvcnkgPSAoZnVuY3Rpb24gY3JlYXRlVmlld0ZhY3RvcnkgKGRhdGFTb3VyY2UpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBWaWV3RmFjdG9yeSAoKSB7fVxyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVWaWV3ID0gZnVuY3Rpb24gY3JlYXRlQ2hhdFZpZXcgKGh0bWxQYXRoLCBjc3NQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gY3JlYXRlVmlld1Byb21pc2UgKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZihodG1sUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYoY3NzUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaW5jbHVkZVZpZXdDc3NUb1BhZ2UodGhhdC5jcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlc2hlZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0L2Nzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvdWNoLXNvZnQtY2hhdC1jc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGF0LmluY2x1ZGVWaWV3SFRNTFRvUGFnZShodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJodG1sUGF0aCBpcyBudWxsLiBQbGVhc2UgYWRkIGh0bWxQYXRoXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuaW5jbHVkZVZpZXdIVE1MVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRIVE1MVG9QYWdlIChodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpIHtcclxuICAgICAgICB2YXIgY29udGFpbmVyRGl2ID0gKGNvbnRhaW5lckNsYXNzKSA/IGdldEVsZW1lbnQoY29udGFpbmVyQ2xhc3MpIDogZG9jdW1lbnQuYm9keTtcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS5jb21tb25BUEkuZ2V0SFRNTChodG1sUGF0aCkudGhlbihmdW5jdGlvbiBzZXRIdG1sIChodG1sKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0Nzc1RvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0Q3NzVG9QYWdlIChsaW5rKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNTU0xpbmsgPSBmdW5jdGlvbiBjcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgIHJlbCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgVmlld0ZhY3RvcnkoKVxyXG5cclxufSkoZGF0YVNvdXJjZSk7XHJcblxyXG4vLyBjaGF0IG1hbmFnZXJcclxuXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINGA0LDQsdC+0YLRiyDRgdC+INGB0L/QuNGB0LrQvtC8INGB0L7QvtCx0YnQtdC90LjQuSDQntCU0J3QntCT0J4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbnZhciBtZXNzYWdlTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gc2V0dXBNZXNzYWdlTGlzdE1hbmFnZXIgKGNvbmZpZykge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vINCk0L7RgNC80LDRgiAgbWVzc2FnZUxpc3QgPSBbXHJcbiAgICAvLyAgICB7XHJcbiAgICAvLyAgICAgICBzZW5kZXI6IHNlbmRlclxyXG4gICAgLy8gICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIC8vICAgICAgIHJlYWQ6IHRydWUvZmFsc2VcclxuICAgIC8vICAgICAgIGRhdGU6IGRhdGVcclxuICAgIC8vICAgIH0sXHJcbiAgICAvLyBdXHJcbiAgICAvLyByZWFkIC0g0LHRi9C70L4g0LvQuCDQv9GA0L7Rh9C40YLQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIE1lc3NhZ2VMaXN0TWFuYWdlcigpIHt9XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5jRE9NID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlc0Jsb2NrOiBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFX0RBVEUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkICgpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICB2YXIgbWVzc2FnZXNJc1JlYWQgPSBbXTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSBjb25maWcuQURNSU5fTkFNRSB8fCBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZTtcclxuICAgICAgICB2YXIgdXNlcklkID0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIGZvcihpID0gdGhpcy5tZXNzYWdlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1lc3NhZ2VMaXN0W2ldLnNlbmRlciAhPT0gdXNlck5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLm1lc3NhZ2VMaXN0W2ldLnJlYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc0lzUmVhZC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogdGhpcy5tZXNzYWdlTGlzdFtpXS5pZCArIFwiL3JlYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzSXNSZWFkO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgKGlzUmVhZCwgc2VuZGVyKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX01FU1NBR0VfQ09OVEFJTkVSKTtcclxuICAgICAgICBpZiAoIWlzUmVhZCAmJiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSAhPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgPSBmdW5jdGlvbiBjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgKHRleHQsIGlzRGlzcGxheSwgc3R5bGVDbGFzc2VzKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc3R5bGVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gY2xhc3NBZGQgKHN0eWxlKSB7XHJcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKHN0eWxlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTUVTU0FHRSBFTEVNRU5UIC8vXHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VMaXN0IChtZXNzYWdlT2JqZWN0cykgIHtcclxuICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cykge1xyXG4gICAgICAgICAgICBtZXNzYWdlT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIGFkZEVsZW1lbnRUb01lc3NhZ2VMaXN0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3QgKG5ld01lc3NhZ2VMaXN0KSB7XHJcbiAgICAgICAgaWYodGhpcy5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnJlYWRMYXN0TWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IChcclxuICAgICAgICBtZXNzYWdlT2JqXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LnB1c2gobWVzc2FnZU9iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0LXRgNC10LHQuNGA0LDQtdGCINGB0L/QuNGB0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LksINGB0L7Qt9C00LDQtdGCINGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40LUg0LjQvCBET00g0Y3Qu9C10LzQtdC90YLRiyDQuCDQstGB0YLQsNCy0LvRj9C10YIg0LjRhSDQsiDRh9Cw0YJcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuZGlzcGxheU1lc3NhZ2VzID0gZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2VzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNsZWFyQ2hhdCgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBjcmVhdGVNZXNzYWdlIChtZXNzYWdlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGF0LmNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnJlYWRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhhdC5jRE9NLm1lc3NhZ2VzQmxvY2suYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YfQuNGB0YLQuNGC0YwgRE9NINGN0LvQtdC80LXQvdGCINCyINC60L7RgtC+0YDQvtC8INC+0YLQvtCx0YDQsNC20LDRjtGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8gKNC90LDQv9GA0LjQvNC10YAg0YfRgtC+0LHRiyDQstGB0YLQsNCy0LjRgtGMINC90LLQvtGL0Lkg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSlcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJDaGF0ID0gZnVuY3Rpb24gY2xlYXJDaGF0KCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLmNET00ubWVzc2FnZXNCbG9jay5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLnJlbW92ZUNoaWxkKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNZXNzYWdlTGlzdE1hbmFnZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4vKiBnbG9iYWwgZ2V0Q3VycmVudERhdGUgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGV2ZW50RW1pdHRlciAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgdXNlckRhdGFNYW5hZ2VyID0gIChmdW5jdGlvbiBjcmVhdGVVc2VyRGF0YU1hbmFnZXIgKGNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKSB7XHJcbiAgICBmdW5jdGlvbiBVc2VyRGF0YU1hbmFnZXIgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPT09IFwibG9uZ1BvbGxcIikge1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJEYXRhID0gZ2V0VXNlckRhdGFGcm9tTG9uZ1BvbGxDb25uZWN0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckNvcnJlc3BvbmRlbmNlID0gZ2V0VXNlckNvcnJlc3BvbmRlbmNlRnJvbUxvbmdQb2xsQ29ubmVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gdXBkYXRlTWVzc2FnZUxpc3RBZnRlckxvbmdQb2xsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZU1lc3NhZ2VMaXN0KGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInJlYWRcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtZXNzYWdlLmlkID0gZGF0YS5pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlYWQgPSBkYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhQmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyQ29ycmVzcG9uZGVuY2UgPSBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgLyogZXhwb3J0ZWQgZ2V0Q3VycmVudERhdGUgKi9cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgbWludXRlcyA9IChkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkgPyBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGVcclxuICAgICAgICAgICAgLmdldEhvdXJzKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLmNvbmNhdChcIjpcIiwgbWludXRlcyk7XHJcbiAgICB9XHJcbiAgICAvKiBleHBvcnRlZCBjcmVhdGVNZXNzYWdlT2JqZWN0ICovXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlT2JqZWN0IChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZCxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWQ6IGlzUmVhZCxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuc2V0dXAoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGJhc2ljXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyRGF0YUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpLnRoZW4oIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgIC8vICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdEJhc2ljIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2VzT2JqZWN0ID0gW107XHJcbiAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtrZXldLmlkID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzT2JqZWN0LnB1c2goZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QgPSBtZXNzYWdlTGlzdE1hbmFnZXIuY3JlYXRlTWVzc2FnZUxpc3QobWVzc2FnZXNPYmplY3QpO1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIudXBkYXRlTWVzc2FnZUxpc3QobmV3TWVzc2FnZUxpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJDb3JyZXNwb25kZW5jZUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCkoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHRoYXQudXBkYXRlTWVzc2FnZUxpc3QoZGF0YSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tTG9uZ1BvbGxDb25uZWN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpO1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckNvcnJlc3BvbmRlbmNlRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiA9IGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gMyAmJiB0aGlzLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBsb25nUG9sbFJlc3BvbnNlUGFyc2VyLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uc2VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbCAoZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFba2V5XS5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdChkYXRhW2tleV0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5jbGVhck1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gY2xlYXJNZXNzYWdlTGlzdCAoKSB7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlID0gZnVuY3Rpb24gY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlICh1c2VySWQsIHVzZXJOYW1lKSB7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5hZGROZXdVc2VyVG9EYXRhU291cmNlKHVzZXJJZCwgdXNlck5hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVTZXR0aW5nRmllbGQgPSBmdW5jdGlvbiBzZXRGaWVsZCAoZmllbGROYW1lKSB7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5zZXRTZXR0aW5nRmllbGQoXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZSxcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5nc1tmaWVsZE5hbWVdXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lID0gZnVuY3Rpb24gdXBkYXRlVXNlck9ubGluZSAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZTtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZUxhc3RPbmxpbmUodXNlcklkLCBkYXRlLmdldFRpbWUoKSlcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlIChzZW5kZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gY3JlYXRlTWVzc2FnZU9iamVjdChtZXNzYWdlLCBkYXRlLCBzZW5kZXJOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ICE9PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICBlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0TWVzc2FnZUFzUmVhZCA9IGZ1bmN0aW9uIHNldE1lc3NhZ2VBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0cyA9IG1lc3NhZ2VMaXN0TWFuYWdlci5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2VPYmplY3RzKTtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBzZXRSZWFkIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZChcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3Quc2VuZGVyID09PSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyhjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2UoXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdFxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHRpbmdzID0gW3t1c2VySWQsIGZpZWxkTmFtZSwgZmllbGRWYWx1ZX0se30uLi5dXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIChzZXR0aW5ncykge1xyXG4gICAgICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24gc2F2ZVNldHRpbmcgKG5ld0ZpZWxkU2V0dGluZykge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldFNldHRpbmdGaWVsZChcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckRhdGFNYW5hZ2VyKCk7XHJcblxyXG59KShtYWluQ29uZmlnLCBldmVudEVtaXR0ZXIsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIpO1xyXG5cclxuLy8gZGFzaGJvYXJkXHJcblxyXG4vKiBleHBvcnRlZCB1c2VyTGlzdE1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHNvcnRlciAqL1xyXG52YXIgdXNlckxpc3RNYW5hZ2VyID0gKGZ1bmN0aW9uIGNyZWF0ZVVzZXJMaXN0IChjb25maWcsIHNvcnRlcikge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLyog0KTQvtGA0LzQsNGCINC+0LHRitC10LrRgtCwINCyINGB0L/QuNGB0LrQtSDRjtC30LXRgNCwXHJcbiAgICAgICogdXNlcklkOiBcIkl2YW4zMDAwMDBcIixcclxuICAgICAgKiB1c2VyRWxlbWVudDogVXNlckxpc3RNYW5hZ2VyLmNyZWF0ZVVzZXJFbGVtZW50KHVzZXJJZCwgdXNlcklzT25saW5lKSxcclxuICAgICAgKiBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgKiB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAqIHNlbmROZXdNZXNzYWdlOiB1c2VyU2V0dGluZ3Muc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICogcmVhZExhc3RNZXNzYWdlOiB1c2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlLFxyXG4gICAgICAqIGxhc3RPbmxpbmU6IHVzZXJTZXR0aW5ncy5sYXN0T25saW5lLFxyXG4gICAgICAqIGlzTWluaW1pemU6IHVzZXJTZXR0aW5ncy5pc01pbmltaXplLFxyXG4gICAgICAqIHVzZXJOYW1lOiB1c2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgKlxyXG4gICAgICAqIHZpc2libGUgLSDQvtGC0L7QsdGA0LDQttCw0YLRjCDQu9C4INGO0LfQtdGA0LAg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICAgICovXHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmdW5jdGlvbiBVc2VyTGlzdE1hbmFnZXIoKSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7fTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0LXQu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y7Qt9C10YDQsCDQsiDRgdC/0LjRgdC60LVcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlVXNlckVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVVc2VyRWxlbWVudChcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgaXNPbmxpbmVcclxuICAgICkge1xyXG4gICAgICAgIHZhciB1c2VyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlcklkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlckluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIHVzZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUyk7XHJcblxyXG4gICAgICAgIHVzZXJJZERpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTKTtcclxuICAgICAgICB1c2VySWREaXYuaW5uZXJIVE1MID0gdXNlcklkO1xyXG5cclxuICAgICAgICBpZiAoaXNPbmxpbmUpIHtcclxuICAgICAgICAgICAgdXNlckluZGljYXRvci5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1c2VySW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQodXNlcklkRGl2KTtcclxuICAgICAgICB1c2VyRGl2LmFwcGVuZENoaWxkKHVzZXJJbmRpY2F0b3IpO1xyXG5cclxuICAgICAgICByZXR1cm4gdXNlckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXRVc2VyTGlzdCA9IGZ1bmN0aW9uIHNldFVzZXJMaXN0ICh1c2VyTHVzdE9iamVjdCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSB1c2VyTHVzdE9iamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRVc2VyVG9Vc2Vyc0FycmF5ID0gZnVuY3Rpb24gYWRkVXNlclRvVXNlcnNMaXN0KFxyXG4gICAgICAgIHVzZXIsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHVzZXJzTGlzdFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJc09ubGluZSA9IHRoaXMudXNlcklzT25saW5lKHVzZXIubGFzdE9ubGluZSk7XHJcbiAgICAgICAgdXNlcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgdXNlckVsZW1lbnQ6IHRoaXMuY3JlYXRlVXNlckVsZW1lbnQodXNlcklkLCB1c2VySXNPbmxpbmUpLFxyXG4gICAgICAgICAgICBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2VuZE5ld01lc3NhZ2U6IHVzZXIuc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWRMYXN0TWVzc2FnZTogdXNlci5yZWFkTGFzdE1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGxhc3RPbmxpbmU6IHVzZXIubGFzdE9ubGluZSxcclxuICAgICAgICAgICAgdXNlck5hbWU6IHVzZXIudXNlck5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlVXNlclZpZXcgKHVzZXJJZCwgbGFzdE9ubGluZSkge1xyXG4gICAgICAgIHZhciB1c2VySW5kZXggPSB0aGlzLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy51TGlzdFt1c2VySW5kZXhdLmxhc3RPbmxpbmUgPSBsYXN0T25saW5lO1xyXG4gICAgICAgIHRoaXMudUxpc3RbdXNlckluZGV4XS5vbmxpbmUgPSB0aGlzLnVzZXJJc09ubGluZShsYXN0T25saW5lKTtcclxuICAgICAgICB0aGlzLnVMaXN0W3VzZXJJbmRleF0udXNlckVsZW1lbnQgPSB0aGlzLmNyZWF0ZVVzZXJFbGVtZW50KFxyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIHRoaXMudXNlcklzT25saW5lKGxhc3RPbmxpbmUpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIGluZGV4INGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INGO0LfQtdGA0LAg0LXRgdC70Lgg0L7QvSDRgtCw0Lwg0L3QsNGF0L7QtNC40YLRgdGPLiDQkiDQv9GA0L7RgtC40LLQvdC+INGB0LvRg9GH0LDQtSDQstC+0LfQstGA0LDRidCw0LXRgiBudWxsXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkID0gZnVuY3Rpb24gZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJNYW5hZ2VyID0gdGhpcztcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gbnVsbDtcclxuICAgICAgICBPYmplY3Qua2V5cyh1c2VyTWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGdldEtleSAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyTWFuYWdlci51TGlzdFtrZXldLnVzZXJJZCA9PT0gdXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5kZXggPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJJbmRleDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdGCINC+0L3Qu9Cw0LnQvSDRjtC30LXRgNCwINC90LDRhdC+0LTRjyDRgNCw0LfQvdC40YbRgyDQvNC10LbQtNGDINC00LDRgtC+0Lkg0L/QvtGB0LvQtdC00L3QtdCz0L4g0LrQvtC90LXQutGC0LAg0Y7Qt9C10YDQsCDRgSDQsdC0INC4INGC0LXQutGD0YnQuNC8INCy0YDQtdC80LXQvdC10LxcclxuICAgIC8vINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUg0LXRgdC70Lgg0Y7Qt9C10YAg0L7QvdC70LDQudC9LCBmYWxzZSAtINC+0YTRhNC70LDQudC9XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnVzZXJJc09ubGluZSA9IGZ1bmN0aW9uIHVzZXJJc09ubGluZSAobGFzdFVzZXJPbmxpbmVUaW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAtIGxhc3RVc2VyT25saW5lVGltZSA8PSBjb25maWcuaW50ZXJ2YWwuT05MSU5FX0lOVEVSVkFMO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQlNC10LvQsNC10YIg0L3QtdCy0LjQtNC40LzRi9C80Lgg0YLQtdGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5INCyINGB0L/QuNGB0LrQtSwg0LIg0LjQvNC10L3QsNGFINC60L7RgtC+0YDRi9GFINC90LXRgiDQv9C10YDQtdC00LDQvdC90L7QuSDQv9C+0LTRgdGC0YDQvtC60LhcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuZmlsdGVyQnlOYW1lID0gZnVuY3Rpb24gZmlsdGVyQnlOYW1lKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBmaWx0ZXJOYW1lIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9IGVsZW1lbnQudXNlcklkLmluZGV4T2YoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpICE9PSAtMTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtGA0YLQuNGA0YPQtdGCINGB0L/QuNGB0L7QuiDRjtC30LXRgNC+0LIg0L/QviDQv9C+0LvRjlxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zb3J0VXNlcnNCeUZpZWxkID0gZnVuY3Rpb24gc29ydFVzZXJzQnlPbmxpbmUoKSB7XHJcbiAgICAgICAgc29ydGVyLnF1aWNrU29ydCh0aGlzLnVMaXN0LCAwLCB0aGlzLnVMaXN0Lmxlbmd0aCAtIDEsIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJVc2VyTGlzdCA9IGZ1bmN0aW9uIGNsZWFyVXNlckxpc3QgKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC+0LHRgNCw0LfQuNGC0YwvINCe0LHQvdC+0LLQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0Y7Qt9C10YDQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5VXNlcnMgPSBmdW5jdGlvbiBkaXNwbGF5VXNlcnMoKSB7XHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcuRE9NLlVTRVJfTElTVF9DU1NfQ0xBU1MpO1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBnZXRFbGVtIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5VU0VSX0xJU1RfQ1NTX0NMQVNTKS5hcHBlbmRDaGlsZChlbGVtLnVzZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIC8vIGluY2x1ZGVcclxuXHJcbiAgICAvKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbiAgICAvKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4gICAgLy8g0J7Rh9C40YnQsNC10YIgRE9NINGB0L7QtNC10YDQttCw0YnQuNC5INGN0LvQtdC80LXQvdGC0Ysg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBVc2VyTGlzdE1hbmFnZXIoKVxyXG5cclxufSkobWFpbkNvbmZpZywgc29ydGVyKTtcclxuLyogZXhwb3J0ZWQgZGFzaGJvYXJkICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHVzZXJMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgc29ydGVyICovXHJcbnZhciBkYXNoYm9hcmQgPSAoZnVuY3Rpb24gY3JlYXRlRGFzaGJvYXJkQ29udHJvbGxlcihjb25maWcsIGRhdGFTb3VyY2UsIHVEYXRhTWFuYWdlciwgdUxpc3RNYW5hZ2VyLCBzb3J0ZXIsIGV2ZW50RW1pdHRlcil7XHJcblxyXG4gICAgdmFyIGludGVydmFsSWQgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dXBFdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2V0dXAoY29uZmlnKTtcclxuICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gc2V0dXBFdmVudEVtaXR0ZXIgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBldmVudEVtaXR0ZXIuYWRkU3Vic2NyaWJlKFwidXNlckxpc3RcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBpZihkYXRhIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBzZXRVc2VyU2V0dGluZyh1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci5hZGRVc2VyVG9Vc2Vyc0FycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnNMaXN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0ID0gdUxpc3RNYW5hZ2VyLnVMaXN0LmNvbmNhdCh1c2Vyc0xpc3QpO1xyXG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gdGhhdC5nZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICB0aGF0LmxvY2FsU2V0dGluZ3NTZXR1cChjb25kaXRpb24pO1xyXG4gICAgICAgICAgICB0aGF0LnNldHVwVXNlckxpc3RET00oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBldmVudEVtaXR0ZXIuYWRkU3Vic2NyaWJlKFwibGFzdE9ubGluZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlcklkID0gZGF0YVswXTtcclxuICAgICAgICAgICAgdmFyIGxhc3RPbmxpbmUgPSBkYXRhWzFdO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudXBkYXRlVXNlck9ubGluZVN0YXR1cyh1c2VySWQsIGxhc3RPbmxpbmUpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInNlbmROZXdNZXNzYWdlXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySW5kZXggPSB1TGlzdE1hbmFnZXIuZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQoZGF0YVswXSk7XHJcbiAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt1c2VySW5kZXhdLnNlbmROZXdNZXNzYWdlID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgdGhhdC50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICB2YXIgc2VyaWFsQ29uZGl0aW9uID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBmaWx0ZXI6IGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5LFxyXG4gICAgICAgICAgICBzb3J0OiBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnksXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VySWQ6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUsIHNlcmlhbENvbmRpdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgdmFyIHNlcmlhbENvbmRpdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgICAgIHZhciBjb25kaXRpb24gPSBudWxsO1xyXG4gICAgICAgIGlmIChzZXJpYWxDb25kaXRpb24pIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uID0gSlNPTi5wYXJzZShzZXJpYWxDb25kaXRpb24pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBjb25kaXRpb24uY3VycmVudFVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbjtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUubG9jYWxTZXR0aW5nc1NldHVwID0gZnVuY3Rpb24gbG9jYWxTZXR0aW5nc1NldHVwKGNvbmRpdGlvbikge1xyXG4gICAgICAgIGlmIChjb25kaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5maWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfRklMVEVSX0lOUFVUX0lEKS52YWx1ZSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uc29ydCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWUgPSBjb25kaXRpb24uc29ydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uY3VycmVudFVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gY29uZGl0aW9uLmN1cnJlbnRVc2VySWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcblxyXG4gICAgLy8g0YTQuNC70YzRgtGA0LDRhtC40Y8g0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gZmlsdGVyKCkge1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5maWx0ZXJCeU5hbWUoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLy8g0YHQvtGA0YLQuNGA0L7QstC60LAg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIHNvcnQoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnNvcnRVc2Vyc0J5RmllbGQoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuZGlzcGxheVVzZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwVXNlcnNMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXR1cFVzZXJzTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBBcnJheS5mcm9tKGNvbmZpZy51c2VycykuZm9yRWFjaChmdW5jdGlvbiBhZGRMaXN0ZW5lcnMgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC51c2VyTGlzdGVuZXIuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maXJzdENoaWxkLmlubmVyVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFVzZXJMaXN0RE9NID0gZnVuY3Rpb24gc2V0dXBVc2VyTGlzdERPTSAoKSB7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWNlc3NUb1VzZXJzTGlzdCgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBVc2Vyc0xpc3RlbmVycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRBY2Vzc1RvVXNlcnNMaXN0ID0gZnVuY3Rpb24gYWNjZXNzVG9Vc2Vyc0RPTSgpIHtcclxuICAgICAgICBjb25maWcudXNlcnMgPSBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICBjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUywgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJMaXN0ID0gZnVuY3Rpb24gZ2V0VXNlckxpc3QgKCkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIHZhciBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yID0gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTGlzdChudWxsKTtcclxuICAgICAgICBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gbG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3Iuc2VuZCgpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlckxpc3RDb25uZWN0aW9uID0gbG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvcjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnVzZXJMaXN0ZW5lciA9IGZ1bmN0aW9uIHVzZXJMaXN0ZW5lcih1c2VySWQpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIodXNlcklkKTtcclxuICAgICAgICB0aGlzLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQodXNlcklkKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YLQutGA0YvQstCw0LXRgiDRh9Cw0YIg0YEg0Y7Qt9C10YDQvtC8LCDQt9Cw0LPRgNGD0LbQsNC10YIg0LzQtdGB0YHQsNC00LbQuCDRjtC30LXRgNCwINC4INC+0YLQvtCx0YDQsNC20LDQtdGCINC40YVcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIgPSBmdW5jdGlvbiBzdGFydENvbnZlcnNhdGlvbldpdGhVc2VyKFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuY2xlYXJNZXNzYWdlTGlzdCgpO1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5nZXRVc2VyRGF0YSh1c2VySWQpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHNhdmVMb2NhbERhdGEgKCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFKS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkudXBkYXRlU2VuZE5ld01lc3NhZ2VGbGFnKHVzZXJJZCwgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8g0J7QsdC90L7QstC70LXRgiDQvNCw0YHRgdC40LIg0YHQvtC+0LHRidC10L3QuNC5INCyINC80L7QtNGD0LvQtSDRh9Cw0YLQsCDQuCDQstGL0LLQvtC00LjRgiDQuNGFINC90LAg0Y3QutGA0LDQvVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0ID0gZnVuY3Rpb24gdXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0KFxyXG4gICAgKSB7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLmdldFVzZXJEYXRhKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zID0gZnVuY3Rpb24gc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlciwgY29uZmlnLkFETUlOX05BTUUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuY2xvc2VDb252ZXJzYXRpb24uYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhhdC5maWx0ZXIuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgICAgICB0aGF0LnNvcnQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB1c2VyRGF0YU1hbmFnZXIuc2V0TWVzc2FnZUFzUmVhZC5iaW5kKHVzZXJEYXRhTWFuYWdlcikpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C+0LzQtdGH0LDQtdGCINC60LDQvdCw0Lsg0Y7Qt9C10YDQsCDQutCw0Log0L/RgNC+0YfQuNGC0LDQvdC90YvQuSAo0LXRgdC70Lgg0YLQsNC8INC10YHRgtGMINC90LXQv9GA0L7Rh9C40YLQsNC90L3Ri9C1INGB0L7QvtCx0YnQtdC90LjRjylcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQgPSBmdW5jdGlvbiBtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gdUxpc3RNYW5hZ2VyLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3VzZXJJbmRleF0uc2VuZE5ld01lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShbe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgZmllbGROYW1lOiBcInNlbmROZXdNZXNzYWdlXCIsXHJcbiAgICAgICAgICAgIGZpZWxkVmFsdWU6IGZhbHNlXHJcbiAgICAgICAgfV0pO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQl9Cw0LrRgNGL0LLQsNC10YIg0LrQsNC90LDQuyDQvtCx0YnQtdC90LjRjyDRgSDRjtC30LXRgNC+0Lwg0Lgg0YfQsNGCXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZUNvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uIGNsb3NlQ29udmVyc2F0aW9uICgpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NIQVRfQ09OVEFJTlNfQkxPQ0tfU1RZTEUpLmNsYXNzTGlzdC5hZGQoY29uZmlnLklOVklTSUJMRV9DTEFTUyk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gbnVsbDtcclxuICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINC00L7QsdCw0LLQu9GP0LXRgiDQvdC+0LLRi9C5INC10LvQtdC80LXQvdGCLdC40L3QtNC40LrQsNGC0L7RgCDQslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlciA9IGZ1bmN0aW9uIHRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIoKSB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VEaXY7XHJcbiAgICAgICAgT2JqZWN0LmtleXModUxpc3RNYW5hZ2VyLnVMaXN0KS5tYXAoZnVuY3Rpb24gYmxpbmsoa2V5KSB7XHJcbiAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYgPSB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFXHJcbiAgICAgICAgICAgIClbMF07XHJcbiAgICAgICAgICAgIGlmICh1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS5zZW5kTmV3TWVzc2FnZSAmJiAhbmV3TWVzc2FnZURpdikge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFKTtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFtrZXldLnVzZXJFbGVtZW50LmFwcGVuZENoaWxkKG5ld01lc3NhZ2VEaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCF1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS5zZW5kTmV3TWVzc2FnZSAmJiBuZXdNZXNzYWdlRGl2KSB7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5yZW1vdmVDaGlsZChuZXdNZXNzYWdlRGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucyA9IGZ1bmN0aW9uIHNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBpbnRlcnZhbElkLnB1c2ggPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHVMaXN0TWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uICh2aWV3SWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51cGRhdGVVc2VyT25saW5lU3RhdHVzKFxyXG4gICAgICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt2aWV3SWRdLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rbdmlld0lkXS5sYXN0T25saW5lXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGF0LnNldHVwVXNlckxpc3RET00oKTtcclxuICAgICAgICB9LGNvbmZpZy5pbnRlcnZhbC5VUERBVEVfVVNFUlNfVElNRSlcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiBjbG9zZUFwcCAoKSB7XHJcbiAgICAgICAgaW50ZXJ2YWxJZC5mb3JFYWNoKGZ1bmN0aW9uIGNsZWFyIChpZCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGlkKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5jbGVhck1lc3NhZ2VMaXN0KCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmNsZWFyVXNlckxpc3QoKTtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyTGlzdENvbm5lY3Rpb24uYWJvcnQoKVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IERhc2hib2FyZENvbnRyb2xsZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcsIGRhdGFTb3VyY2UsIHVzZXJEYXRhTWFuYWdlciwgdXNlckxpc3RNYW5hZ2VyLCBzb3J0ZXIsIGV2ZW50RW1pdHRlcik7XHJcbi8qIGV4cG9ydGVkIGxhdW5jaGVyICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbnZhciBsYXVuY2hlciA9IChmdW5jdGlvbiBjcmVhdGVMYXVuY2hlciAoY29uZmlnKSB7XHJcblxyXG4gICAgdmFyIERPTVZhcmlhYmxlcyA9IHt9O1xyXG4gICAgdmFyIGtleU9mVmFsdWUgPSB7XHJcbiAgICAgICAgY2hhdFRpdGxlOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRVcmw6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hhdENsYXNzOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRQb3NpdGlvblNlbGVjdDoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYWxsb3dNaW5pbWl6ZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFsbG93RHJhZzoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNob3dUaW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWlyZU5hbWU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmFkaW8gYnV0dG9uIChsYXN0IGVsZW1lbnQsIGl0J3MgaW1wb3RlbnQpXHJcbiAgICAgICAgbmV0d29ya1JhZGlvWE1SOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwiWEhSXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5ldHdvcmtSYWRpb0xvbmdQb2xsOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwibG9uZ1BvbGxcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbmV0d29ya1JhZGlvRmV0Y2g6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIixcclxuICAgICAgICAgICAgdHJ1ZTogXCJmZXRjaFwiXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBMYXVuY2hlcigpIHt9XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLmdldERhdGFGcm9tRWxlbWVudCA9IGZ1bmN0aW9uIGdldERhdGFGcm9tRWxlbWVudCAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHNyYyA9IFwiXCI7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0eXBlT2ZWYWx1ZTtcclxuICAgICAgICBPYmplY3Qua2V5cyhET01WYXJpYWJsZXMpLm1hcChmdW5jdGlvbiBzZXR1cERhdGEgKGVsZW1lbnROYW1lLCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZihrZXlbZWxlbWVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlT2ZWYWx1ZSA9IERPTVZhcmlhYmxlc1tlbGVtZW50TmFtZV0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlT2ZWYWx1ZSA9PT0gXCJyYWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKERPTVZhcmlhYmxlc1tlbGVtZW50TmFtZV0uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IFwiJyZcIiArIFwidHlwZU9mUmVxdWVzdFwiICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUsIHR5cGVPZlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSBcIicmXCIgKyBlbGVtZW50TmFtZSArIFwiPSdcIiArIHRoYXQuZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnROYW1lLCB0eXBlT2ZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcmMgKz0gZWxlbWVudE5hbWUgKyBcIj0nXCIgKyB0aGF0LmdldEVsZW1lbnRWYWx1ZShlbGVtZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYoc3JjLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgc3JjID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNyYztcclxuICAgIH07XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLmdldEVsZW1lbnRWYWx1ZSA9IGZ1bmN0aW9uIGdldEVsZW1lbnRWYWx1ZSAobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBET01WYXJpYWJsZXNbbmFtZV1ba2V5T2ZWYWx1ZVtuYW1lXS50eXBlT2ZWYWx1ZV07XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdCAoKSB7XHJcbiAgICAgICAgdmFyIHNyYyA9IGNvbmZpZy5sYXVuY2hlci5zcmNTdGFydCArIHRoaXMuZ2V0RGF0YUZyb21FbGVtZW50KGtleU9mVmFsdWUpO1xyXG4gICAgICAgIHNyYyArPSBjb25maWcubGF1bmNoZXIuc3JjRW5kO1xyXG4gICAgICAgIERPTVZhcmlhYmxlcy5zY3JpcHRDb2RlLmlubmVySFRNTCA9IHNyYztcclxuICAgIH1cclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbmZpZy5sYXVuY2hlci5hZnRlci5tYXAoKGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdFBhcnQgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgRE9NVmFyaWFibGVzW2VsZW1lbnRdID0gIGdldEVsZW1lbnQoY29uZmlnLmxhdW5jaGVyLnBhdHRlcm4gKyBlbGVtZW50LCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIERPTVZhcmlhYmxlc1tlbGVtZW50XS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgY3JlYXRlU2NyaXB0LmJpbmQodGhhdCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uIGNsb3NlQXBwICgpIHtcclxuICAgICAgICBET01WYXJpYWJsZXMgPSB7fTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMYXVuY2hlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGFib3V0ICovXHJcbi8vIFNUVUIgLy9cclxudmFyIGFib3V0ID0gKGZ1bmN0aW9uIGNyZWF0ZUFib3V0UGFnZUFwcCAoKSB7XHJcbiAgICBmdW5jdGlvbiBBYm91dCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBYm91dCgpO1xyXG5cclxufSkoKTtcclxuLyogZ2xvYmFsIGRhc2hib2FyZCAqL1xyXG4vKiBnbG9iYWwgbGF1bmNoZXIgKi9cclxuLyogZ2xvYmFsIGFib3V0ICovXHJcbi8qIGdsb2JhbCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbi8qIGdsb2JhbCB2aWV3RmFjdG9yeSAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgbWFpbkNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gY3JlYXRlTWFpbkNvbnRyb2xsZXIgKGNvbmZpZykge1xyXG5cclxuICAgIHZhciBtYXRjaGVzSHRtbFBhdGggPSB7XHJcbiAgICAgICAgZGFzaGJvYXJkOiBjb25maWcucm91dGVyLkRBU0hCT0FSRF9IVE1MX1BBVEgsXHJcbiAgICAgICAgY29uZmlndXJhdGlvbjogY29uZmlnLnJvdXRlci5MQVVOQ0hFUl9IVE1MX1BBVEgsXHJcbiAgICAgICAgYWJvdXQ6IGNvbmZpZy5yb3V0ZXIuQUJPVVRfSFRNTF9QQVRIXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgY2xvc2VGdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgZGFzaGJvYXJkOiBkYXNoYm9hcmQuY2xvc2VBcHAuYmluZChkYXNoYm9hcmQpLFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGxhdW5jaGVyLmNsb3NlQXBwLmJpbmQobGF1bmNoZXIpLFxyXG4gICAgICAgIGFib3V0OiBhYm91dC5jbG9zZUFwcC5iaW5kKGFib3V0KVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc3RhcnRGdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgZGFzaGJvYXJkOiBkYXNoYm9hcmQuc3RhcnRBcHAuYmluZChkYXNoYm9hcmQpLFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGxhdW5jaGVyLnN0YXJ0QXBwLmJpbmQobGF1bmNoZXIpLFxyXG4gICAgICAgIGFib3V0OiBhYm91dC5zdGFydEFwcC5iaW5kKGFib3V0KVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBNYWluQ29udHJvbGxlciAoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbiBoYXNDaGFuZ2VFdmVudEFkZCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGF0LmhhbmRsZVVybChlbGVtZW50Lm5ld1VSTCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vINCf0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0YsgLSDRgdGH0LjRgtCw0YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0Lgg0LfQsNC/0YPRgdGC0LjRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6XHJcbiAgICAgICAgdGhhdC5oYW5kbGVVcmwod2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIiNkYXNoYm9hcmRcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6IFVSTFxyXG4gICAgTWFpbkNvbnRyb2xsZXIucHJvdG90eXBlLmhhbmRsZVVybCA9IGZ1bmN0aW9uIGhhbmRsZVVybCh1cmwpIHtcclxuICAgICAgICB2YXIgaGFzaCA9IG51bGw7XHJcbiAgICAgICAgaWYodXJsLmluZGV4T2YoXCIjXCIpID09PSAtMSl7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBoYXNoID0gdXJsLnNwbGl0KCcjJykucG9wKCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZVByZXZpb3VzUGFnZShoYXNoKTtcclxuXHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuJyArIGNvbmZpZy5yb3V0ZXIuTkFWSUdBVElPTl9BQ1RJVkVfQ1NTKS5mb3JFYWNoKGZ1bmN0aW9uIHJlbW92ZUNsYXNzQWN0aXZlIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcucm91dGVyLk5BVklHQVRJT05fQUNUSVZFX0NTUylcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWY9XCIjJyArIGhhc2ggKyAnXCJdJykuZm9yRWFjaChmdW5jdGlvbiBhZGRDbGFzc0FjdGl2ZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLnJvdXRlci5OQVZJR0FUSU9OX0FDVElWRV9DU1MpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjbGVhckVsZW1lbnRDb250ZW50KGNvbmZpZy5yb3V0ZXIuQ09OVEVOVF9DTEFTUyk7XHJcbiAgICAgICAgdmlld0ZhY3RvcnkuY3JlYXRlVmlldyhtYXRjaGVzSHRtbFBhdGhbaGFzaF0sIG51bGwsIGNvbmZpZy5yb3V0ZXIuQ09OVEVOVF9DTEFTUykudGhlbihmdW5jdGlvbiBpbnZva2VTdGFydEZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc3RhcnRGdW5jdGlvbnNbaGFzaF0oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5jbG9zZVByZXZpb3VzUGFnZSA9IGZ1bmN0aW9uIGNsb3NlUHJldmlvdXNQYWdlKGhhc2gpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhjbG9zZUZ1bmN0aW9ucykubWFwKGZ1bmN0aW9uIGludm9rZUNsb3NlRnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZihrZXkgIT09IGhhc2gpIHtcclxuICAgICAgICAgICAgICAgIGNsb3NlRnVuY3Rpb25zW2tleV0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1haW5Db250cm9sbGVyKCk7XHJcblxyXG59KShtYWluQ29uZmlnKTtcclxuXHJcbm1haW5Db250cm9sbGVyLnN0YXJ0QXBwKCk7Il19
