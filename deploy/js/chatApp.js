var mainConfig={DOM:{MAIN_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft",AUTHORIZATION_MENU_CLASS:"root_chat_for_touchsoft_input-name-block",USER_NAME_INPUT_CLASS:"root_chat_for_touchsoft_input-name",SEND_USER_NAME_BUTTON:"root_chat_for_touchsoft_input-name-button",SEND_MESSAGE_MIN_SIZE_BUTTON:"root_chat_for_touchsoft_minimize-style__send-button",SEND_MESSAGE_FULL_SIZE_BUTTON:"root_chat_for_touchsoft__bottom_send-button",CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft__textarea",CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style__message-input",TITLE_BLOCK_CLASS:"root_chat_for_touchsoft-title",CHANGE_STYLE_BUTTON_MAX_SIZE:"root_chat_for_touchsoft__top_minimize-button",MINIMIZE_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style",SET_MIN_STYLE_BUTTON:"root_chat_for_touchsoft_minimize-style__max-button",SET_MAX_STYLE_BUTTON:"root_chat_for_touchsoft__top_minimize-button"},DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",CSS_CURRENT_INPUT_CLASS:"root_chat_for_touchsoft__textarea",currentUserSettings:{userId:null,userName:null,isMinimize:!1,readLastMessage:!1,sendNewMessage:!1,lastOnline:(new Date).getTime()},chatSettings:{allowDrag:!1,position:"right",chatTitle:"TouchSoft Chat",allowMinimize:!0,outerCssClass:"touchsoft-chat_main-block",typeOfRequest:"fetch",requireName:!0},INVISIBLE_CLASS:"invisible",CHAT_POSITION_RIGHT:"root_chat_for_touchsoft_right-position",CHAT_POSITION_LEFT:"root_chat_for_touchsoft_left-position",LOCAL_STORAGE_NAME:"userID_touchsoft_chat",DEFAULT_USER_NAME:"guest",DEFAULT_CSS_CLASS_FOR_CHAT:"touchsoft-chat_main-block",DEFAULT_CHAT_TITLE:"TouchSoft Chat",HTML_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/chatApplication/chat.html",CSS_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/css/chat.css",messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root_chat_for_touchsoft__top_messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},DISPLAY_MESSAGE_DATE:!0,DISPLAY_SENDER_NAME:!0,DISPLAY_MESSAGE:!0,UPDATE_USER_DATA_TIME:5e3};function parseSrcForParameters(e){var s={};return e.substr(e.indexOf("?")+1).split("&").forEach(function(e){var t=e.split("=");t[1]=t[1].replace(/'/g,""),s[t[0]]=t[1]}),s}function setOuterChatSettingToConfig(t,s){Object.keys(t).map(function(e){s.chatSettings[e]=t[e]})}setOuterChatSettingToConfig(parseSrcForParameters(document.currentScript.getAttribute("src")),mainConfig);var dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},dataConnector=function(e){var t;function s(){}return s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,a,r,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(r,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},a?s.send(a):s.send()})},t=new s,"fetch"===e.typeOfRequest?{request:t.requestFetch}:{request:t.requestXMR}}(dataConnectorConfig),dataSource=function(a){var e;function t(){a=a}return t.prototype.createRequestPath=function(e,t,s){var n=e+"/users";return null!==t&&(n+="/"+t),null!==s&&(n+="/"+s),n+=".json"},t.prototype.getHTML=function(e){return a.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},t.prototype.getUserData=function(e){var s={},t=this.createRequestPath(dataBaseUrl,e,null);return a.request(t,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},t.prototype.getSettingField=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,t);return a.request(s,null,"GET","application/json")},t.prototype.setSettingField=function(e,t,s){var n=this.createRequestPath(dataBaseUrl,e,t);return a.request(n,JSON.stringify(s),"PUT","application/json")},t.prototype.sendMessage=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,"messages"),n=JSON.stringify({date:t.date,message:t.message,title:"message",user:t.sender,itIsRead:t.read});return a.request(s,n,"POST","application/json")},t.prototype.getAllUsers=function(){var s={},e=this.createRequestPath(dataBaseUrl,null,null);return a.request(e,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},{usersAPI:{getUserData:(e=new t).getUserData.bind(e),sendMessage:e.sendMessage.bind(e),setField:e.setSettingField.bind(e),getField:e.getSettingField.bind(e),getAllUsers:e.getAllUsers.bind(e)},commonAPI:{getHTML:e.getHTML.bind(e)}}}(dataConnector),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var a=this.createMessageContainerDiv(n,s),r=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return a.appendChild(r),a.appendChild(o),a.appendChild(i),a},e.prototype.getMessageObjectsForMarkAsRead=function(e,t){var s,n=[],a=e||u.currentUserSettings.userName,r=t||u.currentUserSettings.userId;for(s=this.messageList.length-1;0<=s;s--)if(this.messageList[s].sender!==a){if(this.messageList[s].read)break;n.push({userId:r,fieldName:"messages/"+this.messageList[s].id+"/itIsRead",fieldValue:!0})}return n},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(n){function e(){}function a(e,t,s,n,a){return{sender:s,message:e,read:n,date:t,id:a}}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.getUserData=function(e){return dataSource.usersAPI.getUserData(e).then(function(t){if(n.currentUserSettings.userName=t.userName,n.currentUserSettings.isMinimize=t.isMinimize,t.messages){var e,s=[];Object.keys(t.messages).map(function(e){s.push(a(t.messages[e].message,t.messages[e].date,t.messages[e].user,t.messages[e].itIsRead,e))}),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}})},e.prototype.createNewUserProfileToDataBase=function(){var t=this;Object.keys(n.currentUserSettings).map(function(e){t.saveSettingField(e)})},e.prototype.saveSettingField=function(e){this.saveUserSettingsToDataSource([{userId:n.currentUserSettings.userId,fieldName:e,fieldValue:n.currentUserSettings[e]}])},e.prototype.sendMessage=function(e){var t,s,n=a(this.getMessageFromInputElement(),(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),e,!1);messageListManager.addMessageToMessageList(n),messageListManager.displayMessages(),this.saveMessageToDataSource(n)},e.prototype.getMessageFromInputElement=function(){var e=getElement(n.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&this.saveUserSettingsToDataSource(e)},e.prototype.saveMessageToDataSource=function(e){if(e.sender===n.currentUserSettings.userName){var t=[{userId:n.currentUserSettings.userId,fieldName:"sendNewMessage",fieldValue:!0}];this.saveUserSettingsToDataSource(t)}dataSource.usersAPI.sendMessage(n.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setField(e.userId,e.fieldName,e.fieldValue)})},new e}(mainConfig),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,a){var r=this;return new Promise(function(e,t){s?(n&&r.includeViewCssToPage(r.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(r.includeViewHTMLToPage(s,a))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var a=document.createElement("link");return n&&a.setAttribute("id",n),t&&a.setAttribute("rel",t),s&&a.setAttribute("type",s),a.setAttribute("href",e),a},new e}(dataSource),chatCustomizer=function(t){function e(){}return e.prototype.setupOuterChatSettings=function(){this.allowMinimize(),this.setPositionOfMainBlock(),this.setTitle(),this.setMainCssClass(),this.allowDragNDrop()},e.prototype.allowDragNDrop=function(){var e=getElement(t.DOM.TITLE_BLOCK_CLASS),c=getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS);"false"!==t.chatSettings.allowDrag&&e.addEventListener("mousedown",function(e){var t,s,n,a,r,o,i;function u(e){c.style.left=e.pageX-s+"px",c.style.top=e.pageY-n+"px"}t={top:(i=c.getBoundingClientRect()).top+window.pageYOffset,left:i.left+window.pageXOffset},s=e.pageX-t.left,n=e.pageY-t.top,a=function(e){u(e)},r=function(){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)},o=function(){return!1},u(e),c.style.zIndex=1e3,document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),c.addEventListener("dragstart",o)})},e.prototype.setPositionOfMainBlock=function(){"right"===t.chatSettings.position?getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(t.CHAT_POSITION_RIGHT):getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(t.CHAT_POSITION_LEFT)},e.prototype.setTitle=function(){t.chatSettings.chatTitle.length<1&&(t.chatSettings.chatTitle=t.DEFAULT_CHAT_TITLE),getElement(t.DOM.TITLE_BLOCK_CLASS).innerHTML=t.chatSettings.chatTitle},e.prototype.allowMinimize=function(){"false"===t.chatSettings.allowMinimize&&getElement(t.DOM.CHANGE_STYLE_BUTTON_MAX_SIZE).classList.add(t.INVISIBLE_CLASS)},e.prototype.setMainCssClass=function(){t.chatSettings.outerCssClass.length<1&&(t.chatSettings.outerCssClass=t.DEFAULT_CSS_CLASS_FOR_CHAT),getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).parentNode.classList.add(t.chatSettings.outerCssClass)},new e}(mainConfig),chatController=function(t){function s(e){return e+(new Date).getTime()}function e(){}return e.prototype.startApp=function(){var e=this;return this.setupChatView().then(function(){e.authorization(t.chatSettings.requireName),e.setupChatBasicListeners()}).then(function(){t.currentUserSettings.userId?userDataManager.getUserData(t.currentUserSettings.userId).then(function(){e.setupChatStyle(),e.setupIntervalFunctions(),e.setupChatSendListeners()}):e.setupChatStyle()}).then(function(){chatCustomizer.setupOuterChatSettings()})},e.prototype.authorization=function(e){userDataManager.setup(t),t.currentUserSettings.userId=this.getUserIdFromLocalStorage(),t.currentUserSettings.userId||("false"===e?(t.currentUserSettings.userId=s(t.DEFAULT_USER_NAME),t.currentUserSettings.userName=t.DEFAULT_USER_NAME,this.saveUserIdToLocalStorage(t.currentUserSettings.userId),userDataManager.createNewUserProfileToDataBase()):this.toggleAuthorizationMenuVisible())},e.prototype.toggleAuthorizationMenuVisible=function(){getElement(t.DOM.AUTHORIZATION_MENU_CLASS).classList.toggle(t.INVISIBLE_CLASS)},e.prototype.getUserNameFromInput=function(){t.currentUserSettings.userName=getElement(t.DOM.USER_NAME_INPUT_CLASS).value,t.currentUserSettings.userId=s(t.currentUserSettings.userName),userDataManager.setup(t),userDataManager.createNewUserProfileToDataBase(),this.saveUserIdToLocalStorage(t.currentUserSettings.userId),this.toggleAuthorizationMenuVisible(),this.setupIntervalFunctions(),this.setupChatSendListeners()},e.prototype.setupChatSendListeners=function(){getElement(t.DOM.SEND_MESSAGE_FULL_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),getElement(t.DOM.SEND_MESSAGE_MIN_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},e.prototype.setupChatBasicListeners=function(){var e=this;getElement(t.DOM.SEND_USER_NAME_BUTTON).addEventListener("click",e.getUserNameFromInput.bind(e)),getElement(t.DOM.SET_MAX_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e)),getElement(t.DOM.SET_MIN_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e))},e.prototype.setupChatView=function(){return viewFactory.createView(t.HTML_FILE_PATH,t.CSS_FILE_PATH,null)},e.prototype.setupChatStyle=function(){t.currentUserSettings.isMinimize?getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS):getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS)},e.prototype.minMaxStyleToggle=function(){getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),t.currentUserSettings.isMinimize=!1===t.currentUserSettings.isMinimize,this.changeInputAndSendButtonClass(),userDataManager.saveSettingField("isMinimize")},e.prototype.activityNotify=function(){var e=new Date;t.currentUserSettings.lastOnline=e.getTime(),userDataManager.saveSettingField("lastOnline")},e.prototype.changeInputAndSendButtonClass=function(){t.currentUserSettings.isMinimize?t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS},e.prototype.saveUserIdToLocalStorage=function(e){localStorage.setItem(t.LOCAL_STORAGE_NAME,e)},e.prototype.getUserIdFromLocalStorage=function(){return localStorage.getItem(t.LOCAL_STORAGE_NAME)},e.prototype.setupIntervalFunctions=function(){var e=this;setInterval(function(){userDataManager.getUserData(t.currentUserSettings.userId),e.activityNotify()},t.UPDATE_USER_DATA_TIME)},new e}(mainConfig);chatController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRBcHAuanMiXSwibmFtZXMiOlsibWFpbkNvbmZpZyIsIkRPTSIsIk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUyIsIkFVVEhPUklaQVRJT05fTUVOVV9DTEFTUyIsIlVTRVJfTkFNRV9JTlBVVF9DTEFTUyIsIlNFTkRfVVNFUl9OQU1FX0JVVFRPTiIsIlNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT04iLCJTRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTiIsIkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTIiwiQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1MiLCJUSVRMRV9CTE9DS19DTEFTUyIsIkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUiLCJNSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTIiwiU0VUX01JTl9TVFlMRV9CVVRUT04iLCJTRVRfTUFYX1NUWUxFX0JVVFRPTiIsIkRBVEFfQkFTRV9VUkwiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJzZW5kTmV3TWVzc2FnZSIsImxhc3RPbmxpbmUiLCJEYXRlIiwiZ2V0VGltZSIsImNoYXRTZXR0aW5ncyIsImFsbG93RHJhZyIsInBvc2l0aW9uIiwiY2hhdFRpdGxlIiwiYWxsb3dNaW5pbWl6ZSIsIm91dGVyQ3NzQ2xhc3MiLCJ0eXBlT2ZSZXF1ZXN0IiwicmVxdWlyZU5hbWUiLCJJTlZJU0lCTEVfQ0xBU1MiLCJDSEFUX1BPU0lUSU9OX1JJR0hUIiwiQ0hBVF9QT1NJVElPTl9MRUZUIiwiTE9DQUxfU1RPUkFHRV9OQU1FIiwiREVGQVVMVF9VU0VSX05BTUUiLCJERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVCIsIkRFRkFVTFRfQ0hBVF9USVRMRSIsIkhUTUxfRklMRV9QQVRIIiwiQ1NTX0ZJTEVfUEFUSCIsIm1lc3NhZ2VzIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfTUVTU0FHRV9DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIkRJU1BMQVlfTUVTU0FHRV9EQVRFIiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIkRJU1BMQVlfTUVTU0FHRSIsIlVQREFURV9VU0VSX0RBVEFfVElNRSIsInBhcnNlU3JjRm9yUGFyYW1ldGVycyIsInNyYyIsInVzZXJDb25maWdPYmplY3QiLCJzdWJzdHIiLCJpbmRleE9mIiwic3BsaXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsInBhcmFtT2JqIiwicmVwbGFjZSIsInNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyIsIm91dGVyQ29uZmlnT2JqZWN0IiwiY29uZmlnIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsImdldEF0dHJpYnV0ZSIsImRhdGFCYXNlVXJsIiwiZ2V0RWxlbWVudCIsInNlbGVjdG9yIiwiaXNBbGwiLCJpdElzSWQiLCJzZWxlY3RvclN0YXJ0IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwicHJvdG90eXBlIiwicmVxdWVzdEZldGNoIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3RUeXBlIiwiY29udGVudFR5cGUiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInRleHQiLCJyZXF1ZXN0WE1SIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25sb2FkIiwiSlNPTiIsInBhcnNlIiwib25lcnJvciIsInN0YXR1c1RleHQiLCJzZW5kIiwicmVxdWVzdCIsImRhdGFTb3VyY2UiLCJkYXRhU291cmNlSW5zdGFuY2UiLCJEYXRhU291cmNlIiwiY3JlYXRlUmVxdWVzdFBhdGgiLCJkYXRhQmFzZVVSTCIsInJlcXVlc3RQb3N0Zml4IiwicGF0aCIsImdldEhUTUwiLCJnZXRVc2VyRGF0YSIsInVzZXJEYXRhIiwidGhpcyIsImRhdGEiLCJnZXRTZXR0aW5nRmllbGQiLCJmaWVsZE5hbWUiLCJzZXRTZXR0aW5nRmllbGQiLCJ2YWx1ZSIsInN0cmluZ2lmeSIsInNlbmRNZXNzYWdlIiwibWVzc2FnZU9iamVjdCIsImpzb25NZXNzYWdlIiwiZGF0ZSIsIm1lc3NhZ2UiLCJ0aXRsZSIsInVzZXIiLCJzZW5kZXIiLCJpdElzUmVhZCIsInJlYWQiLCJnZXRBbGxVc2VycyIsInVzZXJzRGF0YUxpc3QiLCJ1c2Vyc0FQSSIsImJpbmQiLCJzZXRGaWVsZCIsImdldEZpZWxkIiwiY29tbW9uQVBJIiwibWVzc2FnZUxpc3RNYW5hZ2VyIiwiTWVzc2FnZUxpc3RNYW5hZ2VyIiwic2V0dXAiLCJtZXNzYWdlTGlzdCIsImNET00iLCJtZXNzYWdlc0Jsb2NrIiwiY3JlYXRlTWVzc2FnZUVsZW1lbnQiLCJtZXNzYWdlRGF0ZSIsImlzUmVhZCIsIm1lc3NhZ2VDb250YWluZXJEaXYiLCJjcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2IiwibWVzc2FnZURhdGVEaXYiLCJjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2siLCJtZXNzYWdlU2VuZGVyRGl2IiwibWVzc2FnZURpdiIsImFwcGVuZENoaWxkIiwiZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkIiwicmVsYXRpdmVVc2VyTmFtZSIsInJlbGF0aXZlVXNlcklkIiwiaSIsIm1lc3NhZ2VzSXNSZWFkIiwibGVuZ3RoIiwicHVzaCIsImlkIiwiZmllbGRWYWx1ZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0Rpc3BsYXkiLCJzdHlsZUNsYXNzZXMiLCJkaXYiLCJzdHlsZSIsImlubmVySFRNTCIsImNyZWF0ZU1lc3NhZ2VMaXN0IiwibWVzc2FnZU9iamVjdHMiLCJuZXdNZXNzYWdlTGlzdCIsInVwZGF0ZU1lc3NhZ2VMaXN0IiwiZGlzcGxheU1lc3NhZ2VzIiwiYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqIiwidGhhdCIsImNsZWFyQ2hhdCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInVzZXJEYXRhTWFuYWdlciIsIlVzZXJEYXRhTWFuYWdlciIsImNyZWF0ZU1lc3NhZ2VPYmplY3QiLCJtZXNzYWdlc09iamVjdCIsImNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSIsInNhdmVTZXR0aW5nRmllbGQiLCJzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIiwic2VuZGVyTmFtZSIsIm1pbnV0ZXMiLCJnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsImdldEhvdXJzIiwiY29uY2F0Iiwic2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UiLCJzZXRNZXNzYWdlQXNSZWFkIiwidXNlclNldHRpbmdzIiwic2V0dGluZ3MiLCJuZXdGaWVsZFNldHRpbmciLCJ2aWV3RmFjdG9yeSIsIlZpZXdGYWN0b3J5IiwiY3JlYXRlVmlldyIsImh0bWxQYXRoIiwiY3NzUGF0aCIsImNvbnRhaW5lckNsYXNzIiwiaW5jbHVkZVZpZXdDc3NUb1BhZ2UiLCJjcmVhdGVDU1NMaW5rIiwiaW5jbHVkZVZpZXdIVE1MVG9QYWdlIiwiRXJyb3IiLCJjb250YWluZXJEaXYiLCJodG1sIiwibGluayIsImhlYWQiLCJmaWxlUGF0aCIsInJlbCIsInR5cGUiLCJzZXRBdHRyaWJ1dGUiLCJjaGF0Q3VzdG9taXplciIsIkNoYXRDdXN0b21pemVyIiwic2V0dXBPdXRlckNoYXRTZXR0aW5ncyIsInNldFBvc2l0aW9uT2ZNYWluQmxvY2siLCJzZXRUaXRsZSIsInNldE1haW5Dc3NDbGFzcyIsImFsbG93RHJhZ05Ecm9wIiwiY2xpY2tCbG9jayIsImRyYWdCbG9jayIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29yZHMiLCJzaGlmdFgiLCJzaGlmdFkiLCJtb3ZlT2JqIiwic2V0TnVsbCIsImVuZERyYWciLCJib3giLCJtb3ZlQXQiLCJlbGVtIiwibGVmdCIsInBhZ2VYIiwidG9wIiwicGFnZVkiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aW5kb3ciLCJwYWdlWU9mZnNldCIsInBhZ2VYT2Zmc2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInpJbmRleCIsInBhcmVudE5vZGUiLCJjaGF0Q29udHJvbGxlciIsImdldEhhc2giLCJzdHIiLCJDaGF0Q29udHJvbGxlciIsInN0YXJ0QXBwIiwic2V0dXBDaGF0VmlldyIsImF1dGhvcml6YXRpb24iLCJzZXR1cENoYXRCYXNpY0xpc3RlbmVycyIsInNldHVwQ2hhdFN0eWxlIiwic2V0dXBJbnRlcnZhbEZ1bmN0aW9ucyIsInNldHVwQ2hhdFNlbmRMaXN0ZW5lcnMiLCJ1c2VyTmFtZUlzUmVxdWlyZSIsImdldFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UiLCJzYXZlVXNlcklkVG9Mb2NhbFN0b3JhZ2UiLCJ0b2dnbGVBdXRob3JpemF0aW9uTWVudVZpc2libGUiLCJ0b2dnbGUiLCJnZXRVc2VyTmFtZUZyb21JbnB1dCIsIm1pbk1heFN0eWxlVG9nZ2xlIiwiY2hhbmdlSW5wdXRBbmRTZW5kQnV0dG9uQ2xhc3MiLCJhY3Rpdml0eU5vdGlmeSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwic2V0SW50ZXJ2YWwiXSwibWFwcGluZ3MiOiJBQUVBLElBQUlBLFdBQWEsQ0FDYkMsSUFBSyxDQUNEQyw0QkFBNkIsMEJBQzdCQyx5QkFBMEIsMkNBQzFCQyxzQkFBdUIscUNB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Q0FNcERtUSxFQUFlcEwsVUFBVThMLHlCQUEyQixTQUFrQ25RLEdBQ2xGMFEsYUFBYUMsUUFBUTNOLEVBQU83QixtQkFBb0JuQixJQUdwRHlQLEVBQWVwTCxVQUFVNkwsMEJBQTRCLFdBQ2pELE9BQU9RLGFBQWFFLFFBQVE1TixFQUFPN0IscUJBS3ZDc08sRUFBZXBMLFVBQVUwTCx1QkFBeUIsV0FDOUMsSUFBSWpGLEVBQU9oRSxLQUNYK0osWUFBYSxXQUNUM0YsZ0JBQWdCdEUsWUFBWTVELEVBQU9qRCxvQkFBb0JDLFFBQ3ZEOEssRUFBSzJGLGtCQUNOek4sRUFBT2Isd0JBR1AsSUFBSXNOLEVBN0tNLENBK0tsQjNRLFlBRUh3USxlQUFlSSIsImZpbGUiOiJjaGF0QXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9jb25maWdcclxuXHJcbnZhciBtYWluQ29uZmlnID0ge1xyXG4gICAgRE9NOiB7XHJcbiAgICAgICAgTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0XCIsXHJcbiAgICAgICAgQVVUSE9SSVpBVElPTl9NRU5VX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X2lucHV0LW5hbWUtYmxvY2tcIixcclxuICAgICAgICBVU0VSX05BTUVfSU5QVVRfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfaW5wdXQtbmFtZVwiLFxyXG4gICAgICAgIFNFTkRfVVNFUl9OQU1FX0JVVFRPTjogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9pbnB1dC1uYW1lLWJ1dHRvblwiLFxyXG5cclxuICAgICAgICBTRU5EX01FU1NBR0VfTUlOX1NJWkVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X21pbmltaXplLXN0eWxlX19zZW5kLWJ1dHRvblwiLFxyXG5cclxuICAgICAgICBTRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTjogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fYm90dG9tX3NlbmQtYnV0dG9uXCIsXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YIg0LTQu9GPINCy0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX01BWF9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RleHRhcmVhXCIsXHJcbiAgICAgICAgQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbWluaW1pemUtc3R5bGVfX21lc3NhZ2UtaW5wdXRcIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgiB0aXRsZVxyXG4gICAgICAgIFRJVExFX0JMT0NLX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0LXRpdGxlXCIsXHJcbiAgICAgICAgQ0hBTkdFX1NUWUxFX0JVVFRPTl9NQVhfU0laRTogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdG9wX21pbmltaXplLWJ1dHRvblwiLFxyXG4gICAgICAgIC8vINGH0LDRgiDQsiDRgdGC0LjQu9C1IG1pblxyXG4gICAgICAgIE1JTklNSVpFX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbWluaW1pemUtc3R5bGVcIixcclxuICAgICAgICBTRVRfTUlOX1NUWUxFX0JVVFRPTjogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZV9fbWF4LWJ1dHRvblwiLFxyXG4gICAgICAgIFNFVF9NQVhfU1RZTEVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190b3BfbWluaW1pemUtYnV0dG9uXCJcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGRhdGFTb3VyY2VcclxuICAgIERBVEFfQkFTRV9VUkw6IFwiaHR0cHM6Ly9vbmxpbmVjb25zdWx0YW50d2ViYXBwLmZpcmViYXNlaW8uY29tXCIsXHJcblxyXG5cclxuICAgIC8vIHVzZXJEYXRhTWFuYWdlclxyXG4gICAgQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RleHRhcmVhXCIsXHJcblxyXG4gICAgLy8g0L3QsNGB0YLRgNC+0LnQutC4INGC0LXQutGD0YnQtdCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMXHJcbiAgICBjdXJyZW50VXNlclNldHRpbmdzOiB7XHJcbiAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgIHVzZXJOYW1lOiBudWxsLFxyXG4gICAgICAgIGlzTWluaW1pemU6IGZhbHNlLFxyXG4gICAgICAgIHJlYWRMYXN0TWVzc2FnZTogZmFsc2UsXHJcbiAgICAgICAgc2VuZE5ld01lc3NhZ2U6IGZhbHNlLFxyXG4gICAgICAgIGxhc3RPbmxpbmU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpXHJcbiAgICB9LFxyXG5cclxuICAgIGNoYXRTZXR0aW5nczoge1xyXG4gICAgICAgIGFsbG93RHJhZzogZmFsc2UsXHJcbiAgICAgICAgcG9zaXRpb246IFwicmlnaHRcIixcclxuICAgICAgICBjaGF0VGl0bGU6IFwiVG91Y2hTb2Z0IENoYXRcIixcclxuICAgICAgICBhbGxvd01pbmltaXplOiB0cnVlLFxyXG4gICAgICAgIG91dGVyQ3NzQ2xhc3M6ICd0b3VjaHNvZnQtY2hhdF9tYWluLWJsb2NrJyxcclxuICAgICAgICB0eXBlT2ZSZXF1ZXN0OiBcImZldGNoXCIsXHJcbiAgICAgICAgcmVxdWlyZU5hbWU6IHRydWVcclxuICAgIH0sXHJcblxyXG4gICAgLy8g0LrQu9Cw0YHRgSDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0LBcclxuICAgIElOVklTSUJMRV9DTEFTUzogXCJpbnZpc2libGVcIixcclxuICAgIENIQVRfUE9TSVRJT05fUklHSFQ6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfcmlnaHQtcG9zaXRpb25cIixcclxuICAgIENIQVRfUE9TSVRJT05fTEVGVDogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9sZWZ0LXBvc2l0aW9uXCIsXHJcblxyXG5cclxuICAgIExPQ0FMX1NUT1JBR0VfTkFNRTogXCJ1c2VySURfdG91Y2hzb2Z0X2NoYXRcIixcclxuICAgIERFRkFVTFRfVVNFUl9OQU1FOiBcImd1ZXN0XCIsXHJcblxyXG4gICAgREVGQVVMVF9DU1NfQ0xBU1NfRk9SX0NIQVQ6ICd0b3VjaHNvZnQtY2hhdF9tYWluLWJsb2NrJyxcclxuICAgIERFRkFVTFRfQ0hBVF9USVRMRTogXCJUb3VjaFNvZnQgQ2hhdFwiLFxyXG5cclxuICAgIC8vIGNoYXRWaWV3Q29uZmlnXHJcbiAgICAvLyDQvtGC0LrRg9C00LAg0LfQsNCz0YDRg9C20LDQtdGCIGh0bWwg0LggY3NzINGH0LDRgtCwXHJcbiAgICBIVE1MX0ZJTEVfUEFUSDpcclxuICAgICAgICBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvY2hhdEFwcGxpY2F0aW9uL2NoYXQuaHRtbFwiLFxyXG4gICAgQ1NTX0ZJTEVfUEFUSDpcclxuICAgICAgICBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2Nzcy9jaGF0LmNzc1wiLFxyXG5cclxuICAgIC8vINCa0LvQsNGB0YHRiyDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC+0LHRitC10LrRgtCw0LzQuCDRgdC+0L7QsdGJ0LXQvdC40Lkg0LTQu9GPINC40YUg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQsiDRh9Cw0YLQtVxyXG4gICAgbWVzc2FnZXM6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDQtNC70Y8g0Y3Qu9C10LzQtdC90LDRgiDRgSDRgdC+0L7QsdGJ0LXQvdC40LUsINC10YHQu9C4INGO0LfQtdGAINC90LUg0L/RgNC+0YfQuNGC0LDQuyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfbWVzc2FnZS1ub3QtcmVhZFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190b3BfbWVzc2FnZXNcIixcclxuXHJcbiAgICAgICAgLy8gbWVzc2FnZVxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0L3QsNGF0L7QtNC40YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyzQtNCw0YLQsCDQuCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19NRVNTQUdFX0NPTlRBSU5FUjogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWVsZW1lbnRzXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1zZW5kZXJcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINC00LDRgtGDINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfREFURTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWRhdGVcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0U6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZVwiXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBESVNQTEFZX01FU1NBR0VfREFURTogdHJ1ZSxcclxuICAgIERJU1BMQVlfU0VOREVSX05BTUU6IHRydWUsXHJcbiAgICBESVNQTEFZX01FU1NBR0U6IHRydWUsXHJcblxyXG4gICAgVVBEQVRFX1VTRVJfREFUQV9USU1FOiA1MDAwXHJcbn07XHJcblxyXG4vLyBJTkNMVURFXHJcbmZ1bmN0aW9uIHBhcnNlU3JjRm9yUGFyYW1ldGVycyhcclxuICAgIHNyY1xyXG4pIHtcclxuICAgIHZhciB1c2VyQ29uZmlnT2JqZWN0ID0ge307XHJcbiAgICB2YXIgYXJyUGFyYW0gPSBzcmMuc3Vic3RyKHNyYy5pbmRleE9mKFwiP1wiKSArIDEpLnNwbGl0KFwiJlwiKTtcclxuICAgIGFyclBhcmFtLmZvckVhY2goZnVuY3Rpb24gY3JlYXRlQ29uZmlnT2JqIChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIHBhcmFtT2JqID0gZWxlbWVudC5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgcGFyYW1PYmpbMV0gPSBwYXJhbU9ialsxXS5yZXBsYWNlKC8nL2csIFwiXCIpO1xyXG4gICAgICAgIHVzZXJDb25maWdPYmplY3RbcGFyYW1PYmpbMF1dID0gcGFyYW1PYmpbMV07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB1c2VyQ29uZmlnT2JqZWN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRPdXRlckNoYXRTZXR0aW5nVG9Db25maWcgKG91dGVyQ29uZmlnT2JqZWN0LCBjb25maWcpIHtcclxuICAgIE9iamVjdC5rZXlzKG91dGVyQ29uZmlnT2JqZWN0KS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3Nba2V5XSA9IG91dGVyQ29uZmlnT2JqZWN0W2tleV07XHJcbiAgICB9KVxyXG59XHJcblxyXG4vLyBJTkNMVURFXHJcblxyXG5zZXRPdXRlckNoYXRTZXR0aW5nVG9Db25maWcocGFyc2VTcmNGb3JQYXJhbWV0ZXJzKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKFwic3JjXCIpKSwgbWFpbkNvbmZpZyk7XHJcbnZhciBkYXRhQmFzZVVybCA9IG1haW5Db25maWcuREFUQV9CQVNFX1VSTDtcclxuXHJcbnZhciBnZXRFbGVtZW50ID0gZnVuY3Rpb24gZ2V0RWxlbWVudEZyb21ET00gKHNlbGVjdG9yLCBpc0FsbCwgaXRJc0lkKSB7XHJcbiAgICB2YXIgc2VsZWN0b3JTdGFydCA9IChpdElzSWQpID8gXCIjXCIgOiBcIi5cIjtcclxuICAgIGlmKGlzQWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JTdGFydCArIHNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbn07XHJcblxyXG5cclxudmFyIGRhdGFDb25uZWN0b3JDb25maWcgPSB7XHJcbiAgICB0eXBlT2ZSZXF1ZXN0OiBtYWluQ29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0XHJcbn07XHJcblxyXG4vLyBkYXRhYmFzZVxyXG5cclxuLy8g0JzQvtC00YPQu9GMINC/0YDQtdC00L7RgdGC0LDQstC70Y/QtdGCINGB0L/QvtGB0L7QsSDQvtGC0L/RgNCw0LLQutC4INC30LDQv9GA0L7RgdCwINC6INC40YHRgtC+0YfQvdC40LrRgyDQtNCw0L3QvdGL0YVcclxuLy8g0JTQu9GPINGA0LXQutCy0LXRgdGC0LAg0L3QtdC+0LHRhdC+0LTQuNC8INC/0YPRgtGMLCDRgtC10LvQviDQt9Cw0L/RgNC+0YHQsCwg0YLQuNC/INC30LDQv9GA0L7RgdCwXHJcbi8vIHJlcXVlc3Qg0LLQvtC30LLRgNCw0YnQsNC10YIgUHJvbWlzZVxyXG52YXIgZGF0YUNvbm5lY3RvciA9IChmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJKGRhdGFDb25uZWN0b3JDb25maWdPYmopIHtcclxuICAgIHZhciBkYXRhQmFzZUNvbm5lY3RvcjtcclxuICAgIHZhciBkYXRhQmFzZUFQSTtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhQmFzZUNvbm5lY3RvcigpIHt9XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RGZXRjaCA9IGZ1bmN0aW9uIHJlcXVlc3RGZXRjaChcclxuICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICByZXF1ZXN0Qm9keSxcclxuICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICBjb250ZW50VHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHJlcXVlc3RQYXRoLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIEFjY2VwdDogY29udGVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBjb250ZW50VHlwZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXRob2Q6IHJlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICBib2R5OiByZXF1ZXN0Qm9keVxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gZ2V0UmVzcG9uc2VKU09OKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUucmVxdWVzdFhNUiA9IGZ1bmN0aW9uIHJlcXVlc3RYTVIoXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiByZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKHJlcXVlc3RUeXBlLCByZXF1ZXN0UGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIGNvbnRlbnRUeXBlKTtcclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIGxvYWRDYXNlKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoY29udGVudFR5cGUgPT09IFwiYXBwbGljYXRpb24vanNvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHhoci5yZXNwb25zZSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gZXJyb3JDYXNlKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHhoci5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3RCb2R5KSB7XHJcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChyZXF1ZXN0Qm9keSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGRhdGFCYXNlQ29ubmVjdG9yID0gbmV3IERhdGFCYXNlQ29ubmVjdG9yKCk7XHJcbiAgICBpZiAoZGF0YUNvbm5lY3RvckNvbmZpZ09iai50eXBlT2ZSZXF1ZXN0ID09PSBcImZldGNoXCIpIHtcclxuICAgICAgICBkYXRhQmFzZUFQSSA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdEZldGNoXHJcbiAgICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RYTVJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhQmFzZUFQSTtcclxufSkoZGF0YUNvbm5lY3RvckNvbmZpZyk7XHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhVxyXG4vLyDQktGB0LUgQVBJINGE0YPQvdC60YbQuNC4INCy0L7Qt9Cy0YDQsNGJ0LDRjtGCINC/0YDQvtC80LjRgdGLXHJcbnZhciBkYXRhU291cmNlID0gKGZ1bmN0aW9uIGNyZWF0ZURhdGFTb3VyY2UgKGRhdGFDb25uZWN0b3IpIHtcclxuICAgIHZhciBkYXRhU291cmNlSW5zdGFuY2U7XHJcbiAgICB2YXIgZGF0YVNvdXJjZUFQSTtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhU291cmNlKCkge1xyXG4gICAgICAgIGRhdGFDb25uZWN0b3IgPSBkYXRhQ29ubmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmNyZWF0ZVJlcXVlc3RQYXRoID0gZnVuY3Rpb24gY3JlYXRlUmVxdWVzdFBhdGgoXHJcbiAgICAgICAgZGF0YUJhc2VVUkwsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHJlcXVlc3RQb3N0Zml4XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcGF0aCA9IGRhdGFCYXNlVVJMICsgXCIvdXNlcnNcIjtcclxuICAgICAgICBpZiAodXNlcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyB1c2VySWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXF1ZXN0UG9zdGZpeCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgcmVxdWVzdFBvc3RmaXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhdGggKz0gXCIuanNvblwiO1xyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXRIVE1MID0gZnVuY3Rpb24gZ2V0SFRNTCAocmVxdWVzdFBhdGgpIHtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgXCJHRVRcIiwgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCdcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQoNCw0LHQvtGC0LAg0YEg0JrQntCd0JrQoNCV0KLQndCr0Jwg0Y7Qt9C10YDQvtC8XHJcblxyXG4gICAgLy8g0J/QvtC70YPRh9C40YLRjCDQstGB0LUg0YHQvtC+0LHRidC10L3QuNGPINC4INC90LDRgdGC0YDQvtC50LrQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldFVzZXJEYXRhID0gZnVuY3Rpb24gZ2V0VXNlckRhdGEodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJEYXRhID0ge307XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3RvclxyXG4gICAgICAgICAgICAucmVxdWVzdChyZXF1ZXN0UGF0aCwgbnVsbCwgXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHNldFVzZXJEYXRhKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIHNldERhdGEgKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyRGF0YVtrZXldID0gZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcmV0dXJuVXNlcnNMaXN0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJEYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QvtC70YPRh9Cw0LXRgiDQvtC/0YAg0L/QvtC70LUg0L3QsNGB0YLRgNC+0LXQuiDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldFNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIGdldEFtb3VudE9mTm9SZWFkTWVzc2FnZShcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgZmllbGROYW1lXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIGZpZWxkTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIFwiR0VUXCIsXHJcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0L7Qv9GAINC/0L7Qu9C1INC90LDRgdGC0YDQvtC10Log0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5zZXRTZXR0aW5nRmllbGQgPSBmdW5jdGlvbiBnZXRBbW91bnRPZk5vUmVhZE1lc3NhZ2UoXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGZpZWxkTmFtZSxcclxuICAgICAgICB2YWx1ZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBmaWVsZE5hbWUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSksXHJcbiAgICAgICAgICAgIFwiUFVUXCIsXHJcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC/0YDQsNCy0LjRgtGMINGB0L7QvtCx0YnQtdC90LjQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24gc2VuZE1lc3NhZ2VUb1VzZXIoXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgXCJtZXNzYWdlc1wiKTtcclxuICAgICAgICB2YXIganNvbk1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogbWVzc2FnZU9iamVjdC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZU9iamVjdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwibWVzc2FnZVwiLFxyXG4gICAgICAgICAgICAgICAgdXNlcjogbWVzc2FnZU9iamVjdC5zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICBpdElzUmVhZDogbWVzc2FnZU9iamVjdC5yZWFkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBqc29uTWVzc2FnZSxcclxuICAgICAgICAgICAgXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KDQsNCx0L7RgtCwINGB0L4g0JLQodCV0JzQmCDRjtC30LXRgNCw0LzQuFxyXG5cclxuICAgIC8vINC/0L7Qu9GD0YfQuNGC0Ywg0LLRgdC1INC00LDQvdC90YvQtSwg0LLRgdC10YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldEFsbFVzZXJzID0gZnVuY3Rpb24gZ2V0QWxsVXNlcnMoKSB7XHJcbiAgICAgICAgdmFyIHVzZXJzRGF0YUxpc3QgPSB7fTtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCBudWxsLCBudWxsKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3RvclxyXG4gICAgICAgICAgICAucmVxdWVzdChyZXF1ZXN0UGF0aCwgbnVsbCwgXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHNldFVzZXJzTGlzdChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBzZXREYXRhKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2Vyc0RhdGFMaXN0W2tleV0gPSBkYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHJldHVyblVzZXJzTGlzdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2Vyc0RhdGFMaXN0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10LwgaW5zdGFuY2Ug0L7QsdGK0LXQutGC0LAsINC30LDQtNCw0LXQvCBBUElcclxuXHJcbiAgICBkYXRhU291cmNlSW5zdGFuY2UgPSBuZXcgRGF0YVNvdXJjZSgpO1xyXG4gICAgZGF0YVNvdXJjZUFQSSA9IHtcclxuICAgICAgICB1c2Vyc0FQSToge1xyXG4gICAgICAgICAgICBnZXRVc2VyRGF0YTogZGF0YVNvdXJjZUluc3RhbmNlLmdldFVzZXJEYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgc2VuZE1lc3NhZ2U6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZW5kTWVzc2FnZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHNldEZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0U2V0dGluZ0ZpZWxkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZ2V0RmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRTZXR0aW5nRmllbGQuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBnZXRBbGxVc2VyczogZGF0YVNvdXJjZUluc3RhbmNlLmdldEFsbFVzZXJzLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tbW9uQVBJOiB7XHJcbiAgICAgICAgICAgIGdldEhUTUw6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRIVE1MLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGRhdGFTb3VyY2VBUEk7XHJcbn0pKGRhdGFDb25uZWN0b3IpO1xyXG5cclxuLy8gbWVzc2FnZU1hbmFnZXJcclxuXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBjaGF0TWFuYWdlckNvbmZpZyAqL1xyXG4vKiBleHBvcnRlZCBjaGF0TWFuYWdlciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINGA0LDQsdC+0YLRiyDRgdC+INGB0L/QuNGB0LrQvtC8INGB0L7QvtCx0YnQtdC90LjQuSDQntCU0J3QntCT0J4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbnZhciBtZXNzYWdlTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gc2V0dXBNZXNzYWdlTGlzdE1hbmFnZXIgKGNvbmZpZykge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vINCk0L7RgNC80LDRgiAgbWVzc2FnZUxpc3QgPSBbXHJcbiAgICAvLyAgICB7XHJcbiAgICAvLyAgICAgICBzZW5kZXI6IHNlbmRlclxyXG4gICAgLy8gICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIC8vICAgICAgIHJlYWQ6IHRydWUvZmFsc2VcclxuICAgIC8vICAgICAgIGRhdGU6IGRhdGVcclxuICAgIC8vICAgIH0sXHJcbiAgICAvLyBdXHJcbiAgICAvLyByZWFkIC0g0LHRi9C70L4g0LvQuCDQv9GA0L7Rh9C40YLQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIE1lc3NhZ2VMaXN0TWFuYWdlcigpIHt9XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5jRE9NID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlc0Jsb2NrOiBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFX0RBVEUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkIChyZWxhdGl2ZVVzZXJOYW1lLCByZWxhdGl2ZVVzZXJJZCkge1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlc0lzUmVhZCA9IFtdO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZSA9IHJlbGF0aXZlVXNlck5hbWUgfHwgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWU7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9IHJlbGF0aXZlVXNlcklkIHx8IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgICAgICBmb3IoaSA9IHRoaXMubWVzc2FnZUxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tZXNzYWdlTGlzdFtpXS5zZW5kZXIgIT09IHVzZXJOYW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNJc1JlYWQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6XCJtZXNzYWdlcy9cIiArIHRoaXMubWVzc2FnZUxpc3RbaV0uaWQgKyBcIi9pdElzUmVhZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlc0lzUmVhZDtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiAoaXNSZWFkLCBzZW5kZXIpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfTUVTU0FHRV9DT05UQUlORVIpO1xyXG4gICAgICAgIGlmICghaXNSZWFkICYmIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lICE9PSBzZW5kZXIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayA9IGZ1bmN0aW9uICh0ZXh0LCBpc0Rpc3BsYXksIHN0eWxlQ2xhc3Nlcykge1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN0eWxlQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZSkge1xyXG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChzdHlsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIE1FU1NBR0UgRUxFTUVOVCAvL1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlTGlzdCAobWVzc2FnZU9iamVjdHMpICB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdHMpIHtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBhZGRFbGVtZW50VG9NZXNzYWdlTGlzdCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdNZXNzYWdlTGlzdDtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0IChuZXdNZXNzYWdlTGlzdCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QgKFxyXG4gICAgICAgIG1lc3NhZ2VPYmpcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QucHVzaChtZXNzYWdlT2JqKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QtdGA0LXQsdC40YDQsNC10YIg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSwg0YHQvtC30LTQsNC10YIg0YHQvtC+0YLQstC10YLRgdCy0YPRjtGJ0LjQtSDQuNC8IERPTSDRjdC70LXQvNC10L3RgtGLINC4INCy0YHRgtCw0LLQu9GP0LXRgiDQuNGFINCyINGH0LDRglxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZXMgPSBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoYXQuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGF0LmNET00ubWVzc2FnZXNCbG9jay5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7Rh9C40YHRgtC40YLRjCBET00g0Y3Qu9C10LzQtdC90YIg0LIg0LrQvtGC0L7RgNC+0Lwg0L7RgtC+0LHRgNCw0LbQsNGO0YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyAo0L3QsNC/0YDQuNC80LXRgCDRh9GC0L7QsdGLINCy0YHRgtCw0LLQuNGC0Ywg0L3QstC+0YvQuSDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5KVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckNoYXQgPSBmdW5jdGlvbiBjbGVhckNoYXQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2sucmVtb3ZlQ2hpbGQodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2VMaXN0TWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbnZhciB1c2VyRGF0YU1hbmFnZXIgPSAgKGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIGZ1bmN0aW9uIFVzZXJEYXRhTWFuYWdlciAoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgbWludXRlcyA9IChkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkgPyBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGVcclxuICAgICAgICAgICAgLmdldEhvdXJzKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLmNvbmNhdChcIjpcIiwgbWludXRlcyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlT2JqZWN0IChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZCxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWQ6IGlzUmVhZCxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuc2V0dXAoKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGZ1bmN0aW9uIGdldFVzZXJEYXRhICh1c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyRGF0YSh1c2VySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgPSBkYXRhLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID0gZGF0YS5pc01pbmltaXplO1xyXG4gICAgICAgICAgICBpZihkYXRhLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXNPYmplY3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEubWVzc2FnZXMpLm1hcChmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzT2JqZWN0LnB1c2goY3JlYXRlTWVzc2FnZU9iamVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1lc3NhZ2VzW21lc3NhZ2VdLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZXNbbWVzc2FnZV0udXNlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5pdElzUmVhZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdCA9IG1lc3NhZ2VMaXN0TWFuYWdlci5jcmVhdGVNZXNzYWdlTGlzdChtZXNzYWdlc09iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIudXBkYXRlTWVzc2FnZUxpc3QobmV3TWVzc2FnZUxpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBPYmplY3Qua2V5cyhjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncykubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdGhhdC5zYXZlU2V0dGluZ0ZpZWxkKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZVNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIHNldEZpZWxkIChmaWVsZE5hbWUpIHtcclxuICAgICAgICB0aGlzLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UoXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5nc1tmaWVsZE5hbWVdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICApXHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZSAoc2VuZGVyTmFtZSkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCgpO1xyXG4gICAgICAgIHZhciBkYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcclxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IGNyZWF0ZU1lc3NhZ2VPYmplY3QobWVzc2FnZSwgZGF0ZSwgc2VuZGVyTmFtZSwgZmFsc2UpO1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdChtZXNzYWdlT2JqZWN0KTtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlTWVzc2FnZVRvRGF0YVNvdXJjZShtZXNzYWdlT2JqZWN0KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXRNZXNzYWdlQXNSZWFkID0gZnVuY3Rpb24gc2V0TWVzc2FnZUFzUmVhZCAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3RzID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCgpO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlKG1lc3NhZ2VPYmplY3RzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIHNhdmVNZXNzYWdlVG9EYXRhU291cmNlIChtZXNzYWdlT2JqZWN0KSB7XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdC5zZW5kZXIgPT09IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyU2V0dGluZ3MgPSBbe1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IFwic2VuZE5ld01lc3NhZ2VcIixcclxuICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShcclxuICAgICAgICAgICAgICAgIHVzZXJTZXR0aW5nc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTZXR0aW5ncyA9IFt7dXNlcklkLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWV9LHt9Li4uXVxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbiAobmV3RmllbGRTZXR0aW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0RmllbGQoXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhTWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcblxyXG4vLyB2aWV3XHJcblxyXG52YXIgdmlld0ZhY3RvcnkgPSAoZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBWaWV3RmFjdG9yeSAoKSB7fVxyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVWaWV3ID0gZnVuY3Rpb24gY3JlYXRlQ2hhdFZpZXcgKGh0bWxQYXRoLCBjc3NQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmKGh0bWxQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjc3NQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbmNsdWRlVmlld0Nzc1RvUGFnZSh0aGF0LmNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc1BhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVzaGVldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRleHQvY3NzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG91Y2gtc29mdC1jaGF0LWNzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoYXQuaW5jbHVkZVZpZXdIVE1MVG9QYWdlKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImh0bWxQYXRoIGlzIG51bGwuIFBsZWFzZSBhZGQgaHRtbFBhdGhcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0hUTUxUb1BhZ2UgPSBmdW5jdGlvbiBpbmNsdWRlQ2hhdEhUTUxUb1BhZ2UgKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciBjb250YWluZXJEaXYgPSAoY29udGFpbmVyQ2xhc3MpID8gZ2V0RWxlbWVudChjb250YWluZXJDbGFzcykgOiBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLmNvbW1vbkFQSS5nZXRIVE1MKGh0bWxQYXRoKS50aGVuKGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0Nzc1RvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0Q3NzVG9QYWdlIChsaW5rKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNTU0xpbmsgPSBmdW5jdGlvbiBjcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgIHJlbCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgVmlld0ZhY3RvcnkoKVxyXG5cclxufSkoZGF0YVNvdXJjZSk7XHJcblxyXG4vLyBjaGF0TWFpblxyXG5cclxudmFyIGNoYXRDdXN0b21pemVyID0gKGZ1bmN0aW9uIChjb25maWcpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBDaGF0Q3VzdG9taXplcigpIHt9XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLnNldHVwT3V0ZXJDaGF0U2V0dGluZ3MgPSBmdW5jdGlvbiBzZXR1cE91dGVyQ2hhdFNldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMuYWxsb3dNaW5pbWl6ZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb25PZk1haW5CbG9jaygpO1xyXG4gICAgICAgIHRoaXMuc2V0VGl0bGUoKTtcclxuICAgICAgICB0aGlzLnNldE1haW5Dc3NDbGFzcygpO1xyXG4gICAgICAgIHRoaXMuYWxsb3dEcmFnTkRyb3AoKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLmFsbG93RHJhZ05Ecm9wID0gZnVuY3Rpb24gYWxsb3dEcmFnTkRyb3AoKSB7XHJcbiAgICAgICAgdmFyIGNsaWNrQmxvY2sgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uVElUTEVfQkxPQ0tfQ0xBU1MpO1xyXG4gICAgICAgIHZhciBkcmFnQmxvY2sgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKTtcclxuICAgICAgICBpZiAoY29uZmlnLmNoYXRTZXR0aW5ncy5hbGxvd0RyYWcgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsaWNrQmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbiBkcmFnQW5kRHJvcChlKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3JkcztcclxuICAgICAgICAgICAgdmFyIHNoaWZ0WDtcclxuICAgICAgICAgICAgdmFyIHNoaWZ0WTtcclxuICAgICAgICAgICAgdmFyIG1vdmVPYmo7XHJcbiAgICAgICAgICAgIHZhciBzZXROdWxsO1xyXG4gICAgICAgICAgICB2YXIgZW5kRHJhZztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENvb3JkcyhlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBib3gudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGJveC5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb3JkcyA9IGdldENvb3JkcyhkcmFnQmxvY2spO1xyXG4gICAgICAgICAgICBzaGlmdFggPSBlLnBhZ2VYIC0gY29yZHMubGVmdDtcclxuICAgICAgICAgICAgc2hpZnRZID0gZS5wYWdlWSAtIGNvcmRzLnRvcDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1vdmVBdChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnQmxvY2suc3R5bGUubGVmdCA9IGVsZW0ucGFnZVggLSBzaGlmdFggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBkcmFnQmxvY2suc3R5bGUudG9wID0gZWxlbS5wYWdlWSAtIHNoaWZ0WSArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbW92ZU9iaiA9IGZ1bmN0aW9uIG1vdmVPYmpEcmFnQW5kRHJvcChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBtb3ZlQXQoZWxlbSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzZXROdWxsID0gZnVuY3Rpb24gc2V0TnVsbERyYWdBbmREcm9wICgpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixtb3ZlT2JqICk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHNldE51bGwgKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGVuZERyYWcgPSBmdW5jdGlvbiBlbmREcmFnQW5kRHJvcCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIG1vdmVBdChlKTtcclxuICAgICAgICAgICAgZHJhZ0Jsb2NrLnN0eWxlLnpJbmRleCA9IDEwMDA7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdmVPYmopO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBzZXROdWxsKTtcclxuICAgICAgICAgICAgZHJhZ0Jsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgZW5kRHJhZyk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0UG9zaXRpb25PZk1haW5CbG9jayA9IGZ1bmN0aW9uIHNldFBvc2l0aW9uT2ZNYWluQmxvY2soKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5jaGF0U2V0dGluZ3MucG9zaXRpb24gPT09IFwicmlnaHRcIikge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLkNIQVRfUE9TSVRJT05fUklHSFRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLkNIQVRfUE9TSVRJT05fTEVGVFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLnNldFRpdGxlID0gZnVuY3Rpb24gc2V0VGl0bGUoKSB7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy5jaGF0VGl0bGUubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLmNoYXRUaXRsZSA9IGNvbmZpZy5ERUZBVUxUX0NIQVRfVElUTEU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5USVRMRV9CTE9DS19DTEFTUykuaW5uZXJIVE1MID0gY29uZmlnLmNoYXRTZXR0aW5ncy5jaGF0VGl0bGU7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5hbGxvd01pbmltaXplID0gZnVuY3Rpb24gYWxsb3dNaW5pbWl6ZSgpIHtcclxuICAgICAgICBpZiAoY29uZmlnLmNoYXRTZXR0aW5ncy5hbGxvd01pbmltaXplID09PSBcImZhbHNlXCIpIHtcclxuICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0TWFpbkNzc0NsYXNzID0gZnVuY3Rpb24gc2V0TWFpbkNzc0NsYXNzKCkge1xyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3Mub3V0ZXJDc3NDbGFzcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3Mub3V0ZXJDc3NDbGFzcyA9IGNvbmZpZy5ERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLm91dGVyQ3NzQ2xhc3NcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IENoYXRDdXN0b21pemVyKCk7XHJcbn0pKG1haW5Db25maWcpO1xyXG52YXIgY2hhdENvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKGNvbmZpZykge1xyXG5cclxuICAgIC8vIElOQ0xVREUgLy9cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRIYXNoKHN0cikge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gc3RyICsgZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERSAvL1xyXG5cclxuICAgIGZ1bmN0aW9uIENoYXRDb250cm9sbGVyKCkge31cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldHVwQ2hhdFZpZXcoKS50aGVuKCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoYXQuYXV0aG9yaXphdGlvbihjb25maWcuY2hhdFNldHRpbmdzLnJlcXVpcmVOYW1lKTtcclxuICAgICAgICAgICAgdGhhdC5zZXR1cENoYXRCYXNpY0xpc3RlbmVycygpO1xyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZihjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5nZXRVc2VyRGF0YShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0dXBDaGF0U3R5bGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnNldHVwQ2hhdFNlbmRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zZXR1cENoYXRTdHlsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNoYXRDdXN0b21pemVyLnNldHVwT3V0ZXJDaGF0U2V0dGluZ3MoKTtcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBhdXRob3JpemF0aW9uIGJsb2NrIC8vXHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb24gPSBmdW5jdGlvbiBhdXRob3JpemF0aW9uICh1c2VyTmFtZUlzUmVxdWlyZSkge1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZXR1cChjb25maWcpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIGlmKCFjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpIHtcclxuICAgICAgICAgICAgaWYodXNlck5hbWVJc1JlcXVpcmUgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gZ2V0SGFzaChjb25maWcuREVGQVVMVF9VU0VSX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgPSBjb25maWcuREVGQVVMVF9VU0VSX05BTUU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVVc2VySWRUb0xvY2FsU3RvcmFnZShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICAgICAgdXNlckRhdGFNYW5hZ2VyLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVBdXRob3JpemF0aW9uTWVudVZpc2libGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZUF1dGhvcml6YXRpb25NZW51VmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQVVUSE9SSVpBVElPTl9NRU5VX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQldGB0LvQuCDRgtGA0LXQsdGD0LXRgtGB0Y8g0LLQstC10YHRgtC4INC40LzRjywg0L/QvtC70YPRh9Cw0LXQvCDQtdCz0L4g0Lgg0LfQsNC90L7RgdC40Lwg0Y7Qt9C10YDQsCDQsiDQsdC0XHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0VXNlck5hbWVGcm9tSW5wdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgPSBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICBjb25maWcuRE9NLlVTRVJfTkFNRV9JTlBVVF9DTEFTU1xyXG4gICAgICAgICkudmFsdWU7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gZ2V0SGFzaChcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgICApO1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZXR1cChjb25maWcpO1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5jcmVhdGVOZXdVc2VyUHJvZmlsZVRvRGF0YUJhc2UoKTtcclxuICAgICAgICB0aGlzLnNhdmVVc2VySWRUb0xvY2FsU3RvcmFnZShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cENoYXRTZW5kTGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHVwIENoYXQgLy9cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0U2VuZExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBzZXR1cCBjaGF0IGxpc3RlbmVyc1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5TRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNlbmRNZXNzYWdlLmJpbmQodXNlckRhdGFNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5TRU5EX01FU1NBR0VfTUlOX1NJWkVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuc2VuZE1lc3NhZ2UuYmluZCh1c2VyRGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHVzZXJEYXRhTWFuYWdlci5zZXRNZXNzYWdlQXNSZWFkLmJpbmQodXNlckRhdGFNYW5hZ2VyKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRCYXNpY0xpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFTkRfVVNFUl9OQU1FX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICB0aGF0LmdldFVzZXJOYW1lRnJvbUlucHV0LmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5TRVRfTUFYX1NUWUxFX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgdGhhdC5taW5NYXhTdHlsZVRvZ2dsZS5iaW5kKHRoYXQpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uU0VUX01JTl9TVFlMRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgIHRoYXQubWluTWF4U3R5bGVUb2dnbGUuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0VmlldyA9IGZ1bmN0aW9uIHNldHVwQ2hhdFZpZXcgKCkge1xyXG4gICAgICAgIHJldHVybiB2aWV3RmFjdG9yeS5jcmVhdGVWaWV3KGNvbmZpZy5IVE1MX0ZJTEVfUEFUSCwgY29uZmlnLkNTU19GSUxFX1BBVEgsIG51bGwpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0U3R5bGUgPSBmdW5jdGlvbiBzZXR1cENoYXRTdHlsZSgpIHtcclxuICAgICAgICBpZiAoIWNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLmlzTWluaW1pemUpIHtcclxuICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUlOSU1JWkVfU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5taW5NYXhTdHlsZVRvZ2dsZSA9IGZ1bmN0aW9uIG1pbk1heFN0eWxlVG9nZ2xlKCkge1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSA9PT0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VJbnB1dEFuZFNlbmRCdXR0b25DbGFzcygpO1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5zYXZlU2V0dGluZ0ZpZWxkKFwiaXNNaW5pbWl6ZVwiKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmFjdGl2aXR5Tm90aWZ5ID0gZnVuY3Rpb24gYWN0aXZpdHlOb3RpZnkgKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5sYXN0T25saW5lID0gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNhdmVTZXR0aW5nRmllbGQoXCJsYXN0T25saW5lXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuY2hhbmdlSW5wdXRBbmRTZW5kQnV0dG9uQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSkge1xyXG4gICAgICAgICAgICBjb25maWcuQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MgPSBjb25maWcuRE9NLkNTU19NSU5fU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTID0gY29uZmlnLkRPTS5DU1NfTUFYX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTU1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIExPQ0FMIFNUT1JBR0UgLy9cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2F2ZVVzZXJJZFRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZVVzZXJJZFRvTG9jYWxTdG9yYWdlKHVzZXJJZCkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUsIHVzZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRVc2VySWRGcm9tTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gZ2V0VXNlcklkRnJvbUxvY2FsU3RvcmFnZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTE9DQUwgU1RPUkFHRSAvL1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cEludGVydmFsRnVuY3Rpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBzZXRJbnRlcnZhbCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgICAgICAgICAgdGhhdC5hY3Rpdml0eU5vdGlmeSgpO1xyXG4gICAgICAgIH0sIGNvbmZpZy5VUERBVEVfVVNFUl9EQVRBX1RJTUUpXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgQ2hhdENvbnRyb2xsZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG5cclxuY2hhdENvbnRyb2xsZXIuc3RhcnRBcHAoKTsiXX0=
