var mainConfig={DOM:{MAIN_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft",AUTHORIZATION_MENU_CLASS:"root_chat_for_touchsoft_input-name-block",USER_NAME_INPUT_CLASS:"root_chat_for_touchsoft_input-name",SEND_USER_NAME_BUTTON:"root_chat_for_touchsoft_input-name-button",SEND_MESSAGE_MIN_SIZE_BUTTON:"root_chat_for_touchsoft_minimize-style__send-button",SEND_MESSAGE_FULL_SIZE_BUTTON:"root_chat_for_touchsoft__bottom_send-button",CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft__textarea",CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style__message-input",TITLE_BLOCK_CLASS:"root_chat_for_touchsoft-title",CHANGE_STYLE_BUTTON_MAX_SIZE:"root_chat_for_touchsoft__top_minimize-button",MINIMIZE_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style",SET_MIN_STYLE_BUTTON:"root_chat_for_touchsoft_minimize-style__max-button",SET_MAX_STYLE_BUTTON:"root_chat_for_touchsoft__top_minimize-button"},DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",CSS_CURRENT_INPUT_CLASS:"root_chat_for_touchsoft__textarea",currentUserSettings:{userId:null,userName:null,isMinimize:!1,readLastMessage:!1,sendNewMessage:!1,lastOnline:(new Date).getTime()},chatSettings:{allowDrag:!1,position:"right",chatTitle:"TouchSoft Chat",allowMinimize:!0,outerCssClass:"touchsoft-chat_main-block",typeOfRequest:"fetch",requireName:!0},INVISIBLE_CLASS:"invisible",CHAT_POSITION_RIGHT:"root_chat_for_touchsoft_right-position",CHAT_POSITION_LEFT:"root_chat_for_touchsoft_left-position",LOCAL_STORAGE_NAME:"userID_touchsoft_chat",DEFAULT_USER_NAME:"guest",DEFAULT_CSS_CLASS_FOR_CHAT:"touchsoft-chat_main-block",DEFAULT_CHAT_TITLE:"TouchSoft Chat",HTML_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/chatApplication/chat.html",CSS_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/css/chat.css",messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root_chat_for_touchsoft__top_messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},DISPLAY_MESSAGE_DATE:!0,DISPLAY_SENDER_NAME:!0,DISPLAY_MESSAGE:!0,UPDATE_USER_DATA_TIME:5e3};function parseSrcForParameters(e){var s={};return e.substr(e.indexOf("?")+1).split("&").forEach(function(e){var t=e.split("=");t[1]=t[1].replace(/'/g,""),s[t[0]]=t[1]}),s}function setOuterChatSettingToConfig(t,s){Object.keys(t).map(function(e){return s.chatSettings[e]=t[e],!0})}setOuterChatSettingToConfig(parseSrcForParameters(document.currentScript.getAttribute("src")),mainConfig);var dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},dataConnector=function(e){var t;function s(){}return s.prototype.setupDataBaseAPI=function(e){return"fetch"===e?{request:t.requestFetch,getNewConnectorAPI:t.setupDataBaseAPI}:"XHR"===e?{request:t.requestXMR,getNewConnectorAPI:t.setupDataBaseAPI}:{request:t.requestXMR,createLongPollConnection:t.longPoll,getNewConnectorAPI:t.setupDataBaseAPI}},s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,a,r,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(r,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},a?s.send(a):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},(t=new s).setupDataBaseAPI(e.typeOfRequest)}(dataConnectorConfig),dataSource=function(o,t){var s,a="userList",n="usersMessages",r="usersSettings",i={isMinimize:!1,readLastMessage:!0};function u(){}function c(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function g(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}return u.prototype.createRequestPath=function(e,t,s,n){var a=e;return null!==n&&(a+="/"+n),null!==t&&(a+="/"+t),null!==s&&(a+="/"+s),a+=".json"},u.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},u.prototype.setData=function(e,t,s,n,a){var r;return r="PUT"===t?this.createRequestPath(dataBaseUrl,n,s,e):this.createRequestPath(dataBaseUrl,n,null,e),o.request(r,JSON.stringify(a),t,"application/json")},u.prototype.addNewUserToDataSource=function(t,e){var s=new Date,n=this;i.userName=e,Object.keys(i).map(function(e){n.setData(r,"PUT",e,t,i[e])}),this.setData(a,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},u.prototype.getDataSourceAPI=function(e){return e&&(t.chatSettings.typeOfRequest=e),u.prototype.getData="longPoll"===t.chatSettings.typeOfRequest?c:g,{usersAPI:{getUserList:s.getData.bind(s,a),getUserSettings:s.getData.bind(s,r),getUserMessages:s.getData.bind(s,n),getSettingField:s.getData.bind(s,r),sendMessage:s.setData.bind(s,n,"POST"),setSettingField:s.setData.bind(s,r,"PUT"),addNewUserToDataSource:s.addNewUserToDataSource.bind(s),updateLastOnline:s.setData.bind(s,a,"PUT","lastOnline"),updateSendNewMessageFlag:s.setData.bind(s,a,"PUT","sendNewMessage"),updateMessageIsReadField:s.setData.bind(s,n,"PUT")},commonAPI:{getHTML:s.getHTML.bind(s),getDataSourceAPI:s.getDataSourceAPI.bind(s)}}},(s=new u).getDataSourceAPI()}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/},a=/event: put/,t=/data: null/,r=/","data":/,o=/"path":"\/-/,n=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=!0,u=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){if(s[e].test(t))return e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(r)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,n={},a={};return"read"===t?(n.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),n.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),n):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(r).shift(),n=JSON.parse(this.prepareDataBeforeJsonParse(e)),a[s]=n,a):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return i?(i=!1,this.getFirstData(e)):n.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(r)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseUsersSettings=function(e){return u?(u=!1,this.getFirstData(e)):[null,JSON.parse(e[e.length-1].split(r)[1].trim().slice(0,-1))]},e.prototype.parse=function(e){console.log(e);var t=e.split(a),s=this.getTypeOfChanges(t[t.length-1]),n={type:s};if(this.hasNewData(t)){if("message"===s||"read"===s)return n.object=this.parseUsersMessages(t,s),n;if("sendNewMessage"===s||"lastOnline"===s||"userList"===s)return n.object=this.parseUserList(t,s),n;if("setting"===s)return n.object=this.parseUsersSettings(t,s),n}},new e}(),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var a=this.createMessageContainerDiv(n,s),r=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return a.appendChild(r),a.appendChild(o),a.appendChild(i),a},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,n=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:n,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,n){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort();i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3==this.readyState&&200==this.status&&(t=n.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){t[e].id=e,messageListManager.addMessageToMessageList(t[e])});messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){(e.id=t.id)&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){t[e].id=e,s.push(t[e])});messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(e){var t,s,n,a=this.getMessageFromInputElement(),r=(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),o={sender:e,message:a,read:!1,date:r,id:n};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(console.log(e),e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,a){var r=this;return new Promise(function(e,t){s?(n&&r.includeViewCssToPage(r.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(r.includeViewHTMLToPage(s,a))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var a=document.createElement("link");return n&&a.setAttribute("id",n),t&&a.setAttribute("rel",t),s&&a.setAttribute("type",s),a.setAttribute("href",e),a},new e}(dataSource),chatCustomizer=function(t){function e(){}return e.prototype.setupOuterChatSettings=function(){this.allowMinimize(),this.setPositionOfMainBlock(),this.setTitle(),this.setMainCssClass(),this.allowDragNDrop()},e.prototype.allowDragNDrop=function(){var e=getElement(t.DOM.TITLE_BLOCK_CLASS),c=getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS);"false"!==t.chatSettings.allowDrag&&e.addEventListener("mousedown",function(e){var t,s,n,a,r,o,i;function u(e){c.style.left=e.pageX-s+"px",c.style.top=e.pageY-n+"px"}t={top:(i=c.getBoundingClientRect()).top+window.pageYOffset,left:i.left+window.pageXOffset},s=e.pageX-t.left,n=e.pageY-t.top,a=function(e){u(e)},r=function(){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)},o=function(){return!1},u(e),c.style.zIndex=1e3,document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),c.addEventListener("dragstart",o)})},e.prototype.setPositionOfMainBlock=function(){"right"===t.chatSettings.position?getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(t.CHAT_POSITION_RIGHT):getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(t.CHAT_POSITION_LEFT)},e.prototype.setTitle=function(){t.chatSettings.chatTitle.length<1&&(t.chatSettings.chatTitle=t.DEFAULT_CHAT_TITLE),getElement(t.DOM.TITLE_BLOCK_CLASS).innerHTML=t.chatSettings.chatTitle},e.prototype.allowMinimize=function(){"false"===t.chatSettings.allowMinimize&&getElement(t.DOM.CHANGE_STYLE_BUTTON_MAX_SIZE).classList.add(t.INVISIBLE_CLASS)},e.prototype.setMainCssClass=function(){t.chatSettings.outerCssClass.length<1&&(t.chatSettings.outerCssClass=t.DEFAULT_CSS_CLASS_FOR_CHAT),getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).parentNode.classList.add(t.chatSettings.outerCssClass)},new e}(mainConfig),chatController=function(t){function s(e){return e+(new Date).getTime()}function e(){}return e.prototype.startApp=function(){var e=this;return this.setupChatView().then(function(){e.authorization(t.chatSettings.requireName),e.setupChatBasicListeners()}).then(function(){t.currentUserSettings.userId?userDataManager.getUserData(t.currentUserSettings.userId).then(function(){e.setupChatStyle(),e.setupIntervalFunctions(),e.setupChatSendListeners()}):e.setupChatStyle()}).then(function(){chatCustomizer.setupOuterChatSettings()})},e.prototype.authorization=function(e){userDataManager.setup(),this.getConditionFromLocalStorage()?this.setupChatCondition():"false"===e?(t.currentUserSettings.userId=s(t.DEFAULT_USER_NAME),t.currentUserSettings.userName=t.DEFAULT_USER_NAME,this.saveConditionToLocalStorage(),userDataManager.createNewUserProfileToDataBase(t.currentUserSettings.userId,t.currentUserSettings.userName)):this.toggleAuthorizationMenuVisible()},e.prototype.toggleAuthorizationMenuVisible=function(){getElement(t.DOM.AUTHORIZATION_MENU_CLASS).classList.toggle(t.INVISIBLE_CLASS)},e.prototype.getUserNameFromInput=function(){t.currentUserSettings.userName=getElement(t.DOM.USER_NAME_INPUT_CLASS).value,t.currentUserSettings.userId=s(t.currentUserSettings.userName),t.chatSettings.isMinimize=!1,userDataManager.createNewUserProfileToDataBase(t.currentUserSettings.userId,t.currentUserSettings.userName),this.saveConditionToLocalStorage(),this.toggleAuthorizationMenuVisible(),this.setupIntervalFunctions(),this.setupChatSendListeners(),userDataManager.getUserData(t.currentUserSettings.userId)},e.prototype.setupChatSendListeners=function(){getElement(t.DOM.SEND_MESSAGE_FULL_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),getElement(t.DOM.SEND_MESSAGE_MIN_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},e.prototype.setupChatBasicListeners=function(){var e=this;getElement(t.DOM.SEND_USER_NAME_BUTTON).addEventListener("click",e.getUserNameFromInput.bind(e)),getElement(t.DOM.SET_MAX_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e)),getElement(t.DOM.SET_MIN_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e))},e.prototype.setupChatView=function(){return viewFactory.createView(t.HTML_FILE_PATH,t.CSS_FILE_PATH,null)},e.prototype.setupChatStyle=function(){t.currentUserSettings.isMinimize?getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS):getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),this.changeInputAndSendButtonClass()},e.prototype.minMaxStyleToggle=function(){getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),t.currentUserSettings.isMinimize=!1===t.currentUserSettings.isMinimize,this.changeInputAndSendButtonClass(),this.saveConditionToLocalStorage()},e.prototype.activityNotify=function(){userDataManager.updateUserOnline(t.currentUserSettings.userId)},e.prototype.changeInputAndSendButtonClass=function(){t.currentUserSettings.isMinimize?t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS},e.prototype.setupChatCondition=function(){var e=this.getConditionFromLocalStorage();t.currentUserSettings.userId=this.getConditionFromLocalStorage().userId,t.currentUserSettings.userName=this.getConditionFromLocalStorage().userName,t.currentUserSettings.isMinimize=e.isMinimize},e.prototype.saveConditionToLocalStorage=function(){var e=JSON.stringify({userId:t.currentUserSettings.userId,isMinimize:t.currentUserSettings.isMinimize,userName:t.currentUserSettings.userName});localStorage.setItem(t.LOCAL_STORAGE_NAME,e)},e.prototype.getConditionFromLocalStorage=function(){var e=localStorage.getItem(t.LOCAL_STORAGE_NAME);return!!e&&JSON.parse(e)},e.prototype.setupIntervalFunctions=function(){var e=this;setInterval(function(){"longPoll"!==t.chatSettings.typeOfRequest&&userDataManager.getUserData(t.currentUserSettings.userId),e.activityNotify()},t.UPDATE_USER_DATA_TIME)},new e}(mainConfig);chatController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRBcHAuanMiXSwibmFtZXMiOlsibWFpbkNvbmZpZyIsIkRPTSIsIk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUyIsIkFVVEhPUklaQVRJT05fTUVOVV9DTEFTUyIsIlVTRVJfTkFNRV9JTlBVVF9DTEFTUyIsIlNFTkRfVVNFUl9OQU1FX0JVVFRPTiIsIlNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT04iLCJTRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTiIsIkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTIiwiQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1MiLCJUSVRMRV9CTE9DS19DTEFTUyIsIkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUiLCJNSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTIiwiU0VUX01JTl9TVFlMRV9CVVRUT04iLCJTRVRfTUFYX1NUWUxFX0JVVFRPTiIsIkRBVEFfQkFTRV9VUkwiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJzZW5kTmV3TWVzc2FnZSIsImxhc3RPbmxpbmUiLCJEYXRlIiwiZ2V0VGltZSIsImNoYXRTZXR0aW5ncyIsImFsbG93RHJhZyIsInBvc2l0aW9uIiwiY2hhdFRpdGxlIiwiYWxsb3dNaW5pbWl6ZSIsIm91dGVyQ3NzQ2xhc3MiLCJ0eXBlT2ZSZXF1ZXN0IiwicmVxdWlyZU5hbWUiLCJJTlZJU0lCTEVfQ0xBU1MiLCJDSEFUX1BPU0lUSU9OX1JJR0hUIiwiQ0hBVF9QT1NJVElPTl9MRUZUIiwiTE9DQUxfU1RPUkFHRV9OQU1FIiwiREVGQVVMVF9VU0VSX05BTUUiLCJERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVCIsIkRFRkFVTFRfQ0hBVF9USVRMRSIsIkhUTUxfRklMRV9QQVRIIiwiQ1NTX0ZJTEVfUEFUSCIsIm1lc3NhZ2VzIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfTUVTU0FHRV9DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIkRJU1BMQVlfTUVTU0FHRV9EQVRFIiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIkRJU1BMQVlfTUVTU0FHRSIsIlVQREFURV9VU0VSX0RBVEFfVElNRSIsInBhcnNlU3JjRm9yUGFyYW1ldGVycyIsInNyYyIsInVzZXJDb25maWdPYmplY3QiLCJzdWJzdHIiLCJpbmRleE9mIiwic3BsaXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsInBhcmFtT2JqIiwicmVwbGFjZSIsInNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyIsIm91dGVyQ29uZmlnT2JqZWN0IiwiY29uZmlnIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsImdldEF0dHJpYnV0ZSIsImRhdGFCYXNlVXJsIiwiZ2V0RWxlbWVudCIsInNlbGVjdG9yIiwiaXNBbGwiLCJpdElzSWQiLCJzZWxlY3RvclN0YXJ0IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwicHJvdG90eXBlIiwic2V0dXBEYXRhQmFzZUFQSSIsInJlcXVlc3QiLCJyZXF1ZXN0RmV0Y2giLCJnZXROZXdDb25uZWN0b3JBUEkiLCJyZXF1ZXN0WE1SIiwiY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uIiwibG9uZ1BvbGwiLCJyZXF1ZXN0UGF0aCIsInJlcXVlc3RCb2R5IiwicmVxdWVzdFR5cGUiLCJjb250ZW50VHlwZSIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsIkNvbnRlbnQtVHlwZSIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwidGV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIkpTT04iLCJwYXJzZSIsIm9uZXJyb3IiLCJzdGF0dXNUZXh0Iiwic2VuZCIsInRhcmdldFVybCIsInhodHRwIiwiZGF0YVNvdXJjZSIsImRhdGFTb3VyY2VJbnN0YW5jZSIsIlVTRVJfTElTVCIsIlVTRVJfTUVTU0FHRVMiLCJVU0VSU19TRVRUSU5HUyIsIm5ld1VzZXJEYXRhIiwiRGF0YVNvdXJjZSIsImxvbmdQb2xsQ29ubmVjdCIsImRhdGFUeXBlIiwidGhpcyIsImNyZWF0ZVJlcXVlc3RQYXRoIiwiYmFzaWNDb25uZWN0IiwiYmluZCIsImRhdGFCYXNlVVJMIiwicmVxdWVzdFBvc3RmaXgiLCJyZXF1ZXN0UHJlZml4IiwicGF0aCIsImdldEhUTUwiLCJzZXREYXRhIiwiZmllbGROYW1lIiwidmFsdWUiLCJzdHJpbmdpZnkiLCJhZGROZXdVc2VyVG9EYXRhU291cmNlIiwiZGF0ZSIsInRoYXQiLCJzZXR0aW5nTmFtZSIsImdldERhdGFTb3VyY2VBUEkiLCJnZXREYXRhIiwidXNlcnNBUEkiLCJnZXRVc2VyTGlzdCIsImdldFVzZXJTZXR0aW5ncyIsImdldFVzZXJNZXNzYWdlcyIsImdldFNldHRpbmdGaWVsZCIsInNlbmRNZXNzYWdlIiwic2V0U2V0dGluZ0ZpZWxkIiwidXBkYXRlTGFzdE9ubGluZSIsInVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyIsInVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZCIsImNvbW1vbkFQSSIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsImV2ZW50cyIsImFkZFN1YnNjcmliZSIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwicHVzaCIsImZpbHRlciIsImVsZW1lbnRDYWxsYmFjayIsImVtaXQiLCJkYXRhIiwiZXZlbnQiLCJjYWxsIiwibG9uZ1BvbGxSZXNwb25zZVBhcnNlciIsInR5cGVzT2ZDaGFuZ2UiLCJtZXNzYWdlIiwidXNlckxpc3QiLCJzZXR0aW5nIiwicmVhZCIsImV2ZW50UmVndWxhciIsImhhc051bGxEYXRhIiwiZ2V0RGF0YVJlZ3VsYXIiLCJpdElzTmV3TWVzc2FnZVJlZ3VsYXIiLCJpdElzTmV3VXNlckxpc3RSZWd1bGFyIiwiaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uIiwiaXRJc0ZpcnN0VXNlclNldHRpbmdDb25uZWN0aW9uIiwiTG9uZ1BvbGxSZXNwb25zZVBhcnNlciIsImdldFR5cGVPZkNoYW5nZXMiLCJhbnN3ZXJEYXRhIiwidHlwZU5hbWUiLCJ0ZXN0IiwicHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UiLCJsZW5ndGgiLCJ0cmltIiwic2xpY2UiLCJwYXJzZVVzZXJzTWVzc2FnZXMiLCJjaGFuZ2VUeXBlIiwibWVzc2FnZUlkIiwicmVzdWx0T2JqZWN0IiwiaWQiLCJwb3AiLCJzaGlmdCIsImdldEZpcnN0RGF0YSIsImhhc05ld0RhdGEiLCJwYXJzZVVzZXJMaXN0IiwiZ2V0VXNlcklkIiwiZXhjZXB0aW9uIiwicGFyc2VVc2Vyc1NldHRpbmdzIiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsInJlc3VsdE9mUGFyc2UiLCJ0eXBlIiwib2JqZWN0IiwibWVzc2FnZUxpc3RNYW5hZ2VyIiwiTWVzc2FnZUxpc3RNYW5hZ2VyIiwic2V0dXAiLCJtZXNzYWdlTGlzdCIsImNET00iLCJtZXNzYWdlc0Jsb2NrIiwiY3JlYXRlTWVzc2FnZUVsZW1lbnQiLCJtZXNzYWdlRGF0ZSIsInNlbmRlciIsImlzUmVhZCIsIm1lc3NhZ2VDb250YWluZXJEaXYiLCJjcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2IiwibWVzc2FnZURhdGVEaXYiLCJjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2siLCJtZXNzYWdlU2VuZGVyRGl2IiwibWVzc2FnZURpdiIsImFwcGVuZENoaWxkIiwiZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkIiwiaSIsIm1lc3NhZ2VzSXNSZWFkIiwiQURNSU5fTkFNRSIsImZpZWxkVmFsdWUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNEaXNwbGF5Iiwic3R5bGVDbGFzc2VzIiwiZGl2Iiwic3R5bGUiLCJpbm5lckhUTUwiLCJjcmVhdGVNZXNzYWdlTGlzdCIsIm1lc3NhZ2VPYmplY3RzIiwibmV3TWVzc2FnZUxpc3QiLCJ1cGRhdGVNZXNzYWdlTGlzdCIsImRpc3BsYXlNZXNzYWdlcyIsImFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IiwibWVzc2FnZU9iaiIsImNsZWFyQ2hhdCIsIm1lc3NhZ2VPYmplY3QiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ1c2VyRGF0YU1hbmFnZXIiLCJVc2VyRGF0YU1hbmFnZXIiLCJnZXRVc2VyRGF0YSIsImdldFVzZXJDb3JyZXNwb25kZW5jZSIsImN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiIsImFib3J0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsIm1lc3NhZ2VzT2JqZWN0IiwiY2xlYXJNZXNzYWdlTGlzdCIsImNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSIsInNhdmVTZXR0aW5nRmllbGQiLCJ1cGRhdGVVc2VyT25saW5lIiwic2VuZGVyTmFtZSIsIm1pbnV0ZXMiLCJnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsImdldEhvdXJzIiwiY29uY2F0Iiwic2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UiLCJzZXRNZXNzYWdlQXNSZWFkIiwic2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZSIsInNldHRpbmdzIiwibmV3RmllbGRTZXR0aW5nIiwidmlld0ZhY3RvcnkiLCJWaWV3RmFjdG9yeSIsImNyZWF0ZVZpZXciLCJodG1sUGF0aCIsImNzc1BhdGgiLCJjb250YWluZXJDbGFzcyIsImluY2x1ZGVWaWV3Q3NzVG9QYWdlIiwiY3JlYXRlQ1NTTGluayIsImluY2x1ZGVWaWV3SFRNTFRvUGFnZSIsIkVycm9yIiwiY29udGFpbmVyRGl2IiwiaHRtbCIsImxpbmsiLCJoZWFkIiwiZmlsZVBhdGgiLCJyZWwiLCJzZXRBdHRyaWJ1dGUiLCJjaGF0Q3VzdG9taXplciIsIkNoYXRDdXN0b21pemVyIiwic2V0dXBPdXRlckNoYXRTZXR0aW5ncyIsInNldFBvc2l0aW9uT2ZNYWluQmxvY2siLCJzZXRUaXRsZSIsInNldE1haW5Dc3NDbGFzcyIsImFsbG93RHJhZ05Ecm9wIiwiY2xpY2tCbG9jayIsImRyYWdCbG9jayIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29yZHMiLCJzaGlmdFgiLCJzaGlmdFkiLCJtb3ZlT2JqIiwic2V0TnVsbCIsImVuZERyYWciLCJib3giLCJtb3ZlQXQiLCJlbGVtIiwibGVmdCIsInBhZ2VYIiwidG9wIiwicGFnZVkiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aW5kb3ciLCJwYWdlWU9mZnNldCIsInBhZ2VYT2Zmc2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInpJbmRleCIsInBhcmVudE5vZGUiLCJjaGF0Q29udHJvbGxlciIsImdldEhhc2giLCJzdHIiLCJDaGF0Q29udHJvbGxlciIsInN0YXJ0QXBwIiwic2V0dXBDaGF0VmlldyIsImF1dGhvcml6YXRpb24iLCJzZXR1cENoYXRCYXNpY0xpc3RlbmVycyIsInNldHVwQ2hhdFN0eWxlIiwic2V0dXBJbnRlcnZhbEZ1bmN0aW9ucyIsInNldHVwQ2hhdFNlbmRMaXN0ZW5lcnMiLCJ1c2VyTmFtZUlzUmVxdWlyZSIsImdldENvbmRpdGlvbkZyb21Mb2NhbFN0b3JhZ2UiLCJzZXR1cENoYXRDb25kaXRpb24iLCJzYXZlQ29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UiLCJ0b2dnbGVBdXRob3JpemF0aW9uTWVudVZpc2libGUiLCJ0b2dnbGUiLCJnZXRVc2VyTmFtZUZyb21JbnB1dCIsIm1pbk1heFN0eWxlVG9nZ2xlIiwiY2hhbmdlSW5wdXRBbmRTZW5kQnV0dG9uQ2xhc3MiLCJhY3Rpdml0eU5vdGlmeSIsImNvbmRpdGlvbiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwic2V0SW50ZXJ2YWwiXSwibWFwcGluZ3MiOiJBQUVBLElBQUlBLFdBQWEsQ0FDYkMsSUFBSyxDQUNEQyw0QkFBNkIsMEJBQzdCQyx5QkFBMEIsMkNBQzFCQyxzQkFBdUIscUNBQ3ZCQyxzQkFBdUIsNENBRXZCQyw2QkFBOEIsc0RBRTlCQyw4QkFBK0IsOENBRS9CQyx1Q0FBd0Msb0NBQ3hDQyx1Q0FBd0Msd0RBRXhDQyxrQkFBbUIsZ0NBQ25CQyw2QkFBOEIsK0NBRTlCQyxnQ0FBaUMseUNBQ2pDQyxxQkFBc0IscURBQ3RCQyxxQkFBc0IsZ0RBSzFCQyxjQUFlLGdEQUlmQyx3QkFBeUIsb0NBR3pCQyxvQkFBcUIsQ0FDakJDLE9BQVEsS0FDUkMsU0FBVSxLQUNWQyxZQUFZLEVBQ1pDLGlCQUFpQixFQUNqQkMsZ0JBQWdCLEVBQ2hCQyxZQUFZLElBQUlDLE1BQU9DLFdBRzNCQyxhQUFjLENBQ1ZDLFdBQVcsRUFDWEMsU0FBVSxRQUNWQyxVQUFXLGlCQUNYQyxlQUFlLEVBQ2ZDLGNBQWUsNEJBQ2ZDLGNBQWUsUUFDZkMsYUFBYSxHQUlqQkMsZ0JBQWlCLFlBQ2pCQyxvQkFBcUIseUNBQ3JCQyxtQkFBb0Isd0NBR3BCQyxtQkFBb0Isd0JBQ3BCQyxrQkFBbUIsUUFFbkJDLDJCQUE0Qiw0QkFDNUJDLG1CQUFvQixpQkFJcEJDLGVBQ0ksK0dBQ0pDLGNBQ0ksNkZBR0pDLFNBQVUsQ0FFTkMsMkJBQTRCLDRDQUU1QkMsNEJBQTZCLHdDQUk3QkMsc0JBQXVCLGlEQUV2QkMsNkJBQThCLCtDQUU5QkMsc0JBQXVCLDZDQUV2QkMsaUJBQWtCLHlDQUl0QkMsc0JBQXNCLEVBQ3RCQyxxQkFBcUIsRUFDckJDLGlCQUFpQixFQUVqQkMsc0JBQXVCLEtBSTNCLFNBQVNDLHNCQUNMQyxHQUVB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RUFBSzZNLGtCQUNOL1IsRUFBT2Isd0JBR1AsSUFBSTJSLEVBbE1NLENBb01sQmhWLFlBR0g2VSxlQUFlSSIsImZpbGUiOiJjaGF0QXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gY29uZmlnXHJcblxyXG52YXIgbWFpbkNvbmZpZyA9IHtcclxuICAgIERPTToge1xyXG4gICAgICAgIE1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdFwiLFxyXG4gICAgICAgIEFVVEhPUklaQVRJT05fTUVOVV9DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9pbnB1dC1uYW1lLWJsb2NrXCIsXHJcbiAgICAgICAgVVNFUl9OQU1FX0lOUFVUX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X2lucHV0LW5hbWVcIixcclxuICAgICAgICBTRU5EX1VTRVJfTkFNRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfaW5wdXQtbmFtZS1idXR0b25cIixcclxuXHJcbiAgICAgICAgU0VORF9NRVNTQUdFX01JTl9TSVpFX0JVVFRPTjogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZV9fc2VuZC1idXR0b25cIixcclxuXHJcbiAgICAgICAgU0VORF9NRVNTQUdFX0ZVTExfU0laRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX2JvdHRvbV9zZW5kLWJ1dHRvblwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCINC00LvRjyDQstCy0L7QtNCwINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190ZXh0YXJlYVwiLFxyXG4gICAgICAgIENTU19NSU5fU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X21pbmltaXplLXN0eWxlX19tZXNzYWdlLWlucHV0XCIsXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YIgdGl0bGVcclxuICAgICAgICBUSVRMRV9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdC10aXRsZVwiLFxyXG4gICAgICAgIENIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkU6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RvcF9taW5pbWl6ZS1idXR0b25cIixcclxuICAgICAgICAvLyDRh9Cw0YIg0LIg0YHRgtC40LvQtSBtaW5cclxuICAgICAgICBNSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X21pbmltaXplLXN0eWxlXCIsXHJcbiAgICAgICAgU0VUX01JTl9TVFlMRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbWluaW1pemUtc3R5bGVfX21heC1idXR0b25cIixcclxuICAgICAgICBTRVRfTUFYX1NUWUxFX0JVVFRPTjogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdG9wX21pbmltaXplLWJ1dHRvblwiXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBkYXRhU291cmNlXHJcbiAgICBEQVRBX0JBU0VfVVJMOiBcImh0dHBzOi8vb25saW5lY29uc3VsdGFudHdlYmFwcC5maXJlYmFzZWlvLmNvbVwiLFxyXG5cclxuXHJcbiAgICAvLyB1c2VyRGF0YU1hbmFnZXJcclxuICAgIENTU19DVVJSRU5UX0lOUFVUX0NMQVNTOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190ZXh0YXJlYVwiLFxyXG5cclxuICAgIC8vINC90LDRgdGC0YDQvtC50LrQuCDRgtC10LrRg9GJ0LXQs9C+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjFxyXG4gICAgY3VycmVudFVzZXJTZXR0aW5nczoge1xyXG4gICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICB1c2VyTmFtZTogbnVsbCxcclxuICAgICAgICBpc01pbmltaXplOiBmYWxzZSxcclxuICAgICAgICByZWFkTGFzdE1lc3NhZ2U6IGZhbHNlLFxyXG4gICAgICAgIHNlbmROZXdNZXNzYWdlOiBmYWxzZSxcclxuICAgICAgICBsYXN0T25saW5lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxyXG4gICAgfSxcclxuXHJcbiAgICBjaGF0U2V0dGluZ3M6IHtcclxuICAgICAgICBhbGxvd0RyYWc6IGZhbHNlLFxyXG4gICAgICAgIHBvc2l0aW9uOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgY2hhdFRpdGxlOiBcIlRvdWNoU29mdCBDaGF0XCIsXHJcbiAgICAgICAgYWxsb3dNaW5pbWl6ZTogdHJ1ZSxcclxuICAgICAgICBvdXRlckNzc0NsYXNzOiAndG91Y2hzb2Z0LWNoYXRfbWFpbi1ibG9jaycsXHJcbiAgICAgICAgdHlwZU9mUmVxdWVzdDogXCJmZXRjaFwiLFxyXG4gICAgICAgIHJlcXVpcmVOYW1lOiB0cnVlXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINC60LvQsNGB0YEg0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtCwXHJcbiAgICBJTlZJU0lCTEVfQ0xBU1M6IFwiaW52aXNpYmxlXCIsXHJcbiAgICBDSEFUX1BPU0lUSU9OX1JJR0hUOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X3JpZ2h0LXBvc2l0aW9uXCIsXHJcbiAgICBDSEFUX1BPU0lUSU9OX0xFRlQ6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbGVmdC1wb3NpdGlvblwiLFxyXG5cclxuXHJcbiAgICBMT0NBTF9TVE9SQUdFX05BTUU6IFwidXNlcklEX3RvdWNoc29mdF9jaGF0XCIsXHJcbiAgICBERUZBVUxUX1VTRVJfTkFNRTogXCJndWVzdFwiLFxyXG5cclxuICAgIERFRkFVTFRfQ1NTX0NMQVNTX0ZPUl9DSEFUOiAndG91Y2hzb2Z0LWNoYXRfbWFpbi1ibG9jaycsXHJcbiAgICBERUZBVUxUX0NIQVRfVElUTEU6IFwiVG91Y2hTb2Z0IENoYXRcIixcclxuXHJcbiAgICAvLyBjaGF0Vmlld0NvbmZpZ1xyXG4gICAgLy8g0L7RgtC60YPQtNCwINC30LDQs9GA0YPQttCw0LXRgiBodG1sINC4IGNzcyDRh9Cw0YLQsFxyXG4gICAgSFRNTF9GSUxFX1BBVEg6XHJcbiAgICAgICAgXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2FwcC9odG1sL2NoYXRBcHBsaWNhdGlvbi9jaGF0Lmh0bWxcIixcclxuICAgIENTU19GSUxFX1BBVEg6XHJcbiAgICAgICAgXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2FwcC9jc3MvY2hhdC5jc3NcIixcclxuXHJcbiAgICAvLyDQmtC70LDRgdGB0Ysg0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDQvtCx0YrQtdC60YLQsNC80Lgg0YHQvtC+0LHRidC10L3QuNC5INC00LvRjyDQuNGFINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0LIg0YfQsNGC0LVcclxuICAgIG1lc3NhZ2VzOiB7XHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEg0LTQu9GPINGN0LvQtdC80LXQvdCw0YIg0YEg0YHQvtC+0LHRidC10L3QuNC1LCDQtdGB0LvQuCDRjtC30LXRgCDQvdC1INC/0YDQvtGH0LjRgtCw0Lsg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVM6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX21lc3NhZ2Utbm90LXJlYWRcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUjogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdG9wX21lc3NhZ2VzXCIsXHJcblxyXG4gICAgICAgIC8vIG1lc3NhZ2VcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC90LDRhdC+0LTQuNGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8s0LTQsNGC0LAg0Lgg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfTUVTU0FHRV9DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1lbGVtZW50c1wiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2Utc2VuZGVyXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQtNCw0YLRgyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX0RBVEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1kYXRlXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VcIlxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgRElTUExBWV9NRVNTQUdFX0RBVEU6IHRydWUsXHJcbiAgICBESVNQTEFZX1NFTkRFUl9OQU1FOiB0cnVlLFxyXG4gICAgRElTUExBWV9NRVNTQUdFOiB0cnVlLFxyXG5cclxuICAgIFVQREFURV9VU0VSX0RBVEFfVElNRTogNTAwMFxyXG59O1xyXG5cclxuLy8gSU5DTFVERVxyXG5mdW5jdGlvbiBwYXJzZVNyY0ZvclBhcmFtZXRlcnMoXHJcbiAgICBzcmNcclxuKSB7XHJcbiAgICB2YXIgdXNlckNvbmZpZ09iamVjdCA9IHt9O1xyXG4gICAgdmFyIGFyclBhcmFtID0gc3JjLnN1YnN0cihzcmMuaW5kZXhPZihcIj9cIikgKyAxKS5zcGxpdChcIiZcIik7XHJcbiAgICBhcnJQYXJhbS5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZUNvbmZpZ09iaiAoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBwYXJhbU9iaiA9IGVsZW1lbnQuc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIHBhcmFtT2JqWzFdID0gcGFyYW1PYmpbMV0ucmVwbGFjZSgvJy9nLCBcIlwiKTtcclxuICAgICAgICB1c2VyQ29uZmlnT2JqZWN0W3BhcmFtT2JqWzBdXSA9IHBhcmFtT2JqWzFdO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXNlckNvbmZpZ09iamVjdDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0T3V0ZXJDaGF0U2V0dGluZ1RvQ29uZmlnIChvdXRlckNvbmZpZ09iamVjdCwgY29uZmlnKSB7XHJcbiAgICBPYmplY3Qua2V5cyhvdXRlckNvbmZpZ09iamVjdCkubWFwKGZ1bmN0aW9uIGdldE91dGVyU2V0dGluZ3MgKGtleSkge1xyXG4gICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3Nba2V5XSA9IG91dGVyQ29uZmlnT2JqZWN0W2tleV07XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KVxyXG59XHJcblxyXG4vLyBJTkNMVURFXHJcblxyXG5zZXRPdXRlckNoYXRTZXR0aW5nVG9Db25maWcocGFyc2VTcmNGb3JQYXJhbWV0ZXJzKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKFwic3JjXCIpKSwgbWFpbkNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLyogZXhwb3J0ZWQgZGF0YUJhc2VVcmwgKi9cclxuLyogZXhwb3J0ZWQgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgZGF0YUJhc2VVcmwgPSBtYWluQ29uZmlnLkRBVEFfQkFTRV9VUkw7XHJcblxyXG52YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tRE9NIChzZWxlY3RvciwgaXNBbGwsIGl0SXNJZCkge1xyXG4gICAgdmFyIHNlbGVjdG9yU3RhcnQgPSAoaXRJc0lkKSA/IFwiI1wiIDogXCIuXCI7XHJcbiAgICBpZihpc0FsbCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG59O1xyXG5cclxuXHJcbnZhciBkYXRhQ29ubmVjdG9yQ29uZmlnID0ge1xyXG4gICAgdHlwZU9mUmVxdWVzdDogbWFpbkNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdFxyXG59O1xyXG5cclxuLy8gZGF0YWJhc2VcclxuXHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3IgKi9cclxuLyogZ2xvYmFsIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLy8g0JzQvtC00YPQu9GMINC/0YDQtdC00L7RgdGC0LDQstC70Y/QtdGCINGB0L/QvtGB0L7QsSDQvtGC0L/RgNCw0LLQutC4INC30LDQv9GA0L7RgdCwINC6INC40YHRgtC+0YfQvdC40LrRgyDQtNCw0L3QvdGL0YVcclxuLy8g0JTQu9GPINGA0LXQutCy0LXRgdGC0LAg0L3QtdC+0LHRhdC+0LTQuNC8INC/0YPRgtGMLCDRgtC10LvQviDQt9Cw0L/RgNC+0YHQsCwg0YLQuNC/INC30LDQv9GA0L7RgdCwXHJcbi8vIHJlcXVlc3Qg0LLQvtC30LLRgNCw0YnQsNC10YIgUHJvbWlzZVxyXG52YXIgZGF0YUNvbm5lY3RvciA9IChmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJKGRhdGFDb25uZWN0b3JDb25maWdPYmopIHtcclxuICAgIHZhciBkYXRhQmFzZUNvbm5lY3RvcjtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhQmFzZUNvbm5lY3RvcigpIHt9XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnNldHVwRGF0YUJhc2VBUEkgPSBmdW5jdGlvbiBzZXR1cERhdGFCYXNlQVBJICh0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIGRhdGFCYXNlQVBJO1xyXG4gICAgICAgIGlmICh0eXBlT2ZSZXF1ZXN0ID09PSBcImZldGNoXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0RmV0Y2gsXHJcbiAgICAgICAgICAgICAgICBnZXROZXdDb25uZWN0b3JBUEk6IGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUElcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVPZlJlcXVlc3QgPT09IFwiWEhSXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgZ2V0TmV3Q29ubmVjdG9yQVBJOiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uOiBkYXRhQmFzZUNvbm5lY3Rvci5sb25nUG9sbCxcclxuICAgICAgICAgICAgICAgIGdldE5ld0Nvbm5lY3RvckFQSTogZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YUJhc2VBUEk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbiByZXF1ZXN0RmV0Y2goXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0UGF0aCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IGNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHlcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlSlNPTihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RYTVIgPSBmdW5jdGlvbiByZXF1ZXN0WE1SKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0VHlwZSwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBsb2FkQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIGVycm9yQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdEJvZHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUubG9uZ1BvbGwgPSBmdW5jdGlvbiBsb25nUG9sbCAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGh0dHAub3BlbignR0VUJywgdGFyZ2V0VXJsLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAndGV4dC9ldmVudC1zdHJlYW0nKTtcclxuICAgICAgICByZXR1cm4geGh0dHA7XHJcbiAgICB9O1xyXG5cclxuICAgIGRhdGFCYXNlQ29ubmVjdG9yID0gbmV3IERhdGFCYXNlQ29ubmVjdG9yKCk7XHJcbiAgICByZXR1cm4gZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqLnR5cGVPZlJlcXVlc3QpO1xyXG5cclxufSkoZGF0YUNvbm5lY3RvckNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIGRhdGFCYXNlVXJsICovXHJcbi8qIGdsb2JhbCBkYXRhQ29ubmVjdG9yICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhVxyXG4vLyDQktGB0LUgQVBJINGE0YPQvdC60YbQuNC4INCy0L7Qt9Cy0YDQsNGJ0LDRjtGCINC/0YDQvtC80LjRgdGLXHJcbnZhciBkYXRhU291cmNlID0gKGZ1bmN0aW9uIGNyZWF0ZURhdGFTb3VyY2UgKGRhdGFDb25uZWN0b3IsIGNvbmZpZykge1xyXG4gICAgdmFyIGRhdGFTb3VyY2VJbnN0YW5jZTtcclxuICAgIHZhciBVU0VSX0xJU1QgPSBcInVzZXJMaXN0XCI7XHJcbiAgICB2YXIgVVNFUl9NRVNTQUdFUyA9IFwidXNlcnNNZXNzYWdlc1wiO1xyXG4gICAgdmFyIFVTRVJTX1NFVFRJTkdTID0gXCJ1c2Vyc1NldHRpbmdzXCI7XHJcbiAgICB2YXIgbmV3VXNlckRhdGEgPSB7XHJcbiAgICAgICAgaXNNaW5pbWl6ZTogZmFsc2UsXHJcbiAgICAgICAgcmVhZExhc3RNZXNzYWdlOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2UoKSB7fVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvbmdQb2xsQ29ubmVjdCAoZGF0YVR5cGUsIHVzZXJJZCkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCwgZGF0YVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLmNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbihyZXF1ZXN0UGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYmFzaWNDb25uZWN0IChkYXRhVHlwZSwgdXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdC5iaW5kKG51bGwsIHJlcXVlc3RQYXRoLCBudWxsLCBcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgIH1cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5jcmVhdGVSZXF1ZXN0UGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RQYXRoKFxyXG4gICAgICAgIGRhdGFCYXNlVVJMLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICByZXF1ZXN0UG9zdGZpeCxcclxuICAgICAgICByZXF1ZXN0UHJlZml4XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcGF0aCA9IGRhdGFCYXNlVVJMO1xyXG4gICAgICAgIGlmKHJlcXVlc3RQcmVmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQcmVmaXhcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgdXNlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBvc3RmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQb3N0Zml4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXRoICs9IFwiLmpzb25cIjtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0SFRNTCA9IGZ1bmN0aW9uIGdldEhUTUwgKHJlcXVlc3RQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIFwiR0VUXCIsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLnNldERhdGEgPSBmdW5jdGlvbiBzZXREYXRhIChkYXRhVHlwZSwgcmVxdWVzdFR5cGUsIGZpZWxkTmFtZSwgdXNlcklkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aDtcclxuICAgICAgICBpZihyZXF1ZXN0VHlwZSA9PT0gXCJQVVRcIikge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgZmllbGROYW1lLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuYWRkTmV3VXNlclRvRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFTb3VyY2UgKHVzZXJJZCwgdXNlck5hbWUpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBuZXdVc2VyRGF0YS51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1VzZXJEYXRhKS5tYXAoZnVuY3Rpb24gKHNldHRpbmdOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YShVU0VSU19TRVRUSU5HUywgXCJQVVRcIiwgc2V0dGluZ05hbWUsIHVzZXJJZCwgbmV3VXNlckRhdGFbc2V0dGluZ05hbWVdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNldERhdGEoVVNFUl9MSVNULCBcIlBVVFwiLCBudWxsLCB1c2VySWQsIHtcImxhc3RPbmxpbmVcIjogZGF0ZS5nZXRUaW1lKCksIFwic2VuZE5ld01lc3NhZ2VcIjogZmFsc2V9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YVNvdXJjZUFQSSA9IGZ1bmN0aW9uIGdldERhdGFTb3VyY2VBUEkgKHR5cGVPZlJlcXVlc3QpIHtcclxuICAgICAgICBpZih0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9IHR5cGVPZlJlcXVlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9PT0gXCJsb25nUG9sbFwiKSB7XHJcbiAgICAgICAgICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGEgPSBsb25nUG9sbENvbm5lY3RcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXREYXRhID0gYmFzaWNDb25uZWN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVzZXJzQVBJOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRVc2VyTGlzdDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9MSVNUXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgZ2V0VXNlclNldHRpbmdzOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HU1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFVzZXJNZXNzYWdlczogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFU1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFNldHRpbmdGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUlNfU0VUVElOR1NcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZTogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFUyxcclxuICAgICAgICAgICAgICAgICAgICBcIlBPU1RcIlxyXG5cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBzZXRTZXR0aW5nRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBhZGROZXdVc2VyVG9EYXRhU291cmNlOiBkYXRhU291cmNlSW5zdGFuY2UuYWRkTmV3VXNlclRvRGF0YVNvdXJjZS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUxhc3RPbmxpbmU6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTElTVCxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibGFzdE9ubGluZVwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlU2VuZE5ld01lc3NhZ2VGbGFnOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX0xJU1QsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgICAgICAgICBcInNlbmROZXdNZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21tb25BUEk6IHtcclxuICAgICAgICAgICAgICAgIGdldEhUTUw6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRIVE1MLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKSxcclxuICAgICAgICAgICAgICAgIGdldERhdGFTb3VyY2VBUEk6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhU291cmNlQVBJLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10LwgaW5zdGFuY2Ug0L7QsdGK0LXQutGC0LAsINC30LDQtNCw0LXQvCBBUElcclxuICAgIGRhdGFTb3VyY2VJbnN0YW5jZSA9IG5ldyBEYXRhU291cmNlKCk7XHJcblxyXG5cclxuXHJcbiAgICByZXR1cm4gZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGFTb3VyY2VBUEkoKTtcclxufSkoZGF0YUNvbm5lY3RvciwgbWFpbkNvbmZpZyk7XHJcbi8vXHJcbi8vIHZhciB1c2VySWQgPSBcIkF0amVyczIxNTMwMjc3NzQ0OTU4XCI7XHJcbi8vIHZhciBtZXNzYWdlID0ge1xyXG4vLyAgICAgZGF0ZTogXCJ0ZXN0RGF0ZVwiLFxyXG4vLyAgICAgaXRJc1JlYWQ6IHRydWUsXHJcbi8vICAgICBtZXNzYWdlOiBcInRlc3RNZXNzYWdlXCIsXHJcbi8vICAgICB1c2VyOiBcIml2YW5cIlxyXG4vLyB9O1xyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKG51bGwsIHVzZXJJZCwgbWVzc2FnZSk7XHJcbi8vIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2UobnVsbCwgdXNlcklkLCAgbWVzc2FnZSk7XHJcbi8vIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2Uoe3Rlc3Q6IFwidGVzdFwifSwgdXNlcklkLCAgIG1lc3NhZ2UpO1xyXG5cclxuXHJcbi8vIGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4vLyAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbi8vIH0pO1xyXG5cclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5zZXRTZXR0aW5nRmllbGQoXCJ0ZXN0RmllbGRcIiwgdXNlcklkLCBmYWxzZSk7XHJcbi8vIHZhciB1c2VyTmFtZSA9IFwiYXRqZXJzXCI7XHJcblxyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UodXNlcklkLCB1c2VyTmFtZSk7XHJcblxyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJMaXN0KG51bGwpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4vLyB9KTtcclxuXHJcblxyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZUxhc3RPbmxpbmUodXNlcklkLCAxMTExMTExMTEpO1xyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJTZXR0aW5ncyh1c2VySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4vLyB9KTtcclxuXHJcbi8vIGV2ZW50RW1pdHRlclxyXG5cclxudmFyIGV2ZW50RW1pdHRlciA9IChmdW5jdGlvbiBjcmVhdGVFdmVudEVtaXR0ZXIgKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRTdWJzY3JpYmUgPSBmdW5jdGlvbiBhZGRTdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjayApIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaWYoICF0aGlzLmV2ZW50c1tldmVudE5hbWVdICkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVTdWJzY3JpYmUgKCkge1xyXG4gICAgICAgICAgICB0aGF0LmV2ZW50c1tldmVudE5hbWVdID0gdGhhdC5ldmVudHNbZXZlbnROYW1lXS5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRDYWxsYmFjayAhPT0gY2FsbGJhY2tcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZW1vdmVTdWJzY3JpYmVcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCAoZXZlbnROYW1lLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXTtcclxuICAgICAgICBpZiggZXZlbnQgKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKG51bGwsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbn0pKCk7XHJcbnZhciBsb25nUG9sbFJlc3BvbnNlUGFyc2VyID0gKGZ1bmN0aW9uIGNyZWF0ZUxvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKSB7XHJcbiAgICB2YXIgdHlwZXNPZkNoYW5nZSA9IHtcclxuICAgICAgICBtZXNzYWdlOiAvbWVzc2FnZS8sXHJcbiAgICAgICAgdXNlckxpc3Q6IC9sYXN0T25saW5lLnsxLH1zZW5kTmV3TWVzc2FnZS8sXHJcbiAgICAgICAgbGFzdE9ubGluZTogL1wicGF0aFwiOlwiXFwvXFx3ezEsfVxcL2xhc3RPbmxpbmUvLFxyXG4gICAgICAgIHNlbmROZXdNZXNzYWdlOiAvXCJwYXRoXCI6XCJcXC9cXHd7MSx9XFwvc2VuZE5ld01lc3NhZ2UvLFxyXG4gICAgICAgIHNldHRpbmc6IC9yZWFkTGFzdE1lc3NhZ2UvLFxyXG4gICAgICAgIHJlYWQ6IC9yZWFkL1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZXZlbnRSZWd1bGFyID0gL2V2ZW50OiBwdXQvO1xyXG4gICAgdmFyIGhhc051bGxEYXRhID0gL2RhdGE6IG51bGwvO1xyXG4gICAgdmFyIGdldERhdGFSZWd1bGFyID0gL1wiLFwiZGF0YVwiOi87XHJcbiAgICB2YXIgaXRJc05ld01lc3NhZ2VSZWd1bGFyID0gL1wicGF0aFwiOlwiXFwvLS87XHJcbiAgICB2YXIgaXRJc05ld1VzZXJMaXN0UmVndWxhciA9IC9cImRhdGFcIjp7XCJsYXN0T25saW5lXCI6XFxkKyxcInNlbmROZXdNZXNzYWdlXCI6LztcclxuICAgIHZhciBpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24gPSB0cnVlO1xyXG4gICAgdmFyIGl0SXNGaXJzdFVzZXJTZXR0aW5nQ29ubmVjdGlvbiA9IHRydWU7XHJcblxyXG4gICAgZnVuY3Rpb24gTG9uZ1BvbGxSZXNwb25zZVBhcnNlcigpIHt9XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0VHlwZU9mQ2hhbmdlcyA9IGZ1bmN0aW9uIGdldFR5cGVPZkNoYW5nZXMoXHJcbiAgICAgICAgYW5zd2VyRGF0YVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSBPYmplY3Qua2V5cyh0eXBlc09mQ2hhbmdlKS5maWx0ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRUeXBlT2ZDaGFuZ2UodHlwZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlc09mQ2hhbmdlW3R5cGVOYW1lXS50ZXN0KGFuc3dlckRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gdHlwZVswXTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UgPSBmdW5jdGlvbiBwcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilbMV1cclxuICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJzTWVzc2FnZXMgPSBmdW5jdGlvbiBwYXJzZVVzZXJzTWVzc2FnZXMoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgbWVzc2FnZUlkO1xyXG4gICAgICAgIHZhciByZXN1bHRPYmplY3QgPSB7fTtcclxuICAgICAgICBpZiAoY2hhbmdlVHlwZSA9PT0gXCJyZWFkXCIpIHtcclxuICAgICAgICAgICAgZGF0YS5pZCA9IHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJy9yZWFkXCIsXCInKVxyXG4gICAgICAgICAgICAgICAgLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGRhdGEudmFsdWUgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcvcmVhZFwiLFwiZGF0YVwiOicpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWl0SXNOZXdNZXNzYWdlUmVndWxhci50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlSWQgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVxyXG4gICAgICAgICAgICAuc2hpZnQoKTtcclxuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZSh0aGlzLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgcmVzdWx0T2JqZWN0W21lc3NhZ2VJZF0gPSBkYXRhO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRPYmplY3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmhhc05ld0RhdGEgPSBmdW5jdGlvbiBoYXNOZXdEYXRhKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIWhhc051bGxEYXRhLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pICYmIHJlc3BvbnNlLmxlbmd0aCA+IDFcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJMaXN0ID0gZnVuY3Rpb24gcGFyc2VVc2VyTGlzdChcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBjaGFuZ2VUeXBlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgIHZhciB1c2VySWQ7XHJcbiAgICAgICAgaWYgKGl0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGl0SXNOZXdVc2VyTGlzdFJlZ3VsYXIudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgdXNlcklkID0gdGhpcy5nZXRVc2VySWQocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0sIG51bGwpO1xyXG4gICAgICAgICAgICBkYXRhW3VzZXJJZF0gPSB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShcclxuICAgICAgICAgICAgcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilbMV1cclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICByZXR1cm4gW3VzZXJJZCwgZGF0YV07XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmdldEZpcnN0RGF0YSA9IGZ1bmN0aW9uIGdldEZpcnN0RGF0YShcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGpzb25EYXRhID0gSlNPTi5wYXJzZSh0aGlzLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBqc29uRGF0YTtcclxuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRVc2VySWQgPSBmdW5jdGlvbiBnZXRVc2VySWQoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoY2hhbmdlVHlwZSlcclxuICAgICAgICAgICAgICAgIC5zaGlmdCgpXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVswXVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlVXNlcnNTZXR0aW5ncyA9IGZ1bmN0aW9uIHBhcnNlVXNlcnNTZXR0aW5ncyhcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgaWYgKGl0SXNGaXJzdFVzZXJTZXR0aW5nQ29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBpdElzRmlyc3RVc2VyU2V0dGluZ0Nvbm5lY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gW251bGwsIGRhdGFdO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKHRleHQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gdGV4dC5zcGxpdChldmVudFJlZ3VsYXIpO1xyXG4gICAgICAgIHZhciBjaGFuZ2VUeXBlID0gdGhpcy5nZXRUeXBlT2ZDaGFuZ2VzKHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0pO1xyXG4gICAgICAgIHZhciByZXN1bHRPZlBhcnNlID0geyB0eXBlOiBjaGFuZ2VUeXBlIH07XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzTmV3RGF0YShyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2VUeXBlID09PSBcIm1lc3NhZ2VcIiB8fCBjaGFuZ2VUeXBlID09PSBcInJlYWRcIikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlVXNlcnNNZXNzYWdlcyhyZXN1bHQsIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mUGFyc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID09PSBcInNlbmROZXdNZXNzYWdlXCIgfHxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPT09IFwibGFzdE9ubGluZVwiIHx8XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID09PSBcInVzZXJMaXN0XCJcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRPZlBhcnNlLm9iamVjdCA9IHRoaXMucGFyc2VVc2VyTGlzdChyZXN1bHQsIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mUGFyc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlVHlwZSA9PT0gXCJzZXR0aW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJzU2V0dGluZ3MocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IExvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKTtcclxufSkoKTtcclxuXHJcbi8vIG1lc3NhZ2VNYW5hZ2VyXHJcblxyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG4vKiBleHBvcnRlZCBtZXNzYWdlTGlzdE1hbmFnZXIgKi9cclxuLy8g0JzQvtC00YPQu9GMINC00LvRjyDRgNCw0LHQvtGC0Ysg0YHQviDRgdC/0LjRgdC60L7QvCDRgdC+0L7QsdGJ0LXQvdC40Lkg0J7QlNCd0J7Qk9CeINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG52YXIgbWVzc2FnZUxpc3RNYW5hZ2VyID0gKGZ1bmN0aW9uIHNldHVwTWVzc2FnZUxpc3RNYW5hZ2VyIChjb25maWcpIHtcclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyDQpNC+0YDQvNCw0YIgIG1lc3NhZ2VMaXN0ID0gW1xyXG4gICAgLy8gICAge1xyXG4gICAgLy8gICAgICAgc2VuZGVyOiBzZW5kZXJcclxuICAgIC8vICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAvLyAgICAgICByZWFkOiB0cnVlL2ZhbHNlXHJcbiAgICAvLyAgICAgICBkYXRlOiBkYXRlXHJcbiAgICAvLyAgICB9LFxyXG4gICAgLy8gXVxyXG4gICAgLy8gcmVhZCAtINCx0YvQu9C+INC70Lgg0L/RgNC+0YfQuNGC0LDQvdC+INGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmdW5jdGlvbiBNZXNzYWdlTGlzdE1hbmFnZXIoKSB7fVxyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY0RPTSA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZXNCbG9jazogZ2V0RWxlbWVudChcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5tZXNzYWdlcy5DU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTUVTU0FHRSBFTEVNRU5UIC8vXHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10YIgRE9NINGN0LvQtdC80LXQvdGCINGB0L7QvtCx0YnQtdC90LjRjyDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvdCwINGN0LrRgNCw0L3QtVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgbWVzc2FnZURhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYoaXNSZWFkLCBzZW5kZXIpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlRGF0ZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfTUVTU0FHRV9EQVRFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VfREFURV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZVNlbmRlckRpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ESVNQTEFZX1NFTkRFUl9OQU1FLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUVdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfTUVTU0FHRSxcclxuICAgICAgICAgICAgW2NvbmZpZy5tZXNzYWdlcy5DU1NfQ0hBVF9NRVNTQUdFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZURhdGVEaXYpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZVNlbmRlckRpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGl2KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VDb250YWluZXJEaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkID0gZnVuY3Rpb24gIGdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCAoKSB7XHJcbiAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VzSXNSZWFkID0gW107XHJcbiAgICAgICAgdmFyIHVzZXJOYW1lID0gY29uZmlnLkFETUlOX05BTUUgfHwgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWU7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgICAgICBmb3IoaSA9IHRoaXMubWVzc2FnZUxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tZXNzYWdlTGlzdFtpXS5zZW5kZXIgIT09IHVzZXJOYW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNJc1JlYWQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IHRoaXMubWVzc2FnZUxpc3RbaV0uaWQgKyBcIi9yZWFkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUxpc3RbaV0ucmVhZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlc0lzUmVhZDtcclxuICAgIH07XHJcblxyXG5cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2IChpc1JlYWQsIHNlbmRlcikge1xyXG4gICAgICAgIHZhciBtZXNzYWdlQ29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLm1lc3NhZ2VzLkNTU19NRVNTQUdFX0NPTlRBSU5FUik7XHJcbiAgICAgICAgaWYgKCFpc1JlYWQgJiYgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgIT09IHNlbmRlcikge1xyXG4gICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLm1lc3NhZ2VzLkNTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VDb250YWluZXJEaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrID0gZnVuY3Rpb24gY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrICh0ZXh0LCBpc0Rpc3BsYXksIHN0eWxlQ2xhc3Nlcykge1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN0eWxlQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIGNsYXNzQWRkIChzdHlsZSkge1xyXG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChzdHlsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIE1FU1NBR0UgRUxFTUVOVCAvL1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlTGlzdCAobWVzc2FnZU9iamVjdHMpICB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdHMpIHtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBhZGRFbGVtZW50VG9NZXNzYWdlTGlzdCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdNZXNzYWdlTGlzdDtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0IChuZXdNZXNzYWdlTGlzdCkge1xyXG4gICAgICAgIGlmKHRoaXMuZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdCA9IG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiBhZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCAoXHJcbiAgICAgICAgbWVzc2FnZU9ialxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdC5wdXNoKG1lc3NhZ2VPYmopO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C10YDQtdCx0LjRgNCw0LXRgiDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5LCDRgdC+0LfQtNCw0LXRgiDRgdC+0L7RgtCy0LXRgtGB0LLRg9GO0YnQuNC1INC40LwgRE9NINGN0LvQtdC80LXQvdGC0Ysg0Lgg0LLRgdGC0LDQstC70Y/QtdGCINC40YUg0LIg0YfQsNGCXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmRpc3BsYXlNZXNzYWdlcyA9IGZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlcygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jbGVhckNoYXQoKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LmZvckVhY2goZnVuY3Rpb24gY3JlYXRlTWVzc2FnZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGhhdC5jcmVhdGVNZXNzYWdlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QuZGF0ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3Quc2VuZGVyLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5yZWFkXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoYXQuY0RPTS5tZXNzYWdlc0Jsb2NrLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGH0LjRgdGC0LjRgtGMIERPTSDRjdC70LXQvNC10L3RgiDQsiDQutC+0YLQvtGA0L7QvCDQvtGC0L7QsdGA0LDQttCw0Y7RgtGB0Y8g0YHQvtC+0LHRidC10L3QuNGPICjQvdCw0L/RgNC40LzQtdGAINGH0YLQvtCx0Ysg0LLRgdGC0LDQstC40YLRjCDQvdCy0L7Ri9C5INGB0L/QuNGB0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LkpXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNsZWFyQ2hhdCA9IGZ1bmN0aW9uIGNsZWFyQ2hhdCgpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNET00ubWVzc2FnZXNCbG9jay5yZW1vdmVDaGlsZCh0aGlzLmNET00ubWVzc2FnZXNCbG9jay5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTWVzc2FnZUxpc3RNYW5hZ2VyKCk7XHJcblxyXG59KShtYWluQ29uZmlnKTtcclxuLyogZXhwb3J0ZWQgdXNlckRhdGFNYW5hZ2VyICovXHJcbi8qIGdsb2JhbCBkYXRhU291cmNlICovXHJcbi8qIGdsb2JhbCBtZXNzYWdlTGlzdE1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGNyZWF0ZU1lc3NhZ2VPYmplY3QgKi9cclxuLyogZ2xvYmFsIGdldEN1cnJlbnREYXRlICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBldmVudEVtaXR0ZXIgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIHVzZXJEYXRhTWFuYWdlciA9ICAoZnVuY3Rpb24gY3JlYXRlVXNlckRhdGFNYW5hZ2VyIChjb25maWcsIGV2ZW50RW1pdHRlciwgbG9uZ1BvbGxSZXNwb25zZVBhcnNlcikge1xyXG4gICAgZnVuY3Rpb24gVXNlckRhdGFNYW5hZ2VyICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ID09PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhRnJvbUxvbmdQb2xsQ29ubmVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJDb3JyZXNwb25kZW5jZSA9IGdldFVzZXJDb3JyZXNwb25kZW5jZUZyb21Mb25nUG9sbENvbm5lY3Rpb24uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBldmVudEVtaXR0ZXIuYWRkU3Vic2NyaWJlKFwibWVzc2FnZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC51cGRhdGVNZXNzYWdlTGlzdChkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJyZWFkXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLm1lc3NhZ2VMaXN0LmZvckVhY2goZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobWVzc2FnZS5pZCA9IGRhdGEuaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWFkID0gZGF0YS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YUJhc2ljLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckNvcnJlc3BvbmRlbmNlID0gZ2V0VXNlckNvcnJlc3BvbmRlbmNlQmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IHVwZGF0ZU1lc3NhZ2VMaXN0QmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIC8qIGV4cG9ydGVkIGdldEN1cnJlbnREYXRlICovXHJcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSAoZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT09IDEpID8gXCIwXCIgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIHJldHVybiBkYXRlXHJcbiAgICAgICAgICAgIC5nZXRIb3VycygpXHJcbiAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgIC5jb25jYXQoXCI6XCIsIG1pbnV0ZXMpO1xyXG4gICAgfVxyXG4gICAgLyogZXhwb3J0ZWQgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZU9iamVjdCAoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWQsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlbmRlcjogc2VuZGVyLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICByZWFkOiBpc1JlYWQsXHJcbiAgICAgICAgICAgIGRhdGU6IGRhdGUsXHJcbiAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnNldHVwKCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBiYXNpY1xyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckRhdGFCYXNpYyAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhhdC5nZXRVc2VyQ29ycmVzcG9uZGVuY2UodXNlcklkKS50aGVuKCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgICAvLyAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYyAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlc09iamVjdCA9IFtdO1xyXG4gICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFba2V5XS5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc09iamVjdC5wdXNoKGRhdGFba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgICAgIG5ld01lc3NhZ2VMaXN0ID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmNyZWF0ZU1lc3NhZ2VMaXN0KG1lc3NhZ2VzT2JqZWN0KTtcclxuICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2VMaXN0KG5ld01lc3NhZ2VMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYyAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJNZXNzYWdlcyh1c2VySWQpKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB0aGF0LnVwZGF0ZU1lc3NhZ2VMaXN0KGRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgdGhhdC5nZXRVc2VyQ29ycmVzcG9uZGVuY2UodXNlcklkKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJDb3JyZXNwb25kZW5jZUZyb21Mb25nUG9sbENvbm5lY3Rpb24odXNlcklkKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24gPSBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJNZXNzYWdlcyh1c2VySWQpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24ub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IDMgJiYgdGhpcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gbG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50RW1pdHRlci5lbWl0KGRhdGEudHlwZSwgZGF0YS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLnNlbmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdEFmdGVyTG9uZ1BvbGwgKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0uaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QoZGF0YVtrZXldKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY2xlYXJNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZUxpc3QgKCkge1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5tZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSA9IGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSAodXNlcklkLCB1c2VyTmFtZSkge1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuYWRkTmV3VXNlclRvRGF0YVNvdXJjZSh1c2VySWQsIHVzZXJOYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlU2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gc2V0RmllbGQgKGZpZWxkTmFtZSkge1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0U2V0dGluZ0ZpZWxkKFxyXG4gICAgICAgICAgICBmaWVsZE5hbWUsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3NbZmllbGROYW1lXVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlVXNlck9ubGluZSA9IGZ1bmN0aW9uIHVwZGF0ZVVzZXJPbmxpbmUgKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGU7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVMYXN0T25saW5lKHVzZXJJZCwgZGF0ZS5nZXRUaW1lKCkpXHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZSAoc2VuZGVyTmFtZSkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCgpO1xyXG4gICAgICAgIHZhciBkYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcclxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IGNyZWF0ZU1lc3NhZ2VPYmplY3QobWVzc2FnZSwgZGF0ZSwgc2VuZGVyTmFtZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCAhPT0gXCJsb25nUG9sbFwiKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdChtZXNzYWdlT2JqZWN0KTtcclxuICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNhdmVNZXNzYWdlVG9EYXRhU291cmNlKG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50ID0gZnVuY3Rpb24gZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChjb25maWcuQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MpO1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgZWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNldE1lc3NhZ2VBc1JlYWQgPSBmdW5jdGlvbiBzZXRNZXNzYWdlQXNSZWFkICgpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdHMgPSBtZXNzYWdlTGlzdE1hbmFnZXIuZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkKCk7XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlT2JqZWN0cyk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gc2V0UmVhZCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQoXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVNZXNzYWdlVG9EYXRhU291cmNlID0gZnVuY3Rpb24gc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0LnNlbmRlciA9PT0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUpIHtcclxuICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWcoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTZXR0aW5ncyA9IFt7dXNlcklkLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWV9LHt9Li4uXVxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlID0gZnVuY3Rpb24gc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZSAoc2V0dGluZ3MpIHtcclxuICAgICAgICBzZXR0aW5ncy5mb3JFYWNoKGZ1bmN0aW9uIHNhdmVTZXR0aW5nIChuZXdGaWVsZFNldHRpbmcpIHtcclxuICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5zZXRTZXR0aW5nRmllbGQoXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcuZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhTWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKTtcclxuXHJcbi8vIHZpZXdcclxuXHJcbi8qIGV4cG9ydGVkIHZpZXdGYWN0b3J5ICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBkYXRhU291cmNlICovXHJcbnZhciB2aWV3RmFjdG9yeSA9IChmdW5jdGlvbiBjcmVhdGVWaWV3RmFjdG9yeSAoZGF0YVNvdXJjZSkge1xyXG5cclxuICAgIGZ1bmN0aW9uIFZpZXdGYWN0b3J5ICgpIHt9XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZVZpZXcgPSBmdW5jdGlvbiBjcmVhdGVDaGF0VmlldyAoaHRtbFBhdGgsIGNzc1BhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBjcmVhdGVWaWV3UHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmKGh0bWxQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjc3NQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbmNsdWRlVmlld0Nzc1RvUGFnZSh0aGF0LmNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc1BhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVzaGVldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRleHQvY3NzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG91Y2gtc29mdC1jaGF0LWNzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoYXQuaW5jbHVkZVZpZXdIVE1MVG9QYWdlKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImh0bWxQYXRoIGlzIG51bGwuIFBsZWFzZSBhZGQgaHRtbFBhdGhcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0hUTUxUb1BhZ2UgPSBmdW5jdGlvbiBpbmNsdWRlQ2hhdEhUTUxUb1BhZ2UgKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciBjb250YWluZXJEaXYgPSAoY29udGFpbmVyQ2xhc3MpID8gZ2V0RWxlbWVudChjb250YWluZXJDbGFzcykgOiBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLmNvbW1vbkFQSS5nZXRIVE1MKGh0bWxQYXRoKS50aGVuKGZ1bmN0aW9uIHNldEh0bWwgKGh0bWwpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyRGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3Q3NzVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRDc3NUb1BhZ2UgKGxpbmspIHtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlQ1NTTGluayA9IGZ1bmN0aW9uIGNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgZmlsZVBhdGgsXHJcbiAgICAgICAgcmVsLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVsKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwicmVsXCIsIHJlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwidHlwZVwiLCB0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGZpbGVQYXRoKTtcclxuICAgICAgICByZXR1cm4gbGluaztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBWaWV3RmFjdG9yeSgpXHJcblxyXG59KShkYXRhU291cmNlKTtcclxuXHJcbi8vIGNoYXRNYWluXHJcblxyXG4vKiBleHBvcnRlZCBjaGF0Q3VzdG9taXplciAqL1xyXG4vKiBnbG9iYWwgY2hhdEN1c3RvbWl6ZXIgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIGNoYXRDdXN0b21pemVyID0gKGZ1bmN0aW9uIGNyZWF0ZUNoYXRDdXN0b21pemVyIChjb25maWcpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBDaGF0Q3VzdG9taXplcigpIHt9XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLnNldHVwT3V0ZXJDaGF0U2V0dGluZ3MgPSBmdW5jdGlvbiBzZXR1cE91dGVyQ2hhdFNldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMuYWxsb3dNaW5pbWl6ZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb25PZk1haW5CbG9jaygpO1xyXG4gICAgICAgIHRoaXMuc2V0VGl0bGUoKTtcclxuICAgICAgICB0aGlzLnNldE1haW5Dc3NDbGFzcygpO1xyXG4gICAgICAgIHRoaXMuYWxsb3dEcmFnTkRyb3AoKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLmFsbG93RHJhZ05Ecm9wID0gZnVuY3Rpb24gYWxsb3dEcmFnTkRyb3AoKSB7XHJcbiAgICAgICAgdmFyIGNsaWNrQmxvY2sgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uVElUTEVfQkxPQ0tfQ0xBU1MpO1xyXG4gICAgICAgIHZhciBkcmFnQmxvY2sgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKTtcclxuICAgICAgICBpZiAoY29uZmlnLmNoYXRTZXR0aW5ncy5hbGxvd0RyYWcgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsaWNrQmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbiBkcmFnQW5kRHJvcChlKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3JkcztcclxuICAgICAgICAgICAgdmFyIHNoaWZ0WDtcclxuICAgICAgICAgICAgdmFyIHNoaWZ0WTtcclxuICAgICAgICAgICAgdmFyIG1vdmVPYmo7XHJcbiAgICAgICAgICAgIHZhciBzZXROdWxsO1xyXG4gICAgICAgICAgICB2YXIgZW5kRHJhZztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENvb3JkcyhlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBib3gudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGJveC5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb3JkcyA9IGdldENvb3JkcyhkcmFnQmxvY2spO1xyXG4gICAgICAgICAgICBzaGlmdFggPSBlLnBhZ2VYIC0gY29yZHMubGVmdDtcclxuICAgICAgICAgICAgc2hpZnRZID0gZS5wYWdlWSAtIGNvcmRzLnRvcDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1vdmVBdChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnQmxvY2suc3R5bGUubGVmdCA9IGVsZW0ucGFnZVggLSBzaGlmdFggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBkcmFnQmxvY2suc3R5bGUudG9wID0gZWxlbS5wYWdlWSAtIHNoaWZ0WSArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbW92ZU9iaiA9IGZ1bmN0aW9uIG1vdmVPYmpEcmFnQW5kRHJvcChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBtb3ZlQXQoZWxlbSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzZXROdWxsID0gZnVuY3Rpb24gc2V0TnVsbERyYWdBbmREcm9wICgpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixtb3ZlT2JqICk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHNldE51bGwgKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGVuZERyYWcgPSBmdW5jdGlvbiBlbmREcmFnQW5kRHJvcCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIG1vdmVBdChlKTtcclxuICAgICAgICAgICAgZHJhZ0Jsb2NrLnN0eWxlLnpJbmRleCA9IDEwMDA7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdmVPYmopO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBzZXROdWxsKTtcclxuICAgICAgICAgICAgZHJhZ0Jsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgZW5kRHJhZyk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0UG9zaXRpb25PZk1haW5CbG9jayA9IGZ1bmN0aW9uIHNldFBvc2l0aW9uT2ZNYWluQmxvY2soKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5jaGF0U2V0dGluZ3MucG9zaXRpb24gPT09IFwicmlnaHRcIikge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLkNIQVRfUE9TSVRJT05fUklHSFRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLkNIQVRfUE9TSVRJT05fTEVGVFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLnNldFRpdGxlID0gZnVuY3Rpb24gc2V0VGl0bGUoKSB7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy5jaGF0VGl0bGUubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLmNoYXRUaXRsZSA9IGNvbmZpZy5ERUZBVUxUX0NIQVRfVElUTEU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5USVRMRV9CTE9DS19DTEFTUykuaW5uZXJIVE1MID0gY29uZmlnLmNoYXRTZXR0aW5ncy5jaGF0VGl0bGU7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5hbGxvd01pbmltaXplID0gZnVuY3Rpb24gYWxsb3dNaW5pbWl6ZSgpIHtcclxuICAgICAgICBpZiAoY29uZmlnLmNoYXRTZXR0aW5ncy5hbGxvd01pbmltaXplID09PSBcImZhbHNlXCIpIHtcclxuICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0TWFpbkNzc0NsYXNzID0gZnVuY3Rpb24gc2V0TWFpbkNzc0NsYXNzKCkge1xyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3Mub3V0ZXJDc3NDbGFzcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3Mub3V0ZXJDc3NDbGFzcyA9IGNvbmZpZy5ERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLm91dGVyQ3NzQ2xhc3NcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IENoYXRDdXN0b21pemVyKCk7XHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBnbG9iYWwgdXNlckRhdGFNYW5hZ2VyICovXHJcbi8qIGdsb2JhbCBjaGF0Q3VzdG9taXplciAqL1xyXG4vKiBnbG9iYWwgZ2V0SGFzaCAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG4vKiBnbG9iYWwgdmlld0ZhY3RvcnkgKi9cclxudmFyIGNoYXRDb250cm9sbGVyID0gKGZ1bmN0aW9uIGNyZWF0ZUNoYXRDb250cm9sbGVyIChjb25maWcpIHtcclxuXHJcbiAgICAvLyBJTkNMVURFIC8vXHJcblxyXG4gICAgLyogZXhwb3J0ZWQgZ2V0SGFzaCAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0SGFzaChzdHIpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHN0ciArIGRhdGUuZ2V0VGltZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElOQ0xVREUgLy9cclxuXHJcbiAgICBmdW5jdGlvbiBDaGF0Q29udHJvbGxlcigpIHt9XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHBCYXNpYyAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldHVwQ2hhdFZpZXcoKS50aGVuKCBmdW5jdGlvbiBzdGFydEF1dGhvcml6YXRpb25BbmRCYXNpY0xpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgICAgIHRoYXQuYXV0aG9yaXphdGlvbihjb25maWcuY2hhdFNldHRpbmdzLnJlcXVpcmVOYW1lKTtcclxuICAgICAgICAgICAgdGhhdC5zZXR1cENoYXRCYXNpY0xpc3RlbmVycygpO1xyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gYWZ0ZXJTZXR1cFZpZXdDb25maWd1cmF0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKS50aGVuKGZ1bmN0aW9uIGFmdGVyVXNlckRhdGFTZXR1cCAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXR1cENoYXRTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0dXBDaGF0U2VuZExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnNldHVwQ2hhdFN0eWxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIHBvc3RDaGF0U2V0dXAgKCkge1xyXG4gICAgICAgICAgICBjaGF0Q3VzdG9taXplci5zZXR1cE91dGVyQ2hhdFNldHRpbmdzKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgLy8gYXV0aG9yaXphdGlvbiBibG9jayAvL1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uID0gZnVuY3Rpb24gYXV0aG9yaXphdGlvbiAodXNlck5hbWVJc1JlcXVpcmUpIHtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuc2V0dXAoKTtcclxuICAgICAgICBpZighdGhpcy5nZXRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlKCkpIHtcclxuICAgICAgICAgICAgaWYodXNlck5hbWVJc1JlcXVpcmUgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gZ2V0SGFzaChjb25maWcuREVGQVVMVF9VU0VSX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgPSBjb25maWcuREVGQVVMVF9VU0VSX05BTUU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgdXNlckRhdGFNYW5hZ2VyLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwQ2hhdENvbmRpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZUF1dGhvcml6YXRpb25NZW51VmlzaWJsZSA9IGZ1bmN0aW9uIHRvZ2dsZUF1dGhvcml6YXRpb25NZW51VmlzaWJsZSAoKSB7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkFVVEhPUklaQVRJT05fTUVOVV9DTEFTUykuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICAgICAgY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgIClcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vINCV0YHQu9C4INGC0YDQtdCx0YPQtdGC0YHRjyDQstCy0LXRgdGC0Lgg0LjQvNGPLCDQv9C+0LvRg9GH0LDQtdC8INC10LPQviDQuCDQt9Cw0L3QvtGB0LjQvCDRjtC30LXRgNCwINCyINCx0LRcclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRVc2VyTmFtZUZyb21JbnB1dCA9IGZ1bmN0aW9uIGdldFVzZXJOYW1lRnJvbUlucHV0ICgpIHtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSA9IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgIGNvbmZpZy5ET00uVVNFUl9OQU1FX0lOUFVUX0NMQVNTXHJcbiAgICAgICAgKS52YWx1ZTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBnZXRIYXNoKFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uZmlnLmNoYXRTZXR0aW5ncy5pc01pbmltaXplID0gZmFsc2U7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lKTtcclxuICAgICAgICB0aGlzLnNhdmVDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cENoYXRTZW5kTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLmdldFVzZXJEYXRhKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHVwIENoYXQgLy9cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0U2VuZExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldHVwQ2hhdFNlbmRMaXN0ZW5lcnMgKCkge1xyXG4gICAgICAgIC8vIHNldHVwIGNoYXQgbGlzdGVuZXJzXHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFTkRfTUVTU0FHRV9GVUxMX1NJWkVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuc2VuZE1lc3NhZ2UuYmluZCh1c2VyRGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlcixcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdXNlckRhdGFNYW5hZ2VyLnNldE1lc3NhZ2VBc1JlYWQuYmluZCh1c2VyRGF0YU1hbmFnZXIpKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwQ2hhdEJhc2ljTGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0dXBDaGF0QmFzaWNMaXN0ZW5lcnMgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uU0VORF9VU0VSX05BTUVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIHRoYXQuZ2V0VXNlck5hbWVGcm9tSW5wdXQuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFVF9NQVhfU1RZTEVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICB0aGF0Lm1pbk1heFN0eWxlVG9nZ2xlLmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5TRVRfTUlOX1NUWUxFX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgdGhhdC5taW5NYXhTdHlsZVRvZ2dsZS5iaW5kKHRoYXQpXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRWaWV3ID0gZnVuY3Rpb24gc2V0dXBDaGF0VmlldyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZpZXdGYWN0b3J5LmNyZWF0ZVZpZXcoY29uZmlnLkhUTUxfRklMRV9QQVRILCBjb25maWcuQ1NTX0ZJTEVfUEFUSCwgbnVsbCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRTdHlsZSA9IGZ1bmN0aW9uIHNldHVwQ2hhdFN0eWxlKCkge1xyXG4gICAgICAgIGlmICghY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSkge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYW5nZUlucHV0QW5kU2VuZEJ1dHRvbkNsYXNzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5taW5NYXhTdHlsZVRvZ2dsZSA9IGZ1bmN0aW9uIG1pbk1heFN0eWxlVG9nZ2xlKCkge1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSA9PT0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VJbnB1dEFuZFNlbmRCdXR0b25DbGFzcygpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5hY3Rpdml0eU5vdGlmeSA9IGZ1bmN0aW9uIGFjdGl2aXR5Tm90aWZ5ICgpIHtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIudXBkYXRlVXNlck9ubGluZShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuY2hhbmdlSW5wdXRBbmRTZW5kQnV0dG9uQ2xhc3MgPSBmdW5jdGlvbiBjaGFuZ2VJbnB1dEFuZFNlbmRCdXR0b25DbGFzcyAoKSB7XHJcbiAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSkge1xyXG4gICAgICAgICAgICBjb25maWcuQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MgPSBjb25maWcuRE9NLkNTU19NSU5fU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTID0gY29uZmlnLkRPTS5DU1NfTUFYX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTU1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIExPQ0FMIFNUT1JBR0UgLy9cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0Q29uZGl0aW9uID0gZnVuY3Rpb24gc2V0dXBDaGF0Q29uZGl0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29uZGl0aW9uID0gdGhpcy5nZXRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gdGhpcy5nZXRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlKCkudXNlcklkO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lID0gdGhpcy5nZXRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlKCkudXNlck5hbWU7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSA9IGNvbmRpdGlvbi5pc01pbmltaXplO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2F2ZUNvbmRpdGlvblRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZUNvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICB1c2VySWQ6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgaXNNaW5pbWl6ZTogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSxcclxuICAgICAgICAgICAgdXNlck5hbWU6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSwgZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gZ2V0Q29uZGl0aW9uRnJvbUxvY2FsU3RvcmFnZSAoKSB7XHJcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgICAgIGlmKGNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb25kaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBMT0NBTCBTVE9SQUdFIC8vXHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgPSBmdW5jdGlvbiBzZXR1cEludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uIGludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ICE9PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5nZXRVc2VyRGF0YShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoYXQuYWN0aXZpdHlOb3RpZnkoKTtcclxuICAgICAgICB9LCBjb25maWcuVVBEQVRFX1VTRVJfREFUQV9USU1FKVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IENoYXRDb250cm9sbGVyKCk7XHJcblxyXG59KShtYWluQ29uZmlnLCBldmVudEVtaXR0ZXIpO1xyXG5cclxuXHJcbmNoYXRDb250cm9sbGVyLnN0YXJ0QXBwKCk7Il19
