var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort",CSS_CONTROL_PANEL_LOG_CLASS:"root-touchsoft-dashboard_control-log",CSS_CONTROL_PANEL_SELECT_CLASS:"root-touchsoft-dashboard_control_select_command",CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS:"root-touchsoft-dashboard_control_send-command-button",CSS_CONTROL_PARAMETERS_CLASS:"root-touchsoft-dashboard_control_parameter-input"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","networkRadioLongPoll","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?",srcEnd:"'&gt&lt/script&gt"},userList:{USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online"},chatSettings:{typeOfRequest:"longPoll"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},interval:{UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e3},router:{ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",ADMIN_NAME:"Admin",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message",COMMAND_PATH_PREFIX:"https://onlineconsultantwebapp.firebaseio.com/usersSettings/"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,n){var r;return 1<e.length&&(t<(r=function(e,t,s,n){for(var r,a,o,i,u=e[Math.floor((s+t)/2)][n],c=t,l=s;c<=l;){for(;e[c][n]>u;)c++;for(;e[l][n]<u;)l--;c<=l&&(o=l,i=(r=e)[a=c],r[a]=r[o],r[o]=i,c++,l--)}return c}(e,t,s,n))-1&&this.quickSort(e,t,r-1,n),r<s&&this.quickSort(e,r,s,n)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.setupDataBaseAPI=function(e){return"fetch"===e?{request:t.requestFetch,getNewConnectorAPI:t.setupDataBaseAPI}:"XHR"===e?{request:t.requestXMR,getNewConnectorAPI:t.setupDataBaseAPI}:{request:t.requestXMR,createLongPollConnection:t.longPoll,getNewConnectorAPI:t.setupDataBaseAPI}},s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,r,a,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(a,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},r?s.send(r):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},(t=new s).setupDataBaseAPI(e.typeOfRequest)}(dataConnectorConfig),dataSource=function(o,t){var s,r="userList",n="usersMessages",a="usersSettings",i={isMinimize:!1,readLastMessage:!0};function u(){}function c(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function l(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}return u.prototype.createRequestPath=function(e,t,s,n){var r=e;return null!==n&&(r+="/"+n),null!==t&&(r+="/"+t),null!==s&&(r+="/"+s),r+=".json"},u.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},u.prototype.setData=function(e,t,s,n,r){var a;return a="PUT"===t?this.createRequestPath(dataBaseUrl,n,s,e):this.createRequestPath(dataBaseUrl,n,null,e),o.request(a,JSON.stringify(r),t,"application/json")},u.prototype.addNewUserToDataSource=function(t,e){var s=new Date,n=this;i.userName=e,Object.keys(i).map(function(e){return n.setData(a,"PUT",e,t,i[e]),!0}),this.setData(r,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},u.prototype.getDataSourceAPI=function(e){return e&&(t.chatSettings.typeOfRequest=e),u.prototype.getData="longPoll"===t.chatSettings.typeOfRequest?c:l,{usersAPI:{getUserList:s.getData.bind(s,r),getUserSettings:s.getData.bind(s,a),getUserMessages:s.getData.bind(s,n),getSettingField:s.getData.bind(s,a),sendMessage:s.setData.bind(s,n,"POST"),setSettingField:s.setData.bind(s,a,"PUT"),addNewUserToDataSource:s.addNewUserToDataSource.bind(s),updateLastOnline:s.setData.bind(s,r,"PUT","lastOnline"),updateSendNewMessageFlag:s.setData.bind(s,r,"PUT","sendNewMessage"),updateMessageIsReadField:s.setData.bind(s,n,"PUT")},commonAPI:{getHTML:s.getHTML.bind(s),getDataSourceAPI:s.getDataSourceAPI.bind(s)}}},(s=new u).getDataSourceAPI()}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/,getIp:/getIp/,askQuestion:/askQuestion/},r=/event: put/,t=/data: null/,a=/","data":/,o=/"path":"\/-/,n=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=/data: {"path":"\/","data":{"getIp":/,u=/data: {"path":"\/","data":{"askQuestion":/,c=/data: {"path":"\/askQuestion","data":/,l=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){return!!s[e].test(t)&&e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(a)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,n={},r={};return"read"===t?(n.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),n.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),n):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(a).shift(),n=JSON.parse(this.prepareDataBeforeJsonParse(e)),r[s]=n,r):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return l?(l=!1,this.getFirstData(e)):n.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseCommandAnswer=function(e){var t,s=/getIp/.test(e[e.length-1]),n=/askQuestion/.test(e[e.length-1]);return s&&n?(t=e[e.length-1].split(/data: {"path":"\/","data":/).pop().split("},"),[JSON.parse(t[0]+"}}"),JSON.parse("{"+t[1].trim().slice(0,-1))]):s?this.parseUserIpData(e):n?this.parseQuestionsData(e):void 0},e.prototype.parseUserIpData=function(e){return i.test(e)?JSON.parse(e[e.length-1].split(i).pop().trim().slice(0,-2)):JSON.parse(e[e.length-1].split(r).pop().split('data: {"path":"/getIp","data":').pop().trim().slice(0,-1))},e.prototype.parseQuestionsData=function(e){return u.test(e[e.length-1])?JSON.parse(e[e.length-1].split(u).pop().trim().slice(0,-2)):c.test(e[e.length-1])?JSON.parse(e[e.length-1].split(c).pop().trim().slice(0,-1)):JSON.parse('{"askQuestion":{"'+e[e.length-1].split('data: {"path":"/askQuestion/').pop().replace('","data"','"')+"}")},e.prototype.parse=function(e){var t=e.split(r),s=this.getTypeOfChanges(t[t.length-1]),n={type:s};return!!this.hasNewData(t)&&("message"===s||"read"===s?(n.object=this.parseUsersMessages(t,s),n):"sendNewMessage"===s||"lastOnline"===s||"userList"===s?(n.object=this.parseUserList(t,s),n):("getIp"===s||"askQuestion"===s)&&(n.object=this.parseCommandAnswer(t,s),n))},new e}(),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,r){var a=this;return new Promise(function(e,t){s?(n&&a.includeViewCssToPage(a.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(a.includeViewHTMLToPage(s,r))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var r=document.createElement("link");return n&&r.setAttribute("id",n),t&&r.setAttribute("rel",t),s&&r.setAttribute("type",s),r.setAttribute("href",e),r},new e}(dataSource),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var r=this.createMessageContainerDiv(n,s),a=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return r.appendChild(a),r.appendChild(o),r.appendChild(i),r},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,n=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:n,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,n){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort(),i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3===this.readyState&&200===this.status&&(t=n.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){return t[e].id=e,messageListManager.addMessageToMessageList(t[e]),!0}),messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){e.id===t.id&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){return t[e].id=e,s.push(t[e]),!0}),messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(){var e,t,s,n=this.getMessageFromInputElement(),r=(e=new Date,t=1===e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),e.getHours().toString().concat(":",t)),a=i.currentUserSettings.userName||i.ADMIN_NAME,o={sender:a,message:n,read:!1,date:r,id:s};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),log={write:function(e,t){var s;s=validMessage,console.log(s)}},userListManager=function(a,e){function t(){this.uList=[]}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return s.classList.add(a.userList.USER_ELEMENT_CSS_CLASS),n.classList.add(a.userList.USER_ID_ELEMENT_CSS_CLASS),n.innerHTML=e,t?r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_ONLINE):r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(n),s.appendChild(r),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var n=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,n),online:n,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.updateUserOnlineStatus=function(e,t){var s=this.getUserFromUserListById(e);this.uList[s].lastOnline=t,this.uList[s].online=this.userIsOnline(t),this.uList[s].userElement=this.createUserElement(e,this.userIsOnline(t))},t.prototype.getUserFromUserListById=function(t){var s=this,n=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(n=e),!0}),n},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=a.interval.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(a.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,a.currentDashboardCondition.sortBy)},t.prototype.clearUserList=function(){this.uList=[]},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(a.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(a.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),controlPanel=function(o,i,e,s){var n,u,t,c,r,a,l,p,d={getIp:{parametersNumber:0,type:"async"},askQuestion:{parametersNumber:3,type:"pending"}};function g(e){a[e].forEach(function(e){e()})}function S(){var e,t,s,n,r,a;l={commandName:u.value,parametersNumber:d[u.value].parametersNumber,isExecute:!1,typeOfCommand:d[u.value].type},c.forEach(function(e,t){t<l.parametersNumber&&(l["parameter"+t]=e.value)}),e=null,t=u.value,s=e||o.currentUserSettings.userId,p=o.COMMAND_PATH_PREFIX+s+"/commands/"+t+".json",n=l,r=p,a=JSON.stringify(n),i.request(r,a,"PUT","application/json")}function h(){}return a={firstInit:[function(){n=getElement(o.DOM.CSS_CONTROL_PANEL_LOG_CLASS),u=getElement(o.DOM.CSS_CONTROL_PANEL_SELECT_CLASS),t=getElement(o.DOM.CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS),c=getElement(o.DOM.CSS_CONTROL_PARAMETERS_CLASS,!0)},function(){u.addEventListener("change",function(){}),t.addEventListener("click",S)}],setup:[function(e){var t=e||o.currentUserSettings.userId;r&&r.abort(),(r=i.createLongPollConnection(o.COMMAND_PATH_PREFIX+t+"/commandsResponse/.json")).onreadystatechange=function(){if(3===this.readyState&&200===this.status){var e=s.parse(this.responseText);e&&(n.innerHTML=JSON.stringify(e.object))}},r.send()}],close:[function(){r&&r.abort()}]},h.prototype.setup=g.bind(null,"setup"),h.prototype.close=g.bind(null,"close"),h.prototype.firstInit=g.bind(null,"firstInit"),new h}(mainConfig,dataConnector,0,longPollResponseParser),dashboard=function(s,n,r,a,e,o,i){var t=[];function u(){this.setupEventEmitter()}return u.prototype.startApp=function(){r.setup(s),this.getUserList(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions(),i.firstInit()},u.prototype.setupEventEmitter=function(){var n,r=this;o.addSubscribe("userList",function(e){var t,s=[];t=e instanceof Array?e[1]:e,Object.keys(t).map(function(e){return a.addUserToUsersArray(t[e],e,s),!0}),a.uList=a.uList.concat(s),n=r.getCurrentUserIdFromLocalStorage(),r.localSettingsSetup(n),r.setupUserListDOM()}),o.addSubscribe("lastOnline",function(e){var t=e[0],s=e[1];a.updateUserOnlineStatus(t,s)}),o.addSubscribe("sendNewMessage",function(e){var t=a.getUserFromUserListById(e[0]);a.uList[t].sendNewMessage=e[1],r.toggleNewMessageIndicatorToUser()})},u.prototype.saveCurrentConditionToLocalStorage=function(){var e=JSON.stringify({filter:s.currentDashboardCondition.filterBy,sort:s.currentDashboardCondition.sortBy,currentUserId:s.currentUserSettings.userId});localStorage.setItem(s.LOCAL_STORAGE_NAME,e)},u.prototype.getCurrentUserIdFromLocalStorage=function(){var e=localStorage.getItem(s.LOCAL_STORAGE_NAME),t=null;return e&&(t=JSON.parse(e),s.currentDashboardCondition.filterBy=t.filter,s.currentDashboardCondition.sortBy=t.sort,s.currentUserSettings.userId=t.currentUserId),t},u.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(s.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(s.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(s.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(s.currentUserSettings.userId)))},u.prototype.filter=function(){s.currentDashboardCondition.filterBy=getElement(s.DOM.CSS_FILTER_INPUT_ID).value,this.saveCurrentConditionToLocalStorage(),a.filterByName(s.currentDashboardCondition.filterBy),a.displayUsers()},u.prototype.sort=function(){s.currentDashboardCondition.sortBy=getElement(s.DOM.CSS_SORT_SELECT_ID).value,this.saveCurrentConditionToLocalStorage(),a.sortUsersByField(),a.displayUsers()},u.prototype.setupUsersListeners=function(){var t=this;Array.from(s.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})},u.prototype.setupUserListDOM=function(){a.displayUsers(),this.getAcessToUsersList(),this.toggleNewMessageIndicatorToUser(),this.setupUsersListeners()},u.prototype.getAcessToUsersList=function(){s.users=getElement(s.userList.USER_ELEMENT_CSS_CLASS,!0)},u.prototype.getUserList=function(){var e,t=n.usersAPI.getUserList(null);t.onreadystatechange=function(){this.status&&(e=longPollResponseParser.parse(this.responseText))&&o.emit(e.type,e.object)},t.send(),s.currentUserListConnection=t},u.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},u.prototype.startConversationWithUser=function(e){var t=this;s.currentUserSettings.userId=e,i.setup(),r.clearMessageList(),r.getUserData(e).then(function(){getElement(s.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.remove(s.INVISIBLE_CLASS),t.saveCurrentConditionToLocalStorage()}),n.usersAPI.updateSendNewMessageFlag(e,!1)},u.prototype.updateUserMessagesAndDisplayIt=function(){r.getUserData(s.currentUserSettings.userId),this.markMessageFromUserAsRead(s.currentUserSettings.userId)},u.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(s.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,s.ADMIN_NAME)),getElement(s.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(s.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(s.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},u.prototype.markMessageFromUserAsRead=function(e){var t=a.getUserFromUserListById(e);a.uList[t].sendNewMessage=!1,r.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},u.prototype.closeConversation=function(){getElement(s.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.add(s.INVISIBLE_CLASS),s.currentUserSettings.userId=null,s.currentMessageConnection.abort(),i.close(),this.saveCurrentConditionToLocalStorage()},u.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(a.uList).map(function(e){return t=a.uList[e].userElement.getElementsByClassName(s.CSS_HAVE_NEW_MESSAGE_STYLE)[0],a.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(s.CSS_HAVE_NEW_MESSAGE_STYLE),a.uList[e].userElement.appendChild(t)),!a.uList[e].sendNewMessage&&t&&a.uList[e].userElement.removeChild(t),!0})},u.prototype.setupIntervalFunctions=function(){var e=this;t.push=setInterval(function(){Object.keys(a.uList).map(function(e){return a.updateUserOnlineStatus(a.uList[e].userId,a.uList[e].lastOnline),!0}),e.setupUserListDOM()},s.interval.UPDATE_USERS_TIME)},u.prototype.closeApp=function(){t.forEach(function(e){clearInterval(e)}),userDataManager.clearMessageList(),a.clearUserList(),s.currentMessageConnection&&s.currentMessageConnection.abort(),s.currentUserListConnection.abort(),i.close()},new u}(mainConfig,dataSource,userDataManager,userListManager,0,eventEmitter,controlPanel),launcher=function(s){var o={},n={chatTitle:{typeOfValue:"value"},chatUrl:{typeOfValue:"value"},chatClass:{typeOfValue:"value"},chatPositionSelect:{typeOfValue:"value"},allowMinimize:{typeOfValue:"checked"},allowDrag:{typeOfValue:"checked"},showTime:{typeOfValue:"checked"},requireName:{typeOfValue:"checked"},networkRadioXMR:{typeOfValue:"value",true:"XHR"},networkRadioLongPoll:{typeOfValue:"value",true:"longPoll"},networkRadioFetch:{typeOfValue:"value",true:"fetch"}};function e(){}return e.prototype.getDataFromElement=function(s){var n,r="",a=this;return Object.keys(o).map(function(e,t){return s[e]&&(0<t?"radio"===(n=o[e].getAttribute("type"))?o[e].checked&&(r+="'&typeOfRequest='"+a.getElementValue(e,n)):r+="'&"+e+"='"+a.getElementValue(e,n):r+=e+"='"+a.getElementValue(e)),!0}),r.length<1&&(r=null),r},e.prototype.getElementValue=function(e){return o[e][n[e].typeOfValue]},e.prototype.startApp=function(){var t=this;s.launcher.after.map(function(e){return o[e]=getElement(s.launcher.pattern+e,!1,!0),o[e].addEventListener("input",function(){var e=s.launcher.srcStart+this.getDataFromElement(n);e+=s.launcher.srcEnd,o.scriptCode.innerHTML=e}.bind(t)),!0})},e.prototype.closeApp=function(){o={}},new e}(mainConfig),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),mainController=function(s){var n={dashboard:s.router.DASHBOARD_HTML_PATH,configuration:s.router.LAUNCHER_HTML_PATH,about:s.router.ABOUT_HTML_PATH},r={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},a={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function e(){}return e.prototype.startApp=function(){var t=this;window.addEventListener("hashchange",function(e){t.handleUrl(e.newURL)}),t.handleUrl(window.location.href+"#dashboard")},e.prototype.handleUrl=function(e){var t;-1!==e.indexOf("#")&&(t=e.split("#").pop(),this.closePreviousPage(t),document.querySelectorAll("a."+s.router.NAVIGATION_ACTIVE_CSS).forEach(function(e){e.classList.remove(s.router.NAVIGATION_ACTIVE_CSS)}),document.querySelectorAll('a[href="#'+t+'"]').forEach(function(e){e.classList.add(s.router.NAVIGATION_ACTIVE_CSS)}),clearElementContent(s.router.CONTENT_CLASS),viewFactory.createView(n[t],null,s.router.CONTENT_CLASS).then(function(){a[t]()}))},e.prototype.closePreviousPage=function(t){Object.keys(r).map(function(e){return e!==t&&r[e](),!0})},new e}(mainConfig);mainController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwiQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTIiwiQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTIiwiQ1NTX0NPTlRST0xfU0VORF9DT01NQU5EX0JVVFRPTl9DTEFTUyIsIkNTU19DT05UUk9MX1BBUkFNRVRFUlNfQ0xBU1MiLCJsYXVuY2hlciIsInBhdHRlcm4iLCJhZnRlciIsInNyY1N0YXJ0Iiwic3JjRW5kIiwidXNlckxpc3QiLCJVU0VSX0VMRU1FTlRfQ1NTX0NMQVNTIiwiVVNFUl9JRF9FTEVNRU5UX0NTU19DTEFTUyIsIlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FIiwiVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09OTElORSIsImNoYXRTZXR0aW5ncyIsInR5cGVPZlJlcXVlc3QiLCJjdXJyZW50VXNlclNldHRpbmdzIiwidXNlcklkIiwidXNlck5hbWUiLCJjdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uIiwiZmlsdGVyQnkiLCJzb3J0QnkiLCJpbnRlcnZhbCIsIlVQREFURV9VU0VSU19USU1FIiwiT05MSU5FX0lOVEVSVkFMIiwicm91dGVyIiwiQUJPVVRfSFRNTF9QQVRIIiwiTEFVTkNIRVJfSFRNTF9QQVRIIiwiREFTSEJPQVJEX0hUTUxfUEFUSCIsIkNPTlRFTlRfQ0xBU1MiLCJOQVZJR0FUSU9OX0FDVElWRV9DU1MiLCJtZXNzYWdlcyIsIkNTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTIiwiQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSIiwiQ1NTX01FU1NBR0VfQ09OVEFJTkVSIiwiQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRSIsIkNTU19DSEFUX01FU1NBR0VfREFURSIsIkNTU19DSEFUX01FU1NBR0UiLCJJTlZJU0lCTEVfQ0xBU1MiLCJEQVRBX0JBU0VfVVJMIiwiQURNSU5fTkFNRSIsIkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTIiwiTE9DQUxfU1RPUkFHRV9OQU1FIiwiQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEUiLCJDT01NQU5EX1BBVEhfUFJFRklYIiwiZGF0YUJhc2VVcmwiLCJnZXRFbGVtZW50Iiwic2VsZWN0b3IiLCJpc0FsbCIsIml0SXNJZCIsInNlbGVjdG9yU3RhcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YUNvbm5lY3RvckNvbmZpZyIsInNvcnRlciIsIlNvcnRlciIsInByb3RvdHlwZSIsInF1aWNrU29ydCIsIml0ZW1zIiwibGVmdCIsInJpZ2h0Iiwic29ydEZpZWxkIiwiaW5kZXgiLCJsZW5ndGgiLCJmaXJzdEluZGV4Iiwic2Vjb25kSW5kZXgiLCJ0ZW1wIiwicGl2b3QiLCJNYXRoIiwiZmxvb3IiLCJpIiwiaiIsInBhcnRpdGlvbiIsInRoaXMiLCJjbGVhckVsZW1lbnRDb250ZW50IiwiZWxlbWVudFNlbGVjdG9yIiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImRhdGFDb25uZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnT2JqIiwiZGF0YUJhc2VDb25uZWN0b3IiLCJEYXRhQmFzZUNvbm5lY3RvciIsInNldHVwRGF0YUJhc2VBUEkiLCJyZXF1ZXN0IiwicmVxdWVzdEZldGNoIiwiZ2V0TmV3Q29ubmVjdG9yQVBJIiwicmVxdWVzdFhNUiIsImNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbiIsImxvbmdQb2xsIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3RUeXBlIiwiY29udGVudFR5cGUiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInRleHQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJKU09OIiwicGFyc2UiLCJvbmVycm9yIiwic3RhdHVzVGV4dCIsInNlbmQiLCJ0YXJnZXRVcmwiLCJ4aHR0cCIsImRhdGFTb3VyY2UiLCJjb25maWciLCJkYXRhU291cmNlSW5zdGFuY2UiLCJVU0VSX0xJU1QiLCJVU0VSX01FU1NBR0VTIiwiVVNFUlNfU0VUVElOR1MiLCJuZXdVc2VyRGF0YSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJEYXRhU291cmNlIiwibG9uZ1BvbGxDb25uZWN0IiwiZGF0YVR5cGUiLCJjcmVhdGVSZXF1ZXN0UGF0aCIsImJhc2ljQ29ubmVjdCIsImJpbmQiLCJkYXRhQmFzZVVSTCIsInJlcXVlc3RQb3N0Zml4IiwicmVxdWVzdFByZWZpeCIsInBhdGgiLCJnZXRIVE1MIiwic2V0RGF0YSIsImZpZWxkTmFtZSIsInZhbHVlIiwic3RyaW5naWZ5IiwiYWRkTmV3VXNlclRvRGF0YVNvdXJjZSIsImRhdGUiLCJEYXRlIiwidGhhdCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJzZXR0aW5nTmFtZSIsImxhc3RPbmxpbmUiLCJnZXRUaW1lIiwic2VuZE5ld01lc3NhZ2UiLCJnZXREYXRhU291cmNlQVBJIiwiZ2V0RGF0YSIsInVzZXJzQVBJIiwiZ2V0VXNlckxpc3QiLCJnZXRVc2VyU2V0dGluZ3MiLCJnZXRVc2VyTWVzc2FnZXMiLCJnZXRTZXR0aW5nRmllbGQiLCJzZW5kTWVzc2FnZSIsInNldFNldHRpbmdGaWVsZCIsInVwZGF0ZUxhc3RPbmxpbmUiLCJ1cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWciLCJ1cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQiLCJjb21tb25BUEkiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJldmVudHMiLCJhZGRTdWJzY3JpYmUiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInB1c2giLCJmaWx0ZXIiLCJlbGVtZW50Q2FsbGJhY2siLCJlbWl0IiwiZGF0YSIsImV2ZW50IiwiZm9yRWFjaCIsImNhbGwiLCJsb25nUG9sbFJlc3BvbnNlUGFyc2VyIiwidHlwZXNPZkNoYW5nZSIsIm1lc3NhZ2UiLCJzZXR0aW5nIiwicmVhZCIsImdldElwIiwiYXNrUXVlc3Rpb24iLCJldmVudFJlZ3VsYXIiLCJoYXNOdWxsRGF0YSIsImdldERhdGFSZWd1bGFyIiwiaXRJc05ld01lc3NhZ2VSZWd1bGFyIiwiaXRJc05ld1VzZXJMaXN0UmVndWxhciIsIml0SXNGaXJzdElwRGF0YVJlZ3VsYXIiLCJpdElzRmlyc3RRdWVzdGlvbnNEYXRhIiwiaXRJc05ld1F1ZXN0aW9uc0NvbW1hbmQiLCJpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24iLCJMb25nUG9sbFJlc3BvbnNlUGFyc2VyIiwiZ2V0VHlwZU9mQ2hhbmdlcyIsImFuc3dlckRhdGEiLCJ0eXBlTmFtZSIsInRlc3QiLCJwcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZSIsInNwbGl0IiwidHJpbSIsInNsaWNlIiwicGFyc2VVc2Vyc01lc3NhZ2VzIiwiY2hhbmdlVHlwZSIsIm1lc3NhZ2VJZCIsInJlc3VsdE9iamVjdCIsImlkIiwicG9wIiwic2hpZnQiLCJnZXRGaXJzdERhdGEiLCJoYXNOZXdEYXRhIiwicGFyc2VVc2VyTGlzdCIsImdldFVzZXJJZCIsImV4Y2VwdGlvbiIsInBhcnNlQ29tbWFuZEFuc3dlciIsIml0SXNJUEluZm9ybWF0aW9uIiwiaXRJc1F1ZXN0aW9uc0luZm9ybWF0aW9uIiwicGFyc2VVc2VySXBEYXRhIiwicGFyc2VRdWVzdGlvbnNEYXRhIiwicmVwbGFjZSIsInJlc3VsdCIsInJlc3VsdE9mUGFyc2UiLCJ0eXBlIiwib2JqZWN0Iiwidmlld0ZhY3RvcnkiLCJWaWV3RmFjdG9yeSIsImNyZWF0ZVZpZXciLCJodG1sUGF0aCIsImNzc1BhdGgiLCJjb250YWluZXJDbGFzcyIsImluY2x1ZGVWaWV3Q3NzVG9QYWdlIiwiY3JlYXRlQ1NTTGluayIsImluY2x1ZGVWaWV3SFRNTFRvUGFnZSIsIkVycm9yIiwiY29udGFpbmVyRGl2IiwiaHRtbCIsImlubmVySFRNTCIsImxpbmsiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJmaWxlUGF0aCIsInJlbCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJtZXNzYWdlTGlzdE1hbmFnZXIiLCJNZXNzYWdlTGlzdE1hbmFnZXIiLCJzZXR1cCIsIm1lc3NhZ2VMaXN0IiwiY0RPTSIsIm1lc3NhZ2VzQmxvY2siLCJjcmVhdGVNZXNzYWdlRWxlbWVudCIsIm1lc3NhZ2VEYXRlIiwic2VuZGVyIiwiaXNSZWFkIiwibWVzc2FnZUNvbnRhaW5lckRpdiIsImNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYiLCJtZXNzYWdlRGF0ZURpdiIsImNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayIsIkRJU1BMQVlfTUVTU0FHRV9EQVRFIiwibWVzc2FnZVNlbmRlckRpdiIsIkRJU1BMQVlfU0VOREVSX05BTUUiLCJtZXNzYWdlRGl2IiwiRElTUExBWV9NRVNTQUdFIiwiZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkIiwibWVzc2FnZXNJc1JlYWQiLCJmaWVsZFZhbHVlIiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNEaXNwbGF5Iiwic3R5bGVDbGFzc2VzIiwiZGl2Iiwic3R5bGUiLCJjcmVhdGVNZXNzYWdlTGlzdCIsIm1lc3NhZ2VPYmplY3RzIiwibmV3TWVzc2FnZUxpc3QiLCJ1cGRhdGVNZXNzYWdlTGlzdCIsImRpc3BsYXlNZXNzYWdlcyIsImFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IiwibWVzc2FnZU9iaiIsImNsZWFyQ2hhdCIsIm1lc3NhZ2VPYmplY3QiLCJ1c2VyRGF0YU1hbmFnZXIiLCJVc2VyRGF0YU1hbmFnZXIiLCJnZXRVc2VyRGF0YSIsImdldFVzZXJDb3JyZXNwb25kZW5jZSIsImN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiIsImFib3J0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsImtleSIsIm1lc3NhZ2VzT2JqZWN0IiwiY2xlYXJNZXNzYWdlTGlzdCIsImNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSIsInNhdmVTZXR0aW5nRmllbGQiLCJ1cGRhdGVVc2VyT25saW5lIiwibWludXRlcyIsImdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50IiwiZ2V0TWludXRlcyIsInRvU3RyaW5nIiwiZ2V0SG91cnMiLCJjb25jYXQiLCJzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSIsInNldE1lc3NhZ2VBc1JlYWQiLCJzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIiwic2V0dGluZ3MiLCJuZXdGaWVsZFNldHRpbmciLCJsb2ciLCJ3cml0ZSIsInRlbXBsYXRlTmFtZSIsInZhbGlkTWVzc2FnZSIsImNvbnNvbGUiLCJ1c2VyTGlzdE1hbmFnZXIiLCJVc2VyTGlzdE1hbmFnZXIiLCJ1TGlzdCIsImNyZWF0ZVVzZXJFbGVtZW50IiwiaXNPbmxpbmUiLCJ1c2VyRGl2IiwidXNlcklkRGl2IiwidXNlckluZGljYXRvciIsInNldFVzZXJMaXN0IiwidXNlckx1c3RPYmplY3QiLCJhZGRVc2VyVG9Vc2Vyc0FycmF5IiwidXNlciIsInVzZXJzTGlzdCIsInVzZXJJc09ubGluZSIsInVzZXJFbGVtZW50Iiwib25saW5lIiwidmlzaWJsZSIsInVwZGF0ZVVzZXJPbmxpbmVTdGF0dXMiLCJ1c2VySW5kZXgiLCJnZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCIsInVzZXJNYW5hZ2VyIiwibGFzdFVzZXJPbmxpbmVUaW1lIiwiZmlsdGVyQnlOYW1lIiwiaW5kZXhPZiIsInNvcnRVc2Vyc0J5RmllbGQiLCJjbGVhclVzZXJMaXN0IiwiZGlzcGxheVVzZXJzIiwiZWxlbSIsImNvbnRyb2xQYW5lbCIsInBhcnNlciIsImxvZ0VsZW1lbnQiLCJzZWxlY3RDb21tYW5kIiwic2VuZEJ1dHRvbiIsInBhcmFtZXRlckVsZW1lbnRzIiwiY29ubmVjdGlvbiIsIm1vZHVsZUluaXQiLCJjdXJyZW50Q29tbWFuZCIsInBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3QiLCJjb21tYW5kcyIsInBhcmFtZXRlcnNOdW1iZXIiLCJtb2R1bGVDb250cm9sbGVyIiwiYWN0aW9uIiwiY29udHJvbEZ1bmN0aW9uIiwic2VuZEJ1dHRvbkxpc3RlbmVyIiwiY29tbWFuZE5hbWUiLCJjb21tYW5kT2JqZWN0IiwianNvbkRhdGEiLCJpc0V4ZWN1dGUiLCJ0eXBlT2ZDb21tYW5kIiwiQ29udHJvbFBhbmVsIiwiZmlyc3RJbml0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwiZGFzaGJvYXJkIiwidURhdGFNYW5hZ2VyIiwidUxpc3RNYW5hZ2VyIiwiY1BhbmVsIiwiaW50ZXJ2YWxJZCIsIkRhc2hib2FyZENvbnRyb2xsZXIiLCJzZXR1cEV2ZW50RW1pdHRlciIsInN0YXJ0QXBwIiwic2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucyIsInNldHVwSW50ZXJ2YWxGdW5jdGlvbnMiLCJjb25kaXRpb24iLCJuZXdEYXRhIiwiQXJyYXkiLCJnZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSIsImxvY2FsU2V0dGluZ3NTZXR1cCIsInNldHVwVXNlckxpc3RET00iLCJ0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyIiwic2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSIsInNlcmlhbENvbmRpdGlvbiIsInNvcnQiLCJjdXJyZW50VXNlcklkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJzdGFydENvbnZlcnNhdGlvbldpdGhVc2VyIiwic2V0dXBVc2Vyc0xpc3RlbmVycyIsImZyb20iLCJ1c2VycyIsInVzZXJMaXN0ZW5lciIsImlubmVyVGV4dCIsImdldEFjZXNzVG9Vc2Vyc0xpc3QiLCJsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yIiwiY3VycmVudFVzZXJMaXN0Q29ubmVjdGlvbiIsIm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQiLCJyZW1vdmUiLCJ1cGRhdGVVc2VyTWVzc2FnZXNBbmREaXNwbGF5SXQiLCJjbG9zZUNvbnZlcnNhdGlvbiIsIm5ld01lc3NhZ2VEaXYiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic2V0SW50ZXJ2YWwiLCJ2aWV3SWQiLCJjbG9zZUFwcCIsImNsZWFySW50ZXJ2YWwiLCJET01WYXJpYWJsZXMiLCJrZXlPZlZhbHVlIiwiY2hhdFRpdGxlIiwidHlwZU9mVmFsdWUiLCJjaGF0VXJsIiwiY2hhdENsYXNzIiwiY2hhdFBvc2l0aW9uU2VsZWN0IiwiYWxsb3dNaW5pbWl6ZSIsImFsbG93RHJhZyIsInNob3dUaW1lIiwicmVxdWlyZU5hbWUiLCJuZXR3b3JrUmFkaW9YTVIiLCJ0cnVlIiwibmV0d29ya1JhZGlvTG9uZ1BvbGwiLCJuZXR3b3JrUmFkaW9GZXRjaCIsIkxhdW5jaGVyIiwiZ2V0RGF0YUZyb21FbGVtZW50Iiwic3JjIiwiZWxlbWVudE5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJjaGVja2VkIiwiZ2V0RWxlbWVudFZhbHVlIiwibmFtZSIsInNjcmlwdENvZGUiLCJhYm91dCIsIkFib3V0IiwibWFpbkNvbnRyb2xsZXIiLCJtYXRjaGVzSHRtbFBhdGgiLCJjb25maWd1cmF0aW9uIiwiY2xvc2VGdW5jdGlvbnMiLCJzdGFydEZ1bmN0aW9ucyIsIk1haW5Db250cm9sbGVyIiwid2luZG93IiwiaGFuZGxlVXJsIiwibmV3VVJMIiwibG9jYXRpb24iLCJocmVmIiwidXJsIiwiaGFzaCIsImNsb3NlUHJldmlvdXNQYWdlIl0sIm1hcHBpbmdzIjoiQUFHQSxJQUFJQSxXQUFhLENBQ2JDLElBQUssQ0FFREMsb0JBQXFCLHNDQUVyQkMsOEJBQStCLGdDQUUvQkMsOEJBQStCLHVDQUUvQkMsNEJBQTZCLHNDQUU3QkMsb0JBQXFCLHdDQUVyQkMsbUJBQW9CLGdDQUlw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U08sS0ErQ1QsT0EzQ0FBLEVBQWVwWSxVQUFVaVUsU0FBVyxXQUNoQyxJQUFJdk8sRUFBT3pFLEtBQ1hvWCxPQUFPN0UsaUJBQWlCLGFBQWMsU0FBNEJwUyxHQUM5RHNFLEVBQUs0UyxVQUFVbFgsRUFBUW1YLFVBSTNCN1MsRUFBSzRTLFVBQVVELE9BQU9HLFNBQVNDLEtBQU8sZUFJMUNMLEVBQWVwWSxVQUFVc1ksVUFBWSxTQUFtQkksR0FDcEQsSUFBSUMsR0FDcUIsSUFBdEJELEVBQUk5RyxRQUFRLE9BR2YrRyxFQUFPRCxFQUFJdlAsTUFBTSxLQUFLUSxNQUN0QjFJLEtBQUsyWCxrQkFBa0JELEdBR3ZCalosU0FBU0MsaUJBQWlCLEtBQU9xRSxFQUFPaEcsT0FBT0ssdUJBQXVCc0osUUFBUSxTQUE0QnZHLEdBQ3RHQSxFQUFRa00sVUFBVXNJLE9BQU81UixFQUFPaEcsT0FBT0sseUJBRTNDcUIsU0FBU0MsaUJBQWlCLFlBQWNnWixFQUFPLE1BQU1oUixRQUFRLFNBQXlCdkcsR0FDbEZBLEVBQVFrTSxVQUFVQyxJQUFJdkosRUFBT2hHLE9BQU9LLHlCQUd4QzZDLG9CQUFvQjhDLEVBQU9oRyxPQUFPSSxlQUNsQ3dNLFlBQVlFLFdBQVdrTixFQUFnQlcsR0FBTyxLQUFNM1UsRUFBT2hHLE9BQU9JLGVBQWV3RSxLQUFLLFdBQ2xGdVYsRUFBZVEsU0FLdkJQLEVBQWVwWSxVQUFVNFksa0JBQW9CLFNBQTJCRCxHQUNwRWhULE9BQU9DLEtBQUtzUyxHQUFnQnJTLElBQUksU0FBOEJrSixHQUkxRCxPQUhHQSxJQUFRNEosR0FDUFQsRUFBZW5KLE1BRVosS0FJUixJQUFJcUosRUFwRU0sQ0FzRWxCcmMsWUFFSGdjLGVBQWU5RCIsImZpbGUiOiJkYXNoYm9hcmRBcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb25maWdcclxuXHJcbi8qIGV4cG9ydGVkIG1haW5Db25maWcgKi9cclxudmFyIG1haW5Db25maWcgPSB7XHJcbiAgICBET006IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQvdC10L7QsdGF0L7QtNC40LzQviDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgVVNFUl9MSVNUX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlcnMtbGlzdFwiLFxyXG4gICAgICAgIC8vINCR0LvQvtC6INCyINC60L7RgtC+0YDRi9C5INC30LDQs9GA0YPQttCw0LXRgtGB0Y8g0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NIQVRfQ09OVEFJTlNfQkxPQ0tfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXRcIixcclxuICAgICAgICAvLyDQmtC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y4g0L/QviDQvdCw0LbQsNGC0LjRjlxyXG4gICAgICAgIENTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zZW5kLWJ1dHRvblwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEg0LrQvdC+0L/QutC4INC30LDQutGA0YvQstCw0Y7RidC10Lkg0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jbG9zZS1jaGF0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGE0LjQu9GM0YLRgNCw0YbQuNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX0ZJTFRFUl9JTlBVVF9JRDogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfZmlsdGVyLWlucHV0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGB0L7RgNGC0LjRgNC+0LLQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX1NPUlRfU0VMRUNUX0lEOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zb3J0XCIsXHJcblxyXG4gICAgICAgIC8vIENPTlRST0wgUEFORUxcclxuICAgICAgICAvLyDQmtC70LDRgdGBIGNvbnRyb2wgcGFuZWwg0LXQu9C10LzQtdC90YJcclxuICAgICAgICBDU1NfQ09OVFJPTF9QQU5FTF9MT0dfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NvbnRyb2wtbG9nXCIsXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jb250cm9sX3NlbGVjdF9jb21tYW5kXCIsXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfU0VORF9DT01NQU5EX0JVVFRPTl9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY29udHJvbF9zZW5kLWNvbW1hbmQtYnV0dG9uXCIsXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfUEFSQU1FVEVSU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY29udHJvbF9wYXJhbWV0ZXItaW5wdXRcIlxyXG5cclxuICAgIH0sXHJcbiAgICBsYXVuY2hlcjoge1xyXG4gICAgICAgIHBhdHRlcm46IFwidG91Y2hzb2Z0X2NoYXQtbGF1bmNoZXJfXCIsXHJcbiAgICAgICAgYWZ0ZXIgOiBbXHJcbiAgICAgICAgICAgIFwiY2hhdFRpdGxlXCIsIFwiY2hhdFVybFwiLCBcImNoYXRDbGFzc1wiLCBcImNoYXRQb3NpdGlvblNlbGVjdFwiLFxyXG4gICAgICAgICAgICBcImFsbG93TWluaW1pemVcIiwgXCJhbGxvd0RyYWdcIiwgXCJyZXF1aXJlTmFtZVwiLCBcInNob3dUaW1lXCIsIFwibmV0d29ya1JhZGlvWE1SXCIsXHJcbiAgICAgICAgICAgIFwibmV0d29ya1JhZGlvRmV0Y2hcIixcIm5ldHdvcmtSYWRpb0xvbmdQb2xsXCIsIFwic2NyaXB0Q29kZVwiXHJcbiAgICAgICAgXSxcclxuICAgICAgICBzcmNTdGFydDogXCImbHRzY3JpcHQgc3JjPSdodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL0hvbWV3b3JrXzIvbWFzdGVyL2pzL2NoYXQuanM/XCIsXHJcbiAgICAgICAgc3JjRW5kOiAgXCInJmd0Jmx0L3NjcmlwdCZndFwiXHJcbiAgICB9LFxyXG4gICAgdXNlckxpc3Q6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgdGLINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L7QsdGK0LXQutGC0L7QvCDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgVVNFUl9FTEVNRU5UX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlclwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPIGlkINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaWRcIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgtGLINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGB0YLQsNGC0YPRgdCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9mZmxpbmVcIixcclxuICAgICAgICBVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9ubGluZVwiXHJcbiAgICB9LFxyXG4gICAgY2hhdFNldHRpbmdzOiB7XHJcbiAgICAgICAgdHlwZU9mUmVxdWVzdDogXCJsb25nUG9sbFwiXHJcbiAgICB9LFxyXG4gICAgY3VycmVudFVzZXJTZXR0aW5nczoge1xyXG4gICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICB1c2VyTmFtZTogbnVsbFxyXG4gICAgfSxcclxuXHJcbiAgICBjdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uOiB7XHJcbiAgICAgICAgZmlsdGVyQnk6IG51bGwsXHJcbiAgICAgICAgc29ydEJ5OiBudWxsXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBpbnRlcnZhbDoge1xyXG4gICAgICAgIFVQREFURV9VU0VSU19USU1FOiA1MDAwLFxyXG4gICAgICAgIE9OTElORV9JTlRFUlZBTDogMTIwMDBcclxuICAgIH0sXHJcbiAgICByb3V0ZXI6IHtcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGFib3V0XHJcbiAgICAgICAgQUJPVVRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2Fib3V0Lmh0bWxcIixcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICBMQVVOQ0hFUl9IVE1MX1BBVEg6IFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9kYXNoYm9hcmQvY2hhdExhdW5jaGVyLmh0bWxcIixcclxuICAgICAgICAvLyBVUkwg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLIGRhc2hib2FyZFxyXG4gICAgICAgIERBU0hCT0FSRF9IVE1MX1BBVEg6IFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWxcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwLCDQsiDQutC+0YLQvtGA0YvQuSDQt9Cw0LPRgNGD0LbQsNC10YLRgdGPINC90LXQvtCx0YXQvtC00LjQvNCw0Y8g0YfQsNGB0YLRjCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgICAgQ09OVEVOVF9DTEFTUzogXCJjb250ZW50XCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEsINC+0YLQvNC10YfQsNGO0YnQuNC5INCw0LrRgtC40LLQvdGD0Y4g0YHRgtGA0LDQvdC40YbRgyDQsiDQv9Cw0L3QtdC70Lgg0L3QsNCy0LjQs9Cw0YbQuNC4XHJcbiAgICAgICAgTkFWSUdBVElPTl9BQ1RJVkVfQ1NTOiBcIm5hdmlnYXRpb24tYWN0aXZlXCJcclxuICAgIH0sXHJcbiAgICBtZXNzYWdlczoge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINC00LvRjyDRjdC70LXQvNC10L3QsNGCINGBINGB0L7QvtCx0YnQtdC90LjQtSwg0LXRgdC70Lgg0Y7Qt9C10YAg0L3QtSDQv9GA0L7Rh9C40YLQsNC7INGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9tZXNzYWdlLW5vdC1yZWFkXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZXNcIixcclxuXHJcbiAgICAgICAgLy8gbWVzc2FnZVxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0L3QsNGF0L7QtNC40YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyzQtNCw0YLQsCDQuCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19NRVNTQUdFX0NPTlRBSU5FUjogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWVsZW1lbnRzXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQuNC80Y8g0L7RgtC/0YDQsNCy0LjRgtC10LvRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1zZW5kZXJcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINC00LDRgtGDINGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0VfREFURTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLWRhdGVcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgICAgIENTU19DSEFUX01FU1NBR0U6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZVwiXHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy8g0LrQu9Cw0YHRgSDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0LBcclxuICAgIElOVklTSUJMRV9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfaW52aXNpYmxlLWVsZW1lbnRcIixcclxuXHJcbiAgICBEQVRBX0JBU0VfVVJMOiBcImh0dHBzOi8vb25saW5lY29uc3VsdGFudHdlYmFwcC5maXJlYmFzZWlvLmNvbVwiLFxyXG5cclxuXHJcbiAgICBBRE1JTl9OQU1FOiBcIkFkbWluXCIsXHJcblxyXG4gICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINC/0LXRgNC10LQg0L7RgtC/0YDQsNCy0LrQvtC5INGO0LfQtdGA0YNcclxuICAgIENTU19DVVJSRU5UX0lOUFVUX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF90ZXh0YXJlYS1mb3ItbWVzc2FnZVwiLFxyXG5cclxuICAgIExPQ0FMX1NUT1JBR0VfTkFNRTogXCJjdXJyZW50Q29uZGl0aW9uXCIsXHJcblxyXG4gICAgLy8g0LTQu9GPINC90L7QstGL0YUg0YHQvtC+0LHRidC10L3QuNC5INC+0YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgIC8vINCV0YHQu9C4INGO0LfQtdGAINC/0YDQuNGB0LvQsNC7INGB0L7QvtC+0LHRidC10L3QuNC1LCDQvdCwINGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INCy0LXRiNCw0LXRgtGB0Y8g0Y3RgtC+0YIg0YHRgtC40LvRjFxyXG4gICAgQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaGF2ZS1uZXctbWVzc2FnZVwiLFxyXG5cclxuICAgIENPTU1BTkRfUEFUSF9QUkVGSVg6IFwiaHR0cHM6Ly9vbmxpbmVjb25zdWx0YW50d2ViYXBwLmZpcmViYXNlaW8uY29tL3VzZXJzU2V0dGluZ3MvXCJcclxuXHJcblxyXG5cclxuXHJcbn07XHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLyogZXhwb3J0ZWQgZGF0YUJhc2VVcmwgKi9cclxuLyogZXhwb3J0ZWQgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgZGF0YUJhc2VVcmwgPSBtYWluQ29uZmlnLkRBVEFfQkFTRV9VUkw7XHJcblxyXG52YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tRE9NIChzZWxlY3RvciwgaXNBbGwsIGl0SXNJZCkge1xyXG4gICAgdmFyIHNlbGVjdG9yU3RhcnQgPSAoaXRJc0lkKSA/IFwiI1wiIDogXCIuXCI7XHJcbiAgICBpZihpc0FsbCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG59O1xyXG5cclxuXHJcbnZhciBkYXRhQ29ubmVjdG9yQ29uZmlnID0ge1xyXG4gICAgdHlwZU9mUmVxdWVzdDogbWFpbkNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdFxyXG59O1xyXG5cclxuLy8gc2VydmljZVxyXG5cclxuLyogZXhwb3J0ZWQgc29ydGVyICovXHJcbnZhciBzb3J0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlTmV3U29ydGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlcigpIHt9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU29ydGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3dhcChpdGVtcywgZmlyc3RJbmRleCwgc2Vjb25kSW5kZXgpIHtcclxuICAgICAgICB2YXIgdGVtcCA9IGl0ZW1zW2ZpcnN0SW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW2ZpcnN0SW5kZXhdID0gaXRlbXNbc2Vjb25kSW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW3NlY29uZEluZGV4XSA9IHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcGFydGl0aW9uKGl0ZW1zLCBsZWZ0LCByaWdodCwgc29ydEZpZWxkKSB7XHJcbiAgICAgICAgdmFyIHBpdm90ID0gaXRlbXNbTWF0aC5mbG9vcigocmlnaHQgKyBsZWZ0KSAvIDIpXVtzb3J0RmllbGRdO1xyXG4gICAgICAgIHZhciBpID0gbGVmdDtcclxuICAgICAgICB2YXIgaiA9IHJpZ2h0O1xyXG5cclxuICAgICAgICB3aGlsZSAoaSA8PSBqKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVtc1tpXVtzb3J0RmllbGRdID4gcGl2b3QpIHtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoaXRlbXNbal1bc29ydEZpZWxkXSA8IHBpdm90KSB7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPD0gaikge1xyXG4gICAgICAgICAgICAgICAgc3dhcChpdGVtcywgaSwgaik7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ydGVyLnByb3RvdHlwZS5xdWlja1NvcnQgPSBmdW5jdGlvbiBxdWlja1NvcnQoXHJcbiAgICAgICAgaXRlbXMsXHJcbiAgICAgICAgbGVmdCxcclxuICAgICAgICByaWdodCxcclxuICAgICAgICBzb3J0RmllbGRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBpbmRleDtcclxuICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHBhcnRpdGlvbihpdGVtcywgbGVmdCwgcmlnaHQsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgaW5kZXggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgbGVmdCwgaW5kZXggLSAxLCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgaW5kZXgsIHJpZ2h0LCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZVNvcnRlcigpO1xyXG59KSgpO1xyXG4vKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8vINCe0YfQuNGJ0LDQtdGCIERPTSDRgdC+0LTQtdGA0LbQsNGJ0LjQuSDRjdC70LXQvNC10L3RgtGLINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChlbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZGF0YWJhc2VcclxuXHJcbi8qIGV4cG9ydGVkIGRhdGFDb25uZWN0b3IgKi9cclxuLyogZ2xvYmFsIGRhdGFDb25uZWN0b3JDb25maWcgKi9cclxuLy8g0JzQvtC00YPQu9GMINC/0YDQtdC00L7RgdGC0LDQstC70Y/QtdGCINGB0L/QvtGB0L7QsSDQvtGC0L/RgNCw0LLQutC4INC30LDQv9GA0L7RgdCwINC6INC40YHRgtC+0YfQvdC40LrRgyDQtNCw0L3QvdGL0YVcclxuLy8g0JTQu9GPINGA0LXQutCy0LXRgdGC0LAg0L3QtdC+0LHRhdC+0LTQuNC8INC/0YPRgtGMLCDRgtC10LvQviDQt9Cw0L/RgNC+0YHQsCwg0YLQuNC/INC30LDQv9GA0L7RgdCwXHJcbi8vIHJlcXVlc3Qg0LLQvtC30LLRgNCw0YnQsNC10YIgUHJvbWlzZVxyXG52YXIgZGF0YUNvbm5lY3RvciA9IChmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJKGRhdGFDb25uZWN0b3JDb25maWdPYmopIHtcclxuICAgIHZhciBkYXRhQmFzZUNvbm5lY3RvcjtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhQmFzZUNvbm5lY3RvcigpIHt9XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnNldHVwRGF0YUJhc2VBUEkgPSBmdW5jdGlvbiBzZXR1cERhdGFCYXNlQVBJICh0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIGRhdGFCYXNlQVBJO1xyXG4gICAgICAgIGlmICh0eXBlT2ZSZXF1ZXN0ID09PSBcImZldGNoXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0RmV0Y2gsXHJcbiAgICAgICAgICAgICAgICBnZXROZXdDb25uZWN0b3JBUEk6IGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUElcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVPZlJlcXVlc3QgPT09IFwiWEhSXCIpIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgZ2V0TmV3Q29ubmVjdG9yQVBJOiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uOiBkYXRhQmFzZUNvbm5lY3Rvci5sb25nUG9sbCxcclxuICAgICAgICAgICAgICAgIGdldE5ld0Nvbm5lY3RvckFQSTogZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YUJhc2VBUEk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbiByZXF1ZXN0RmV0Y2goXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0UGF0aCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IGNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHlcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlSlNPTihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RYTVIgPSBmdW5jdGlvbiByZXF1ZXN0WE1SKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0VHlwZSwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBsb2FkQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIGVycm9yQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdEJvZHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUubG9uZ1BvbGwgPSBmdW5jdGlvbiBsb25nUG9sbCAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGh0dHAub3BlbignR0VUJywgdGFyZ2V0VXJsLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAndGV4dC9ldmVudC1zdHJlYW0nKTtcclxuICAgICAgICByZXR1cm4geGh0dHA7XHJcbiAgICB9O1xyXG5cclxuICAgIGRhdGFCYXNlQ29ubmVjdG9yID0gbmV3IERhdGFCYXNlQ29ubmVjdG9yKCk7XHJcbiAgICByZXR1cm4gZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqLnR5cGVPZlJlcXVlc3QpO1xyXG5cclxufSkoZGF0YUNvbm5lY3RvckNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIGRhdGFCYXNlVXJsICovXHJcbi8qIGdsb2JhbCBkYXRhQ29ubmVjdG9yICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhVxyXG4vLyDQktGB0LUgQVBJINGE0YPQvdC60YbQuNC4INCy0L7Qt9Cy0YDQsNGJ0LDRjtGCINC/0YDQvtC80LjRgdGLXHJcbnZhciBkYXRhU291cmNlID0gKGZ1bmN0aW9uIGNyZWF0ZURhdGFTb3VyY2UgKGRhdGFDb25uZWN0b3IsIGNvbmZpZykge1xyXG4gICAgdmFyIGRhdGFTb3VyY2VJbnN0YW5jZTtcclxuICAgIHZhciBVU0VSX0xJU1QgPSBcInVzZXJMaXN0XCI7XHJcbiAgICB2YXIgVVNFUl9NRVNTQUdFUyA9IFwidXNlcnNNZXNzYWdlc1wiO1xyXG4gICAgdmFyIFVTRVJTX1NFVFRJTkdTID0gXCJ1c2Vyc1NldHRpbmdzXCI7XHJcbiAgICB2YXIgbmV3VXNlckRhdGEgPSB7XHJcbiAgICAgICAgaXNNaW5pbWl6ZTogZmFsc2UsXHJcbiAgICAgICAgcmVhZExhc3RNZXNzYWdlOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2UoKSB7fVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvbmdQb2xsQ29ubmVjdCAoZGF0YVR5cGUsIHVzZXJJZCkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCwgZGF0YVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLmNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbihyZXF1ZXN0UGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYmFzaWNDb25uZWN0IChkYXRhVHlwZSwgdXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdC5iaW5kKG51bGwsIHJlcXVlc3RQYXRoLCBudWxsLCBcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgIH1cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5jcmVhdGVSZXF1ZXN0UGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RQYXRoKFxyXG4gICAgICAgIGRhdGFCYXNlVVJMLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICByZXF1ZXN0UG9zdGZpeCxcclxuICAgICAgICByZXF1ZXN0UHJlZml4XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcGF0aCA9IGRhdGFCYXNlVVJMO1xyXG4gICAgICAgIGlmKHJlcXVlc3RQcmVmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQcmVmaXhcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYXRoICs9IFwiL1wiICsgdXNlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBvc3RmaXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHJlcXVlc3RQb3N0Zml4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXRoICs9IFwiLmpzb25cIjtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0SFRNTCA9IGZ1bmN0aW9uIGdldEhUTUwgKHJlcXVlc3RQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIFwiR0VUXCIsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLnNldERhdGEgPSBmdW5jdGlvbiBzZXREYXRhIChkYXRhVHlwZSwgcmVxdWVzdFR5cGUsIGZpZWxkTmFtZSwgdXNlcklkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aDtcclxuICAgICAgICBpZihyZXF1ZXN0VHlwZSA9PT0gXCJQVVRcIikge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgZmllbGROYW1lLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuYWRkTmV3VXNlclRvRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFTb3VyY2UgKHVzZXJJZCwgdXNlck5hbWUpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBuZXdVc2VyRGF0YS51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1VzZXJEYXRhKS5tYXAoZnVuY3Rpb24gYWRkTmV3U2V0dGluZ3MgKHNldHRpbmdOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YShVU0VSU19TRVRUSU5HUywgXCJQVVRcIiwgc2V0dGluZ05hbWUsIHVzZXJJZCwgbmV3VXNlckRhdGFbc2V0dGluZ05hbWVdKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKFVTRVJfTElTVCwgXCJQVVRcIiwgbnVsbCwgdXNlcklkLCB7XCJsYXN0T25saW5lXCI6IGRhdGUuZ2V0VGltZSgpLCBcInNlbmROZXdNZXNzYWdlXCI6IGZhbHNlfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGFTb3VyY2VBUEkgPSBmdW5jdGlvbiBnZXREYXRhU291cmNlQVBJICh0eXBlT2ZSZXF1ZXN0KSB7XHJcbiAgICAgICAgaWYodHlwZU9mUmVxdWVzdCkge1xyXG4gICAgICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPSB0eXBlT2ZSZXF1ZXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPT09IFwibG9uZ1BvbGxcIikge1xyXG4gICAgICAgICAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXREYXRhID0gbG9uZ1BvbGxDb25uZWN0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YSA9IGJhc2ljQ29ubmVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1c2Vyc0FQSToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VXNlckxpc3Q6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTElTVFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdldFVzZXJTZXR0aW5nczogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUlNfU0VUVElOR1NcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBnZXRVc2VyTWVzc2FnZXM6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVNcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBnZXRTZXR0aW5nRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2U6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTUVTU0FHRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQT1NUXCJcclxuXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2V0U2V0dGluZ0ZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HUyxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgYWRkTmV3VXNlclRvRGF0YVNvdXJjZTogZGF0YVNvdXJjZUluc3RhbmNlLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVMYXN0T25saW5lOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX0xJU1QsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgICAgICAgICBcImxhc3RPbmxpbmVcIlxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZzogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9MSVNULFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzZW5kTmV3TWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZUlzUmVhZEZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX01FU1NBR0VTLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tbW9uQVBJOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRIVE1MOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0SFRNTC5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSksXHJcbiAgICAgICAgICAgICAgICBnZXREYXRhU291cmNlQVBJOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YVNvdXJjZUFQSS5iaW5kKGRhdGFTb3VyY2VJbnN0YW5jZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdC8IGluc3RhbmNlINC+0LHRitC10LrRgtCwLCDQt9Cw0LTQsNC10LwgQVBJXHJcbiAgICBkYXRhU291cmNlSW5zdGFuY2UgPSBuZXcgRGF0YVNvdXJjZSgpO1xyXG5cclxuXHJcblxyXG4gICAgcmV0dXJuIGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhU291cmNlQVBJKCk7XHJcbn0pKGRhdGFDb25uZWN0b3IsIG1haW5Db25maWcpO1xyXG5cclxuLy8gZXZlbnRFbWl0dGVyXHJcblxyXG4vKiBleHBvcnRlZCBldmVudEVtaXR0ZXIgKi9cclxudmFyIGV2ZW50RW1pdHRlciA9IChmdW5jdGlvbiBjcmVhdGVFdmVudEVtaXR0ZXIgKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRTdWJzY3JpYmUgPSBmdW5jdGlvbiBhZGRTdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjayApIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaWYoICF0aGlzLmV2ZW50c1tldmVudE5hbWVdICkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVTdWJzY3JpYmUgKCkge1xyXG4gICAgICAgICAgICB0aGF0LmV2ZW50c1tldmVudE5hbWVdID0gdGhhdC5ldmVudHNbZXZlbnROYW1lXS5maWx0ZXIoZnVuY3Rpb24gcmVtb3ZlIChlbGVtZW50Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Q2FsbGJhY2sgIT09IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaWJlXHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQgKGV2ZW50TmFtZSwgZGF0YSkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYoIGV2ZW50ICkge1xyXG4gICAgICAgICAgICBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIGludm9rZSAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobnVsbCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBFdmVudEVtaXR0ZXIoKTtcclxufSkoKTtcclxuLyogZXhwb3J0ZWQgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciAqL1xyXG52YXIgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciA9IChmdW5jdGlvbiBjcmVhdGVMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCkge1xyXG4gICAgdmFyIHR5cGVzT2ZDaGFuZ2UgPSB7XHJcbiAgICAgICAgbWVzc2FnZTogL21lc3NhZ2UvLFxyXG4gICAgICAgIHVzZXJMaXN0OiAvbGFzdE9ubGluZS57MSx9c2VuZE5ld01lc3NhZ2UvLFxyXG4gICAgICAgIGxhc3RPbmxpbmU6IC9cInBhdGhcIjpcIlxcL1xcd3sxLH1cXC9sYXN0T25saW5lLyxcclxuICAgICAgICBzZW5kTmV3TWVzc2FnZTogL1wicGF0aFwiOlwiXFwvXFx3ezEsfVxcL3NlbmROZXdNZXNzYWdlLyxcclxuICAgICAgICBzZXR0aW5nOiAvcmVhZExhc3RNZXNzYWdlLyxcclxuICAgICAgICByZWFkOiAvcmVhZC8sXHJcbiAgICAgICAgZ2V0SXA6IC9nZXRJcC8sXHJcbiAgICAgICAgYXNrUXVlc3Rpb246IC9hc2tRdWVzdGlvbi9cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGV2ZW50UmVndWxhciA9IC9ldmVudDogcHV0LztcclxuICAgIHZhciBoYXNOdWxsRGF0YSA9IC9kYXRhOiBudWxsLztcclxuICAgIHZhciBnZXREYXRhUmVndWxhciA9IC9cIixcImRhdGFcIjovO1xyXG4gICAgdmFyIGl0SXNOZXdNZXNzYWdlUmVndWxhciA9IC9cInBhdGhcIjpcIlxcLy0vO1xyXG4gICAgdmFyIGl0SXNOZXdVc2VyTGlzdFJlZ3VsYXIgPSAvXCJkYXRhXCI6e1wibGFzdE9ubGluZVwiOlxcZCssXCJzZW5kTmV3TWVzc2FnZVwiOi87XHJcbiAgICB2YXIgaXRJc0ZpcnN0SXBEYXRhUmVndWxhciA9IC9kYXRhOiB7XCJwYXRoXCI6XCJcXC9cIixcImRhdGFcIjp7XCJnZXRJcFwiOi87XHJcbiAgICB2YXIgaXRJc0ZpcnN0UXVlc3Rpb25zRGF0YSA9IC9kYXRhOiB7XCJwYXRoXCI6XCJcXC9cIixcImRhdGFcIjp7XCJhc2tRdWVzdGlvblwiOi87XHJcbiAgICB2YXIgaXRJc05ld1F1ZXN0aW9uc0NvbW1hbmQgPSAvZGF0YToge1wicGF0aFwiOlwiXFwvYXNrUXVlc3Rpb25cIixcImRhdGFcIjovO1xyXG4gICAgdmFyIGl0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiA9IHRydWU7XHJcblxyXG4gICAgZnVuY3Rpb24gTG9uZ1BvbGxSZXNwb25zZVBhcnNlcigpIHt9XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0VHlwZU9mQ2hhbmdlcyA9IGZ1bmN0aW9uIGdldFR5cGVPZkNoYW5nZXMoXHJcbiAgICAgICAgYW5zd2VyRGF0YVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSBPYmplY3Qua2V5cyh0eXBlc09mQ2hhbmdlKS5maWx0ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRUeXBlT2ZDaGFuZ2UodHlwZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlc09mQ2hhbmdlW3R5cGVOYW1lXS50ZXN0KGFuc3dlckRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVbMF07XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlID0gZnVuY3Rpb24gcHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2Vyc01lc3NhZ2VzID0gZnVuY3Rpb24gcGFyc2VVc2Vyc01lc3NhZ2VzKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VJZDtcclxuICAgICAgICB2YXIgcmVzdWx0T2JqZWN0ID0ge307XHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwicmVhZFwiKSB7XHJcbiAgICAgICAgICAgIGRhdGEuaWQgPSByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcvcmVhZFwiLFwiJylcclxuICAgICAgICAgICAgICAgIC5zaGlmdCgpO1xyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnL3JlYWRcIixcImRhdGFcIjonKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpdElzTmV3TWVzc2FnZVJlZ3VsYXIudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUlkID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilcclxuICAgICAgICAgICAgLnNoaWZ0KCk7XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgIHJlc3VsdE9iamVjdFttZXNzYWdlSWRdID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0T2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5oYXNOZXdEYXRhID0gZnVuY3Rpb24gaGFzTmV3RGF0YShyZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICFoYXNOdWxsRGF0YS50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSAmJiByZXNwb25zZS5sZW5ndGggPiAxXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2VyTGlzdCA9IGZ1bmN0aW9uIHBhcnNlVXNlckxpc3QoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgY2hhbmdlVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgdXNlcklkO1xyXG4gICAgICAgIGlmIChpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdElzTmV3VXNlckxpc3RSZWd1bGFyLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIHVzZXJJZCA9IHRoaXMuZ2V0VXNlcklkKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLCBudWxsKTtcclxuICAgICAgICAgICAgZGF0YVt1c2VySWRdID0gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpWzFdXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB1c2VySWQgPSB0aGlzLmdldFVzZXJJZChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWQsIGRhdGFdO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRGaXJzdERhdGEgPSBmdW5jdGlvbiBnZXRGaXJzdERhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBqc29uRGF0YTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UodGhpcy5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZShyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0VXNlcklkID0gZnVuY3Rpb24gZ2V0VXNlcklkKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGNoYW5nZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAuc2hpZnQoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdkYXRhOiB7XCJwYXRoXCI6XCIvJylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVswXVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlQ29tbWFuZEFuc3dlciA9IGZ1bmN0aW9uIHBhcnNlQ29tbWFuZEFuc3dlcihcclxuICAgICAgICByZXNwb25zZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgdmFyIGlwRGF0YTtcclxuICAgICAgICB2YXIgYXNrUXVlc3Rpb25EYXRhO1xyXG4gICAgICAgIHZhciBpdElzSVBJbmZvcm1hdGlvbiA9IC9nZXRJcC8udGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgdmFyIGl0SXNRdWVzdGlvbnNJbmZvcm1hdGlvbiA9IC9hc2tRdWVzdGlvbi8udGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSk7XHJcblxyXG4gICAgICAgIGlmKGl0SXNJUEluZm9ybWF0aW9uICYmIGl0SXNRdWVzdGlvbnNJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICBkYXRhID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoL2RhdGE6IHtcInBhdGhcIjpcIlxcL1wiLFwiZGF0YVwiOi8pLnBvcCgpLnNwbGl0KFwifSxcIik7XHJcbiAgICAgICAgICAgIGFza1F1ZXN0aW9uRGF0YSA9IEpTT04ucGFyc2UoZGF0YVswXSsgXCJ9fVwiKTtcclxuICAgICAgICAgICAgaXBEYXRhID0gSlNPTi5wYXJzZShcIntcIiArIGRhdGFbMV0udHJpbSgpLnNsaWNlKDAsLTEpKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIGFza1F1ZXN0aW9uRGF0YSxcclxuICAgICAgICAgICAgICAgIGlwRGF0YVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSBlbHNlIGlmIChpdElzSVBJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVVzZXJJcERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRJc1F1ZXN0aW9uc0luZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlUXVlc3Rpb25zRGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVVzZXJJcERhdGEgPSBmdW5jdGlvbiBwYXJzZVVzZXJJcERhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmKGl0SXNGaXJzdElwRGF0YVJlZ3VsYXIudGVzdChyZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoaXRJc0ZpcnN0SXBEYXRhUmVndWxhcikucG9wKCkudHJpbSgpLnNsaWNlKDAsLTIpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdChldmVudFJlZ3VsYXIpLnBvcCgpLnNwbGl0KFwiZGF0YToge1xcXCJwYXRoXFxcIjpcXFwiL2dldElwXFxcIixcXFwiZGF0YVxcXCI6XCIpLnBvcCgpLnRyaW0oKS5zbGljZSgwLC0xKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZVF1ZXN0aW9uc0RhdGEgPSBmdW5jdGlvbiBwYXJzZVF1ZXN0aW9uc0RhdGEoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmKGl0SXNGaXJzdFF1ZXN0aW9uc0RhdGEudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkpIHtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoaXRJc0ZpcnN0UXVlc3Rpb25zRGF0YSkucG9wKCkudHJpbSgpLnNsaWNlKDAsLTIpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGl0SXNOZXdRdWVzdGlvbnNDb21tYW5kLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KGl0SXNOZXdRdWVzdGlvbnNDb21tYW5kKS5wb3AoKS50cmltKCkuc2xpY2UoMCwtMSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKFwie1xcXCJhc2tRdWVzdGlvblxcXCI6e1xcXCJcIiArIHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KFwiZGF0YToge1xcXCJwYXRoXFxcIjpcXFwiL2Fza1F1ZXN0aW9uL1wiKS5wb3AoKS5yZXBsYWNlKFwiXFxcIixcXFwiZGF0YVxcXCJcIiwgXCJcXFwiXCIpICsgXCJ9XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRleHQuc3BsaXQoZXZlbnRSZWd1bGFyKTtcclxuICAgICAgICB2YXIgY2hhbmdlVHlwZSA9IHRoaXMuZ2V0VHlwZU9mQ2hhbmdlcyhyZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdKTtcclxuICAgICAgICB2YXIgcmVzdWx0T2ZQYXJzZSA9IHsgdHlwZTogY2hhbmdlVHlwZSB9O1xyXG4gICAgICAgIGlmICh0aGlzLmhhc05ld0RhdGEocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlVHlwZSA9PT0gXCJtZXNzYWdlXCIgfHwgY2hhbmdlVHlwZSA9PT0gXCJyZWFkXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJzTWVzc2FnZXMocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJzZW5kTmV3TWVzc2FnZVwiIHx8XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID09PSBcImxhc3RPbmxpbmVcIiB8fFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJ1c2VyTGlzdFwiXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlVXNlckxpc3QocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09IFwiZ2V0SXBcIiB8fCBjaGFuZ2VUeXBlID09PSBcImFza1F1ZXN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlQ29tbWFuZEFuc3dlcihyZXN1bHQsIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mUGFyc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IExvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKTtcclxufSkoKTtcclxuXHJcbi8vIHZpZXdcclxuXHJcbi8qIGV4cG9ydGVkIHZpZXdGYWN0b3J5ICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBkYXRhU291cmNlICovXHJcbnZhciB2aWV3RmFjdG9yeSA9IChmdW5jdGlvbiBjcmVhdGVWaWV3RmFjdG9yeSAoZGF0YVNvdXJjZSkge1xyXG5cclxuICAgIGZ1bmN0aW9uIFZpZXdGYWN0b3J5ICgpIHt9XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZVZpZXcgPSBmdW5jdGlvbiBjcmVhdGVDaGF0VmlldyAoaHRtbFBhdGgsIGNzc1BhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBjcmVhdGVWaWV3UHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmKGh0bWxQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjc3NQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbmNsdWRlVmlld0Nzc1RvUGFnZSh0aGF0LmNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc1BhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVzaGVldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRleHQvY3NzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG91Y2gtc29mdC1jaGF0LWNzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoYXQuaW5jbHVkZVZpZXdIVE1MVG9QYWdlKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImh0bWxQYXRoIGlzIG51bGwuIFBsZWFzZSBhZGQgaHRtbFBhdGhcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0hUTUxUb1BhZ2UgPSBmdW5jdGlvbiBpbmNsdWRlQ2hhdEhUTUxUb1BhZ2UgKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciBjb250YWluZXJEaXYgPSAoY29udGFpbmVyQ2xhc3MpID8gZ2V0RWxlbWVudChjb250YWluZXJDbGFzcykgOiBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLmNvbW1vbkFQSS5nZXRIVE1MKGh0bWxQYXRoKS50aGVuKGZ1bmN0aW9uIHNldEh0bWwgKGh0bWwpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyRGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3Q3NzVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRDc3NUb1BhZ2UgKGxpbmspIHtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlQ1NTTGluayA9IGZ1bmN0aW9uIGNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgZmlsZVBhdGgsXHJcbiAgICAgICAgcmVsLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVsKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwicmVsXCIsIHJlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwidHlwZVwiLCB0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGZpbGVQYXRoKTtcclxuICAgICAgICByZXR1cm4gbGluaztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBWaWV3RmFjdG9yeSgpXHJcblxyXG59KShkYXRhU291cmNlKTtcclxuXHJcbi8vIGNoYXQgbWFuYWdlclxyXG5cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZXhwb3J0ZWQgbWVzc2FnZUxpc3RNYW5hZ2VyICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0YDQsNCx0L7RgtGLINGB0L4g0YHQv9C40YHQutC+0Lwg0YHQvtC+0LHRidC10L3QuNC5INCe0JTQndCe0JPQniDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxudmFyIG1lc3NhZ2VMaXN0TWFuYWdlciA9IChmdW5jdGlvbiBzZXR1cE1lc3NhZ2VMaXN0TWFuYWdlciAoY29uZmlnKSB7XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8g0KTQvtGA0LzQsNGCICBtZXNzYWdlTGlzdCA9IFtcclxuICAgIC8vICAgIHtcclxuICAgIC8vICAgICAgIHNlbmRlcjogc2VuZGVyXHJcbiAgICAvLyAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgLy8gICAgICAgcmVhZDogdHJ1ZS9mYWxzZVxyXG4gICAgLy8gICAgICAgZGF0ZTogZGF0ZVxyXG4gICAgLy8gICAgfSxcclxuICAgIC8vIF1cclxuICAgIC8vIHJlYWQgLSDQsdGL0LvQviDQu9C4INC/0YDQvtGH0LjRgtCw0L3QviDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgZnVuY3Rpb24gTWVzc2FnZUxpc3RNYW5hZ2VyKCkge31cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAgKCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLmNET00gPSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQmxvY2s6IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIE1FU1NBR0UgRUxFTUVOVCAvL1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdGCIERPTSDRjdC70LXQvNC10L3RgiDRgdC+0L7QsdGJ0LXQvdC40Y8g0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L3QsCDRjdC60YDQsNC90LVcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlRWxlbWVudChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlQ29udGFpbmVyRGl2ID0gdGhpcy5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2KGlzUmVhZCwgc2VuZGVyKTtcclxuICAgICAgICB2YXIgbWVzc2FnZURhdGVEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgbWVzc2FnZURhdGUsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ESVNQTEFZX01FU1NBR0VfREFURSxcclxuICAgICAgICAgICAgW2NvbmZpZy5tZXNzYWdlcy5DU1NfQ0hBVF9NRVNTQUdFX0RBVEVdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIG1lc3NhZ2VTZW5kZXJEaXYgPSB0aGlzLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayhcclxuICAgICAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9TRU5ERVJfTkFNRSxcclxuICAgICAgICAgICAgW2NvbmZpZy5tZXNzYWdlcy5DU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ESVNQTEFZX01FU1NBR0UsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEYXRlRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VTZW5kZXJEaXYpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCA9IGZ1bmN0aW9uICBnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlc0lzUmVhZCA9IFtdO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZSA9IGNvbmZpZy5BRE1JTl9OQU1FIHx8IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lO1xyXG4gICAgICAgIHZhciB1c2VySWQgPSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQ7XHJcbiAgICAgICAgZm9yKGkgPSB0aGlzLm1lc3NhZ2VMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubWVzc2FnZUxpc3RbaV0uc2VuZGVyICE9PSB1c2VyTmFtZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMubWVzc2FnZUxpc3RbaV0ucmVhZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzSXNSZWFkLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiB0aGlzLm1lc3NhZ2VMaXN0W2ldLmlkICsgXCIvcmVhZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0W2ldLnJlYWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZXNJc1JlYWQ7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiAoaXNSZWFkLCBzZW5kZXIpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfTUVTU0FHRV9DT05UQUlORVIpO1xyXG4gICAgICAgIGlmICghaXNSZWFkICYmIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lICE9PSBzZW5kZXIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayA9IGZ1bmN0aW9uIGNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayAodGV4dCwgaXNEaXNwbGF5LCBzdHlsZUNsYXNzZXMpIHtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdHlsZUNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiBjbGFzc0FkZCAoc3R5bGUpIHtcclxuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoc3R5bGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUxpc3QgKG1lc3NhZ2VPYmplY3RzKSAge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gYWRkRWxlbWVudFRvTWVzc2FnZUxpc3QgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VMaXN0LnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdCAobmV3TWVzc2FnZUxpc3QpIHtcclxuICAgICAgICBpZih0aGlzLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QgKFxyXG4gICAgICAgIG1lc3NhZ2VPYmpcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QucHVzaChtZXNzYWdlT2JqKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QtdGA0LXQsdC40YDQsNC10YIg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSwg0YHQvtC30LTQsNC10YIg0YHQvtC+0YLQstC10YLRgdCy0YPRjtGJ0LjQtSDQuNC8IERPTSDRjdC70LXQvNC10L3RgtGLINC4INCy0YHRgtCw0LLQu9GP0LXRgiDQuNGFINCyINGH0LDRglxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZXMgPSBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoYXQuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGF0LmNET00ubWVzc2FnZXNCbG9jay5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7Rh9C40YHRgtC40YLRjCBET00g0Y3Qu9C10LzQtdC90YIg0LIg0LrQvtGC0L7RgNC+0Lwg0L7RgtC+0LHRgNCw0LbQsNGO0YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyAo0L3QsNC/0YDQuNC80LXRgCDRh9GC0L7QsdGLINCy0YHRgtCw0LLQuNGC0Ywg0L3QstC+0YvQuSDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5KVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckNoYXQgPSBmdW5jdGlvbiBjbGVhckNoYXQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2sucmVtb3ZlQ2hpbGQodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2VMaXN0TWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIHVzZXJEYXRhTWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgbWVzc2FnZUxpc3RNYW5hZ2VyICovXHJcbi8qIGdsb2JhbCBjcmVhdGVNZXNzYWdlT2JqZWN0ICovXHJcbi8qIGdsb2JhbCBnZXRDdXJyZW50RGF0ZSAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgZXZlbnRFbWl0dGVyICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGdsb2JhbCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyICovXHJcbnZhciB1c2VyRGF0YU1hbmFnZXIgPSAgKGZ1bmN0aW9uIGNyZWF0ZVVzZXJEYXRhTWFuYWdlciAoY29uZmlnLCBldmVudEVtaXR0ZXIsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIpIHtcclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgLyogZXhwb3J0ZWQgZ2V0Q3VycmVudERhdGUgKi9cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgbWludXRlcyA9IChkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkgPyBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGVcclxuICAgICAgICAgICAgLmdldEhvdXJzKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLmNvbmNhdChcIjpcIiwgbWludXRlcyk7XHJcbiAgICB9XHJcbiAgICAvKiBleHBvcnRlZCBjcmVhdGVNZXNzYWdlT2JqZWN0ICovXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlT2JqZWN0IChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZCxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWQ6IGlzUmVhZCxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgLy8gYmFzaWNcclxuICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhQmFzaWMgKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZ2V0Q29ycmVzcG9uZGVuY2UgKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoYXQuZ2V0VXNlckNvcnJlc3BvbmRlbmNlKHVzZXJJZCkudGhlbiggZnVuY3Rpb24gZ2V0UmVzb2x2ZSAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdEJhc2ljIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgICAgIHZhciBtZXNzYWdlc09iamVjdCA9IFtdO1xyXG4gICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIHB1c2hEYXRhIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFba2V5XS5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzT2JqZWN0LnB1c2goZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgICAgIG5ld01lc3NhZ2VMaXN0ID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmNyZWF0ZU1lc3NhZ2VMaXN0KG1lc3NhZ2VzT2JqZWN0KTtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIudXBkYXRlTWVzc2FnZUxpc3QobmV3TWVzc2FnZUxpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJDb3JyZXNwb25kZW5jZUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCkoKS50aGVuKGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VzTGlzdCAoZGF0YSkge1xyXG4gICAgICAgICAgICB0aGF0LnVwZGF0ZU1lc3NhZ2VMaXN0KGRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tTG9uZ1BvbGxDb25uZWN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZ2V0TG9uZ1BvbGxDb3JyZXNwb25kZW5jZShyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHRoYXQuZ2V0VXNlckNvcnJlc3BvbmRlbmNlKHVzZXJJZCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyQ29ycmVzcG9uZGVuY2VGcm9tTG9uZ1BvbGxDb25uZWN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmKGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uID0gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTWVzc2FnZXModXNlcklkKTtcclxuICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIHNldHVwQ29ubmVjdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IDMgJiYgdGhpcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudEVtaXR0ZXIuZW1pdChkYXRhLnR5cGUsIGRhdGEub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5zZW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3RBZnRlckxvbmdQb2xsIChkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24gYWRkVG9NZXNzYWdlTGlzdExvbmdQb2xsIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFba2V5XS5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdChkYXRhW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gVXNlckRhdGFNYW5hZ2VyICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ID09PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhRnJvbUxvbmdQb2xsQ29ubmVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJDb3JyZXNwb25kZW5jZSA9IGdldFVzZXJDb3JyZXNwb25kZW5jZUZyb21Mb25nUG9sbENvbm5lY3Rpb24uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBldmVudEVtaXR0ZXIuYWRkU3Vic2NyaWJlKFwibWVzc2FnZVwiLCBmdW5jdGlvbiBzdWJzY3JpYmVNZXNzYWdlIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZU1lc3NhZ2VMaXN0KGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInJlYWRcIiwgZnVuY3Rpb24gc3Vic2NyaWJlUmVhZCAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlcyAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtZXNzYWdlLmlkID09PSBkYXRhLmlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVhZCA9IGRhdGEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJEYXRhID0gZ2V0VXNlckRhdGFCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJDb3JyZXNwb25kZW5jZSA9IGdldFVzZXJDb3JyZXNwb25kZW5jZUJhc2ljLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSB1cGRhdGVNZXNzYWdlTGlzdEJhc2ljLmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnNldHVwKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY2xlYXJNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZUxpc3QgKCkge1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5tZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSA9IGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSAodXNlcklkLCB1c2VyTmFtZSkge1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuYWRkTmV3VXNlclRvRGF0YVNvdXJjZSh1c2VySWQsIHVzZXJOYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlU2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gc2V0RmllbGQgKGZpZWxkTmFtZSkge1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0U2V0dGluZ0ZpZWxkKFxyXG4gICAgICAgICAgICBmaWVsZE5hbWUsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3NbZmllbGROYW1lXVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlVXNlck9ubGluZSA9IGZ1bmN0aW9uIHVwZGF0ZVVzZXJPbmxpbmUgKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGU7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVMYXN0T25saW5lKHVzZXJJZCwgZGF0ZS5nZXRUaW1lKCkpXHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZSAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZSA9IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lIHx8IGNvbmZpZy5BRE1JTl9OQU1FO1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gY3JlYXRlTWVzc2FnZU9iamVjdChcclxuICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgdXNlck5hbWUsXHJcbiAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgIT09IFwibG9uZ1BvbGxcIikge1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QobWVzc2FnZU9iamVjdCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zYXZlTWVzc2FnZVRvRGF0YVNvdXJjZShtZXNzYWdlT2JqZWN0KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCA9IGZ1bmN0aW9uIGdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50ICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXRNZXNzYWdlQXNSZWFkID0gZnVuY3Rpb24gc2V0TWVzc2FnZUFzUmVhZCAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3RzID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCgpO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBzZXRSZWFkIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZChcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3Quc2VuZGVyID09PSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyhjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2UoXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdFxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHRpbmdzID0gW3t1c2VySWQsIGZpZWxkTmFtZSwgZmllbGRWYWx1ZX0se30uLi5dXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIChzZXR0aW5ncykge1xyXG4gICAgICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24gc2F2ZVNldHRpbmcgKG5ld0ZpZWxkU2V0dGluZykge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldFNldHRpbmdGaWVsZChcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckRhdGFNYW5hZ2VyKCk7XHJcblxyXG59KShtYWluQ29uZmlnLCBldmVudEVtaXR0ZXIsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIpO1xyXG5cclxuLy8gbG9nXHJcblxyXG52YXIgbG9nID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBsb2dUZW1wbGF0ZXMgPSB7XHJcbiAgICAgICAgZ2V0SXA6IHtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhc2tRdWVzdGlvbjoge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVNZXNzYWdlIChtZXNzYWdlLCB0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUVsZW1lbnQgPSBjcmVhdGVNZXNzYWdlRWxlbWVudCh2YWxpZE1lc3NhZ2UsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VFbGVtZW50KG1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgd3JpdGU6IHNhdmVNZXNzYWdlXHJcbiAgICB9XHJcbn0oKTtcclxuXHJcbi8vIGRhc2hib2FyZFxyXG5cclxuLyogZXhwb3J0ZWQgdXNlckxpc3RNYW5hZ2VyICovXHJcbi8qIGdsb2JhbCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGdsb2JhbCBzb3J0ZXIgKi9cclxudmFyIHVzZXJMaXN0TWFuYWdlciA9IChmdW5jdGlvbiBjcmVhdGVVc2VyTGlzdCAoY29uZmlnLCBzb3J0ZXIpIHtcclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8qINCk0L7RgNC80LDRgiDQvtCx0YrQtdC60YLQsCDQsiDRgdC/0LjRgdC60LUg0Y7Qt9C10YDQsFxyXG4gICAgICAqIHVzZXJJZDogXCJJdmFuMzAwMDAwXCIsXHJcbiAgICAgICogdXNlckVsZW1lbnQ6IFVzZXJMaXN0TWFuYWdlci5jcmVhdGVVc2VyRWxlbWVudCh1c2VySWQsIHVzZXJJc09ubGluZSksXHJcbiAgICAgICogb25saW5lOiB1c2VySXNPbmxpbmUsXHJcbiAgICAgICogdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgKiBzZW5kTmV3TWVzc2FnZTogdXNlclNldHRpbmdzLnNlbmROZXdNZXNzYWdlLFxyXG4gICAgICAqIHJlYWRMYXN0TWVzc2FnZTogdXNlclNldHRpbmdzLnJlYWRMYXN0TWVzc2FnZSxcclxuICAgICAgKiBsYXN0T25saW5lOiB1c2VyU2V0dGluZ3MubGFzdE9ubGluZSxcclxuICAgICAgKiBpc01pbmltaXplOiB1c2VyU2V0dGluZ3MuaXNNaW5pbWl6ZSxcclxuICAgICAgKiB1c2VyTmFtZTogdXNlclNldHRpbmdzLnVzZXJOYW1lXHJcbiAgICAgICpcclxuICAgICAgKiB2aXNpYmxlIC0g0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LvQuCDRjtC30LXRgNCwINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gICAgICAqL1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgZnVuY3Rpb24gVXNlckxpc3RNYW5hZ2VyKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAgKCkge307XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10YIgRE9NINC10LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZVVzZXJFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlVXNlckVsZW1lbnQoXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGlzT25saW5lXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdXNlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdmFyIHVzZXJJZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICB1c2VyRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfRUxFTUVOVF9DU1NfQ0xBU1MpO1xyXG5cclxuICAgICAgICB1c2VySWREaXYuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9JRF9FTEVNRU5UX0NTU19DTEFTUyk7XHJcbiAgICAgICAgdXNlcklkRGl2LmlubmVySFRNTCA9IHVzZXJJZDtcclxuXHJcbiAgICAgICAgaWYgKGlzT25saW5lKSB7XHJcbiAgICAgICAgICAgIHVzZXJJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09OTElORSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXNlckluZGljYXRvci5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT0ZGTElORSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1c2VyRGl2LmFwcGVuZENoaWxkKHVzZXJJZERpdik7XHJcbiAgICAgICAgdXNlckRpdi5hcHBlbmRDaGlsZCh1c2VySW5kaWNhdG9yKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVzZXJEaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc2V0VXNlckxpc3QgPSBmdW5jdGlvbiBzZXRVc2VyTGlzdCAodXNlckx1c3RPYmplY3QpIHtcclxuICAgICAgICB0aGlzLnVMaXN0ID0gdXNlckx1c3RPYmplY3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuYWRkVXNlclRvVXNlcnNBcnJheSA9IGZ1bmN0aW9uIGFkZFVzZXJUb1VzZXJzTGlzdChcclxuICAgICAgICB1c2VyLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICB1c2Vyc0xpc3RcclxuICAgICkge1xyXG4gICAgICAgIHZhciB1c2VySXNPbmxpbmUgPSB0aGlzLnVzZXJJc09ubGluZSh1c2VyLmxhc3RPbmxpbmUpO1xyXG4gICAgICAgIHVzZXJzTGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgIHVzZXJFbGVtZW50OiB0aGlzLmNyZWF0ZVVzZXJFbGVtZW50KHVzZXJJZCwgdXNlcklzT25saW5lKSxcclxuICAgICAgICAgICAgb25saW5lOiB1c2VySXNPbmxpbmUsXHJcbiAgICAgICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgIHNlbmROZXdNZXNzYWdlOiB1c2VyLnNlbmROZXdNZXNzYWdlLFxyXG4gICAgICAgICAgICByZWFkTGFzdE1lc3NhZ2U6IHVzZXIucmVhZExhc3RNZXNzYWdlLFxyXG4gICAgICAgICAgICBsYXN0T25saW5lOiB1c2VyLmxhc3RPbmxpbmUsXHJcbiAgICAgICAgICAgIHVzZXJOYW1lOiB1c2VyLnVzZXJOYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUudXBkYXRlVXNlck9ubGluZVN0YXR1cyA9IGZ1bmN0aW9uIHVwZGF0ZVVzZXJWaWV3ICh1c2VySWQsIGxhc3RPbmxpbmUpIHtcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gdGhpcy5nZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCh1c2VySWQpO1xyXG4gICAgICAgIHRoaXMudUxpc3RbdXNlckluZGV4XS5sYXN0T25saW5lID0gbGFzdE9ubGluZTtcclxuICAgICAgICB0aGlzLnVMaXN0W3VzZXJJbmRleF0ub25saW5lID0gdGhpcy51c2VySXNPbmxpbmUobGFzdE9ubGluZSk7XHJcbiAgICAgICAgdGhpcy51TGlzdFt1c2VySW5kZXhdLnVzZXJFbGVtZW50ID0gdGhpcy5jcmVhdGVVc2VyRWxlbWVudChcclxuICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICB0aGlzLnVzZXJJc09ubGluZShsYXN0T25saW5lKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXRgiBpbmRleCDRjtC30LXRgNCwINCyINGB0L/QuNGB0LrQtSDRjtC30LXRgNCwINC10YHQu9C4INC+0L0g0YLQsNC8INC90LDRhdC+0LTQuNGC0YHRjy4g0JIg0L/RgNC+0YLQuNCy0L3QviDRgdC70YPRh9Cw0LUg0LLQvtC30LLRgNCw0YnQsNC10YIgbnVsbFxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCA9IGZ1bmN0aW9uIGdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VyTWFuYWdlciA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRleCA9IG51bGw7XHJcbiAgICAgICAgT2JqZWN0LmtleXModXNlck1hbmFnZXIudUxpc3QpLm1hcChmdW5jdGlvbiBnZXRLZXkgKGtleSkge1xyXG4gICAgICAgICAgICBpZiAodXNlck1hbmFnZXIudUxpc3Rba2V5XS51c2VySWQgPT09IHVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdXNlckluZGV4ID0ga2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1c2VySW5kZXg7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyDQntC/0YDQtdC00LXQu9GP0LXRgiDQvtC90LvQsNC50L0g0Y7Qt9C10YDQsCDQvdCw0YXQvtC00Y8g0YDQsNC30L3QuNGG0YMg0LzQtdC20LTRgyDQtNCw0YLQvtC5INC/0L7RgdC70LXQtNC90LXQs9C+INC60L7QvdC10LrRgtCwINGO0LfQtdGA0LAg0YEg0LHQtCDQuCDRgtC10LrRg9GJ0LjQvCDQstGA0LXQvNC10L3QtdC8XHJcbiAgICAvLyDQstC+0LfQstGA0LDRidCw0LXRgiB0cnVlINC10YHQu9C4INGO0LfQtdGAINC+0L3Qu9Cw0LnQvSwgZmFsc2UgLSDQvtGE0YTQu9Cw0LnQvVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS51c2VySXNPbmxpbmUgPSBmdW5jdGlvbiB1c2VySXNPbmxpbmUgKGxhc3RVc2VyT25saW5lVGltZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLSBsYXN0VXNlck9ubGluZVRpbWUgPD0gY29uZmlnLmludGVydmFsLk9OTElORV9JTlRFUlZBTDtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JTQtdC70LDQtdGCINC90LXQstC40LTQuNC80YvQvNC4INGC0LXRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSDQsiDRgdC/0LjRgdC60LUsINCyINC40LzQtdC90LDRhSDQutC+0YLQvtGA0YvRhSDQvdC10YIg0L/QtdGA0LXQtNCw0L3QvdC+0Lkg0L/QvtC00YHRgtGA0L7QutC4XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmZpbHRlckJ5TmFtZSA9IGZ1bmN0aW9uIGZpbHRlckJ5TmFtZSgpIHtcclxuICAgICAgICB0aGlzLnVMaXN0LmZvckVhY2goZnVuY3Rpb24gZmlsdGVyTmFtZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnZpc2libGUgPSBlbGVtZW50LnVzZXJJZC5pbmRleE9mKGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5KSAhPT0gLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7RgNGC0LjRgNGD0LXRgiDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyINC/0L4g0L/QvtC70Y5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc29ydFVzZXJzQnlGaWVsZCA9IGZ1bmN0aW9uIHNvcnRVc2Vyc0J5T25saW5lKCkge1xyXG4gICAgICAgIHNvcnRlci5xdWlja1NvcnQodGhpcy51TGlzdCwgMCwgdGhpcy51TGlzdC5sZW5ndGggLSAxLCBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmNsZWFyVXNlckxpc3QgPSBmdW5jdGlvbiBjbGVhclVzZXJMaXN0ICgpIHtcclxuICAgICAgICB0aGlzLnVMaXN0ID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YLQvtCx0YDQsNC30LjRgtGMLyDQntCx0L3QvtCy0LjRgtGMINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1INGO0LfQtdGA0L7QsiDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuZGlzcGxheVVzZXJzID0gZnVuY3Rpb24gZGlzcGxheVVzZXJzKCkge1xyXG4gICAgICAgIGNsZWFyRWxlbWVudENvbnRlbnQoY29uZmlnLkRPTS5VU0VSX0xJU1RfQ1NTX0NMQVNTKTtcclxuICAgICAgICB0aGlzLnVMaXN0LmZvckVhY2goZnVuY3Rpb24gZ2V0RWxlbSAoZWxlbSkge1xyXG4gICAgICAgICAgICBpZiAoZWxlbS52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uVVNFUl9MSVNUX0NTU19DTEFTUykuYXBwZW5kQ2hpbGQoZWxlbS51c2VyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAvLyBpbmNsdWRlXHJcblxyXG4gICAgLyogZXhwb3J0ZWQgY2xlYXJFbGVtZW50Q29udGVudCAqL1xyXG4gICAgLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuICAgIC8vINCe0YfQuNGJ0LDQtdGCIERPTSDRgdC+0LTQtdGA0LbQsNGJ0LjQuSDRjdC70LXQvNC10L3RgtGLINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuICAgIGZ1bmN0aW9uIGNsZWFyRWxlbWVudENvbnRlbnQoZWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGVsZW1lbnRTZWxlY3Rvcik7XHJcbiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckxpc3RNYW5hZ2VyKClcclxuXHJcbn0pKG1haW5Db25maWcsIHNvcnRlcik7XHJcbnZhciBjb250cm9sUGFuZWwgPSAoZnVuY3Rpb24gKGNvbmZpZywgZGF0YUNvbm5lY3RvciwgbG9nLCBwYXJzZXIpIHtcclxuXHJcbiAgICB2YXIgbG9nRWxlbWVudDtcclxuICAgIHZhciBzZWxlY3RDb21tYW5kO1xyXG4gICAgdmFyIHNlbmRCdXR0b247XHJcbiAgICB2YXIgcGFyYW1ldGVyRWxlbWVudHM7XHJcblxyXG4gICAgdmFyIGNvbm5lY3Rpb247XHJcbiAgICB2YXIgbW9kdWxlSW5pdDtcclxuICAgIHZhciBjdXJyZW50Q29tbWFuZDtcclxuICAgIHZhciBwYXRoRm9yQ3VycmVudENvbW1hbmRSZXF1ZXN0O1xyXG5cclxuICAgIHZhciBjb21tYW5kcyA9IHtcclxuICAgICAgICBnZXRJcDoge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzTnVtYmVyOiAwLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzeW5jXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFza1F1ZXN0aW9uOiB7XHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnNOdW1iZXI6IDMsXHJcbiAgICAgICAgICAgIHR5cGU6IFwicGVuZGluZ1wiXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBtb2R1bGVDb250cm9sbGVyIChhY3Rpb24pIHtcclxuICAgICAgICBtb2R1bGVJbml0W2FjdGlvbl0uZm9yRWFjaChmdW5jdGlvbiBpbnZva2VDb250cm9sRnVuY3Rpb25zIChjb250cm9sRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgY29udHJvbEZ1bmN0aW9uKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRBY2Nlc3NUb0RPTSAoKSB7XHJcbiAgICAgICAgbG9nRWxlbWVudCA9IGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9QQU5FTF9MT0dfQ0xBU1MpO1xyXG4gICAgICAgIHNlbGVjdENvbW1hbmQgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTKTtcclxuICAgICAgICBzZW5kQnV0dG9uID0gIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9TRU5EX0NPTU1BTkRfQlVUVE9OX0NMQVNTKTtcclxuICAgICAgICBwYXJhbWV0ZXJFbGVtZW50cyA9ICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFSQU1FVEVSU19DTEFTUywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNldHVwTG9uZ1BvbGxDb25uZWN0aW9uICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlciA9ICh1c2VySWQpID8gdXNlcklkIDogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIGlmKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25uZWN0aW9uID0gZGF0YUNvbm5lY3Rvci5jcmVhdGVMb25nUG9sbENvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgIGNvbmZpZy5DT01NQU5EX1BBVEhfUFJFRklYICsgdXNlciArIFwiL2NvbW1hbmRzUmVzcG9uc2UvLmpzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29ubmVjdGlvbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBjb21tYW5kQ2hhbmdlQ2FsbGJhY2sgKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSAzICYmIHRoaXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhICA9IHBhcnNlci5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nRWxlbWVudC5pbm5lckhUTUwgPSBKU09OLnN0cmluZ2lmeShkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbm5lY3Rpb24uc2VuZCgpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xvc2VMb25nUG9sbENvbm5lY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXF1ZXN0Q29tbWFuZCAoY29tbWFuZE9iamVjdCwgcmVxdWVzdFBhdGgpIHtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShjb21tYW5kT2JqZWN0KTtcclxuICAgICAgICBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBqc29uRGF0YSxcclxuICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbW1hbmQgKCkge1xyXG4gICAgICAgIHZhciBwYXJhbWV0ZXJQcmVmaXggPSBcInBhcmFtZXRlclwiO1xyXG4gICAgICAgIGN1cnJlbnRDb21tYW5kID0ge1xyXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogc2VsZWN0Q29tbWFuZC52YWx1ZSxcclxuICAgICAgICAgICAgcGFyYW1ldGVyc051bWJlcjogY29tbWFuZHNbc2VsZWN0Q29tbWFuZC52YWx1ZV0ucGFyYW1ldGVyc051bWJlcixcclxuICAgICAgICAgICAgaXNFeGVjdXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgdHlwZU9mQ29tbWFuZDogY29tbWFuZHNbc2VsZWN0Q29tbWFuZC52YWx1ZV0udHlwZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGFyYW1ldGVyRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYoaW5kZXggPCBjdXJyZW50Q29tbWFuZC5wYXJhbWV0ZXJzTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29tbWFuZFtwYXJhbWV0ZXJQcmVmaXggKyBpbmRleF0gPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlUGF0aEZvckNvbW1hbmRSZXF1ZXN0ICh1c2VySWQsIGNvbW1hbmROYW1lKSB7XHJcbiAgICAgICAgdmFyIHVzZXIgPSAodXNlcklkKSA/IHVzZXJJZCA6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgICAgICBwYXRoRm9yQ3VycmVudENvbW1hbmRSZXF1ZXN0ID0gY29uZmlnLkNPTU1BTkRfUEFUSF9QUkVGSVggKyB1c2VyICsgXCIvY29tbWFuZHMvXCIgKyBjb21tYW5kTmFtZSArIFwiLmpzb25cIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZW5kQnV0dG9uTGlzdGVuZXIgKCkge1xyXG4gICAgICAgIGNyZWF0ZUNvbW1hbmQoKTtcclxuICAgICAgICBjcmVhdGVQYXRoRm9yQ29tbWFuZFJlcXVlc3QobnVsbCwgc2VsZWN0Q29tbWFuZC52YWx1ZSk7XHJcbiAgICAgICAgcmVxdWVzdENvbW1hbmQoY3VycmVudENvbW1hbmQsIHBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3QpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzZXR1cExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgc2VsZWN0Q29tbWFuZC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gYWxlcnQoc2VsZWN0Q29tbWFuZC52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VuZEJ1dHRvbkxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGVJbml0ID0ge1xyXG4gICAgICAgIGZpcnN0SW5pdDogW1xyXG4gICAgICAgICAgICBnZXRBY2Nlc3NUb0RPTSxcclxuICAgICAgICAgICAgc2V0dXBMaXN0ZW5lcnNcclxuICAgICAgICBdLFxyXG4gICAgICAgIHNldHVwOiBbXHJcbiAgICAgICAgICAgIHNldHVwTG9uZ1BvbGxDb25uZWN0aW9uXHJcbiAgICAgICAgXSxcclxuICAgICAgICBjbG9zZTogW1xyXG4gICAgICAgICAgICBjbG9zZUxvbmdQb2xsQ29ubmVjdGlvblxyXG4gICAgICAgIF1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udHJvbFBhbmVsKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLnNldHVwID0gbW9kdWxlQ29udHJvbGxlci5iaW5kKG51bGwsIFwic2V0dXBcIik7XHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLmNsb3NlID0gbW9kdWxlQ29udHJvbGxlci5iaW5kKG51bGwsIFwiY2xvc2VcIik7XHJcbiAgICBDb250cm9sUGFuZWwucHJvdG90eXBlLmZpcnN0SW5pdCA9IG1vZHVsZUNvbnRyb2xsZXIuYmluZChudWxsLCBcImZpcnN0SW5pdFwiKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IENvbnRyb2xQYW5lbCgpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZGF0YUNvbm5lY3RvciwgbG9nLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKTtcclxuLyogZXhwb3J0ZWQgZGFzaGJvYXJkICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHVzZXJMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG4vKiBnbG9iYWwgZXZlbnRFbWl0dGVyICovXHJcbi8qIGdsb2JhbCBzb3J0ZXIgKi9cclxuLyogZ2xvYmFsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIgKi9cclxudmFyIGRhc2hib2FyZCA9IChmdW5jdGlvbiBjcmVhdGVEYXNoYm9hcmRDb250cm9sbGVyKGNvbmZpZywgZGF0YVNvdXJjZSwgdURhdGFNYW5hZ2VyLCB1TGlzdE1hbmFnZXIsIHNvcnRlciwgZXZlbnRFbWl0dGVyLCBjUGFuZWwpe1xyXG5cclxuICAgIHZhciBpbnRlcnZhbElkID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigpIHtcclxuICAgICAgICB0aGlzLnNldHVwRXZlbnRFbWl0dGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLnNldHVwKGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucygpO1xyXG4gICAgICAgIGNQYW5lbC5maXJzdEluaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiBzZXR1cEV2ZW50RW1pdHRlciAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb25kaXRpb247XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInVzZXJMaXN0XCIsIGZ1bmN0aW9uICBzZXR1cERhdGEgKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgbmV3RGF0YTtcclxuICAgICAgICAgICAgaWYoZGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdEYXRhID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld0RhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG5ld0RhdGEpLm1hcChmdW5jdGlvbiBzZXRVc2VyU2V0dGluZyh1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci5hZGRVc2VyVG9Vc2Vyc0FycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RhdGFbdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnNMaXN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3QgPSB1TGlzdE1hbmFnZXIudUxpc3QuY29uY2F0KHVzZXJzTGlzdCk7XHJcbiAgICAgICAgICAgIGNvbmRpdGlvbiA9IHRoYXQuZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgdGhhdC5sb2NhbFNldHRpbmdzU2V0dXAoY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgdGhhdC5zZXR1cFVzZXJMaXN0RE9NKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcImxhc3RPbmxpbmVcIiwgZnVuY3Rpb24gbGFzdE9ubGluZVN1YiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlcklkID0gZGF0YVswXTtcclxuICAgICAgICAgICAgdmFyIGxhc3RPbmxpbmUgPSBkYXRhWzFdO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudXBkYXRlVXNlck9ubGluZVN0YXR1cyh1c2VySWQsIGxhc3RPbmxpbmUpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInNlbmROZXdNZXNzYWdlXCIsIGZ1bmN0aW9uIHNlbmROZXdNZXNzYWdlU3ViIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySW5kZXggPSB1TGlzdE1hbmFnZXIuZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQoZGF0YVswXSk7XHJcbiAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt1c2VySW5kZXhdLnNlbmROZXdNZXNzYWdlID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgdGhhdC50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICB2YXIgc2VyaWFsQ29uZGl0aW9uID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBmaWx0ZXI6IGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5LFxyXG4gICAgICAgICAgICBzb3J0OiBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnksXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VySWQ6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUsIHNlcmlhbENvbmRpdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgdmFyIHNlcmlhbENvbmRpdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbmZpZy5MT0NBTF9TVE9SQUdFX05BTUUpO1xyXG4gICAgICAgIHZhciBjb25kaXRpb24gPSBudWxsO1xyXG4gICAgICAgIGlmIChzZXJpYWxDb25kaXRpb24pIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uID0gSlNPTi5wYXJzZShzZXJpYWxDb25kaXRpb24pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBjb25kaXRpb24uY3VycmVudFVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbjtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUubG9jYWxTZXR0aW5nc1NldHVwID0gZnVuY3Rpb24gbG9jYWxTZXR0aW5nc1NldHVwKGNvbmRpdGlvbikge1xyXG4gICAgICAgIGlmIChjb25kaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5maWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfRklMVEVSX0lOUFVUX0lEKS52YWx1ZSA9IGNvbmRpdGlvbi5maWx0ZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uc29ydCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWUgPSBjb25kaXRpb24uc29ydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uY3VycmVudFVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gY29uZGl0aW9uLmN1cnJlbnRVc2VySWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBEQVNIQk9BUkRfQ09ORElUSU9OXHJcblxyXG4gICAgLy8g0YTQuNC70YzRgtGA0LDRhtC40Y8g0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gZmlsdGVyKCkge1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5maWx0ZXJCeU5hbWUoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLy8g0YHQvtGA0YLQuNGA0L7QstC60LAg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIHNvcnQoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19TT1JUX1NFTEVDVF9JRCkudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnNvcnRVc2Vyc0J5RmllbGQoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuZGlzcGxheVVzZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwVXNlcnNMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXR1cFVzZXJzTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBBcnJheS5mcm9tKGNvbmZpZy51c2VycykuZm9yRWFjaChmdW5jdGlvbiBhZGRMaXN0ZW5lcnMgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC51c2VyTGlzdGVuZXIuYmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maXJzdENoaWxkLmlubmVyVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFVzZXJMaXN0RE9NID0gZnVuY3Rpb24gc2V0dXBVc2VyTGlzdERPTSAoKSB7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWNlc3NUb1VzZXJzTGlzdCgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBVc2Vyc0xpc3RlbmVycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRBY2Vzc1RvVXNlcnNMaXN0ID0gZnVuY3Rpb24gYWNjZXNzVG9Vc2Vyc0RPTSgpIHtcclxuICAgICAgICBjb25maWcudXNlcnMgPSBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICBjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUywgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJMaXN0ID0gZnVuY3Rpb24gZ2V0VXNlckxpc3QgKCkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIHZhciBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yID0gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTGlzdChudWxsKTtcclxuICAgICAgICBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Gcm9tRGF0YSAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50RW1pdHRlci5lbWl0KGRhdGEudHlwZSwgZGF0YS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yLnNlbmQoKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJMaXN0Q29ubmVjdGlvbiA9IGxvbmdQb2xsVXNlckxpc3RDb25uZWN0b3I7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS51c2VyTGlzdGVuZXIgPSBmdW5jdGlvbiB1c2VyTGlzdGVuZXIodXNlcklkKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydENvbnZlcnNhdGlvbldpdGhVc2VyKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkKHVzZXJJZCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGC0LrRgNGL0LLQsNC10YIg0YfQsNGCINGBINGO0LfQtdGA0L7QvCwg0LfQsNCz0YDRg9C20LDQtdGCINC80LXRgdGB0LDQtNC20Lgg0Y7Qt9C10YDQsCDQuCDQvtGC0L7QsdGA0LDQttCw0LXRgiDQuNGFXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zdGFydENvbnZlcnNhdGlvbldpdGhVc2VyID0gZnVuY3Rpb24gc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlcihcclxuICAgICAgICB1c2VySWRcclxuICAgICkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgY1BhbmVsLnNldHVwKCk7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLmNsZWFyTWVzc2FnZUxpc3QoKTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEodXNlcklkKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzYXZlTG9jYWxEYXRhICgpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ0hBVF9DT05UQUlOU19CTE9DS19TVFlMRSkuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuSU5WSVNJQkxFX0NMQVNTKTtcclxuICAgICAgICAgICAgICAgIHRoYXQuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyh1c2VySWQsIGZhbHNlKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vINCe0LHQvdC+0LLQu9C10YIg0LzQsNGB0YHQuNCyINGB0L7QvtCx0YnQtdC90LjQuSDQsiDQvNC+0LTRg9C70LUg0YfQsNGC0LAg0Lgg0LLRi9Cy0L7QtNC40YIg0LjRhSDQvdCwINGN0LrRgNCw0L1cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZVVzZXJNZXNzYWdlc0FuZERpc3BsYXlJdCA9IGZ1bmN0aW9uIHVwZGF0ZVVzZXJNZXNzYWdlc0FuZERpc3BsYXlJdChcclxuICAgICkge1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5nZXRVc2VyRGF0YShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgIHRoaXMubWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZChjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucyA9IGZ1bmN0aW9uIHNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfU0VORF9NRVNTQUdFX0JVVFRPTl9DTEFTUykuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuc2VuZE1lc3NhZ2UuYmluZCh1c2VyRGF0YU1hbmFnZXIsIGNvbmZpZy5BRE1JTl9OQU1FKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DTE9TRV9DSEFUX0JVVFRPTl9DTEFTUykuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICB0aGF0LmNsb3NlQ29udmVyc2F0aW9uLmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfRklMVEVSX0lOUFVUX0lEKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImlucHV0XCIsXHJcbiAgICAgICAgICAgIHRoYXQuZmlsdGVyLmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfU09SVF9TRUxFQ1RfSUQpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhhdC5zb3J0LmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdXNlckRhdGFNYW5hZ2VyLnNldE1lc3NhZ2VBc1JlYWQuYmluZCh1c2VyRGF0YU1hbmFnZXIpKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QvtC80LXRh9Cw0LXRgiDQutCw0L3QsNC7INGO0LfQtdGA0LAg0LrQsNC6INC/0YDQvtGH0LjRgtCw0L3QvdGL0LkgKNC10YHQu9C4INGC0LDQvCDQtdGB0YLRjCDQvdC10L/RgNC+0YfQuNGC0LDQvdC90YvQtSDRgdC+0L7QsdGJ0LXQvdC40Y8pXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkID0gZnVuY3Rpb24gbWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZCAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRleCA9IHVMaXN0TWFuYWdlci5nZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCh1c2VySWQpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt1c2VySW5kZXhdLnNlbmROZXdNZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UoW3tcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZTogXCJzZW5kTmV3TWVzc2FnZVwiLFxyXG4gICAgICAgICAgICBmaWVsZFZhbHVlOiBmYWxzZVxyXG4gICAgICAgIH1dKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JfQsNC60YDRi9Cy0LDQtdGCINC60LDQvdCw0Lsg0L7QsdGJ0LXQvdC40Y8g0YEg0Y7Qt9C10YDQvtC8INC4INGH0LDRglxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VDb252ZXJzYXRpb24gPSBmdW5jdGlvbiBjbG9zZUNvbnZlcnNhdGlvbiAoKSB7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFKS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IG51bGw7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIGNQYW5lbC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQtNC+0LHQsNCy0LvRj9C10YIg0L3QvtCy0YvQuSDQtdC70LXQvNC10L3Rgi3QuNC90LTQuNC60LDRgtC+0YAg0LJcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIgPSBmdW5jdGlvbiB0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCkge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlRGl2O1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHVMaXN0TWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGJsaW5rKGtleSkge1xyXG4gICAgICAgICAgICBuZXdNZXNzYWdlRGl2ID0gdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRVxyXG4gICAgICAgICAgICApWzBdO1xyXG4gICAgICAgICAgICBpZiAodUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgIW5ld01lc3NhZ2VEaXYpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZURpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5DU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRSk7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5hcHBlbmRDaGlsZChuZXdNZXNzYWdlRGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0uc2VuZE5ld01lc3NhZ2UgJiYgbmV3TWVzc2FnZURpdikge1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQucmVtb3ZlQ2hpbGQobmV3TWVzc2FnZURpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgPSBmdW5jdGlvbiBzZXR1cEludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaW50ZXJ2YWxJZC5wdXNoID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gaW50ZXJ2YWwgKCkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh1TGlzdE1hbmFnZXIudUxpc3QpLm1hcChmdW5jdGlvbiB1c2VyTGlzdFVwZGF0ZSAodmlld0lkKSB7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudXBkYXRlVXNlck9ubGluZVN0YXR1cyhcclxuICAgICAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rbdmlld0lkXS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3ZpZXdJZF0ubGFzdE9ubGluZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhhdC5zZXR1cFVzZXJMaXN0RE9NKCk7XHJcbiAgICAgICAgfSxjb25maWcuaW50ZXJ2YWwuVVBEQVRFX1VTRVJTX1RJTUUpXHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG4gICAgICAgIGludGVydmFsSWQuZm9yRWFjaChmdW5jdGlvbiBjbGVhciAoaWQpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpZClcclxuICAgICAgICB9KTtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY2xlYXJNZXNzYWdlTGlzdCgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5jbGVhclVzZXJMaXN0KCk7XHJcbiAgICAgICAgaWYoY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlckxpc3RDb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgY1BhbmVsLmNsb3NlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgRGFzaGJvYXJkQ29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZGF0YVNvdXJjZSwgdXNlckRhdGFNYW5hZ2VyLCB1c2VyTGlzdE1hbmFnZXIsIHNvcnRlciwgZXZlbnRFbWl0dGVyLCBjb250cm9sUGFuZWwpO1xyXG4vKiBleHBvcnRlZCBsYXVuY2hlciAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgbGF1bmNoZXIgPSAoZnVuY3Rpb24gY3JlYXRlTGF1bmNoZXIgKGNvbmZpZykge1xyXG5cclxuICAgIHZhciBET01WYXJpYWJsZXMgPSB7fTtcclxuICAgIHZhciBrZXlPZlZhbHVlID0ge1xyXG4gICAgICAgIGNoYXRUaXRsZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0VXJsOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRDbGFzczoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0UG9zaXRpb25TZWxlY3Q6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFsbG93TWluaW1pemU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbGxvd0RyYWc6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaG93VGltZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVpcmVOYW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJhZGlvIGJ1dHRvbiAobGFzdCBlbGVtZW50LCBpdCdzIGltcG90ZW50KVxyXG4gICAgICAgIG5ldHdvcmtSYWRpb1hNUjoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB0cnVlOiBcIlhIUlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBuZXR3b3JrUmFkaW9Mb25nUG9sbDoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB0cnVlOiBcImxvbmdQb2xsXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5ldHdvcmtSYWRpb0ZldGNoOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwiZmV0Y2hcIlxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gTGF1bmNoZXIoKSB7fVxyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5nZXREYXRhRnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBnZXREYXRhRnJvbUVsZW1lbnQgKGtleSkge1xyXG4gICAgICAgIHZhciBzcmMgPSBcIlwiO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgdHlwZU9mVmFsdWU7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoRE9NVmFyaWFibGVzKS5tYXAoZnVuY3Rpb24gc2V0dXBEYXRhIChlbGVtZW50TmFtZSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYoa2V5W2VsZW1lbnROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mVmFsdWUgPSBET01WYXJpYWJsZXNbZWxlbWVudE5hbWVdLmdldEF0dHJpYnV0ZShcInR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZU9mVmFsdWUgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihET01WYXJpYWJsZXNbZWxlbWVudE5hbWVdLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSBcIicmXCIgKyBcInR5cGVPZlJlcXVlc3RcIiArIFwiPSdcIiArIHRoYXQuZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnROYW1lLCB0eXBlT2ZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gXCInJlwiICsgZWxlbWVudE5hbWUgKyBcIj0nXCIgKyB0aGF0LmdldEVsZW1lbnRWYWx1ZShlbGVtZW50TmFtZSwgdHlwZU9mVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IGVsZW1lbnROYW1lICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKHNyYy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIHNyYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzcmM7XHJcbiAgICB9O1xyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5nZXRFbGVtZW50VmFsdWUgPSBmdW5jdGlvbiBnZXRFbGVtZW50VmFsdWUgKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gRE9NVmFyaWFibGVzW25hbWVdW2tleU9mVmFsdWVbbmFtZV0udHlwZU9mVmFsdWVdO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTY3JpcHQgKCkge1xyXG4gICAgICAgIHZhciBzcmMgPSBjb25maWcubGF1bmNoZXIuc3JjU3RhcnQgKyB0aGlzLmdldERhdGFGcm9tRWxlbWVudChrZXlPZlZhbHVlKTtcclxuICAgICAgICBzcmMgKz0gY29uZmlnLmxhdW5jaGVyLnNyY0VuZDtcclxuICAgICAgICBET01WYXJpYWJsZXMuc2NyaXB0Q29kZS5pbm5lckhUTUwgPSBzcmM7XHJcbiAgICB9XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBjb25maWcubGF1bmNoZXIuYWZ0ZXIubWFwKChmdW5jdGlvbiBjcmVhdGVTY3JpcHRQYXJ0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIERPTVZhcmlhYmxlc1tlbGVtZW50XSA9ICBnZXRFbGVtZW50KGNvbmZpZy5sYXVuY2hlci5wYXR0ZXJuICsgZWxlbWVudCwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICBET01WYXJpYWJsZXNbZWxlbWVudF0uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGNyZWF0ZVNjcmlwdC5iaW5kKHRoYXQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiBjbG9zZUFwcCAoKSB7XHJcbiAgICAgICAgRE9NVmFyaWFibGVzID0ge307XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTGF1bmNoZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCBhYm91dCAqL1xyXG4vLyBTVFVCIC8vXHJcbnZhciBhYm91dCA9IChmdW5jdGlvbiBjcmVhdGVBYm91dFBhZ2VBcHAgKCkge1xyXG4gICAgZnVuY3Rpb24gQWJvdXQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIEFib3V0LnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIEFib3V0LnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uIGNsb3NlQXBwICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgQWJvdXQoKTtcclxuXHJcbn0pKCk7XHJcbi8qIGdsb2JhbCBkYXNoYm9hcmQgKi9cclxuLyogZ2xvYmFsIGxhdW5jaGVyICovXHJcbi8qIGdsb2JhbCBhYm91dCAqL1xyXG4vKiBnbG9iYWwgY2xlYXJFbGVtZW50Q29udGVudCAqL1xyXG4vKiBnbG9iYWwgdmlld0ZhY3RvcnkgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIG1haW5Db250cm9sbGVyID0gKGZ1bmN0aW9uIGNyZWF0ZU1haW5Db250cm9sbGVyIChjb25maWcpIHtcclxuXHJcbiAgICB2YXIgbWF0Y2hlc0h0bWxQYXRoID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogY29uZmlnLnJvdXRlci5EQVNIQk9BUkRfSFRNTF9QQVRILFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGNvbmZpZy5yb3V0ZXIuTEFVTkNIRVJfSFRNTF9QQVRILFxyXG4gICAgICAgIGFib3V0OiBjb25maWcucm91dGVyLkFCT1VUX0hUTUxfUEFUSFxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIGNsb3NlRnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLmNsb3NlQXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5jbG9zZUFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuY2xvc2VBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHN0YXJ0RnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLnN0YXJ0QXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5zdGFydEFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuc3RhcnRBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIgKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gaGFzQ2hhbmdlRXZlbnRBZGQgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhhdC5oYW5kbGVVcmwoZWxlbWVudC5uZXdVUkwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDQn9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLIC0g0YHRh9C40YLQsNGC0Ywg0YHQvtGB0YLQvtGP0L3QuNC1INC4INC30LDQv9GD0YHRgtC40YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQulxyXG4gICAgICAgIHRoYXQuaGFuZGxlVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIjZGFzaGJvYXJkXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiBVUkxcclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVVcmwgPSBmdW5jdGlvbiBoYW5kbGVVcmwodXJsKSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSBudWxsO1xyXG4gICAgICAgIGlmKHVybC5pbmRleE9mKFwiI1wiKSA9PT0gLTEpe1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaGFzaCA9IHVybC5zcGxpdCgnIycpLnBvcCgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VQcmV2aW91c1BhZ2UoaGFzaCk7XHJcblxyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhLicgKyBjb25maWcucm91dGVyLk5BVklHQVRJT05fQUNUSVZFX0NTUykuZm9yRWFjaChmdW5jdGlvbiByZW1vdmVDbGFzc0FjdGl2ZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLnJvdXRlci5OQVZJR0FUSU9OX0FDVElWRV9DU1MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmPVwiIycgKyBoYXNoICsgJ1wiXScpLmZvckVhY2goZnVuY3Rpb24gYWRkQ2xhc3NBY3RpdmUgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5yb3V0ZXIuTkFWSUdBVElPTl9BQ1RJVkVfQ1NTKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpO1xyXG4gICAgICAgIHZpZXdGYWN0b3J5LmNyZWF0ZVZpZXcobWF0Y2hlc0h0bWxQYXRoW2hhc2hdLCBudWxsLCBjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpLnRoZW4oZnVuY3Rpb24gaW52b2tlU3RhcnRGdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0RnVuY3Rpb25zW2hhc2hdKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VQcmV2aW91c1BhZ2UgPSBmdW5jdGlvbiBjbG9zZVByZXZpb3VzUGFnZShoYXNoKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoY2xvc2VGdW5jdGlvbnMpLm1hcChmdW5jdGlvbiBpbnZva2VDbG9zZUZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYoa2V5ICE9PSBoYXNoKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUZ1bmN0aW9uc1trZXldKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNYWluQ29udHJvbGxlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcblxyXG5tYWluQ29udHJvbGxlci5zdGFydEFwcCgpOyJdfQ==
