var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?",srcEnd:"'&gt&lt/script&gt"},userList:{USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online"},chatSettings:{typeOfRequest:"fetch"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},interval:{UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e4},router:{ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",ADMIN_NAME:"Admin",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var r=s?"#":".";return t?document.querySelectorAll(r+e):document.querySelector(r+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,r){var n;return 1<e.length&&(t<(n=function(e,t,s,r){for(var n,o,a,i,u=e[Math.floor((s+t)/2)][r],c=t,l=s;c<=l;){for(;e[c][r]>u;)c++;for(;e[l][r]<u;)l--;c<=l&&(a=l,i=(n=e)[o=c],n[o]=n[a],n[a]=i,c++,l--)}return c}(e,t,s,r))-1&&this.quickSort(e,t,n-1,r),n<s&&this.quickSort(e,n,s,r)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.requestFetch=function(e,t,s,r){return fetch(e,{headers:{Accept:r,"Content-Type":r},method:s,body:t}).then(function(e){return"application/json"===r?e.json():e.text()})},s.prototype.requestXMR=function(r,n,o,a){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(o,r,!0),s.setRequestHeader("Content-Type",a),s.onload=function(){e("application/json"===a?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},n?s.send(n):s.send()})},t=new s,"fetch"===e.typeOfRequest?{request:t.requestFetch}:{request:t.requestXMR}}(dataConnectorConfig),dataSource=function(n){var e;function t(){n=n}return t.prototype.createRequestPath=function(e,t,s){var r=e+"/users";return null!==t&&(r+="/"+t),null!==s&&(r+="/"+s),r+=".json"},t.prototype.getHTML=function(e){return n.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},t.prototype.getUserData=function(e){var s={},t=this.createRequestPath(dataBaseUrl,e,null);return n.request(t,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},t.prototype.getSettingField=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,t);return n.request(s,null,"GET","application/json")},t.prototype.setSettingField=function(e,t,s){var r=this.createRequestPath(dataBaseUrl,e,t);return n.request(r,JSON.stringify(s),"PUT","application/json")},t.prototype.sendMessage=function(e,t){var s=this.createRequestPath(dataBaseUrl,e,"messages"),r=JSON.stringify({date:t.date,message:t.message,title:"message",user:t.sender,itIsRead:t.read});return n.request(s,r,"POST","application/json")},t.prototype.getAllUsers=function(){var s={},e=this.createRequestPath(dataBaseUrl,null,null);return n.request(e,null,"GET","application/json").then(function(t){t&&Object.keys(t).map(function(e){return s[e]=t[e],!0})}).then(function(){return s})},{usersAPI:{getUserData:(e=new t).getUserData.bind(e),sendMessage:e.sendMessage.bind(e),setField:e.setSettingField.bind(e),getField:e.getSettingField.bind(e),getAllUsers:e.getAllUsers.bind(e)},commonAPI:{getHTML:e.getHTML.bind(e)}}}(dataConnector),viewFactory=function(r){function e(){}return e.prototype.createView=function(s,r,n){var o=this;return new Promise(function(e,t){s?(r&&o.includeViewCssToPage(o.createCSSLink(r,"stylesheet","text/css","touch-soft-chat-css")),e(o.includeViewHTMLToPage(s,n))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return r.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,r){var n=document.createElement("link");return r&&n.setAttribute("id",r),t&&n.setAttribute("rel",t),s&&n.setAttribute("type",s),n.setAttribute("href",e),n},new e}(dataSource),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,r){var n=this.createMessageContainerDiv(r,s),o=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),a=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return n.appendChild(o),n.appendChild(a),n.appendChild(i),n},e.prototype.getMessageObjectsForMarkAsRead=function(e,t){var s,r=[],n=e||u.currentUserSettings.userName,o=t||u.currentUserSettings.userId;for(s=this.messageList.length-1;0<=s;s--)if(this.messageList[s].sender!==n){if(this.messageList[s].read)break;r.push({userId:o,fieldName:"messages/"+this.messageList[s].id+"/itIsRead",fieldValue:!0})}return r},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var r=document.createElement("div");return s.forEach(function(e){r.classList.add(e)}),r.innerHTML=e,r},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(r){function e(){}function n(e,t,s,r,n){return{sender:s,message:e,read:r,date:t,id:n}}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.getUserData=function(e){return dataSource.usersAPI.getUserData(e).then(function(t){if(r.currentUserSettings.userName=t.userName,r.currentUserSettings.isMinimize=t.isMinimize,t.messages){var e,s=[];Object.keys(t.messages).map(function(e){s.push(n(t.messages[e].message,t.messages[e].date,t.messages[e].user,t.messages[e].itIsRead,e))}),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}})},e.prototype.createNewUserProfileToDataBase=function(){var t=this;Object.keys(r.currentUserSettings).map(function(e){t.saveSettingField(e)})},e.prototype.saveSettingField=function(e){this.saveUserSettingsToDataSource([{userId:r.currentUserSettings.userId,fieldName:e,fieldValue:r.currentUserSettings[e]}])},e.prototype.sendMessage=function(e){var t,s,r=n(this.getMessageFromInputElement(),(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),e,!1);messageListManager.addMessageToMessageList(r),messageListManager.displayMessages(),this.saveMessageToDataSource(r)},e.prototype.getMessageFromInputElement=function(){var e=getElement(r.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&this.saveUserSettingsToDataSource(e)},e.prototype.saveMessageToDataSource=function(e){if(e.sender===r.currentUserSettings.userName){var t=[{userId:r.currentUserSettings.userId,fieldName:"sendNewMessage",fieldValue:!0}];this.saveUserSettingsToDataSource(t)}dataSource.usersAPI.sendMessage(r.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setField(e.userId,e.fieldName,e.fieldValue)})},new e}(mainConfig),userListManager=function(o,e){function t(){this.uList={}}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div");return s.classList.add(o.userList.USER_ELEMENT_CSS_CLASS),r.classList.add(o.userList.USER_ID_ELEMENT_CSS_CLASS),r.innerHTML=e,t?n.classList.add(o.userList.USER_INDICATOR_CSS_CLASS_ONLINE):n.classList.add(o.userList.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(r),s.appendChild(n),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var r=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,r),online:r,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.getUserFromUserListById=function(t){var s=this,r=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(r=e),!0}),r},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=o.interval.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(o.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,o.currentDashboardCondition.sortBy)},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(o.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(o.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),dashboard=function(n,e,s,o,t){var r=[];function a(){}return a.prototype.startApp=function(){o.setup(n,t),s.setup(n),this.setupUsersListBlock(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions()},a.prototype.saveCurrentConditionToLocalStorage=function(){var e=JSON.stringify({filter:n.currentDashboardCondition.filterBy,sort:n.currentDashboardCondition.sortBy,currentUserId:n.currentUserSettings.userId});localStorage.setItem(n.LOCAL_STORAGE_NAME,e)},a.prototype.getCurrentUserIdFromLocalStorage=function(){var e=localStorage.getItem(n.LOCAL_STORAGE_NAME),t=null;return e&&(t=JSON.parse(e),n.currentDashboardCondition.filterBy=t.filter,n.currentDashboardCondition.sortBy=t.sort,n.currentUserSettings.userId=t.currentUserId),t},a.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(n.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(n.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(n.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(n.currentUserSettings.userId)))},a.prototype.filter=function(){n.currentDashboardCondition.filterBy=getElement(n.DOM.CSS_FILTER_INPUT_ID).value,this.saveCurrentConditionToLocalStorage(),o.filterByName(n.currentDashboardCondition.filterBy),o.displayUsers()},a.prototype.sort=function(){n.currentDashboardCondition.sortBy=getElement(n.DOM.CSS_SORT_SELECT_ID).value,this.saveCurrentConditionToLocalStorage(),o.sortUsersByField(),o.displayUsers()},a.prototype.setupUsersListBlock=function(e){this.setupUsersListeners(e)},a.prototype.setupUsersListeners=function(e){var t=this;return this.getAcessToUsersList(e).then(function(){Array.from(n.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})})},a.prototype.getAcessToUsersList=function(e){return this.displayUsersList(e).then(function(){n.users=getElement(n.userList.USER_ELEMENT_CSS_CLASS,!0)})},a.prototype.displayUsersList=function(e){var t=this;return this.setUsersListToUsersModule(e).then(function(){o.displayUsers()}).then(function(){t.toggleNewMessageIndicatorToUser()})},a.prototype.setUsersListToUsersModule=function(t){var s=this;return t?new Promise(function(e){e(o.setUserList(t))}):this.getUserList().then(function(e){o.setUserList(e)}).then(function(){var e=s.getCurrentUserIdFromLocalStorage();s.localSettingsSetup(e)})},a.prototype.getUserList=function(){var s=[];return e.usersAPI.getAllUsers().then(function(t){Object.keys(t).map(function(e){return o.addUserToUsersArray(t[e],e,s),!0})}).then(function(){return s})},a.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},a.prototype.startConversationWithUser=function(e){var t=this;n.currentUserSettings.userId=e,s.getUserData(e).then(function(){getElement(n.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.remove(n.INVISIBLE_CLASS),t.saveCurrentConditionToLocalStorage()})},a.prototype.updateUsers=function(){var s=this,r=[];e.usersAPI.getAllUsers().then(function(t){Object.keys(t).map(function(e){return o.addUserToUsersArray(t[e],e,r),n.currentUserSettings.userId&&s.updateUserMessagesAndDisplayIt(),!0})}).then(function(){o.uList=r,n.currentDashboardCondition.filterBy&&s.filter(),n.currentDashboardCondition.sortBy&&s.sort(),s.setupUsersListeners(r)})},a.prototype.updateUserMessagesAndDisplayIt=function(){s.getUserData(n.currentUserSettings.userId),this.markMessageFromUserAsRead(n.currentUserSettings.userId)},a.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(n.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,n.ADMIN_NAME)),getElement(n.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(n.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(n.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e))},a.prototype.markMessageFromUserAsRead=function(e){var t=o.getUserFromUserListById(e);o.uList[t].sendNewMessage=!1,s.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},a.prototype.closeConversation=function(){getElement(n.DOM.CSS_CHAT_CONTAINS_BLOCK_STYLE).classList.add(n.INVISIBLE_CLASS),n.currentUserSettings.userId=null,this.saveCurrentConditionToLocalStorage()},a.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(o.uList).map(function(e){return t=o.uList[e].userElement.getElementsByClassName(n.CSS_HAVE_NEW_MESSAGE_STYLE)[0],o.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(n.CSS_HAVE_NEW_MESSAGE_STYLE),o.uList[e].userElement.appendChild(t)),!o.uList[e].sendNewMessage&&t&&o.uList[e].userElement.removeChild(t),!0})},a.prototype.setupIntervalFunctions=function(){var e=this;r.push(setInterval(function(){e.updateUsers()},n.interval.UPDATE_USERS_TIME))},a.prototype.closeApp=function(){r.forEach(function(e){clearInterval(e)})},new a}(mainConfig,dataSource,userDataManager,userListManager,sorter),launcher=function(s){var a={};function e(){}var r={chatTitle:{typeOfValue:"value"},chatUrl:{typeOfValue:"value"},chatClass:{typeOfValue:"value"},chatPositionSelect:{typeOfValue:"value"},allowMinimize:{typeOfValue:"checked"},allowDrag:{typeOfValue:"checked"},showTime:{typeOfValue:"checked"},requireName:{typeOfValue:"checked"},networkRadioXMR:{typeOfValue:"checked",true:"XHR",false:"fetch"}};return e.prototype.getDataFromElement=function(s){var r,n="",o=this;return Object.keys(a).map(function(e,t){s[e]&&(0<t?(r=a[e].getAttribute("type"),n+="'&"+e+"='"+o.getElementValue(e,r)):n+=e+"='"+o.getElementValue(e))}),n.length<1&&(n=null),n},e.prototype.getElementValue=function(e,t){var s=a[e][r[e].typeOfValue];return"radio"===t?r[e][s]:s},e.prototype.startApp=function(){var t=this;s.launcher.after.map(function(e){a[e]=getElement(s.launcher.pattern+e,!1,!0),a[e].addEventListener("input",function(){var e=s.launcher.srcStart+this.getDataFromElement(r);e+=s.launcher.srcEnd,a.scriptCode.innerHTML=e}.bind(t))})},e.prototype.closeApp=function(){a={}},new e}(mainConfig),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),mainController=function(s){var r={dashboard:s.router.DASHBOARD_HTML_PATH,configuration:s.router.LAUNCHER_HTML_PATH,about:s.router.ABOUT_HTML_PATH},n={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},o={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function e(){}return e.prototype.startApp=function(){var t=this;window.addEventListener("hashchange",function(e){t.handleUrl(e.newURL)}),t.handleUrl(window.location.href+"#dashboard")},e.prototype.handleUrl=function(e){var t;-1!==e.indexOf("#")&&(t=e.split("#").pop(),this.closePreviousPage(t),document.querySelectorAll("a."+s.router.NAVIGATION_ACTIVE_CSS).forEach(function(e){e.classList.remove(s.router.NAVIGATION_ACTIVE_CSS)}),document.querySelectorAll('a[href="#'+t+'"]').forEach(function(e){e.classList.add(s.router.NAVIGATION_ACTIVE_CSS)}),clearElementContent(s.router.CONTENT_CLASS),viewFactory.createView(r[t],null,s.router.CONTENT_CLASS).then(function(){o[t]()}))},e.prototype.closePreviousPage=function(t){Object.keys(n).map(function(e){e!==t&&n[e]()})},new e}(mainConfig);mainController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwibGF1bmNoZXIiLCJwYXR0ZXJuIiwiYWZ0ZXIiLCJzcmNTdGFydCIsInNyY0VuZCIsInVzZXJMaXN0IiwiVVNFUl9FTEVNRU5UX0NTU19DTEFTUyIsIlVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1MiLCJVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT0ZGTElORSIsIlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PTkxJTkUiLCJjaGF0U2V0dGluZ3MiLCJ0eXBlT2ZSZXF1ZXN0IiwiY3VycmVudFVzZXJTZXR0aW5ncyIsInVzZXJJZCIsInVzZXJOYW1lIiwiY3VycmVudERhc2hib2FyZENvbmRpdGlvbiIsImZpbHRlckJ5Iiwic29ydEJ5IiwiaW50ZXJ2YWwiLCJVUERBVEVfVVNFUlNfVElNRSIsIk9OTElORV9JTlRFUlZBTCIsInJvdXRlciIsIkFCT1VUX0hUTUxfUEFUSCIsIkxBVU5DSEVSX0hUTUxfUEFUSCIsIkRBU0hCT0FSRF9IVE1MX1BBVEgiLCJDT05URU5UX0NMQVNTIiwiTkFWSUdBVElPTl9BQ1RJVkVfQ1NTIiwibWVzc2FnZXMiLCJDU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyIsIkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUiIsIkNTU19NRVNTQUdFX0NPTlRBSU5FUiIsIkNTU19DSEFUX01FU1NBR0VfU0VOREVSX05BTUUiLCJDU1NfQ0hBVF9NRVNTQUdFX0RBVEUiLCJDU1NfQ0hBVF9NRVNTQUdFIiwiSU5WSVNJQkxFX0NMQVNTIiwiREFUQV9CQVNFX1VSTCIsIkFETUlOX05BTUUiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsIkxPQ0FMX1NUT1JBR0VfTkFNRSIsIkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFIiwiZGF0YUJhc2VVcmwiLCJnZXRFbGVtZW50Iiwic2VsZWN0b3IiLCJpc0FsbCIsIml0SXNJZCIsInNlbGVjdG9yU3RhcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YUNvbm5lY3RvckNvbmZpZyIsInNvcnRlciIsIlNvcnRlciIsInByb3RvdHlwZSIsInF1aWNrU29ydCIsIml0ZW1zIiwibGVmdCIsInJpZ2h0Iiwic29ydEZpZWxkIiwiaW5kZXgiLCJsZW5ndGgiLCJmaXJzdEluZGV4Iiwic2Vjb25kSW5kZXgiLCJ0ZW1wIiwicGl2b3QiLCJNYXRoIiwiZmxvb3IiLCJpIiwiaiIsInBhcnRpdGlvbiIsInRoaXMiLCJjbGVhckVsZW1lbnRDb250ZW50IiwiZWxlbWVudFNlbGVjdG9yIiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImRhdGFDb25uZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnT2JqIiwiZGF0YUJhc2VDb25uZWN0b3IiLCJEYXRhQmFzZUNvbm5lY3RvciIsInJlcXVlc3RGZXRjaCIsInJlcXVlc3RQYXRoIiwicmVxdWVzdEJvZHkiLCJyZXF1ZXN0VHlwZSIsImNvbnRlbnRUeXBlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQWNjZXB0IiwiQ29udGVudC1UeXBlIiwibWV0aG9kIiwiYm9keSIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJ0ZXh0IiwicmVxdWVzdFhNUiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIkpTT04iLCJwYXJzZSIsIm9uZXJyb3IiLCJzdGF0dXNUZXh0Iiwic2VuZCIsInJlcXVlc3QiLCJkYXRhU291cmNlIiwiZGF0YVNvdXJjZUluc3RhbmNlIiwiRGF0YVNvdXJjZSIsImNyZWF0ZVJlcXVlc3RQYXRoIiwiZGF0YUJhc2VVUkwiLCJyZXF1ZXN0UG9zdGZpeCIsInBhdGgiLCJnZXRIVE1MIiwiZ2V0VXNlckRhdGEiLCJ1c2VyRGF0YSIsImRhdGEiLCJPYmplY3QiLCJrZXlzIiwibWFwIiwia2V5IiwiZ2V0U2V0dGluZ0ZpZWxkIiwiZmllbGROYW1lIiwic2V0U2V0dGluZ0ZpZWxkIiwidmFsdWUiLCJzdHJpbmdpZnkiLCJzZW5kTWVzc2FnZSIsIm1lc3NhZ2VPYmplY3QiLCJqc29uTWVzc2FnZSIsImRhdGUiLCJtZXNzYWdlIiwidGl0bGUiLCJ1c2VyIiwic2VuZGVyIiwiaXRJc1JlYWQiLCJyZWFkIiwiZ2V0QWxsVXNlcnMiLCJ1c2Vyc0RhdGFMaXN0IiwidXNlcnNBUEkiLCJiaW5kIiwic2V0RmllbGQiLCJnZXRGaWVsZCIsImNvbW1vbkFQSSIsInZpZXdGYWN0b3J5IiwiVmlld0ZhY3RvcnkiLCJjcmVhdGVWaWV3IiwiaHRtbFBhdGgiLCJjc3NQYXRoIiwiY29udGFpbmVyQ2xhc3MiLCJ0aGF0IiwiaW5jbHVkZVZpZXdDc3NUb1BhZ2UiLCJjcmVhdGVDU1NMaW5rIiwiaW5jbHVkZVZpZXdIVE1MVG9QYWdlIiwiRXJyb3IiLCJjb250YWluZXJEaXYiLCJodG1sIiwiaW5uZXJIVE1MIiwibGluayIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZpbGVQYXRoIiwicmVsIiwidHlwZSIsImlkIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsImNvbmZpZyIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwiRElTUExBWV9NRVNTQUdFX0RBVEUiLCJtZXNzYWdlU2VuZGVyRGl2IiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIm1lc3NhZ2VEaXYiLCJESVNQTEFZX01FU1NBR0UiLCJnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQiLCJyZWxhdGl2ZVVzZXJOYW1lIiwicmVsYXRpdmVVc2VySWQiLCJtZXNzYWdlc0lzUmVhZCIsInB1c2giLCJmaWVsZFZhbHVlIiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNEaXNwbGF5Iiwic3R5bGVDbGFzc2VzIiwiZGl2IiwiZm9yRWFjaCIsInN0eWxlIiwiY3JlYXRlTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqZWN0cyIsIm5ld01lc3NhZ2VMaXN0IiwidXBkYXRlTWVzc2FnZUxpc3QiLCJkaXNwbGF5TWVzc2FnZXMiLCJhZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCIsIm1lc3NhZ2VPYmoiLCJjbGVhckNoYXQiLCJ1c2VyRGF0YU1hbmFnZXIiLCJVc2VyRGF0YU1hbmFnZXIiLCJjcmVhdGVNZXNzYWdlT2JqZWN0IiwiaXNNaW5pbWl6ZSIsIm1lc3NhZ2VzT2JqZWN0IiwiY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlIiwic2F2ZVNldHRpbmdGaWVsZCIsInNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UiLCJzZW5kZXJOYW1lIiwibWludXRlcyIsImdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50IiwiRGF0ZSIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsImdldEhvdXJzIiwiY29uY2F0Iiwic2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UiLCJzZXRNZXNzYWdlQXNSZWFkIiwidXNlclNldHRpbmdzIiwic2V0dGluZ3MiLCJuZXdGaWVsZFNldHRpbmciLCJ1c2VyTGlzdE1hbmFnZXIiLCJVc2VyTGlzdE1hbmFnZXIiLCJ1TGlzdCIsImNyZWF0ZVVzZXJFbGVtZW50IiwiaXNPbmxpbmUiLCJ1c2VyRGl2IiwidXNlcklkRGl2IiwidXNlckluZGljYXRvciIsInNldFVzZXJMaXN0IiwidXNlckx1c3RPYmplY3QiLCJhZGRVc2VyVG9Vc2Vyc0FycmF5IiwidXNlcnNMaXN0IiwidXNlcklzT25saW5lIiwibGFzdE9ubGluZSIsInVzZXJFbGVtZW50Iiwib25saW5lIiwidmlzaWJsZSIsInNlbmROZXdNZXNzYWdlIiwicmVhZExhc3RNZXNzYWdlIiwiZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQiLCJ1c2VyTWFuYWdlciIsInVzZXJJbmRleCIsImxhc3RVc2VyT25saW5lVGltZSIsImdldFRpbWUiLCJmaWx0ZXJCeU5hbWUiLCJpbmRleE9mIiwic29ydFVzZXJzQnlGaWVsZCIsImRpc3BsYXlVc2VycyIsImVsZW0iLCJkYXNoYm9hcmQiLCJ1RGF0YU1hbmFnZXIiLCJ1TGlzdE1hbmFnZXIiLCJpbnRlcnZhbElkIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsInN0YXJ0QXBwIiwic2V0dXBVc2Vyc0xpc3RCbG9jayIsInNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMiLCJzZXR1cEludGVydmFsRnVuY3Rpb25zIiwic2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSIsInNlcmlhbENvbmRpdGlvbiIsImZpbHRlciIsInNvcnQiLCJjdXJyZW50VXNlcklkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNvbmRpdGlvbiIsImxvY2FsU2V0dGluZ3NTZXR1cCIsInN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIiLCJuZXdVc2VyTGlzdCIsInNldHVwVXNlcnNMaXN0ZW5lcnMiLCJnZXRBY2Vzc1RvVXNlcnNMaXN0IiwiQXJyYXkiLCJmcm9tIiwidXNlcnMiLCJhZGRFdmVudExpc3RlbmVyIiwidXNlckxpc3RlbmVyIiwiaW5uZXJUZXh0IiwiZGlzcGxheVVzZXJzTGlzdCIsInNldFVzZXJzTGlzdFRvVXNlcnNNb2R1bGUiLCJ0b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyIiwiZ2V0VXNlckxpc3QiLCJ1c2Vyc0xpc3RPYmplY3QiLCJtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkIiwicmVtb3ZlIiwidXBkYXRlVXNlcnMiLCJpbnRlcm1lZGlhdGVMaXN0IiwidXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0IiwiY2xvc2VDb252ZXJzYXRpb24iLCJuZXdNZXNzYWdlRGl2IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNldEludGVydmFsIiwiY2xvc2VBcHAiLCJjbGVhckludGVydmFsIiwiRE9NVmFyaWFibGVzIiwiTGF1bmNoZXIiLCJrZXlPZlZhbHVlIiwiY2hhdFRpdGxlIiwidHlwZU9mVmFsdWUiLCJjaGF0VXJsIiwiY2hhdENsYXNzIiwiY2hhdFBvc2l0aW9uU2VsZWN0IiwiYWxsb3dNaW5pbWl6ZSIsImFsbG93RHJhZyIsInNob3dUaW1lIiwicmVxdWlyZU5hbWUiLCJuZXR3b3JrUmFkaW9YTVIiLCJ0cnVlIiwiZmFsc2UiLCJnZXREYXRhRnJvbUVsZW1lbnQiLCJzcmMiLCJlbGVtZW50TmFtZSIsImdldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRWYWx1ZSIsIm5hbWUiLCJzY3JpcHRDb2RlIiwiYWJvdXQiLCJBYm91dCIsIm1haW5Db250cm9sbGVyIiwibWF0Y2hlc0h0bWxQYXRoIiwiY29uZmlndXJhdGlvbiIsImNsb3NlRnVuY3Rpb25zIiwic3RhcnRGdW5jdGlvbnMiLCJNYWluQ29udHJvbGxlciIsIndpbmRvdyIsImhhbmRsZVVybCIsIm5ld1VSTCIsImxvY2F0aW9uIiwiaHJlZiIsInVybCIsImhhc2giLCJzcGxpdCIsInBvcCIsImNsb3NlUHJldmlvdXNQYWdlIl0sIm1hcHBpbmdzIjoiQUFFQSxJQUFJQSxXQUFhLENBQ2JDLElBQUssQ0FFREMsb0JBQXFCLHNDQUVyQkMsOEJBQStCLGdDQUUvQkMsOEJBQStCLHVDQUUvQkMsNEJBQTZCLHNDQUU3QkMsb0JBQXFCLHdDQUVyQkMsbUJBQW9CLGlDQUd4QkMsU0FBVSxDQUNOQyxRQUFTLDJC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cEU3TixPQUFPQyxLQUFLbU4sR0FBZ0JsTixJQUFJLFNBQVVDLEdBQ25DQSxJQUFRME4sR0FDUFQsRUFBZWpOLFFBS3BCLElBQUltTixFQW5FTSxDQXFFbEJ0VixZQUVIaVYsZUFBZWpFIiwiZmlsZSI6ImRhc2hib2FyZEFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbmZpZ1xyXG5cclxudmFyIG1haW5Db25maWcgPSB7XHJcbiAgICBET006IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQvdC10L7QsdGF0L7QtNC40LzQviDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgVVNFUl9MSVNUX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlcnMtbGlzdFwiLFxyXG4gICAgICAgIC8vINCR0LvQvtC6INCyINC60L7RgtC+0YDRi9C5INC30LDQs9GA0YPQttCw0LXRgtGB0Y8g0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NIQVRfQ09OVEFJTlNfQkxPQ0tfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXRcIixcclxuICAgICAgICAvLyDQmtC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y4g0L/QviDQvdCw0LbQsNGC0LjRjlxyXG4gICAgICAgIENTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zZW5kLWJ1dHRvblwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEg0LrQvdC+0L/QutC4INC30LDQutGA0YvQstCw0Y7RidC10Lkg0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jbG9zZS1jaGF0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGE0LjQu9GM0YLRgNCw0YbQuNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX0ZJTFRFUl9JTlBVVF9JRDogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfZmlsdGVyLWlucHV0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGB0L7RgNGC0LjRgNC+0LLQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX1NPUlRfU0VMRUNUX0lEOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zb3J0XCJcclxuXHJcbiAgICB9LFxyXG4gICAgbGF1bmNoZXI6IHtcclxuICAgICAgICBwYXR0ZXJuOiBcInRvdWNoc29mdF9jaGF0LWxhdW5jaGVyX1wiLFxyXG4gICAgICAgIGFmdGVyIDogW1xyXG4gICAgICAgICAgICBcImNoYXRUaXRsZVwiLCBcImNoYXRVcmxcIiwgXCJjaGF0Q2xhc3NcIiwgXCJjaGF0UG9zaXRpb25TZWxlY3RcIixcclxuICAgICAgICAgICAgXCJhbGxvd01pbmltaXplXCIsIFwiYWxsb3dEcmFnXCIsIFwicmVxdWlyZU5hbWVcIiwgXCJzaG93VGltZVwiLCBcIm5ldHdvcmtSYWRpb1hNUlwiLFxyXG4gICAgICAgICAgICBcIm5ldHdvcmtSYWRpb0ZldGNoXCIsIFwic2NyaXB0Q29kZVwiXHJcbiAgICAgICAgXSxcclxuICAgICAgICBzcmNTdGFydDogXCImbHRzY3JpcHQgc3JjPSdodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL0hvbWV3b3JrXzIvbWFzdGVyL2pzL2NoYXQuanM/XCIsXHJcbiAgICAgICAgc3JjRW5kOiAgXCInJmd0Jmx0L3NjcmlwdCZndFwiXHJcbiAgICB9LFxyXG4gICAgdXNlckxpc3Q6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgdGLINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L7QsdGK0LXQutGC0L7QvCDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgVVNFUl9FTEVNRU5UX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlclwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPIGlkINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaWRcIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgtGLINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGB0YLQsNGC0YPRgdCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9mZmxpbmVcIixcclxuICAgICAgICBVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLW9ubGluZVwiXHJcbiAgICB9LFxyXG4gICAgY2hhdFNldHRpbmdzOiB7XHJcbiAgICAgICAgdHlwZU9mUmVxdWVzdDogXCJmZXRjaFwiXHJcbiAgICB9LFxyXG4gICAgY3VycmVudFVzZXJTZXR0aW5nczoge1xyXG4gICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICB1c2VyTmFtZTogbnVsbFxyXG4gICAgfSxcclxuXHJcbiAgICBjdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uOiB7XHJcbiAgICAgICAgZmlsdGVyQnk6IG51bGwsXHJcbiAgICAgICAgc29ydEJ5OiBudWxsXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBpbnRlcnZhbDoge1xyXG4gICAgICAgIFVQREFURV9VU0VSU19USU1FOiA1MDAwLFxyXG4gICAgICAgIE9OTElORV9JTlRFUlZBTDogMTIwMDAwXHJcbiAgICB9LFxyXG4gICAgcm91dGVyOiB7XHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBhYm91dFxyXG4gICAgICAgIEFCT1VUX0hUTUxfUEFUSDogXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2FwcC9odG1sL2Rhc2hib2FyZC9hYm91dC5odG1sXCIsXHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgTEFVTkNIRVJfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2NoYXRMYXVuY2hlci5odG1sXCIsXHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBkYXNoYm9hcmRcclxuICAgICAgICBEQVNIQk9BUkRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2Rhc2hib2FyZC5odG1sXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCwg0LIg0LrQvtGC0L7RgNGL0Lkg0LfQsNCz0YDRg9C20LDQtdGC0YHRjyDQvdC10L7QsdGF0L7QtNC40LzQsNGPINGH0LDRgdGC0Ywg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICAgIENPTlRFTlRfQ0xBU1M6IFwiY29udGVudFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBLCDQvtGC0LzQtdGH0LDRjtGJ0LjQuSDQsNC60YLQuNCy0L3Rg9GOINGB0YLRgNCw0L3QuNGG0YMg0LIg0L/QsNC90LXQu9C4INC90LDQstC40LPQsNGG0LjQuFxyXG4gICAgICAgIE5BVklHQVRJT05fQUNUSVZFX0NTUzogXCJuYXZpZ2F0aW9uLWFjdGl2ZVwiXHJcbiAgICB9LFxyXG4gICAgbWVzc2FnZXM6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDQtNC70Y8g0Y3Qu9C10LzQtdC90LDRgiDRgSDRgdC+0L7QsdGJ0LXQvdC40LUsINC10YHQu9C4INGO0LfQtdGAINC90LUg0L/RgNC+0YfQuNGC0LDQuyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfbWVzc2FnZS1ub3QtcmVhZFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VzXCIsXHJcblxyXG4gICAgICAgIC8vIG1lc3NhZ2VcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC90LDRhdC+0LTQuNGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8s0LTQsNGC0LAg0Lgg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfTUVTU0FHRV9DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1lbGVtZW50c1wiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2Utc2VuZGVyXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQtNCw0YLRgyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX0RBVEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1kYXRlXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VcIlxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8g0LrQu9Cw0YHRgSDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0LBcclxuICAgIElOVklTSUJMRV9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfaW52aXNpYmxlLWVsZW1lbnRcIixcclxuXHJcbiAgICBEQVRBX0JBU0VfVVJMOiBcImh0dHBzOi8vb25saW5lY29uc3VsdGFudHdlYmFwcC5maXJlYmFzZWlvLmNvbVwiLFxyXG5cclxuXHJcbiAgICBBRE1JTl9OQU1FOiBcIkFkbWluXCIsXHJcblxyXG4gICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINC/0LXRgNC10LQg0L7RgtC/0YDQsNCy0LrQvtC5INGO0LfQtdGA0YNcclxuICAgIENTU19DVVJSRU5UX0lOUFVUX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF90ZXh0YXJlYS1mb3ItbWVzc2FnZVwiLFxyXG5cclxuICAgIExPQ0FMX1NUT1JBR0VfTkFNRTogXCJjdXJyZW50Q29uZGl0aW9uXCIsXHJcblxyXG4gICAgLy8g0LTQu9GPINC90L7QstGL0YUg0YHQvtC+0LHRidC10L3QuNC5INC+0YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcclxuICAgIC8vINCV0YHQu9C4INGO0LfQtdGAINC/0YDQuNGB0LvQsNC7INGB0L7QvtC+0LHRidC10L3QuNC1LCDQvdCwINGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INCy0LXRiNCw0LXRgtGB0Y8g0Y3RgtC+0YIg0YHRgtC40LvRjFxyXG4gICAgQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXItaGF2ZS1uZXctbWVzc2FnZVwiXHJcblxyXG5cclxuXHJcblxyXG59O1xyXG52YXIgZGF0YUJhc2VVcmwgPSBtYWluQ29uZmlnLkRBVEFfQkFTRV9VUkw7XHJcblxyXG52YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tRE9NIChzZWxlY3RvciwgaXNBbGwsIGl0SXNJZCkge1xyXG4gICAgdmFyIHNlbGVjdG9yU3RhcnQgPSAoaXRJc0lkKSA/IFwiI1wiIDogXCIuXCI7XHJcbiAgICBpZihpc0FsbCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yU3RhcnQgKyBzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG59O1xyXG5cclxuXHJcbnZhciBkYXRhQ29ubmVjdG9yQ29uZmlnID0ge1xyXG4gICAgdHlwZU9mUmVxdWVzdDogbWFpbkNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdFxyXG59O1xyXG5cclxuLy8gc2VydmljZVxyXG5cclxuLyogZXhwb3J0ZWQgc29ydGVyICovXHJcbnZhciBzb3J0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlTmV3U29ydGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlcigpIHt9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU29ydGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3dhcChpdGVtcywgZmlyc3RJbmRleCwgc2Vjb25kSW5kZXgpIHtcclxuICAgICAgICB2YXIgdGVtcCA9IGl0ZW1zW2ZpcnN0SW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW2ZpcnN0SW5kZXhdID0gaXRlbXNbc2Vjb25kSW5kZXhdO1xyXG4gICAgICAgIGl0ZW1zW3NlY29uZEluZGV4XSA9IHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcGFydGl0aW9uKGl0ZW1zLCBsZWZ0LCByaWdodCwgc29ydEZpZWxkKSB7XHJcbiAgICAgICAgdmFyIHBpdm90ID0gaXRlbXNbTWF0aC5mbG9vcigocmlnaHQgKyBsZWZ0KSAvIDIpXVtzb3J0RmllbGRdO1xyXG4gICAgICAgIHZhciBpID0gbGVmdDtcclxuICAgICAgICB2YXIgaiA9IHJpZ2h0O1xyXG5cclxuICAgICAgICB3aGlsZSAoaSA8PSBqKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdGVtc1tpXVtzb3J0RmllbGRdID4gcGl2b3QpIHtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoaXRlbXNbal1bc29ydEZpZWxkXSA8IHBpdm90KSB7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPD0gaikge1xyXG4gICAgICAgICAgICAgICAgc3dhcChpdGVtcywgaSwgaik7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBqLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ydGVyLnByb3RvdHlwZS5xdWlja1NvcnQgPSBmdW5jdGlvbiBxdWlja1NvcnQoXHJcbiAgICAgICAgaXRlbXMsXHJcbiAgICAgICAgbGVmdCxcclxuICAgICAgICByaWdodCxcclxuICAgICAgICBzb3J0RmllbGRcclxuICAgICkge1xyXG4gICAgICAgIHZhciBpbmRleDtcclxuICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHBhcnRpdGlvbihpdGVtcywgbGVmdCwgcmlnaHQsIHNvcnRGaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgaW5kZXggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgbGVmdCwgaW5kZXggLSAxLCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1aWNrU29ydChpdGVtcywgaW5kZXgsIHJpZ2h0LCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZVNvcnRlcigpO1xyXG59KSgpO1xyXG4vLyDQntGH0LjRidCw0LXRgiBET00g0YHQvtC00LXRgNC20LDRidC40Lkg0Y3Qu9C10LzQtdC90YLRiyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbmZ1bmN0aW9uIGNsZWFyRWxlbWVudENvbnRlbnQoZWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGRhdGFiYXNlXHJcblxyXG4vLyDQnNC+0LTRg9C70Ywg0L/RgNC10LTQvtGB0YLQsNCy0LvRj9C10YIg0YHQv9C+0YHQvtCxINC+0YLQv9GA0LDQstC60Lgg0LfQsNC/0YDQvtGB0LAg0Log0LjRgdGC0L7Rh9C90LjQutGDINC00LDQvdC90YvRhVxyXG4vLyDQlNC70Y8g0YDQtdC60LLQtdGB0YLQsCDQvdC10L7QsdGF0L7QtNC40Lwg0L/Rg9GC0YwsINGC0LXQu9C+INC30LDQv9GA0L7RgdCwLCDRgtC40L8g0LfQsNC/0YDQvtGB0LBcclxuLy8gcmVxdWVzdCDQstC+0LfQstGA0LDRidCw0LXRgiBQcm9taXNlXHJcbnZhciBkYXRhQ29ubmVjdG9yID0gKGZ1bmN0aW9uIGdldERhdGFTb3VyY2VBUEkoZGF0YUNvbm5lY3RvckNvbmZpZ09iaikge1xyXG4gICAgdmFyIGRhdGFCYXNlQ29ubmVjdG9yO1xyXG4gICAgdmFyIGRhdGFCYXNlQVBJO1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFCYXNlQ29ubmVjdG9yKCkge31cclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24gcmVxdWVzdEZldGNoKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2gocmVxdWVzdFBhdGgsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQWNjZXB0OiBjb250ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IGNvbnRlbnRUeXBlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiBnZXRSZXNwb25zZUpTT04ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYoY29udGVudFR5cGUgPT09IFwiYXBwbGljYXRpb24vanNvblwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0WE1SID0gZnVuY3Rpb24gcmVxdWVzdFhNUihcclxuICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICByZXF1ZXN0Qm9keSxcclxuICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICBjb250ZW50VHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIHJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4ocmVxdWVzdFR5cGUsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgY29udGVudFR5cGUpO1xyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gbG9hZENhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiBlcnJvckNhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoeGhyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEJvZHkpIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKHJlcXVlc3RCb2R5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZGF0YUJhc2VDb25uZWN0b3IgPSBuZXcgRGF0YUJhc2VDb25uZWN0b3IoKTtcclxuICAgIGlmIChkYXRhQ29ubmVjdG9yQ29uZmlnT2JqLnR5cGVPZlJlcXVlc3QgPT09IFwiZmV0Y2hcIikge1xyXG4gICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0RmV0Y2hcclxuICAgICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRhQmFzZUFQSSA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdFhNUlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGFCYXNlQVBJO1xyXG59KShkYXRhQ29ubmVjdG9yQ29uZmlnKTtcclxuLy8g0JzQvtC00YPQu9GMINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFXHJcbi8vINCS0YHQtSBBUEkg0YTRg9C90LrRhtC40Lgg0LLQvtC30LLRgNCw0YnQsNGO0YIg0L/RgNC+0LzQuNGB0YtcclxudmFyIGRhdGFTb3VyY2UgPSAoZnVuY3Rpb24gY3JlYXRlRGF0YVNvdXJjZSAoZGF0YUNvbm5lY3Rvcikge1xyXG4gICAgdmFyIGRhdGFTb3VyY2VJbnN0YW5jZTtcclxuICAgIHZhciBkYXRhU291cmNlQVBJO1xyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2UoKSB7XHJcbiAgICAgICAgZGF0YUNvbm5lY3RvciA9IGRhdGFDb25uZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuY3JlYXRlUmVxdWVzdFBhdGggPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0UGF0aChcclxuICAgICAgICBkYXRhQmFzZVVSTCxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgcmVxdWVzdFBvc3RmaXhcclxuICAgICkge1xyXG4gICAgICAgIHZhciBwYXRoID0gZGF0YUJhc2VVUkwgKyBcIi91c2Vyc1wiO1xyXG4gICAgICAgIGlmICh1c2VySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQb3N0Zml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UG9zdGZpeDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF0aCArPSBcIi5qc29uXCI7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldEhUTUwgPSBmdW5jdGlvbiBnZXRIVE1MIChyZXF1ZXN0UGF0aCkge1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcIkdFVFwiLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04J1xyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCg0LDQsdC+0YLQsCDRgSDQmtCe0J3QmtCg0JXQotCd0KvQnCDRjtC30LXRgNC+0LxcclxuXHJcbiAgICAvLyDQn9C+0LvRg9GH0LjRgtGMINCy0YHQtSDRgdC+0L7QsdGJ0LXQvdC40Y8g0Lgg0L3QsNGB0YLRgNC+0LnQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBmdW5jdGlvbiBnZXRVc2VyRGF0YSh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdXNlckRhdGEgPSB7fTtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yXHJcbiAgICAgICAgICAgIC5yZXF1ZXN0KHJlcXVlc3RQYXRoLCBudWxsLCBcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc2V0VXNlckRhdGEoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24gc2V0RGF0YSAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhW2tleV0gPSBkYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiByZXR1cm5Vc2Vyc0xpc3QoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlckRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQn9C+0LvRg9GH0LDQtdGCINC+0L/RgCDQv9C+0LvQtSDQvdCw0YHRgtGA0L7QtdC6INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0U2V0dGluZ0ZpZWxkID0gZnVuY3Rpb24gZ2V0QW1vdW50T2ZOb1JlYWRNZXNzYWdlKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBmaWVsZE5hbWVcclxuICAgICkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgZmllbGROYW1lKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgXCJHRVRcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXRgiDQvtC/0YAg0L/QvtC70LUg0L3QsNGB0YLRgNC+0LXQuiDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLnNldFNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIGdldEFtb3VudE9mTm9SZWFkTWVzc2FnZShcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgZmllbGROYW1lLFxyXG4gICAgICAgIHZhbHVlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIGZpZWxkTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcclxuICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGC0L/RgNCw0LLQuNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjlxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZVRvVXNlcihcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgbWVzc2FnZU9iamVjdFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBcIm1lc3NhZ2VzXCIpO1xyXG4gICAgICAgIHZhciBqc29uTWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlOiBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJtZXNzYWdlXCIsXHJcbiAgICAgICAgICAgICAgICB1c2VyOiBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIGl0SXNSZWFkOiBtZXNzYWdlT2JqZWN0LnJlYWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IucmVxdWVzdChcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgICAgIGpzb25NZXNzYWdlLFxyXG4gICAgICAgICAgICBcIlBPU1RcIixcclxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQoNCw0LHQvtGC0LAg0YHQviDQktCh0JXQnNCYINGO0LfQtdGA0LDQvNC4XHJcblxyXG4gICAgLy8g0L/QvtC70YPRh9C40YLRjCDQstGB0LUg0LTQsNC90L3Ri9C1LCDQstGB0LXRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuVxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0QWxsVXNlcnMgPSBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcclxuICAgICAgICB2YXIgdXNlcnNEYXRhTGlzdCA9IHt9O1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yXHJcbiAgICAgICAgICAgIC5yZXF1ZXN0KHJlcXVlc3RQYXRoLCBudWxsLCBcIkdFVFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc2V0VXNlcnNMaXN0KGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIHNldERhdGEoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzRGF0YUxpc3Rba2V5XSA9IGRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcmV0dXJuVXNlcnNMaXN0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJzRGF0YUxpc3Q7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXQvCBpbnN0YW5jZSDQvtCx0YrQtdC60YLQsCwg0LfQsNC00LDQtdC8IEFQSVxyXG5cclxuICAgIGRhdGFTb3VyY2VJbnN0YW5jZSA9IG5ldyBEYXRhU291cmNlKCk7XHJcbiAgICBkYXRhU291cmNlQVBJID0ge1xyXG4gICAgICAgIHVzZXJzQVBJOiB7XHJcbiAgICAgICAgICAgIGdldFVzZXJEYXRhOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0VXNlckRhdGEuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBzZW5kTWVzc2FnZTogZGF0YVNvdXJjZUluc3RhbmNlLnNlbmRNZXNzYWdlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2VcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgc2V0RmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXRTZXR0aW5nRmllbGQuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBnZXRGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLmdldFNldHRpbmdGaWVsZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJzOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0QWxsVXNlcnMuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21tb25BUEk6IHtcclxuICAgICAgICAgICAgZ2V0SFRNTDogZGF0YVNvdXJjZUluc3RhbmNlLmdldEhUTUwuYmluZChkYXRhU291cmNlSW5zdGFuY2UpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZGF0YVNvdXJjZUFQSTtcclxufSkoZGF0YUNvbm5lY3Rvcik7XHJcblxyXG4vLyB2aWV3XHJcblxyXG52YXIgdmlld0ZhY3RvcnkgPSAoZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBWaWV3RmFjdG9yeSAoKSB7fVxyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVWaWV3ID0gZnVuY3Rpb24gY3JlYXRlQ2hhdFZpZXcgKGh0bWxQYXRoLCBjc3NQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmKGh0bWxQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjc3NQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbmNsdWRlVmlld0Nzc1RvUGFnZSh0aGF0LmNyZWF0ZUNTU0xpbmsoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc1BhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVzaGVldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRleHQvY3NzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG91Y2gtc29mdC1jaGF0LWNzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoYXQuaW5jbHVkZVZpZXdIVE1MVG9QYWdlKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImh0bWxQYXRoIGlzIG51bGwuIFBsZWFzZSBhZGQgaHRtbFBhdGhcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0hUTUxUb1BhZ2UgPSBmdW5jdGlvbiBpbmNsdWRlQ2hhdEhUTUxUb1BhZ2UgKGh0bWxQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciBjb250YWluZXJEaXYgPSAoY29udGFpbmVyQ2xhc3MpID8gZ2V0RWxlbWVudChjb250YWluZXJDbGFzcykgOiBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLmNvbW1vbkFQSS5nZXRIVE1MKGh0bWxQYXRoKS50aGVuKGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0Nzc1RvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0Q3NzVG9QYWdlIChsaW5rKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNTU0xpbmsgPSBmdW5jdGlvbiBjcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgIHJlbCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgVmlld0ZhY3RvcnkoKVxyXG5cclxufSkoZGF0YVNvdXJjZSk7XHJcblxyXG4vLyBjaGF0IG1hbmFnZXJcclxuXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBjaGF0TWFuYWdlckNvbmZpZyAqL1xyXG4vKiBleHBvcnRlZCBjaGF0TWFuYWdlciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINGA0LDQsdC+0YLRiyDRgdC+INGB0L/QuNGB0LrQvtC8INGB0L7QvtCx0YnQtdC90LjQuSDQntCU0J3QntCT0J4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbnZhciBtZXNzYWdlTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gc2V0dXBNZXNzYWdlTGlzdE1hbmFnZXIgKGNvbmZpZykge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vINCk0L7RgNC80LDRgiAgbWVzc2FnZUxpc3QgPSBbXHJcbiAgICAvLyAgICB7XHJcbiAgICAvLyAgICAgICBzZW5kZXI6IHNlbmRlclxyXG4gICAgLy8gICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIC8vICAgICAgIHJlYWQ6IHRydWUvZmFsc2VcclxuICAgIC8vICAgICAgIGRhdGU6IGRhdGVcclxuICAgIC8vICAgIH0sXHJcbiAgICAvLyBdXHJcbiAgICAvLyByZWFkIC0g0LHRi9C70L4g0LvQuCDQv9GA0L7Rh9C40YLQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIE1lc3NhZ2VMaXN0TWFuYWdlcigpIHt9XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5jRE9NID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlc0Jsb2NrOiBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFX0RBVEUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkIChyZWxhdGl2ZVVzZXJOYW1lLCByZWxhdGl2ZVVzZXJJZCkge1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlc0lzUmVhZCA9IFtdO1xyXG4gICAgICAgIHZhciB1c2VyTmFtZSA9IHJlbGF0aXZlVXNlck5hbWUgfHwgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWU7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9IHJlbGF0aXZlVXNlcklkIHx8IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgICAgICBmb3IoaSA9IHRoaXMubWVzc2FnZUxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tZXNzYWdlTGlzdFtpXS5zZW5kZXIgIT09IHVzZXJOYW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNJc1JlYWQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6XCJtZXNzYWdlcy9cIiArIHRoaXMubWVzc2FnZUxpc3RbaV0uaWQgKyBcIi9pdElzUmVhZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlc0lzUmVhZDtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiAoaXNSZWFkLCBzZW5kZXIpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfTUVTU0FHRV9DT05UQUlORVIpO1xyXG4gICAgICAgIGlmICghaXNSZWFkICYmIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lICE9PSBzZW5kZXIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tZXNzYWdlcy5DU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGFpbmVyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZURpdkZvck1lc3NhZ2VCbG9jayA9IGZ1bmN0aW9uICh0ZXh0LCBpc0Rpc3BsYXksIHN0eWxlQ2xhc3Nlcykge1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN0eWxlQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZSkge1xyXG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChzdHlsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gV09SSyBXSVRIIE1FU1NBR0UgRUxFTUVOVCAvL1xyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlTGlzdCAobWVzc2FnZU9iamVjdHMpICB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdHMpIHtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBhZGRFbGVtZW50VG9NZXNzYWdlTGlzdCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdNZXNzYWdlTGlzdDtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0IChuZXdNZXNzYWdlTGlzdCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QgKFxyXG4gICAgICAgIG1lc3NhZ2VPYmpcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QucHVzaChtZXNzYWdlT2JqKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QtdGA0LXQsdC40YDQsNC10YIg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSwg0YHQvtC30LTQsNC10YIg0YHQvtC+0YLQstC10YLRgdCy0YPRjtGJ0LjQtSDQuNC8IERPTSDRjdC70LXQvNC10L3RgtGLINC4INCy0YHRgtCw0LLQu9GP0LXRgiDQuNGFINCyINGH0LDRglxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZXMgPSBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoYXQuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LmRhdGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnNlbmRlcixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QucmVhZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGF0LmNET00ubWVzc2FnZXNCbG9jay5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7Rh9C40YHRgtC40YLRjCBET00g0Y3Qu9C10LzQtdC90YIg0LIg0LrQvtGC0L7RgNC+0Lwg0L7RgtC+0LHRgNCw0LbQsNGO0YLRgdGPINGB0L7QvtCx0YnQtdC90LjRjyAo0L3QsNC/0YDQuNC80LXRgCDRh9GC0L7QsdGLINCy0YHRgtCw0LLQuNGC0Ywg0L3QstC+0YvQuSDRgdC/0LjRgdC+0Log0YHQvtC+0LHRidC10L3QuNC5KVxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckNoYXQgPSBmdW5jdGlvbiBjbGVhckNoYXQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2sucmVtb3ZlQ2hpbGQodGhpcy5jRE9NLm1lc3NhZ2VzQmxvY2suZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2VMaXN0TWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcbnZhciB1c2VyRGF0YU1hbmFnZXIgPSAgKGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIGZ1bmN0aW9uIFVzZXJEYXRhTWFuYWdlciAoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgbWludXRlcyA9IChkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkgPyBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGVcclxuICAgICAgICAgICAgLmdldEhvdXJzKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLmNvbmNhdChcIjpcIiwgbWludXRlcyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlT2JqZWN0IChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZCxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWQ6IGlzUmVhZCxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuc2V0dXAoKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGZ1bmN0aW9uIGdldFVzZXJEYXRhICh1c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyRGF0YSh1c2VySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgPSBkYXRhLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID0gZGF0YS5pc01pbmltaXplO1xyXG4gICAgICAgICAgICBpZihkYXRhLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXNPYmplY3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEubWVzc2FnZXMpLm1hcChmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzT2JqZWN0LnB1c2goY3JlYXRlTWVzc2FnZU9iamVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1lc3NhZ2VzW21lc3NhZ2VdLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZXNbbWVzc2FnZV0udXNlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlc1ttZXNzYWdlXS5pdElzUmVhZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdCA9IG1lc3NhZ2VMaXN0TWFuYWdlci5jcmVhdGVNZXNzYWdlTGlzdChtZXNzYWdlc09iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIudXBkYXRlTWVzc2FnZUxpc3QobmV3TWVzc2FnZUxpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBPYmplY3Qua2V5cyhjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncykubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdGhhdC5zYXZlU2V0dGluZ0ZpZWxkKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZVNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIHNldEZpZWxkIChmaWVsZE5hbWUpIHtcclxuICAgICAgICB0aGlzLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UoXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5nc1tmaWVsZE5hbWVdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICApXHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZSAoc2VuZGVyTmFtZSkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCgpO1xyXG4gICAgICAgIHZhciBkYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcclxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IGNyZWF0ZU1lc3NhZ2VPYmplY3QobWVzc2FnZSwgZGF0ZSwgc2VuZGVyTmFtZSwgZmFsc2UpO1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdChtZXNzYWdlT2JqZWN0KTtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlTWVzc2FnZVRvRGF0YVNvdXJjZShtZXNzYWdlT2JqZWN0KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoY29uZmlnLkNTU19DVVJSRU5UX0lOUFVUX0NMQVNTKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXRNZXNzYWdlQXNSZWFkID0gZnVuY3Rpb24gc2V0TWVzc2FnZUFzUmVhZCAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3RzID0gbWVzc2FnZUxpc3RNYW5hZ2VyLmdldE1lc3NhZ2VPYmplY3RzRm9yTWFya0FzUmVhZCgpO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlKG1lc3NhZ2VPYmplY3RzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIHNhdmVNZXNzYWdlVG9EYXRhU291cmNlIChtZXNzYWdlT2JqZWN0KSB7XHJcbiAgICAgICAgaWYobWVzc2FnZU9iamVjdC5zZW5kZXIgPT09IGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyU2V0dGluZ3MgPSBbe1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IFwic2VuZE5ld01lc3NhZ2VcIixcclxuICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZShcclxuICAgICAgICAgICAgICAgIHVzZXJTZXR0aW5nc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTZXR0aW5ncyA9IFt7dXNlcklkLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWV9LHt9Li4uXVxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbiAobmV3RmllbGRTZXR0aW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0RmllbGQoXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhTWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZyk7XHJcblxyXG4vLyBkYXNoYm9hcmRcclxuXHJcbnZhciB1c2VyTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gY3JlYXRlVXNlckxpc3QgKGNvbmZpZywgc29ydGVyKSB7XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvKiDQpNC+0YDQvNCw0YIg0L7QsdGK0LXQutGC0LAg0LIg0YHQv9C40YHQutC1INGO0LfQtdGA0LBcclxuICAgICAgKiB1c2VySWQ6IFwiSXZhbjMwMDAwMFwiLFxyXG4gICAgICAqIHVzZXJFbGVtZW50OiBVc2VyTGlzdE1hbmFnZXIuY3JlYXRlVXNlckVsZW1lbnQodXNlcklkLCB1c2VySXNPbmxpbmUpLFxyXG4gICAgICAqIG9ubGluZTogdXNlcklzT25saW5lLFxyXG4gICAgICAqIHZpc2libGU6IHRydWUsXHJcbiAgICAgICogc2VuZE5ld01lc3NhZ2U6IHVzZXJTZXR0aW5ncy5zZW5kTmV3TWVzc2FnZSxcclxuICAgICAgKiByZWFkTGFzdE1lc3NhZ2U6IHVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UsXHJcbiAgICAgICogbGFzdE9ubGluZTogdXNlclNldHRpbmdzLmxhc3RPbmxpbmUsXHJcbiAgICAgICogaXNNaW5pbWl6ZTogdXNlclNldHRpbmdzLmlzTWluaW1pemUsXHJcbiAgICAgICogdXNlck5hbWU6IHVzZXJTZXR0aW5ncy51c2VyTmFtZVxyXG4gICAgICAqXHJcbiAgICAgICogdmlzaWJsZSAtINC+0YLQvtCx0YDQsNC20LDRgtGMINC70Lgg0Y7Qt9C10YDQsCDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICAgICAgKi9cclxuICAgIC8vICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIFVzZXJMaXN0TWFuYWdlcigpIHtcclxuICAgICAgICB0aGlzLnVMaXN0ID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgIC8vINCh0L7Qt9C00LDQtdGCIERPTSDQtdC70LXQvNC10L3RgiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjtC30LXRgNCwINCyINGB0L/QuNGB0LrQtVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVVc2VyRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVVzZXJFbGVtZW50KFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBpc09ubGluZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHVzZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciB1c2VySWREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciB1c2VySW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgdXNlckRpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0VMRU1FTlRfQ1NTX0NMQVNTKTtcclxuXHJcbiAgICAgICAgdXNlcklkRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSURfRUxFTUVOVF9DU1NfQ0xBU1MpO1xyXG4gICAgICAgIHVzZXJJZERpdi5pbm5lckhUTUwgPSB1c2VySWQ7XHJcblxyXG4gICAgICAgIGlmIChpc09ubGluZSkge1xyXG4gICAgICAgICAgICB1c2VySW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PTkxJTkUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVzZXJJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXNlckRpdi5hcHBlbmRDaGlsZCh1c2VySWREaXYpO1xyXG4gICAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQodXNlckluZGljYXRvcik7XHJcblxyXG4gICAgICAgIHJldHVybiB1c2VyRGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnNldFVzZXJMaXN0ID0gZnVuY3Rpb24gc2V0VXNlckxpc3QgKHVzZXJMdXN0T2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IHVzZXJMdXN0T2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmFkZFVzZXJUb1VzZXJzQXJyYXkgPSBmdW5jdGlvbiBhZGRVc2VyVG9Vc2Vyc0xpc3QoXHJcbiAgICAgICAgdXNlcixcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgdXNlcnNMaXN0XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdXNlcklzT25saW5lID0gdGhpcy51c2VySXNPbmxpbmUodXNlci5sYXN0T25saW5lKTtcclxuICAgICAgICB1c2Vyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgICAgICB1c2VyRWxlbWVudDogdGhpcy5jcmVhdGVVc2VyRWxlbWVudCh1c2VySWQsIHVzZXJJc09ubGluZSksXHJcbiAgICAgICAgICAgIG9ubGluZTogdXNlcklzT25saW5lLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBzZW5kTmV3TWVzc2FnZTogdXNlci5zZW5kTmV3TWVzc2FnZSxcclxuICAgICAgICAgICAgcmVhZExhc3RNZXNzYWdlOiB1c2VyLnJlYWRMYXN0TWVzc2FnZSxcclxuICAgICAgICAgICAgbGFzdE9ubGluZTogdXNlci5sYXN0T25saW5lLFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogdXNlci51c2VyTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXRgiBpbmRleCDRjtC30LXRgNCwINCyINGB0L/QuNGB0LrQtSDRjtC30LXRgNCwINC10YHQu9C4INC+0L0g0YLQsNC8INC90LDRhdC+0LTQuNGC0YHRjy4g0JIg0L/RgNC+0YLQuNCy0L3QviDRgdC70YPRh9Cw0LUg0LLQvtC30LLRgNCw0YnQsNC10YIgbnVsbFxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCA9IGZ1bmN0aW9uIGdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VyTWFuYWdlciA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRleCA9IG51bGw7XHJcbiAgICAgICAgT2JqZWN0LmtleXModXNlck1hbmFnZXIudUxpc3QpLm1hcChmdW5jdGlvbiBnZXRLZXkgKGtleSkge1xyXG4gICAgICAgICAgICBpZiAodXNlck1hbmFnZXIudUxpc3Rba2V5XS51c2VySWQgPT09IHVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdXNlckluZGV4ID0ga2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1c2VySW5kZXg7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyDQntC/0YDQtdC00LXQu9GP0LXRgiDQvtC90LvQsNC50L0g0Y7Qt9C10YDQsCDQvdCw0YXQvtC00Y8g0YDQsNC30L3QuNGG0YMg0LzQtdC20LTRgyDQtNCw0YLQvtC5INC/0L7RgdC70LXQtNC90LXQs9C+INC60L7QvdC10LrRgtCwINGO0LfQtdGA0LAg0YEg0LHQtCDQuCDRgtC10LrRg9GJ0LjQvCDQstGA0LXQvNC10L3QtdC8XHJcbiAgICAvLyDQstC+0LfQstGA0LDRidCw0LXRgiB0cnVlINC10YHQu9C4INGO0LfQtdGAINC+0L3Qu9Cw0LnQvSwgZmFsc2UgLSDQvtGE0YTQu9Cw0LnQvVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS51c2VySXNPbmxpbmUgPSBmdW5jdGlvbiB1c2VySXNPbmxpbmUgKGxhc3RVc2VyT25saW5lVGltZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLSBsYXN0VXNlck9ubGluZVRpbWUgPD0gY29uZmlnLmludGVydmFsLk9OTElORV9JTlRFUlZBTDtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JTQtdC70LDQtdGCINC90LXQstC40LTQuNC80YvQvNC4INGC0LXRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSDQsiDRgdC/0LjRgdC60LUsINCyINC40LzQtdC90LDRhSDQutC+0YLQvtGA0YvRhSDQvdC10YIg0L/QtdGA0LXQtNCw0L3QvdC+0Lkg0L/QvtC00YHRgtGA0L7QutC4XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmZpbHRlckJ5TmFtZSA9IGZ1bmN0aW9uIGZpbHRlckJ5TmFtZSgpIHtcclxuICAgICAgICB0aGlzLnVMaXN0LmZvckVhY2goZnVuY3Rpb24gZmlsdGVyTmFtZSAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnZpc2libGUgPSBlbGVtZW50LnVzZXJJZC5pbmRleE9mKGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5KSAhPT0gLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCh0L7RgNGC0LjRgNGD0LXRgiDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyINC/0L4g0L/QvtC70Y5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc29ydFVzZXJzQnlGaWVsZCA9IGZ1bmN0aW9uIHNvcnRVc2Vyc0J5T25saW5lKCkge1xyXG4gICAgICAgIHNvcnRlci5xdWlja1NvcnQodGhpcy51TGlzdCwgMCwgdGhpcy51TGlzdC5sZW5ndGggLSAxLCBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntGC0L7QsdGA0LDQt9C40YLRjC8g0J7QsdC90L7QstC40YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDRjtC30LXRgNC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmRpc3BsYXlVc2VycyA9IGZ1bmN0aW9uIGRpc3BsYXlVc2VycygpIHtcclxuICAgICAgICBjbGVhckVsZW1lbnRDb250ZW50KGNvbmZpZy5ET00uVVNFUl9MSVNUX0NTU19DTEFTUyk7XHJcbiAgICAgICAgdGhpcy51TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGdldEVsZW0gKGVsZW0pIHtcclxuICAgICAgICAgICAgaWYgKGVsZW0udmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlVTRVJfTElTVF9DU1NfQ0xBU1MpLmFwcGVuZENoaWxkKGVsZW0udXNlckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgLy8gaW5jbHVkZVxyXG5cclxuICAgIC8vINCe0YfQuNGJ0LDQtdGCIERPTSDRgdC+0LTQtdGA0LbQsNGJ0LjQuSDRjdC70LXQvNC10L3RgtGLINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuICAgIGZ1bmN0aW9uIGNsZWFyRWxlbWVudENvbnRlbnQoZWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGVsZW1lbnRTZWxlY3Rvcik7XHJcbiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckxpc3RNYW5hZ2VyKClcclxuXHJcbn0pKG1haW5Db25maWcsIHNvcnRlcik7XHJcbnZhciBkYXNoYm9hcmQgPSAoZnVuY3Rpb24gY3JlYXRlQ29udHJvbGxlcihjb25maWcsIGRhdGFTb3VyY2UsIHVEYXRhTWFuYWdlciwgdUxpc3RNYW5hZ2VyLCBzb3J0ZXIpe1xyXG5cclxuICAgIHZhciBpbnRlcnZhbElkID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigpIHt9XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLnNldHVwKGNvbmZpZywgc29ydGVyKTtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuc2V0dXAoY29uZmlnKTtcclxuICAgICAgICB0aGlzLnNldHVwVXNlcnNMaXN0QmxvY2soKTtcclxuICAgICAgICB0aGlzLnNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIERBU0hCT0FSRF9DT05ESVRJT05cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIHZhciBzZXJpYWxDb25kaXRpb24gPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGZpbHRlcjogY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnksXHJcbiAgICAgICAgICAgIHNvcnQ6IGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSxcclxuICAgICAgICAgICAgY3VycmVudFVzZXJJZDogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSwgc2VyaWFsQ29uZGl0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICB2YXIgc2VyaWFsQ29uZGl0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSk7XHJcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgaWYgKHNlcmlhbENvbmRpdGlvbikge1xyXG4gICAgICAgICAgICBjb25kaXRpb24gPSBKU09OLnBhcnNlKHNlcmlhbENvbmRpdGlvbik7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5ID0gY29uZGl0aW9uLmZpbHRlcjtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5ID0gY29uZGl0aW9uLnNvcnQ7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IGNvbmRpdGlvbi5jdXJyZW50VXNlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29uZGl0aW9uO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5sb2NhbFNldHRpbmdzU2V0dXAgPSBmdW5jdGlvbiBsb2NhbFNldHRpbmdzU2V0dXAoY29uZGl0aW9uKSB7XHJcbiAgICAgICAgaWYgKGNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uLmZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19GSUxURVJfSU5QVVRfSUQpLnZhbHVlID0gY29uZGl0aW9uLmZpbHRlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5zb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NPUlRfU0VMRUNUX0lEKS52YWx1ZSA9IGNvbmRpdGlvbi5zb3J0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbi5jdXJyZW50VXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBjb25kaXRpb24uY3VycmVudFVzZXJJZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlcihjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIERBU0hCT0FSRF9DT05ESVRJT05cclxuXHJcbiAgICAvLyDRhNC40LvRjNGC0YDQsNGG0LjRjyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiBmaWx0ZXIoKSB7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0ZJTFRFUl9JTlBVVF9JRCkudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmZpbHRlckJ5TmFtZShjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAvLyDRgdC+0YDRgtC40YDQvtCy0LrQsCDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gc29ydCgpIHtcclxuICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnkgPSBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NPUlRfU0VMRUNUX0lEKS52YWx1ZTtcclxuICAgICAgICB0aGlzLnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuc29ydFVzZXJzQnlGaWVsZCgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8gdXNlcnNNb2R1bGUgLSDRhtC10L/QvtGH0LrQsCDQv9GA0L7QvNC40YHQvtCyINC+0LHQvdC+0LLQu9GP0Y7RidCw0Y8gdXNlcnNMaXN0INC4INC10LPQviDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDQvdCwINGN0LrRgNCw0L3QtVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBVc2Vyc0xpc3RCbG9jayA9IGZ1bmN0aW9uIHNldHVwVXNlcnNMaXN0QmxvY2sgKG5ld1VzZXJMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5zZXR1cFVzZXJzTGlzdGVuZXJzKG5ld1VzZXJMaXN0KTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBVc2Vyc0xpc3RlbmVycyA9IGZ1bmN0aW9uIHNldHVwVXNlcnNMaXN0ZW5lcnMoXHJcbiAgICAgICAgbmV3VXNlckxpc3RcclxuICAgICkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBY2Vzc1RvVXNlcnNMaXN0KG5ld1VzZXJMaXN0KS50aGVuKGZ1bmN0aW9uIGdldEFjY2VzcyAoKSB7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oY29uZmlnLnVzZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIGFkZExpc3RlbmVycyAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnVzZXJMaXN0ZW5lci5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpcnN0Q2hpbGQuaW5uZXJUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmdldEFjZXNzVG9Vc2Vyc0xpc3QgPSBmdW5jdGlvbiBhY2Nlc3NUb1VzZXJzRE9NKFxyXG4gICAgICAgIG5ld1VzZXJMaXN0XHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5VXNlcnNMaXN0KG5ld1VzZXJMaXN0KS50aGVuKGZ1bmN0aW9uIHNldERPTSAoKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy51c2VycyA9IGdldEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUywgdHJ1ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQvtGC0L7QsdGA0LDQt9C40YLRjCDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5kaXNwbGF5VXNlcnNMaXN0ID0gZnVuY3Rpb24gZGlzcGxheVVzZXJzTGlzdChuZXdVc2VyTGlzdCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXRVc2Vyc0xpc3RUb1VzZXJzTW9kdWxlKG5ld1VzZXJMaXN0KS50aGVuKGZ1bmN0aW9uIGRpc3BsYXlVTGlzdCAoKSB7XHJcbiAgICAgICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhhdC50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyDQlNC+0LHQsNCy0LvRj9C10YIg0Y7Qt9C10YAg0LvQuNGB0YIg0LIg0Y7Qt9C10YAg0LvQuNGB0YIg0LzQvtC00YPQu9GMLiDQktCw0LbQvdC+OiDQtdGB0LvQuCDQv9C10YDQtdC00LDQvSDQutCw0Log0L/QsNGA0LDQvNC10YLRgCDQvdC+0LLRi9C5INGO0LfQtdGAINC70LjRgdGCXHJcbiAgICAvLyAo0L3Rg9C20L3QviDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8pLCDRgtC+INC00L7QsdCw0LLQu9GP0LXRgtGB0Y8g0L7QvSwg0LjQvdCw0YfQtSDQtNCw0L3QvdGL0LUg0LHQtdGA0YPRgtGB0Y8g0YEg0YHQtdGA0LLQtdGA0LBcclxuICAgIC8vINC+0LHRitC10LrRgiBQcm9taXNlINGB0L7Qt9C00LDQtdGC0YHRjyDQtNC70Y8g0YHQvtCy0LzQtdGB0YLQuNC80L7RgdGC0LhcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldFVzZXJzTGlzdFRvVXNlcnNNb2R1bGUgPSBmdW5jdGlvbiBzZXRVc2Vyc0xpc3RUb1VzZXJzTW9kdWxlKFxyXG4gICAgICAgIG5ld1VzZXJMaXN0XHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCFuZXdVc2VyTGlzdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyTGlzdCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBnZXRVc2VyTGlzdE9iaiAodXNlcnNMaXN0T2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnNldFVzZXJMaXN0KHVzZXJzTGlzdE9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gbG9jYWxTZXR0aW5nc1NldHVwKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSB0aGF0LmdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5sb2NhbFNldHRpbmdzU2V0dXAoY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZWxzZVJlc29sdmUgKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh1TGlzdE1hbmFnZXIuc2V0VXNlckxpc3QobmV3VXNlckxpc3QpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0VXNlckxpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHVzZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLnVzZXJzQVBJLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiBzZXRVc2VyRGF0YSh1c2VyRGF0YSkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh1c2VyRGF0YSkubWFwKGZ1bmN0aW9uIHNldFVzZXJTZXR0aW5nKHVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLmFkZFVzZXJUb1VzZXJzQXJyYXkoXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckRhdGFbdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnNMaXN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gcmV0dXJuVXNlcnNMaXN0ICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJzTGlzdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnVzZXJMaXN0ZW5lciA9IGZ1bmN0aW9uIHVzZXJMaXN0ZW5lcih1c2VySWQpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIodXNlcklkKTtcclxuICAgICAgICB0aGlzLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQodXNlcklkKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC60YDRi9Cy0LDQtdGCINGH0LDRgiDRgSDRjtC30LXRgNC+0LwsINC30LDQs9GA0YPQttCw0LXRgiDQvNC10YHRgdCw0LTQttC4INGO0LfQtdGA0LAg0Lgg0L7RgtC+0LHRgNCw0LbQsNC10YIg0LjRhVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlciA9IGZ1bmN0aW9uIHN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIoXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5nZXRVc2VyRGF0YSh1c2VySWQpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICAoKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NIQVRfQ09OVEFJTlNfQkxPQ0tfU1RZTEUpLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLklOVklTSUJMRV9DTEFTUyk7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vINCe0LHQvdC+0LLQu9GP0LXRgiDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LkgLSDQtNC+0LHQsNCy0LvRj9C10YIg0L3QvtCy0YvQtSDRgNC10LPQuNGB0YLRgNCw0YbQuNC4ICsg0L7QsdC90L7QstC70Y/QtdGCINC+0L3Qu9Cw0LnQvSDRgdGC0LDRgtGD0YEgKyDQtdGB0LvQuFxyXG4gICAgLy8g0YPRgdGC0LDQvdC+0LLQu9C10L0g0YTQu9Cw0LMgaXNDb252ZXJzYXRpb24gLSDQvtCx0L3QvtCy0LvRj9C10YIg0YHQvtC+0LHRidC10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVVc2VycyA9IGZ1bmN0aW9uIHVwZGF0ZVVzZXJzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgaW50ZXJtZWRpYXRlTGlzdCA9IFtdO1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUElcclxuICAgICAgICAgICAgLmdldEFsbFVzZXJzKClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gdXBkYXRlICh1c2VyTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModXNlckxpc3QpLm1hcChmdW5jdGlvbiBhZGRVc2Vycyh1c2VySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIuYWRkVXNlclRvVXNlcnNBcnJheShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckxpc3RbdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm1lZGlhdGVMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHNldE5ld0xpc3QgKCkge1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0ID0gaW50ZXJtZWRpYXRlTGlzdDtcclxuICAgICAgICAgICAgICAgIGlmIChjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZmlsdGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zb3J0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGF0LnNldHVwVXNlcnNMaXN0ZW5lcnMoaW50ZXJtZWRpYXRlTGlzdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQntCx0L3QvtCy0LvQtdGCINC80LDRgdGB0LjQsiDRgdC+0L7QsdGJ0LXQvdC40Lkg0LIg0LzQvtC00YPQu9C1INGH0LDRgtCwINC4INCy0YvQstC+0LTQuNGCINC40YUg0L3QsCDRjdC60YDQsNC9XHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVVc2VyTWVzc2FnZXNBbmREaXNwbGF5SXQgPSBmdW5jdGlvbiB1cGRhdGVVc2VyTWVzc2FnZXNBbmREaXNwbGF5SXQoXHJcbiAgICApIHtcclxuICAgICAgICB1RGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgICAgICB0aGlzLm1hcmtNZXNzYWdlRnJvbVVzZXJBc1JlYWQoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMgPSBmdW5jdGlvbiBzZXR1cENvbW1vbkxpc3RlbmVyRnVuY3Rpb25zKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNlbmRNZXNzYWdlLmJpbmQodXNlckRhdGFNYW5hZ2VyLCBjb25maWcuQURNSU5fTkFNRSlcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgdGhhdC5jbG9zZUNvbnZlcnNhdGlvbi5iaW5kKHRoYXQpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0ZJTFRFUl9JTlBVVF9JRCkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgICAgICB0aGF0LmZpbHRlci5iaW5kKHRoYXQpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX1NPUlRfU0VMRUNUX0lEKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImlucHV0XCIsXHJcbiAgICAgICAgICAgIHRoYXQuc29ydC5iaW5kKHRoYXQpXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QvtC80LXRh9Cw0LXRgiDQutCw0L3QsNC7INGO0LfQtdGA0LAg0LrQsNC6INC/0YDQvtGH0LjRgtCw0L3QvdGL0LkgKNC10YHQu9C4INGC0LDQvCDQtdGB0YLRjCDQvdC10L/RgNC+0YfQuNGC0LDQvdC90YvQtSDRgdC+0L7QsdGJ0LXQvdC40Y8pXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkID0gZnVuY3Rpb24gbWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZCAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRleCA9IHVMaXN0TWFuYWdlci5nZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCh1c2VySWQpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt1c2VySW5kZXhdLnNlbmROZXdNZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UoW3tcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZTogXCJzZW5kTmV3TWVzc2FnZVwiLFxyXG4gICAgICAgICAgICBmaWVsZFZhbHVlOiBmYWxzZVxyXG4gICAgICAgIH1dKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JfQsNC60YDRi9Cy0LDQtdGCINC60LDQvdCw0Lsg0L7QsdGJ0LXQvdC40Y8g0YEg0Y7Qt9C10YDQvtC8INC4INGH0LDRglxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VDb252ZXJzYXRpb24gPSBmdW5jdGlvbiBjbG9zZUNvbnZlcnNhdGlvbiAoKSB7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFKS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINC00L7QsdCw0LLQu9GP0LXRgiDQvdC+0LLRi9C5INC10LvQtdC80LXQvdGCLdC40L3QtNC40LrQsNGC0L7RgCDQslxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlciA9IGZ1bmN0aW9uIHRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIoKSB7XHJcbiAgICAgICAgdmFyIG5ld01lc3NhZ2VEaXY7XHJcbiAgICAgICAgT2JqZWN0LmtleXModUxpc3RNYW5hZ2VyLnVMaXN0KS5tYXAoZnVuY3Rpb24gYmxpbmsoa2V5KSB7XHJcbiAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYgPSB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFXHJcbiAgICAgICAgICAgIClbMF07XHJcbiAgICAgICAgICAgIGlmICh1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS5zZW5kTmV3TWVzc2FnZSAmJiAhbmV3TWVzc2FnZURpdikge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlRGl2LmNsYXNzTGlzdC5hZGQoY29uZmlnLkNTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFKTtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFtrZXldLnVzZXJFbGVtZW50LmFwcGVuZENoaWxkKG5ld01lc3NhZ2VEaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCF1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS5zZW5kTmV3TWVzc2FnZSAmJiBuZXdNZXNzYWdlRGl2KSB7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3Rba2V5XS51c2VyRWxlbWVudC5yZW1vdmVDaGlsZChuZXdNZXNzYWdlRGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucyA9IGZ1bmN0aW9uIHNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBpbnRlcnZhbElkLnB1c2goc2V0SW50ZXJ2YWwoZnVuY3Rpb24gc2V0SW50ZXJ2YWxVcGRhdGVVc2VycyAoKSB7XHJcbiAgICAgICAgICAgIHRoYXQudXBkYXRlVXNlcnMoKTtcclxuICAgICAgICB9LCBjb25maWcuaW50ZXJ2YWwuVVBEQVRFX1VTRVJTX1RJTUUpKVxyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbnRlcnZhbElkLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaWQpXHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBEYXNoYm9hcmRDb250cm9sbGVyKCk7XHJcblxyXG59KShtYWluQ29uZmlnLCBkYXRhU291cmNlLCB1c2VyRGF0YU1hbmFnZXIsIHVzZXJMaXN0TWFuYWdlciwgc29ydGVyKTtcclxudmFyIGxhdW5jaGVyID0gKGZ1bmN0aW9uIGNyZWF0ZUxhdW5jaGVyIChjb25maWcpIHtcclxuXHJcbiAgICB2YXIgRE9NVmFyaWFibGVzID0ge307XHJcblxyXG4gICAgZnVuY3Rpb24gTGF1bmNoZXIoKSB7fVxyXG5cclxuICAgIHZhciBrZXlPZlZhbHVlID0ge1xyXG4gICAgICAgIGNoYXRUaXRsZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0VXJsOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYXRDbGFzczoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0UG9zaXRpb25TZWxlY3Q6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGFsbG93TWluaW1pemU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbGxvd0RyYWc6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaG93VGltZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVpcmVOYW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJhZGlvIGJ1dHRvbiAobGFzdCBlbGVtZW50LCBpdCdzIGltcG90ZW50KVxyXG4gICAgICAgIG5ldHdvcmtSYWRpb1hNUjoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCIsXHJcbiAgICAgICAgICAgIHRydWU6IFwiWEhSXCIsXHJcbiAgICAgICAgICAgIGZhbHNlOiBcImZldGNoXCJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5nZXREYXRhRnJvbUVsZW1lbnQgPSBmdW5jdGlvbiAoa2V5T2ZWYWx1ZSkge1xyXG4gICAgICAgIHZhciBzcmMgPSBcIlwiO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgdHlwZU9mVmFsdWU7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoRE9NVmFyaWFibGVzKS5tYXAoZnVuY3Rpb24gKGVsZW1lbnROYW1lLCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZihrZXlPZlZhbHVlW2VsZW1lbnROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mVmFsdWUgPSBET01WYXJpYWJsZXNbZWxlbWVudE5hbWVdLmdldEF0dHJpYnV0ZShcInR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IFwiJyZcIiArIGVsZW1lbnROYW1lICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUsIHR5cGVPZlZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IGVsZW1lbnROYW1lICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYoc3JjLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgc3JjID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNyYztcclxuICAgIH07XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLmdldEVsZW1lbnRWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gRE9NVmFyaWFibGVzW25hbWVdW2tleU9mVmFsdWVbbmFtZV0udHlwZU9mVmFsdWVdO1xyXG4gICAgICAgIGlmKHR5cGUgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5T2ZWYWx1ZVtuYW1lXVt2YWx1ZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU2NyaXB0ICgpIHtcclxuICAgICAgICB2YXIgc3JjID0gY29uZmlnLmxhdW5jaGVyLnNyY1N0YXJ0ICsgdGhpcy5nZXREYXRhRnJvbUVsZW1lbnQoa2V5T2ZWYWx1ZSk7XHJcbiAgICAgICAgc3JjICs9IGNvbmZpZy5sYXVuY2hlci5zcmNFbmQ7XHJcbiAgICAgICAgRE9NVmFyaWFibGVzLnNjcmlwdENvZGUuaW5uZXJIVE1MID0gc3JjO1xyXG4gICAgfVxyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgY29uZmlnLmxhdW5jaGVyLmFmdGVyLm1hcCgoZnVuY3Rpb24gY3JlYXRlU2NyaXB0UGFydCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBET01WYXJpYWJsZXNbZWxlbWVudF0gPSAgZ2V0RWxlbWVudChjb25maWcubGF1bmNoZXIucGF0dGVybiArIGVsZW1lbnQsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAgICAgRE9NVmFyaWFibGVzW2VsZW1lbnRdLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBjcmVhdGVTY3JpcHQuYmluZCh0aGF0KSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiBjbG9zZUFwcCAoKSB7XHJcbiAgICAgICAgRE9NVmFyaWFibGVzID0ge307XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTGF1bmNoZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vLyBTVFVCIC8vXHJcbnZhciBhYm91dCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBYm91dCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgQWJvdXQucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBYm91dCgpO1xyXG5cclxufSkoKTtcclxudmFyIG1haW5Db250cm9sbGVyID0gKGZ1bmN0aW9uIChjb25maWcpIHtcclxuXHJcbiAgICB2YXIgbWF0Y2hlc0h0bWxQYXRoID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogY29uZmlnLnJvdXRlci5EQVNIQk9BUkRfSFRNTF9QQVRILFxyXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGNvbmZpZy5yb3V0ZXIuTEFVTkNIRVJfSFRNTF9QQVRILFxyXG4gICAgICAgIGFib3V0OiBjb25maWcucm91dGVyLkFCT1VUX0hUTUxfUEFUSFxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIGNsb3NlRnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLmNsb3NlQXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5jbG9zZUFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuY2xvc2VBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHN0YXJ0RnVuY3Rpb25zID0ge1xyXG4gICAgICAgIGRhc2hib2FyZDogZGFzaGJvYXJkLnN0YXJ0QXBwLmJpbmQoZGFzaGJvYXJkKSxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBsYXVuY2hlci5zdGFydEFwcC5iaW5kKGxhdW5jaGVyKSxcclxuICAgICAgICBhYm91dDogYWJvdXQuc3RhcnRBcHAuYmluZChhYm91dClcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIgKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhhdC5oYW5kbGVVcmwoZWxlbWVudC5uZXdVUkwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDQn9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLIC0g0YHRh9C40YLQsNGC0Ywg0YHQvtGB0YLQvtGP0L3QuNC1INC4INC30LDQv9GD0YHRgtC40YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQulxyXG4gICAgICAgIHRoYXQuaGFuZGxlVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIjZGFzaGJvYXJkXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiBVUkxcclxuICAgIE1haW5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVVcmwgPSBmdW5jdGlvbiBoYW5kbGVVcmwodXJsKSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSBudWxsO1xyXG4gICAgICAgIGlmKHVybC5pbmRleE9mKFwiI1wiKSA9PT0gLTEpe1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaGFzaCA9IHVybC5zcGxpdCgnIycpLnBvcCgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VQcmV2aW91c1BhZ2UoaGFzaCk7XHJcblxyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhLicgKyBjb25maWcucm91dGVyLk5BVklHQVRJT05fQUNUSVZFX0NTUykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLnJvdXRlci5OQVZJR0FUSU9OX0FDVElWRV9DU1MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmPVwiIycgKyBoYXNoICsgJ1wiXScpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5yb3V0ZXIuTkFWSUdBVElPTl9BQ1RJVkVfQ1NTKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpO1xyXG4gICAgICAgIHZpZXdGYWN0b3J5LmNyZWF0ZVZpZXcobWF0Y2hlc0h0bWxQYXRoW2hhc2hdLCBudWxsLCBjb25maWcucm91dGVyLkNPTlRFTlRfQ0xBU1MpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzdGFydEZ1bmN0aW9uc1toYXNoXSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgTWFpbkNvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlUHJldmlvdXNQYWdlID0gZnVuY3Rpb24gY2xvc2VQcmV2aW91c1BhZ2UoaGFzaCkge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGNsb3NlRnVuY3Rpb25zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZihrZXkgIT09IGhhc2gpIHtcclxuICAgICAgICAgICAgICAgIGNsb3NlRnVuY3Rpb25zW2tleV0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTWFpbkNvbnRyb2xsZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG5cclxubWFpbkNvbnRyb2xsZXIuc3RhcnRBcHAoKTsiXX0=
