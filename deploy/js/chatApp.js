var mainConfig={DOM:{MAIN_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft",AUTHORIZATION_MENU_CLASS:"root_chat_for_touchsoft_input-name-block",USER_NAME_INPUT_CLASS:"root_chat_for_touchsoft_input-name",SEND_USER_NAME_BUTTON:"root_chat_for_touchsoft_input-name-button",SEND_MESSAGE_MIN_SIZE_BUTTON:"root_chat_for_touchsoft_minimize-style__send-button",SEND_MESSAGE_FULL_SIZE_BUTTON:"root_chat_for_touchsoft__bottom_send-button",CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft__textarea",CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style__message-input",TITLE_BLOCK_CLASS:"root_chat_for_touchsoft-title",CHANGE_STYLE_BUTTON_MAX_SIZE:"root_chat_for_touchsoft__top_minimize-button",MINIMIZE_STYLE_CHAT_BLOCK_CLASS:"root_chat_for_touchsoft_minimize-style",SET_MIN_STYLE_BUTTON:"root_chat_for_touchsoft_minimize-style__max-button",SET_MAX_STYLE_BUTTON:"root_chat_for_touchsoft__top_minimize-button"},DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",CSS_CURRENT_INPUT_CLASS:"root_chat_for_touchsoft__textarea",currentUserSettings:{userId:null,userName:null,isMinimize:!1,readLastMessage:!1,sendNewMessage:!1,lastOnline:(new Date).getTime()},chatSettings:{allowDrag:!1,position:"right",chatTitle:"TouchSoft Chat",allowMinimize:!0,outerCssClass:"touchsoft-chat_main-block",typeOfRequest:"fetch",requireName:!0},INVISIBLE_CLASS:"invisible",CHAT_POSITION_RIGHT:"root_chat_for_touchsoft_right-position",CHAT_POSITION_LEFT:"root_chat_for_touchsoft_left-position",LOCAL_STORAGE_NAME:"userID_touchsoft_chat",DEFAULT_USER_NAME:"guest",DEFAULT_CSS_CLASS_FOR_CHAT:"touchsoft-chat_main-block",DEFAULT_CHAT_TITLE:"TouchSoft Chat",HTML_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/chatApplication/chat.html",CSS_FILE_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/css/chat.css",messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root_chat_for_touchsoft__top_messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},DISPLAY_MESSAGE_DATE:!0,DISPLAY_SENDER_NAME:!0,DISPLAY_MESSAGE:!0,UPDATE_USER_DATA_TIME:5e3};function parseSrcForParameters(e){var s={};return e.substr(e.indexOf("?")+1).split("&").forEach(function(e){var t=e.split("=");t[1]=t[1].replace(/'/g,""),s[t[0]]=t[1]}),s}function setOuterChatSettingToConfig(t,s){Object.keys(t).map(function(e){return s.chatSettings[e]=t[e],!0})}setOuterChatSettingToConfig(parseSrcForParameters(document.currentScript.getAttribute("src")),mainConfig);var dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},dataConnector=function(e){var t;function s(){}return s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,a,r,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(r,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},a?s.send(a):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},t=new s,"fetch"===e.typeOfRequest?{request:t.requestFetch}:"XHR"===e.typeOfRequest?{request:t.requestXMR}:{request:t.requestXMR,createLongPollConnection:t.longPoll}}(dataConnectorConfig),dataSource=function(o,e){var t,a="userList",s="usersMessages",r="usersSettings",i={isMinimize:!1,readLastMessage:!0};function n(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function u(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}function c(){c.prototype.getData="longPoll"===e.chatSettings.typeOfRequest?n:u}return c.prototype.createRequestPath=function(e,t,s,n){var a=e;return null!==n&&(a+="/"+n),null!==t&&(a+="/"+t),null!==s&&(a+="/"+s),a+=".json"},c.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},c.prototype.setData=function(e,t,s,n,a){var r;return r="PUT"===t?this.createRequestPath(dataBaseUrl,n,s,e):this.createRequestPath(dataBaseUrl,n,null,e),o.request(r,JSON.stringify(a),t,"application/json")},c.prototype.addNewUserToDataSource=function(t,e){var s=new Date,n=this;i.userName=e,Object.keys(i).map(function(e){n.setData(r,"PUT",e,t,i[e])}),this.setData(a,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},{usersAPI:{getUserList:(t=new c).getData.bind(t,a),getUserSettings:t.getData.bind(t,r),getUserMessages:t.getData.bind(t,s),getSettingField:t.getData.bind(t,r),sendMessage:t.setData.bind(t,s,"POST"),setSettingField:t.setData.bind(t,r,"PUT"),addNewUserToDataSource:t.addNewUserToDataSource.bind(t),updateLastOnline:t.setData.bind(t,a,"PUT","lastOnline"),updateSendNewMessageFlag:t.setData.bind(t,a,"PUT","sendNewMessage"),updateMessageIsReadField:t.setData.bind(t,s,"PUT")},commonAPI:{getHTML:t.getHTML.bind(t)}}}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/},a=/event: put/,t=/data: null/,r=/","data":/,o=/"path":"\/-/,n=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=!0,u=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){if(s[e].test(t))return e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(r)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,n={},a={};return"read"===t?(n.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),n.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),n):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(r).shift(),n=JSON.parse(this.prepareDataBeforeJsonParse(e)),a[s]=n,a):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return i?(i=!1,this.getFirstData(e)):n.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(r)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseUsersSettings=function(e){return u?(u=!1,this.getFirstData(e)):[null,JSON.parse(e[e.length-1].split(r)[1].trim().slice(0,-1))]},e.prototype.parse=function(e){var t=e.split(a),s=this.getTypeOfChanges(t[t.length-1]),n={type:s};if(this.hasNewData(t)){if("message"===s||"read"===s)return n.object=this.parseUsersMessages(t,s),n;if("sendNewMessage"===s||"lastOnline"===s||"userList"===s)return n.object=this.parseUserList(t,s),n;if("setting"===s)return n.object=this.parseUsersSettings(t,s),n}},new e}(),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var a=this.createMessageContainerDiv(n,s),r=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return a.appendChild(r),a.appendChild(o),a.appendChild(i),a},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,n=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:n,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,n){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort();i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3==this.readyState&&200==this.status&&(t=n.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){t[e].id=e,messageListManager.addMessageToMessageList(t[e])});messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){(e.id=t.id)&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){t[e].id=e,s.push(t[e])});messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(e){var t,s,n,a=this.getMessageFromInputElement(),r=(t=new Date,s=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),t.getHours().toString().concat(":",s)),o={sender:e,message:a,read:!1,date:r,id:n};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(console.log(e),e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,a){var r=this;return new Promise(function(e,t){s?(n&&r.includeViewCssToPage(r.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(r.includeViewHTMLToPage(s,a))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var a=document.createElement("link");return n&&a.setAttribute("id",n),t&&a.setAttribute("rel",t),s&&a.setAttribute("type",s),a.setAttribute("href",e),a},new e}(dataSource),chatCustomizer=function(t){function e(){}return e.prototype.setupOuterChatSettings=function(){this.allowMinimize(),this.setPositionOfMainBlock(),this.setTitle(),this.setMainCssClass(),this.allowDragNDrop()},e.prototype.allowDragNDrop=function(){var e=getElement(t.DOM.TITLE_BLOCK_CLASS),c=getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS);"false"!==t.chatSettings.allowDrag&&e.addEventListener("mousedown",function(e){var t,s,n,a,r,o,i;function u(e){c.style.left=e.pageX-s+"px",c.style.top=e.pageY-n+"px"}t={top:(i=c.getBoundingClientRect()).top+window.pageYOffset,left:i.left+window.pageXOffset},s=e.pageX-t.left,n=e.pageY-t.top,a=function(e){u(e)},r=function(){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)},o=function(){return!1},u(e),c.style.zIndex=1e3,document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),c.addEventListener("dragstart",o)})},e.prototype.setPositionOfMainBlock=function(){"right"===t.chatSettings.position?getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(t.CHAT_POSITION_RIGHT):getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.add(t.CHAT_POSITION_LEFT)},e.prototype.setTitle=function(){t.chatSettings.chatTitle.length<1&&(t.chatSettings.chatTitle=t.DEFAULT_CHAT_TITLE),getElement(t.DOM.TITLE_BLOCK_CLASS).innerHTML=t.chatSettings.chatTitle},e.prototype.allowMinimize=function(){"false"===t.chatSettings.allowMinimize&&getElement(t.DOM.CHANGE_STYLE_BUTTON_MAX_SIZE).classList.add(t.INVISIBLE_CLASS)},e.prototype.setMainCssClass=function(){t.chatSettings.outerCssClass.length<1&&(t.chatSettings.outerCssClass=t.DEFAULT_CSS_CLASS_FOR_CHAT),getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).parentNode.classList.add(t.chatSettings.outerCssClass)},new e}(mainConfig),chatController=function(t){function s(e){return e+(new Date).getTime()}function e(){}return e.prototype.startApp=function(){var e=this;return this.setupChatView().then(function(){e.authorization(t.chatSettings.requireName),e.setupChatBasicListeners()}).then(function(){t.currentUserSettings.userId?userDataManager.getUserData(t.currentUserSettings.userId).then(function(){e.setupChatStyle(),e.setupIntervalFunctions(),e.setupChatSendListeners()}):e.setupChatStyle()}).then(function(){chatCustomizer.setupOuterChatSettings()})},e.prototype.authorization=function(e){userDataManager.setup(),this.getConditionFromLocalStorage()?this.setupChatCondition():"false"===e?(t.currentUserSettings.userId=s(t.DEFAULT_USER_NAME),t.currentUserSettings.userName=t.DEFAULT_USER_NAME,this.saveConditionToLocalStorage(),userDataManager.createNewUserProfileToDataBase(t.currentUserSettings.userId,t.currentUserSettings.userName)):this.toggleAuthorizationMenuVisible()},e.prototype.toggleAuthorizationMenuVisible=function(){getElement(t.DOM.AUTHORIZATION_MENU_CLASS).classList.toggle(t.INVISIBLE_CLASS)},e.prototype.getUserNameFromInput=function(){t.currentUserSettings.userName=getElement(t.DOM.USER_NAME_INPUT_CLASS).value,t.currentUserSettings.userId=s(t.currentUserSettings.userName),t.chatSettings.isMinimize=!1,userDataManager.createNewUserProfileToDataBase(t.currentUserSettings.userId,t.currentUserSettings.userName),this.saveConditionToLocalStorage(),this.toggleAuthorizationMenuVisible(),this.setupIntervalFunctions(),this.setupChatSendListeners(),userDataManager.getUserData(t.currentUserSettings.userId)},e.prototype.setupChatSendListeners=function(){getElement(t.DOM.SEND_MESSAGE_FULL_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),getElement(t.DOM.SEND_MESSAGE_MIN_SIZE_BUTTON).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,t.currentUserSettings.userName)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},e.prototype.setupChatBasicListeners=function(){var e=this;getElement(t.DOM.SEND_USER_NAME_BUTTON).addEventListener("click",e.getUserNameFromInput.bind(e)),getElement(t.DOM.SET_MAX_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e)),getElement(t.DOM.SET_MIN_STYLE_BUTTON).addEventListener("click",e.minMaxStyleToggle.bind(e))},e.prototype.setupChatView=function(){return viewFactory.createView(t.HTML_FILE_PATH,t.CSS_FILE_PATH,null)},e.prototype.setupChatStyle=function(){t.currentUserSettings.isMinimize?getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS):getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),this.changeInputAndSendButtonClass()},e.prototype.minMaxStyleToggle=function(){getElement(t.DOM.MAIN_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),getElement(t.DOM.MINIMIZE_STYLE_CHAT_BLOCK_CLASS).classList.toggle(t.INVISIBLE_CLASS),t.currentUserSettings.isMinimize=!1===t.currentUserSettings.isMinimize,this.changeInputAndSendButtonClass(),this.saveConditionToLocalStorage()},e.prototype.activityNotify=function(){userDataManager.updateUserOnline(t.currentUserSettings.userId)},e.prototype.changeInputAndSendButtonClass=function(){t.currentUserSettings.isMinimize?t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MIN_SIZE_INPUT_MESSAGE_BLOCK_CLASS:t.CSS_CURRENT_INPUT_CLASS=t.DOM.CSS_MAX_SIZE_INPUT_MESSAGE_BLOCK_CLASS},e.prototype.setupChatCondition=function(){var e=this.getConditionFromLocalStorage();t.currentUserSettings.userId=this.getConditionFromLocalStorage().userId,t.currentUserSettings.userName=this.getConditionFromLocalStorage().userName,t.currentUserSettings.isMinimize=e.isMinimize},e.prototype.saveConditionToLocalStorage=function(){var e=JSON.stringify({userId:t.currentUserSettings.userId,isMinimize:t.currentUserSettings.isMinimize,userName:t.currentUserSettings.userName});localStorage.setItem(t.LOCAL_STORAGE_NAME,e)},e.prototype.getConditionFromLocalStorage=function(){return JSON.parse(localStorage.getItem(t.LOCAL_STORAGE_NAME))},e.prototype.setupIntervalFunctions=function(){var e=this;setInterval(function(){"longPoll"!==t.chatSettings.typeOfRequest&&userDataManager.getUserData(t.currentUserSettings.userId),console.log("Test"),e.activityNotify()},t.UPDATE_USER_DATA_TIME)},new e}(mainConfig);chatController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRBcHAuanMiXSwibmFtZXMiOlsibWFpbkNvbmZpZyIsIkRPTSIsIk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUyIsIkFVVEhPUklaQVRJT05fTUVOVV9DTEFTUyIsIlVTRVJfTkFNRV9JTlBVVF9DTEFTUyIsIlNFTkRfVVNFUl9OQU1FX0JVVFRPTiIsIlNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT04iLCJTRU5EX01FU1NBR0VfRlVMTF9TSVpFX0JVVFRPTiIsIkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTIiwiQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1MiLCJUSVRMRV9CTE9DS19DTEFTUyIsIkNIQU5HRV9TVFlMRV9CVVRUT05fTUFYX1NJWkUiLCJNSU5JTUlaRV9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTIiwiU0VUX01JTl9TVFlMRV9CVVRUT04iLCJTRVRfTUFYX1NUWUxFX0JVVFRPTiIsIkRBVEFfQkFTRV9VUkwiLCJDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImlzTWluaW1pemUiLCJyZWFkTGFzdE1lc3NhZ2UiLCJzZW5kTmV3TWVzc2FnZSIsImxhc3RPbmxpbmUiLCJEYXRlIiwiZ2V0VGltZSIsImNoYXRTZXR0aW5ncyIsImFsbG93RHJhZyIsInBvc2l0aW9uIiwiY2hhdFRpdGxlIiwiYWxsb3dNaW5pbWl6ZSIsIm91dGVyQ3NzQ2xhc3MiLCJ0eXBlT2ZSZXF1ZXN0IiwicmVxdWlyZU5hbWUiLCJJTlZJU0lCTEVfQ0xBU1MiLCJDSEFUX1BPU0lUSU9OX1JJR0hUIiwiQ0hBVF9QT1NJVElPTl9MRUZUIiwiTE9DQUxfU1RPUkFHRV9OQU1FIiwiREVGQVVMVF9VU0VSX05BTUUiLCJERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVCIsIkRFRkFVTFRfQ0hBVF9USVRMRSIsIkhUTUxfRklMRV9QQVRIIiwiQ1NTX0ZJTEVfUEFUSCIsIm1lc3NhZ2VzIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfTUVTU0FHRV9DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIkRJU1BMQVlfTUVTU0FHRV9EQVRFIiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIkRJU1BMQVlfTUVTU0FHRSIsIlVQREFURV9VU0VSX0RBVEFfVElNRSIsInBhcnNlU3JjRm9yUGFyYW1ldGVycyIsInNyYyIsInVzZXJDb25maWdPYmplY3QiLCJzdWJzdHIiLCJpbmRleE9mIiwic3BsaXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsInBhcmFtT2JqIiwicmVwbGFjZSIsInNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyIsIm91dGVyQ29uZmlnT2JqZWN0IiwiY29uZmlnIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsImdldEF0dHJpYnV0ZSIsImRhdGFCYXNlVXJsIiwiZ2V0RWxlbWVudCIsInNlbGVjdG9yIiwiaXNBbGwiLCJpdElzSWQiLCJzZWxlY3RvclN0YXJ0IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwicHJvdG90eXBlIiwicmVxdWVzdEZldGNoIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3RUeXBlIiwiY29udGVudFR5cGUiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInRleHQiLCJyZXF1ZXN0WE1SIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25sb2FkIiwiSlNPTiIsInBhcnNlIiwib25lcnJvciIsInN0YXR1c1RleHQiLCJzZW5kIiwibG9uZ1BvbGwiLCJ0YXJnZXRVcmwiLCJ4aHR0cCIsInJlcXVlc3QiLCJjcmVhdGVMb25nUG9sbENvbm5lY3Rpb24iLCJkYXRhU291cmNlIiwiZGF0YVNvdXJjZUluc3RhbmNlIiwiVVNFUl9MSVNUIiwiVVNFUl9NRVNTQUdFUyIsIlVTRVJTX1NFVFRJTkdTIiwibmV3VXNlckRhdGEiLCJsb25nUG9sbENvbm5lY3QiLCJkYXRhVHlwZSIsInRoaXMiLCJjcmVhdGVSZXF1ZXN0UGF0aCIsImJhc2ljQ29ubmVjdCIsImJpbmQiLCJEYXRhU291cmNlIiwiZ2V0RGF0YSIsImRhdGFCYXNlVVJMIiwicmVxdWVzdFBvc3RmaXgiLCJyZXF1ZXN0UHJlZml4IiwicGF0aCIsImdldEhUTUwiLCJzZXREYXRhIiwiZmllbGROYW1lIiwidmFsdWUiLCJzdHJpbmdpZnkiLCJhZGROZXdVc2VyVG9EYXRhU291cmNlIiwiZGF0ZSIsInRoYXQiLCJzZXR0aW5nTmFtZSIsInVzZXJzQVBJIiwiZ2V0VXNlckxpc3QiLCJnZXRVc2VyU2V0dGluZ3MiLCJnZXRVc2VyTWVzc2FnZXMiLCJnZXRTZXR0aW5nRmllbGQiLCJzZW5kTWVzc2FnZSIsInNldFNldHRpbmdGaWVsZCIsInVwZGF0ZUxhc3RPbmxpbmUiLCJ1cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWciLCJ1cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQiLCJjb21tb25BUEkiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJldmVudHMiLCJhZGRTdWJzY3JpYmUiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInB1c2giLCJmaWx0ZXIiLCJlbGVtZW50Q2FsbGJhY2siLCJlbWl0IiwiZGF0YSIsImV2ZW50IiwiY2FsbCIsImxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJ0eXBlc09mQ2hhbmdlIiwibWVzc2FnZSIsInVzZXJMaXN0Iiwic2V0dGluZyIsInJlYWQiLCJldmVudFJlZ3VsYXIiLCJoYXNOdWxsRGF0YSIsImdldERhdGFSZWd1bGFyIiwiaXRJc05ld01lc3NhZ2VSZWd1bGFyIiwiaXRJc05ld1VzZXJMaXN0UmVndWxhciIsIml0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiIsIml0SXNGaXJzdFVzZXJTZXR0aW5nQ29ubmVjdGlvbiIsIkxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJnZXRUeXBlT2ZDaGFuZ2VzIiwiYW5zd2VyRGF0YSIsInR5cGVOYW1lIiwidGVzdCIsInByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlIiwibGVuZ3RoIiwidHJpbSIsInNsaWNlIiwicGFyc2VVc2Vyc01lc3NhZ2VzIiwiY2hhbmdlVHlwZSIsIm1lc3NhZ2VJZCIsInJlc3VsdE9iamVjdCIsImlkIiwicG9wIiwic2hpZnQiLCJnZXRGaXJzdERhdGEiLCJoYXNOZXdEYXRhIiwicGFyc2VVc2VyTGlzdCIsImdldFVzZXJJZCIsImV4Y2VwdGlvbiIsInBhcnNlVXNlcnNTZXR0aW5ncyIsInJlc3VsdCIsInJlc3VsdE9mUGFyc2UiLCJ0eXBlIiwib2JqZWN0IiwibWVzc2FnZUxpc3RNYW5hZ2VyIiwiTWVzc2FnZUxpc3RNYW5hZ2VyIiwic2V0dXAiLCJtZXNzYWdlTGlzdCIsImNET00iLCJtZXNzYWdlc0Jsb2NrIiwiY3JlYXRlTWVzc2FnZUVsZW1lbnQiLCJtZXNzYWdlRGF0ZSIsInNlbmRlciIsImlzUmVhZCIsIm1lc3NhZ2VDb250YWluZXJEaXYiLCJjcmVhdGVNZXNzYWdlQ29udGFpbmVyRGl2IiwibWVzc2FnZURhdGVEaXYiLCJjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2siLCJtZXNzYWdlU2VuZGVyRGl2IiwibWVzc2FnZURpdiIsImFwcGVuZENoaWxkIiwiZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkIiwiaSIsIm1lc3NhZ2VzSXNSZWFkIiwiQURNSU5fTkFNRSIsImZpZWxkVmFsdWUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNEaXNwbGF5Iiwic3R5bGVDbGFzc2VzIiwiZGl2Iiwic3R5bGUiLCJpbm5lckhUTUwiLCJjcmVhdGVNZXNzYWdlTGlzdCIsIm1lc3NhZ2VPYmplY3RzIiwibmV3TWVzc2FnZUxpc3QiLCJ1cGRhdGVNZXNzYWdlTGlzdCIsImRpc3BsYXlNZXNzYWdlcyIsImFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IiwibWVzc2FnZU9iaiIsImNsZWFyQ2hhdCIsIm1lc3NhZ2VPYmplY3QiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ1c2VyRGF0YU1hbmFnZXIiLCJVc2VyRGF0YU1hbmFnZXIiLCJnZXRVc2VyRGF0YSIsImdldFVzZXJDb3JyZXNwb25kZW5jZSIsImN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiIsImFib3J0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsIm1lc3NhZ2VzT2JqZWN0IiwiY2xlYXJNZXNzYWdlTGlzdCIsImNyZWF0ZU5ld1VzZXJQcm9maWxlVG9EYXRhQmFzZSIsInNhdmVTZXR0aW5nRmllbGQiLCJ1cGRhdGVVc2VyT25saW5lIiwic2VuZGVyTmFtZSIsIm1pbnV0ZXMiLCJnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsImdldEhvdXJzIiwiY29uY2F0Iiwic2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UiLCJzZXRNZXNzYWdlQXNSZWFkIiwiY29uc29sZSIsImxvZyIsInNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UiLCJzZXR0aW5ncyIsIm5ld0ZpZWxkU2V0dGluZyIsInZpZXdGYWN0b3J5IiwiVmlld0ZhY3RvcnkiLCJjcmVhdGVWaWV3IiwiaHRtbFBhdGgiLCJjc3NQYXRoIiwiY29udGFpbmVyQ2xhc3MiLCJpbmNsdWRlVmlld0Nzc1RvUGFnZSIsImNyZWF0ZUNTU0xpbmsiLCJpbmNsdWRlVmlld0hUTUxUb1BhZ2UiLCJFcnJvciIsImNvbnRhaW5lckRpdiIsImh0bWwiLCJsaW5rIiwiaGVhZCIsImZpbGVQYXRoIiwicmVsIiwic2V0QXR0cmlidXRlIiwiY2hhdEN1c3RvbWl6ZXIiLCJDaGF0Q3VzdG9taXplciIsInNldHVwT3V0ZXJDaGF0U2V0dGluZ3MiLCJzZXRQb3NpdGlvbk9mTWFpbkJsb2NrIiwic2V0VGl0bGUiLCJzZXRNYWluQ3NzQ2xhc3MiLCJhbGxvd0RyYWdORHJvcCIsImNsaWNrQmxvY2siLCJkcmFnQmxvY2siLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNvcmRzIiwic2hpZnRYIiwic2hpZnRZIiwibW92ZU9iaiIsInNldE51bGwiLCJlbmREcmFnIiwiYm94IiwibW92ZUF0IiwiZWxlbSIsImxlZnQiLCJwYWdlWCIsInRvcCIsInBhZ2VZIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJwYWdlWE9mZnNldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ6SW5kZXgiLCJwYXJlbnROb2RlIiwiY2hhdENvbnRyb2xsZXIiLCJnZXRIYXNoIiwic3RyIiwiQ2hhdENvbnRyb2xsZXIiLCJzdGFydEFwcCIsInNldHVwQ2hhdFZpZXciLCJhdXRob3JpemF0aW9uIiwic2V0dXBDaGF0QmFzaWNMaXN0ZW5lcnMiLCJzZXR1cENoYXRTdHlsZSIsInNldHVwSW50ZXJ2YWxGdW5jdGlvbnMiLCJzZXR1cENoYXRTZW5kTGlzdGVuZXJzIiwidXNlck5hbWVJc1JlcXVpcmUiLCJnZXRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlIiwic2V0dXBDaGF0Q29uZGl0aW9uIiwic2F2ZUNvbmRpdGlvblRvTG9jYWxTdG9yYWdlIiwidG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlIiwidG9nZ2xlIiwiZ2V0VXNlck5hbWVGcm9tSW5wdXQiLCJtaW5NYXhTdHlsZVRvZ2dsZSIsImNoYW5nZUlucHV0QW5kU2VuZEJ1dHRvbkNsYXNzIiwiYWN0aXZpdHlOb3RpZnkiLCJjb25kaXRpb24iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsInNldEludGVydmFsIl0sIm1hcHBpbmdzIjoiQUFFQSxJQUFJQSxXQUFhLENBQ2JDLElBQUssQ0FDREMsNEJBQTZCLDBCQUM3QkMseUJBQTBCLDJDQUMxQkMsc0JBQXVCLHFDQUN2QkMsc0JBQXVCLDRDQUV2QkMsNkJBQThCLHNEQUU5QkMsOEJBQStCLDhDQUUvQkMsdUNBQXdDLG9DQUN4Q0MsdUNBQXdDLHdEQUV4Q0Msa0JBQW1CLGdDQUNuQkMsNkJBQThCLCtDQUU5QkMsZ0NBQWlDLHlDQUNqQ0MscUJBQXNCLHFEQUN0QkMscUJBQXNCLGdEQUsxQkMsY0FBZSxnREFJZkMsd0JBQXlCLG9DQUd6QkMsb0JBQXFCLENBQ2pCQyxPQUFRLEtBQ1JDLFNBQVUsS0FDVkMsWUFBWSxFQUNaQyxpQkFBaUIsRUFDakJDLGdCQUFnQixFQUNoQkMsWUFBWSxJQUFJQyxNQUFPQyxXQUczQkMsYUFBYyxDQUNWQyxXQUFXLEVBQ1hDLFNBQVUsUUFDVkMsVUFBVyxpQkFDWEMsZUFBZSxFQUNmQyxjQUFlLDRCQUNmQyxjQUFlLFFBQ2ZDLGFBQWEsR0FJakJDLGdCQUFpQixZQUNqQkMsb0JBQXFCLHlDQUNyQkMsbUJBQW9CLHdDQUdwQkMsbUJBQW9CLHdCQUNwQkMsa0JBQW1CLFFBRW5CQywyQkFBNEIsNEJBQzVCQyxtQkFBb0IsaUJBSXBCQyxlQUNJLCtHQUNKQyxjQUNJLDZGQUdKQyxTQUFVLENBRU5DLDJCQUE0Qiw0Q0FFNUJDLDRCQUE2Qix3Q0FJN0JDLHNCQUF1QixpREFFdkJDLDZCQUE4QiwrQ0FFOUJDLHNCQUF1Qiw2Q0FFdkJDLGlCQUFrQix5Q0FJdEJDLHNCQUFzQixFQUN0QkMscUJBQXFCLEVBQ3JCQyxpQkFBaUIsRUFFakJDLHNCQUF1QixLQUkzQixTQUFTQyxzQkFDTEMsR0FFQSxJQUFJQyxFQUFtQixHQU92QixPQU5lRCxFQUFJRSxPQUFPRixFQUFJRyxRQUFRLEtBQU8sR0FBR0Ms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QWV0UCxVQUFVZ1EsbUJBQXFCLFdBQzFDLElBQUlRLEVBQVk3TixLQUFLb04sK0JBQ3JCcFIsRUFBT2pELG9CQUFvQkMsT0FBU2dILEtBQUtvTiwrQkFBK0JwVSxPQUN4RWdELEVBQU9qRCxvQkFBb0JFLFNBQVcrRyxLQUFLb04sK0JBQStCblUsU0FDMUUrQyxFQUFPakQsb0JBQW9CRyxXQUFhMlUsRUFBVTNVLFlBR3REeVQsRUFBZXRQLFVBQVVpUSw0QkFBOEIsV0FDbkQsSUFBSTlLLEVBQU8xRCxLQUFLZ0MsVUFBVSxDQUN0QjlILE9BQVFnRCxFQUFPakQsb0JBQW9CQyxPQUNuQ0UsV0FBWThDLEVBQU9qRCxvQkFBb0JHLFdBQ3ZDRCxTQUFVK0MsRUFBT2pELG9CQUFvQkUsV0FFekM2VSxhQUFhQyxRQUFRL1IsRUFBTzdCLG1CQUFvQnFJLElBR3BEbUssRUFBZXRQLFVBQVUrUCw2QkFBK0IsV0FDcEQsT0FBT3RPLEtBQUtDLE1BQU0rTyxhQUFhRSxRQUFRaFMsRUFBTzdCLHNCQUtsRHdTLEVBQWV0UCxVQUFVNFAsdUJBQXlCLFdBQzlDLElBQUloTSxFQUFPakIsS0FDWGlPLFlBQWEsV0FDZ0MsYUFBdENqUyxFQUFPeEMsYUFBYU0sZUFDbkI2TixnQkFBZ0JFLFlBQVk3TCxFQUFPakQsb0JBQW9CQyxRQUUzRG1RLFFBQVFDLElBQUksUUFDWm5JLEVBQUsyTSxrQkFDTjVSLEVBQU9iLHdCQUdQLElBQUl3UixFQS9MTSxDQWlNbEI3VSxZQUdIMFUsZUFBZUkiLCJmaWxlIjoiY2hhdEFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbmZpZ1xyXG5cclxudmFyIG1haW5Db25maWcgPSB7XHJcbiAgICBET006IHtcclxuICAgICAgICBNQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRcIixcclxuICAgICAgICBBVVRIT1JJWkFUSU9OX01FTlVfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfaW5wdXQtbmFtZS1ibG9ja1wiLFxyXG4gICAgICAgIFVTRVJfTkFNRV9JTlBVVF9DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9pbnB1dC1uYW1lXCIsXHJcbiAgICAgICAgU0VORF9VU0VSX05BTUVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X2lucHV0LW5hbWUtYnV0dG9uXCIsXHJcblxyXG4gICAgICAgIFNFTkRfTUVTU0FHRV9NSU5fU0laRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfbWluaW1pemUtc3R5bGVfX3NlbmQtYnV0dG9uXCIsXHJcblxyXG4gICAgICAgIFNFTkRfTUVTU0FHRV9GVUxMX1NJWkVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X19ib3R0b21fc2VuZC1idXR0b25cIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgiDQtNC70Y8g0LLQstC+0LTQsCDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfTUFYX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdGV4dGFyZWFcIixcclxuICAgICAgICBDU1NfTUlOX1NJWkVfSU5QVVRfTUVTU0FHRV9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZV9fbWVzc2FnZS1pbnB1dFwiLFxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCIHRpdGxlXHJcbiAgICAgICAgVElUTEVfQkxPQ0tfQ0xBU1M6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnQtdGl0bGVcIixcclxuICAgICAgICBDSEFOR0VfU1RZTEVfQlVUVE9OX01BWF9TSVpFOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X190b3BfbWluaW1pemUtYnV0dG9uXCIsXHJcbiAgICAgICAgLy8g0YfQsNGCINCyINGB0YLQuNC70LUgbWluXHJcbiAgICAgICAgTUlOSU1JWkVfU1RZTEVfQ0hBVF9CTE9DS19DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9taW5pbWl6ZS1zdHlsZVwiLFxyXG4gICAgICAgIFNFVF9NSU5fU1RZTEVfQlVUVE9OOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X21pbmltaXplLXN0eWxlX19tYXgtYnV0dG9uXCIsXHJcbiAgICAgICAgU0VUX01BWF9TVFlMRV9CVVRUT046IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RvcF9taW5pbWl6ZS1idXR0b25cIlxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gZGF0YVNvdXJjZVxyXG4gICAgREFUQV9CQVNFX1VSTDogXCJodHRwczovL29ubGluZWNvbnN1bHRhbnR3ZWJhcHAuZmlyZWJhc2Vpby5jb21cIixcclxuXHJcblxyXG4gICAgLy8gdXNlckRhdGFNYW5hZ2VyXHJcbiAgICBDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUzogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9fdGV4dGFyZWFcIixcclxuXHJcbiAgICAvLyDQvdCw0YHRgtGA0L7QudC60Lgg0YLQtdC60YPRidC10LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70YxcclxuICAgIGN1cnJlbnRVc2VyU2V0dGluZ3M6IHtcclxuICAgICAgICB1c2VySWQ6IG51bGwsXHJcbiAgICAgICAgdXNlck5hbWU6IG51bGwsXHJcbiAgICAgICAgaXNNaW5pbWl6ZTogZmFsc2UsXHJcbiAgICAgICAgcmVhZExhc3RNZXNzYWdlOiBmYWxzZSxcclxuICAgICAgICBzZW5kTmV3TWVzc2FnZTogZmFsc2UsXHJcbiAgICAgICAgbGFzdE9ubGluZTogbmV3IERhdGUoKS5nZXRUaW1lKClcclxuICAgIH0sXHJcblxyXG4gICAgY2hhdFNldHRpbmdzOiB7XHJcbiAgICAgICAgYWxsb3dEcmFnOiBmYWxzZSxcclxuICAgICAgICBwb3NpdGlvbjogXCJyaWdodFwiLFxyXG4gICAgICAgIGNoYXRUaXRsZTogXCJUb3VjaFNvZnQgQ2hhdFwiLFxyXG4gICAgICAgIGFsbG93TWluaW1pemU6IHRydWUsXHJcbiAgICAgICAgb3V0ZXJDc3NDbGFzczogJ3RvdWNoc29mdC1jaGF0X21haW4tYmxvY2snLFxyXG4gICAgICAgIHR5cGVPZlJlcXVlc3Q6IFwiZmV0Y2hcIixcclxuICAgICAgICByZXF1aXJlTmFtZTogdHJ1ZVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDQutC70LDRgdGBINC/0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgSU5WSVNJQkxFX0NMQVNTOiBcImludmlzaWJsZVwiLFxyXG4gICAgQ0hBVF9QT1NJVElPTl9SSUdIVDogXCJyb290X2NoYXRfZm9yX3RvdWNoc29mdF9yaWdodC1wb3NpdGlvblwiLFxyXG4gICAgQ0hBVF9QT1NJVElPTl9MRUZUOiBcInJvb3RfY2hhdF9mb3JfdG91Y2hzb2Z0X2xlZnQtcG9zaXRpb25cIixcclxuXHJcblxyXG4gICAgTE9DQUxfU1RPUkFHRV9OQU1FOiBcInVzZXJJRF90b3VjaHNvZnRfY2hhdFwiLFxyXG4gICAgREVGQVVMVF9VU0VSX05BTUU6IFwiZ3Vlc3RcIixcclxuXHJcbiAgICBERUZBVUxUX0NTU19DTEFTU19GT1JfQ0hBVDogJ3RvdWNoc29mdC1jaGF0X21haW4tYmxvY2snLFxyXG4gICAgREVGQVVMVF9DSEFUX1RJVExFOiBcIlRvdWNoU29mdCBDaGF0XCIsXHJcblxyXG4gICAgLy8gY2hhdFZpZXdDb25maWdcclxuICAgIC8vINC+0YLQutGD0LTQsCDQt9Cw0LPRgNGD0LbQsNC10YIgaHRtbCDQuCBjc3Mg0YfQsNGC0LBcclxuICAgIEhUTUxfRklMRV9QQVRIOlxyXG4gICAgICAgIFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvaHRtbC9jaGF0QXBwbGljYXRpb24vY2hhdC5odG1sXCIsXHJcbiAgICBDU1NfRklMRV9QQVRIOlxyXG4gICAgICAgIFwiaHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9vbmxpbmVfY29uc3VsdGFudF93ZWJfYXBwL21hc3Rlci9hcHAvY3NzL2NoYXQuY3NzXCIsXHJcblxyXG4gICAgLy8g0JrQu9Cw0YHRgdGLINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L7QsdGK0LXQutGC0LDQvNC4INGB0L7QvtCx0YnQtdC90LjQuSDQtNC70Y8g0LjRhSDQvtGC0L7QsdGA0LDQttC10L3QuNGPINCyINGH0LDRgtC1XHJcbiAgICBtZXNzYWdlczoge1xyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBINC00LvRjyDRjdC70LXQvNC10L3QsNGCINGBINGB0L7QvtCx0YnQtdC90LjQtSwg0LXRgdC70Lgg0Y7Qt9C10YAg0L3QtSDQv9GA0L7Rh9C40YLQsNC7INGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgICAgIENTU19VU0VSX05PVF9SRUFEX01FU1NBR0VTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9tZXNzYWdlLW5vdC1yZWFkXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVI6IFwicm9vdF9jaGF0X2Zvcl90b3VjaHNvZnRfX3RvcF9tZXNzYWdlc1wiLFxyXG5cclxuICAgICAgICAvLyBtZXNzYWdlXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQvdCw0YXQvtC00LjRgtGB0Y8g0YHQvtC+0LHRidC10L3QuNGPLNC00LDRgtCwINC4INC40LzRjyDQvtGC0L/RgNCw0LLQuNGC0LXQu9GPXHJcbiAgICAgICAgQ1NTX01FU1NBR0VfQ09OVEFJTkVSOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2UtZWxlbWVudHNcIixcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INC+0YLQvtCx0YDQsNC20LDRgtGMINC40LzRjyDQvtGC0L/RgNCw0LLQuNGC0LXQu9GPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlLXNlbmRlclwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LTQsNGC0YMg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRV9EQVRFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2UtZGF0ZVwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY2hhdC1tZXNzYWdlXCJcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIERJU1BMQVlfTUVTU0FHRV9EQVRFOiB0cnVlLFxyXG4gICAgRElTUExBWV9TRU5ERVJfTkFNRTogdHJ1ZSxcclxuICAgIERJU1BMQVlfTUVTU0FHRTogdHJ1ZSxcclxuXHJcbiAgICBVUERBVEVfVVNFUl9EQVRBX1RJTUU6IDUwMDBcclxufTtcclxuXHJcbi8vIElOQ0xVREVcclxuZnVuY3Rpb24gcGFyc2VTcmNGb3JQYXJhbWV0ZXJzKFxyXG4gICAgc3JjXHJcbikge1xyXG4gICAgdmFyIHVzZXJDb25maWdPYmplY3QgPSB7fTtcclxuICAgIHZhciBhcnJQYXJhbSA9IHNyYy5zdWJzdHIoc3JjLmluZGV4T2YoXCI/XCIpICsgMSkuc3BsaXQoXCImXCIpO1xyXG4gICAgYXJyUGFyYW0uZm9yRWFjaChmdW5jdGlvbiBjcmVhdGVDb25maWdPYmogKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgcGFyYW1PYmogPSBlbGVtZW50LnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBwYXJhbU9ialsxXSA9IHBhcmFtT2JqWzFdLnJlcGxhY2UoLycvZywgXCJcIik7XHJcbiAgICAgICAgdXNlckNvbmZpZ09iamVjdFtwYXJhbU9ialswXV0gPSBwYXJhbU9ialsxXTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHVzZXJDb25maWdPYmplY3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldE91dGVyQ2hhdFNldHRpbmdUb0NvbmZpZyAob3V0ZXJDb25maWdPYmplY3QsIGNvbmZpZykge1xyXG4gICAgT2JqZWN0LmtleXMob3V0ZXJDb25maWdPYmplY3QpLm1hcChmdW5jdGlvbiBnZXRPdXRlclNldHRpbmdzIChrZXkpIHtcclxuICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzW2tleV0gPSBvdXRlckNvbmZpZ09iamVjdFtrZXldO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSlcclxufVxyXG5cclxuLy8gSU5DTFVERVxyXG5cclxuc2V0T3V0ZXJDaGF0U2V0dGluZ1RvQ29uZmlnKHBhcnNlU3JjRm9yUGFyYW1ldGVycyhkb2N1bWVudC5jdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcInNyY1wiKSksIG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCBkYXRhQ29ubmVjdG9yQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIGRhdGFCYXNlVXJsICovXHJcbi8qIGV4cG9ydGVkIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIGRhdGFCYXNlVXJsID0gbWFpbkNvbmZpZy5EQVRBX0JBU0VfVVJMO1xyXG5cclxudmFyIGdldEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRFbGVtZW50RnJvbURPTSAoc2VsZWN0b3IsIGlzQWxsLCBpdElzSWQpIHtcclxuICAgIHZhciBzZWxlY3RvclN0YXJ0ID0gKGl0SXNJZCkgPyBcIiNcIiA6IFwiLlwiO1xyXG4gICAgaWYoaXNBbGwpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JTdGFydCArIHNlbGVjdG9yKTtcclxufTtcclxuXHJcblxyXG52YXIgZGF0YUNvbm5lY3RvckNvbmZpZyA9IHtcclxuICAgIHR5cGVPZlJlcXVlc3Q6IG1haW5Db25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3RcclxufTtcclxuXHJcbi8vIGRhdGFiYXNlXHJcblxyXG4vKiBleHBvcnRlZCBkYXRhQ29ubmVjdG9yICovXHJcbi8qIGdsb2JhbCBkYXRhQ29ubmVjdG9yQ29uZmlnICovXHJcbi8vINCc0L7QtNGD0LvRjCDQv9GA0LXQtNC+0YHRgtCw0LLQu9GP0LXRgiDRgdC/0L7RgdC+0LEg0L7RgtC/0YDQsNCy0LrQuCDQt9Cw0L/RgNC+0YHQsCDQuiDQuNGB0YLQvtGH0L3QuNC60YMg0LTQsNC90L3Ri9GFXHJcbi8vINCU0LvRjyDRgNC10LrQstC10YHRgtCwINC90LXQvtCx0YXQvtC00LjQvCDQv9GD0YLRjCwg0YLQtdC70L4g0LfQsNC/0YDQvtGB0LAsINGC0LjQvyDQt9Cw0L/RgNC+0YHQsFxyXG4vLyByZXF1ZXN0INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIFByb21pc2VcclxudmFyIGRhdGFDb25uZWN0b3IgPSAoZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqKSB7XHJcbiAgICB2YXIgZGF0YUJhc2VDb25uZWN0b3I7XHJcbiAgICB2YXIgZGF0YUJhc2VBUEk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YUJhc2VDb25uZWN0b3IoKSB7fVxyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbiByZXF1ZXN0RmV0Y2goXHJcbiAgICAgICAgcmVxdWVzdFBhdGgsXHJcbiAgICAgICAgcmVxdWVzdEJvZHksXHJcbiAgICAgICAgcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgY29udGVudFR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0UGF0aCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IGNvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHlcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlSlNPTihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLnJlcXVlc3RYTVIgPSBmdW5jdGlvbiByZXF1ZXN0WE1SKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gcmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0VHlwZSwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBsb2FkQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIGVycm9yQ2FzZSgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdEJvZHkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUubG9uZ1BvbGwgPSBmdW5jdGlvbiBsb25nUG9sbCAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGh0dHAub3BlbignR0VUJywgdGFyZ2V0VXJsLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAndGV4dC9ldmVudC1zdHJlYW0nKTtcclxuICAgICAgICByZXR1cm4geGh0dHA7XHJcbiAgICAgICAgLy8geGh0dHAuc2VuZCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBkYXRhQmFzZUNvbm5lY3RvciA9IG5ldyBEYXRhQmFzZUNvbm5lY3RvcigpO1xyXG4gICAgaWYgKGRhdGFDb25uZWN0b3JDb25maWdPYmoudHlwZU9mUmVxdWVzdCA9PT0gXCJmZXRjaFwiKSB7XHJcbiAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RGZXRjaFxyXG4gICAgICAgIH07XHJcbiAgICB9IGVsc2UgaWYgKGRhdGFDb25uZWN0b3JDb25maWdPYmoudHlwZU9mUmVxdWVzdCA9PT0gXCJYSFJcIikge1xyXG4gICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0OiBkYXRhQmFzZUNvbm5lY3Rvci5yZXF1ZXN0WE1SXHJcbiAgICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGF0YUJhc2VBUEkgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IGRhdGFCYXNlQ29ubmVjdG9yLnJlcXVlc3RYTVIsXHJcbiAgICAgICAgICAgIGNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbjogZGF0YUJhc2VDb25uZWN0b3IubG9uZ1BvbGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhQmFzZUFQSTtcclxufSkoZGF0YUNvbm5lY3RvckNvbmZpZyk7XHJcbi8qIGV4cG9ydGVkIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIGRhdGFCYXNlVXJsICovXHJcbi8qIGdsb2JhbCBkYXRhQ29ubmVjdG9yICovXHJcbi8vINCc0L7QtNGD0LvRjCDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhVxyXG4vLyDQktGB0LUgQVBJINGE0YPQvdC60YbQuNC4INCy0L7Qt9Cy0YDQsNGJ0LDRjtGCINC/0YDQvtC80LjRgdGLXHJcbnZhciBkYXRhU291cmNlID0gKGZ1bmN0aW9uIGNyZWF0ZURhdGFTb3VyY2UgKGRhdGFDb25uZWN0b3IsIGNvbmZpZykge1xyXG4gICAgdmFyIGRhdGFTb3VyY2VJbnN0YW5jZTtcclxuICAgIHZhciBkYXRhU291cmNlQVBJO1xyXG4gICAgdmFyIFVTRVJfTElTVCA9IFwidXNlckxpc3RcIjtcclxuICAgIHZhciBVU0VSX01FU1NBR0VTID0gXCJ1c2Vyc01lc3NhZ2VzXCI7XHJcbiAgICB2YXIgVVNFUlNfU0VUVElOR1MgPSBcInVzZXJzU2V0dGluZ3NcIjtcclxuICAgIHZhciBuZXdVc2VyRGF0YSA9IHtcclxuICAgICAgICBpc01pbmltaXplOiBmYWxzZSxcclxuICAgICAgICByZWFkTGFzdE1lc3NhZ2U6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbG9uZ1BvbGxDb25uZWN0IChkYXRhVHlwZSwgdXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFDb25uZWN0b3IuY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uKHJlcXVlc3RQYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYXNpY0Nvbm5lY3QgKGRhdGFUeXBlLCB1c2VySWQpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5yZXF1ZXN0LmJpbmQobnVsbCwgcmVxdWVzdFBhdGgsIG51bGwsIFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2UoKSB7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ID09PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YSA9IGxvbmdQb2xsQ29ubmVjdFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGEgPSBiYXNpY0Nvbm5lY3RcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuY3JlYXRlUmVxdWVzdFBhdGggPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0UGF0aChcclxuICAgICAgICBkYXRhQmFzZVVSTCxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgcmVxdWVzdFBvc3RmaXgsXHJcbiAgICAgICAgcmVxdWVzdFByZWZpeFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBkYXRhQmFzZVVSTDtcclxuICAgICAgICBpZihyZXF1ZXN0UHJlZml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UHJlZml4XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQb3N0Zml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UG9zdGZpeDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF0aCArPSBcIi5qc29uXCI7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldEhUTUwgPSBmdW5jdGlvbiBnZXRIVE1MIChyZXF1ZXN0UGF0aCkge1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcIkdFVFwiLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04J1xyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24gc2V0RGF0YSAoZGF0YVR5cGUsIHJlcXVlc3RUeXBlLCBmaWVsZE5hbWUsIHVzZXJJZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGg7XHJcbiAgICAgICAgaWYocmVxdWVzdFR5cGUgPT09IFwiUFVUXCIpIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIGZpZWxkTmFtZSwgZGF0YVR5cGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSksXHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhU291cmNlICh1c2VySWQsIHVzZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZTtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgbmV3VXNlckRhdGEudXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgICAgICBPYmplY3Qua2V5cyhuZXdVc2VyRGF0YSkubWFwKGZ1bmN0aW9uIChzZXR0aW5nTmFtZSkge1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEoVVNFUlNfU0VUVElOR1MsIFwiUFVUXCIsIHNldHRpbmdOYW1lLCB1c2VySWQsIG5ld1VzZXJEYXRhW3NldHRpbmdOYW1lXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKFVTRVJfTElTVCwgXCJQVVRcIiwgbnVsbCwgdXNlcklkLCB7XCJsYXN0T25saW5lXCI6IGRhdGUuZ2V0VGltZSgpLCBcInNlbmROZXdNZXNzYWdlXCI6IGZhbHNlfSk7XHJcbiAgICB9O1xyXG4gICAgLy8g0KHQvtC30LTQsNC10LwgaW5zdGFuY2Ug0L7QsdGK0LXQutGC0LAsINC30LDQtNCw0LXQvCBBUElcclxuXHJcbiAgICBkYXRhU291cmNlSW5zdGFuY2UgPSBuZXcgRGF0YVNvdXJjZSgpO1xyXG4gICAgZGF0YVNvdXJjZUFQSSA9IHtcclxuICAgICAgICB1c2Vyc0FQSToge1xyXG4gICAgICAgICAgICBnZXRVc2VyTGlzdDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgIFVTRVJfTElTVFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBnZXRVc2VyU2V0dGluZ3M6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HU1xyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBnZXRVc2VyTWVzc2FnZXM6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICBVU0VSX01FU1NBR0VTXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGdldFNldHRpbmdGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFUyxcclxuICAgICAgICAgICAgICAgIFwiUE9TVFwiXHJcblxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBzZXRTZXR0aW5nRmllbGQ6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HUyxcclxuICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgYWRkTmV3VXNlclRvRGF0YVNvdXJjZTogZGF0YVNvdXJjZUluc3RhbmNlLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB1cGRhdGVMYXN0T25saW5lOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgVVNFUl9MSVNULFxyXG4gICAgICAgICAgICAgICAgXCJQVVRcIixcclxuICAgICAgICAgICAgICAgIFwibGFzdE9ubGluZVwiXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZzogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgIFVTRVJfTElTVCxcclxuICAgICAgICAgICAgICAgIFwiUFVUXCIsXHJcbiAgICAgICAgICAgICAgICBcInNlbmROZXdNZXNzYWdlXCJcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgdXBkYXRlTWVzc2FnZUlzUmVhZEZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFUyxcclxuICAgICAgICAgICAgICAgIFwiUFVUXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tbW9uQVBJOiB7XHJcbiAgICAgICAgICAgIGdldEhUTUw6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXRIVE1MLmJpbmQoZGF0YVNvdXJjZUluc3RhbmNlKVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGRhdGFTb3VyY2VBUEk7XHJcbn0pKGRhdGFDb25uZWN0b3IsIG1haW5Db25maWcpO1xyXG4vL1xyXG4vLyB2YXIgdXNlcklkID0gXCJBdGplcnMyMTUzMDI3Nzc0NDk1OFwiO1xyXG4vLyB2YXIgbWVzc2FnZSA9IHtcclxuLy8gICAgIGRhdGU6IFwidGVzdERhdGVcIixcclxuLy8gICAgIGl0SXNSZWFkOiB0cnVlLFxyXG4vLyAgICAgbWVzc2FnZTogXCJ0ZXN0TWVzc2FnZVwiLFxyXG4vLyAgICAgdXNlcjogXCJpdmFuXCJcclxuLy8gfTtcclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5zZW5kTWVzc2FnZShudWxsLCB1c2VySWQsIG1lc3NhZ2UpO1xyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKG51bGwsIHVzZXJJZCwgIG1lc3NhZ2UpO1xyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKHt0ZXN0OiBcInRlc3RcIn0sIHVzZXJJZCwgICBtZXNzYWdlKTtcclxuXHJcblxyXG4vLyBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJNZXNzYWdlcyh1c2VySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4vLyB9KTtcclxuXHJcbi8vIGRhdGFTb3VyY2UudXNlcnNBUEkuc2V0U2V0dGluZ0ZpZWxkKFwidGVzdEZpZWxkXCIsIHVzZXJJZCwgZmFsc2UpO1xyXG4vLyB2YXIgdXNlck5hbWUgPSBcImF0amVyc1wiO1xyXG5cclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5hZGROZXdVc2VyVG9EYXRhU291cmNlKHVzZXJJZCwgdXNlck5hbWUpO1xyXG5cclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyTGlzdChudWxsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuLy8gfSk7XHJcblxyXG5cclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVMYXN0T25saW5lKHVzZXJJZCwgMTExMTExMTExKTtcclxuLy8gZGF0YVNvdXJjZS51c2Vyc0FQSS5nZXRVc2VyU2V0dGluZ3ModXNlcklkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuLy8gfSk7XHJcblxyXG4vLyBldmVudEVtaXR0ZXJcclxuXHJcbnZhciBldmVudEVtaXR0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlRXZlbnRFbWl0dGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkU3Vic2NyaWJlID0gZnVuY3Rpb24gYWRkU3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmKCAhdGhpcy5ldmVudHNbZXZlbnROYW1lXSApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaWJlICgpIHtcclxuICAgICAgICAgICAgdGhhdC5ldmVudHNbZXZlbnROYW1lXSA9IHRoYXQuZXZlbnRzW2V2ZW50TmFtZV0uZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Q2FsbGJhY2sgIT09IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaWJlXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0IChldmVudE5hbWUsIGRhdGEpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLmV2ZW50c1tldmVudE5hbWVdO1xyXG4gICAgICAgIGlmKCBldmVudCApIHtcclxuICAgICAgICAgICAgZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobnVsbCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBFdmVudEVtaXR0ZXIoKTtcclxufSkoKTtcclxudmFyIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIgPSAoZnVuY3Rpb24gY3JlYXRlTG9uZ1BvbGxSZXNwb25zZVBhcnNlcigpIHtcclxuICAgIHZhciB0eXBlc09mQ2hhbmdlID0ge1xyXG4gICAgICAgIG1lc3NhZ2U6IC9tZXNzYWdlLyxcclxuICAgICAgICB1c2VyTGlzdDogL2xhc3RPbmxpbmUuezEsfXNlbmROZXdNZXNzYWdlLyxcclxuICAgICAgICBsYXN0T25saW5lOiAvXCJwYXRoXCI6XCJcXC9cXHd7MSx9XFwvbGFzdE9ubGluZS8sXHJcbiAgICAgICAgc2VuZE5ld01lc3NhZ2U6IC9cInBhdGhcIjpcIlxcL1xcd3sxLH1cXC9zZW5kTmV3TWVzc2FnZS8sXHJcbiAgICAgICAgc2V0dGluZzogL3JlYWRMYXN0TWVzc2FnZS8sXHJcbiAgICAgICAgcmVhZDogL3JlYWQvXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBldmVudFJlZ3VsYXIgPSAvZXZlbnQ6IHB1dC87XHJcbiAgICB2YXIgaGFzTnVsbERhdGEgPSAvZGF0YTogbnVsbC87XHJcbiAgICB2YXIgZ2V0RGF0YVJlZ3VsYXIgPSAvXCIsXCJkYXRhXCI6LztcclxuICAgIHZhciBpdElzTmV3TWVzc2FnZVJlZ3VsYXIgPSAvXCJwYXRoXCI6XCJcXC8tLztcclxuICAgIHZhciBpdElzTmV3VXNlckxpc3RSZWd1bGFyID0gL1wiZGF0YVwiOntcImxhc3RPbmxpbmVcIjpcXGQrLFwic2VuZE5ld01lc3NhZ2VcIjovO1xyXG4gICAgdmFyIGl0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiA9IHRydWU7XHJcbiAgICB2YXIgaXRJc0ZpcnN0VXNlclNldHRpbmdDb25uZWN0aW9uID0gdHJ1ZTtcclxuXHJcbiAgICBmdW5jdGlvbiBMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCkge31cclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5nZXRUeXBlT2ZDaGFuZ2VzID0gZnVuY3Rpb24gZ2V0VHlwZU9mQ2hhbmdlcyhcclxuICAgICAgICBhbnN3ZXJEYXRhXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdHlwZSA9IE9iamVjdC5rZXlzKHR5cGVzT2ZDaGFuZ2UpLmZpbHRlcihcclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q3VycmVudFR5cGVPZkNoYW5nZSh0eXBlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVzT2ZDaGFuZ2VbdHlwZU5hbWVdLnRlc3QoYW5zd2VyRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZU5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB0eXBlWzBdO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZSA9IGZ1bmN0aW9uIHByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVsxXVxyXG4gICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlVXNlcnNNZXNzYWdlcyA9IGZ1bmN0aW9uIHBhcnNlVXNlcnNNZXNzYWdlcyhcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBjaGFuZ2VUeXBlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgIHZhciBtZXNzYWdlSWQ7XHJcbiAgICAgICAgdmFyIHJlc3VsdE9iamVjdCA9IHt9O1xyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlID09PSBcInJlYWRcIikge1xyXG4gICAgICAgICAgICBkYXRhLmlkID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnL3JlYWRcIixcIicpXHJcbiAgICAgICAgICAgICAgICAuc2hpZnQoKTtcclxuICAgICAgICAgICAgZGF0YS52YWx1ZSA9IHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJy9yZWFkXCIsXCJkYXRhXCI6JylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXRJc05ld01lc3NhZ2VSZWd1bGFyLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VJZCA9IHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpXHJcbiAgICAgICAgICAgIC5zaGlmdCgpO1xyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UocmVzcG9uc2UpKTtcclxuICAgICAgICByZXN1bHRPYmplY3RbbWVzc2FnZUlkXSA9IGRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdE9iamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuaGFzTmV3RGF0YSA9IGZ1bmN0aW9uIGhhc05ld0RhdGEocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAhaGFzTnVsbERhdGEudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkgJiYgcmVzcG9uc2UubGVuZ3RoID4gMVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlVXNlckxpc3QgPSBmdW5jdGlvbiBwYXJzZVVzZXJMaXN0KFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgdmFyIHVzZXJJZDtcclxuICAgICAgICBpZiAoaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGl0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXRJc05ld1VzZXJMaXN0UmVndWxhci50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSkge1xyXG4gICAgICAgICAgICB1c2VySWQgPSB0aGlzLmdldFVzZXJJZChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSwgbnVsbCk7XHJcbiAgICAgICAgICAgIGRhdGFbdXNlcklkXSA9IHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgICByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVsxXVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdXNlcklkID0gdGhpcy5nZXRVc2VySWQocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0sIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBbdXNlcklkLCBkYXRhXTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0Rmlyc3REYXRhID0gZnVuY3Rpb24gZ2V0Rmlyc3REYXRhKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIganNvbkRhdGE7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAganNvbkRhdGEgPSBKU09OLnBhcnNlKHRoaXMucHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UocmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGpzb25EYXRhO1xyXG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmdldFVzZXJJZCA9IGZ1bmN0aW9uIGdldFVzZXJJZChcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBjaGFuZ2VUeXBlXHJcbiAgICApIHtcclxuICAgICAgICBpZiAoY2hhbmdlVHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIC5zcGxpdChjaGFuZ2VUeXBlKVxyXG4gICAgICAgICAgICAgICAgLnNoaWZ0KClcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ2RhdGE6IHtcInBhdGhcIjpcIi8nKVxyXG4gICAgICAgICAgICAgICAgLnBvcCgpXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpWzBdXHJcbiAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2Vyc1NldHRpbmdzID0gZnVuY3Rpb24gcGFyc2VVc2Vyc1NldHRpbmdzKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZiAoaXRJc0ZpcnN0VXNlclNldHRpbmdDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGl0SXNGaXJzdFVzZXJTZXR0aW5nQ29ubmVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShcclxuICAgICAgICAgICAgcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdChnZXREYXRhUmVndWxhcilbMV1cclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBbbnVsbCwgZGF0YV07XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UodGV4dCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB0ZXh0LnNwbGl0KGV2ZW50UmVndWxhcik7XHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSB0aGlzLmdldFR5cGVPZkNoYW5nZXMocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdE9mUGFyc2UgPSB7IHR5cGU6IGNoYW5nZVR5cGUgfTtcclxuICAgICAgICBpZiAodGhpcy5oYXNOZXdEYXRhKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwibWVzc2FnZVwiIHx8IGNoYW5nZVR5cGUgPT09IFwicmVhZFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRPZlBhcnNlLm9iamVjdCA9IHRoaXMucGFyc2VVc2Vyc01lc3NhZ2VzKHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPT09IFwic2VuZE5ld01lc3NhZ2VcIiB8fFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJsYXN0T25saW5lXCIgfHxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPT09IFwidXNlckxpc3RcIlxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJMaXN0KHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2VUeXBlID09PSBcInNldHRpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0T2ZQYXJzZS5vYmplY3QgPSB0aGlzLnBhcnNlVXNlcnNTZXR0aW5ncyhyZXN1bHQsIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mUGFyc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTG9uZ1BvbGxSZXNwb25zZVBhcnNlcigpO1xyXG59KSgpO1xyXG5cclxuLy8gbWVzc2FnZU1hbmFnZXJcclxuXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINGA0LDQsdC+0YLRiyDRgdC+INGB0L/QuNGB0LrQvtC8INGB0L7QvtCx0YnQtdC90LjQuSDQntCU0J3QntCT0J4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbnZhciBtZXNzYWdlTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gc2V0dXBNZXNzYWdlTGlzdE1hbmFnZXIgKGNvbmZpZykge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vINCk0L7RgNC80LDRgiAgbWVzc2FnZUxpc3QgPSBbXHJcbiAgICAvLyAgICB7XHJcbiAgICAvLyAgICAgICBzZW5kZXI6IHNlbmRlclxyXG4gICAgLy8gICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIC8vICAgICAgIHJlYWQ6IHRydWUvZmFsc2VcclxuICAgIC8vICAgICAgIGRhdGU6IGRhdGVcclxuICAgIC8vICAgIH0sXHJcbiAgICAvLyBdXHJcbiAgICAvLyByZWFkIC0g0LHRi9C70L4g0LvQuCDQv9GA0L7Rh9C40YLQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIE1lc3NhZ2VMaXN0TWFuYWdlcigpIHt9XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5jRE9NID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlc0Jsb2NrOiBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFX0RBVEUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkICgpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICB2YXIgbWVzc2FnZXNJc1JlYWQgPSBbXTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSBjb25maWcuQURNSU5fTkFNRSB8fCBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZTtcclxuICAgICAgICB2YXIgdXNlcklkID0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIGZvcihpID0gdGhpcy5tZXNzYWdlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1lc3NhZ2VMaXN0W2ldLnNlbmRlciAhPT0gdXNlck5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLm1lc3NhZ2VMaXN0W2ldLnJlYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc0lzUmVhZC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogdGhpcy5tZXNzYWdlTGlzdFtpXS5pZCArIFwiL3JlYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzSXNSZWFkO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgKGlzUmVhZCwgc2VuZGVyKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX01FU1NBR0VfQ09OVEFJTkVSKTtcclxuICAgICAgICBpZiAoIWlzUmVhZCAmJiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSAhPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgPSBmdW5jdGlvbiBjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgKHRleHQsIGlzRGlzcGxheSwgc3R5bGVDbGFzc2VzKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc3R5bGVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gY2xhc3NBZGQgKHN0eWxlKSB7XHJcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKHN0eWxlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTUVTU0FHRSBFTEVNRU5UIC8vXHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VMaXN0IChtZXNzYWdlT2JqZWN0cykgIHtcclxuICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cykge1xyXG4gICAgICAgICAgICBtZXNzYWdlT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIGFkZEVsZW1lbnRUb01lc3NhZ2VMaXN0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3QgKG5ld01lc3NhZ2VMaXN0KSB7XHJcbiAgICAgICAgaWYodGhpcy5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnJlYWRMYXN0TWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IChcclxuICAgICAgICBtZXNzYWdlT2JqXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LnB1c2gobWVzc2FnZU9iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0LXRgNC10LHQuNGA0LDQtdGCINGB0L/QuNGB0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LksINGB0L7Qt9C00LDQtdGCINGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40LUg0LjQvCBET00g0Y3Qu9C10LzQtdC90YLRiyDQuCDQstGB0YLQsNCy0LvRj9C10YIg0LjRhSDQsiDRh9Cw0YJcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuZGlzcGxheU1lc3NhZ2VzID0gZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2VzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNsZWFyQ2hhdCgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBjcmVhdGVNZXNzYWdlIChtZXNzYWdlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGF0LmNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnJlYWRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhhdC5jRE9NLm1lc3NhZ2VzQmxvY2suYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YfQuNGB0YLQuNGC0YwgRE9NINGN0LvQtdC80LXQvdGCINCyINC60L7RgtC+0YDQvtC8INC+0YLQvtCx0YDQsNC20LDRjtGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8gKNC90LDQv9GA0LjQvNC10YAg0YfRgtC+0LHRiyDQstGB0YLQsNCy0LjRgtGMINC90LLQvtGL0Lkg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSlcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJDaGF0ID0gZnVuY3Rpb24gY2xlYXJDaGF0KCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLmNET00ubWVzc2FnZXNCbG9jay5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLnJlbW92ZUNoaWxkKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNZXNzYWdlTGlzdE1hbmFnZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4vKiBnbG9iYWwgZ2V0Q3VycmVudERhdGUgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGV2ZW50RW1pdHRlciAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgdXNlckRhdGFNYW5hZ2VyID0gIChmdW5jdGlvbiBjcmVhdGVVc2VyRGF0YU1hbmFnZXIgKGNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKSB7XHJcbiAgICBmdW5jdGlvbiBVc2VyRGF0YU1hbmFnZXIgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3QgPT09IFwibG9uZ1BvbGxcIikge1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJEYXRhID0gZ2V0VXNlckRhdGFGcm9tTG9uZ1BvbGxDb25uZWN0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckNvcnJlc3BvbmRlbmNlID0gZ2V0VXNlckNvcnJlc3BvbmRlbmNlRnJvbUxvbmdQb2xsQ29ubmVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gdXBkYXRlTWVzc2FnZUxpc3RBZnRlckxvbmdQb2xsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZU1lc3NhZ2VMaXN0KGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcInJlYWRcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtZXNzYWdlLmlkID0gZGF0YS5pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlYWQgPSBkYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhQmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyQ29ycmVzcG9uZGVuY2UgPSBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgLyogZXhwb3J0ZWQgZ2V0Q3VycmVudERhdGUgKi9cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgbWludXRlcyA9IChkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkgPyBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGVcclxuICAgICAgICAgICAgLmdldEhvdXJzKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLmNvbmNhdChcIjpcIiwgbWludXRlcyk7XHJcbiAgICB9XHJcbiAgICAvKiBleHBvcnRlZCBjcmVhdGVNZXNzYWdlT2JqZWN0ICovXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlT2JqZWN0IChcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgc2VuZGVyLFxyXG4gICAgICAgIGlzUmVhZCxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWQ6IGlzUmVhZCxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJTkNMVURFXHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuc2V0dXAoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGJhc2ljXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyRGF0YUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpLnRoZW4oIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgIC8vICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlTGlzdEJhc2ljIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2VzT2JqZWN0ID0gW107XHJcbiAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtrZXldLmlkID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzT2JqZWN0LnB1c2goZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICAgICAgbmV3TWVzc2FnZUxpc3QgPSBtZXNzYWdlTGlzdE1hbmFnZXIuY3JlYXRlTWVzc2FnZUxpc3QobWVzc2FnZXNPYmplY3QpO1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIudXBkYXRlTWVzc2FnZUxpc3QobmV3TWVzc2FnZUxpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJDb3JyZXNwb25kZW5jZUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCkoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHRoYXQudXBkYXRlTWVzc2FnZUxpc3QoZGF0YSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tTG9uZ1BvbGxDb25uZWN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpO1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckNvcnJlc3BvbmRlbmNlRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiA9IGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gMyAmJiB0aGlzLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBsb25nUG9sbFJlc3BvbnNlUGFyc2VyLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uc2VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbCAoZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFba2V5XS5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdChkYXRhW2tleV0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5jbGVhck1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gY2xlYXJNZXNzYWdlTGlzdCAoKSB7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlID0gZnVuY3Rpb24gY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlICh1c2VySWQsIHVzZXJOYW1lKSB7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5hZGROZXdVc2VyVG9EYXRhU291cmNlKHVzZXJJZCwgdXNlck5hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVTZXR0aW5nRmllbGQgPSBmdW5jdGlvbiBzZXRGaWVsZCAoZmllbGROYW1lKSB7XHJcbiAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5zZXRTZXR0aW5nRmllbGQoXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZSxcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5nc1tmaWVsZE5hbWVdXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lID0gZnVuY3Rpb24gdXBkYXRlVXNlck9ubGluZSAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZTtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZUxhc3RPbmxpbmUodXNlcklkLCBkYXRlLmdldFRpbWUoKSlcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlIChzZW5kZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmdldE1lc3NhZ2VGcm9tSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gY3JlYXRlTWVzc2FnZU9iamVjdChtZXNzYWdlLCBkYXRlLCBzZW5kZXJOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ICE9PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICBlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0TWVzc2FnZUFzUmVhZCA9IGZ1bmN0aW9uIHNldE1lc3NhZ2VBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0cyA9IG1lc3NhZ2VMaXN0TWFuYWdlci5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2VPYmplY3RzKTtcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiBzZXRSZWFkIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZChcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5yZWFkTGFzdE1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlTWVzc2FnZVRvRGF0YVNvdXJjZSAobWVzc2FnZU9iamVjdCkge1xyXG4gICAgICAgIGlmKG1lc3NhZ2VPYmplY3Quc2VuZGVyID09PSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyhjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkuc2VuZE1lc3NhZ2UoXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCxcclxuICAgICAgICAgICAgbWVzc2FnZU9iamVjdFxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNldHRpbmdzID0gW3t1c2VySWQsIGZpZWxkTmFtZSwgZmllbGRWYWx1ZX0se30uLi5dXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBzYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlIChzZXR0aW5ncykge1xyXG4gICAgICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24gc2F2ZVNldHRpbmcgKG5ld0ZpZWxkU2V0dGluZykge1xyXG4gICAgICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldFNldHRpbmdGaWVsZChcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLmZpZWxkVmFsdWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBuZXcgVXNlckRhdGFNYW5hZ2VyKCk7XHJcblxyXG59KShtYWluQ29uZmlnLCBldmVudEVtaXR0ZXIsIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIpO1xyXG5cclxuLy8gdmlld1xyXG5cclxuLyogZXhwb3J0ZWQgdmlld0ZhY3RvcnkgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGRhdGFTb3VyY2UgKi9cclxudmFyIHZpZXdGYWN0b3J5ID0gKGZ1bmN0aW9uIGNyZWF0ZVZpZXdGYWN0b3J5IChkYXRhU291cmNlKSB7XHJcblxyXG4gICAgZnVuY3Rpb24gVmlld0ZhY3RvcnkgKCkge31cclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlVmlldyA9IGZ1bmN0aW9uIGNyZWF0ZUNoYXRWaWV3IChodG1sUGF0aCwgY3NzUGF0aCwgY29udGFpbmVyQ2xhc3MpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGNyZWF0ZVZpZXdQcm9taXNlIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgaWYoaHRtbFBhdGgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNzc1BhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmluY2x1ZGVWaWV3Q3NzVG9QYWdlKHRoYXQuY3JlYXRlQ1NTTGluayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXNoZWV0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGV4dC9jc3NcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3VjaC1zb2Z0LWNoYXQtY3NzXCJcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhhdC5pbmNsdWRlVmlld0hUTUxUb1BhZ2UoaHRtbFBhdGgsIGNvbnRhaW5lckNsYXNzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaHRtbFBhdGggaXMgbnVsbC4gUGxlYXNlIGFkZCBodG1sUGF0aFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmluY2x1ZGVWaWV3SFRNTFRvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0SFRNTFRvUGFnZSAoaHRtbFBhdGgsIGNvbnRhaW5lckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckRpdiA9IChjb250YWluZXJDbGFzcykgPyBnZXRFbGVtZW50KGNvbnRhaW5lckNsYXNzKSA6IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UuY29tbW9uQVBJLmdldEhUTUwoaHRtbFBhdGgpLnRoZW4oZnVuY3Rpb24gc2V0SHRtbCAoaHRtbCkge1xyXG4gICAgICAgICAgICBjb250YWluZXJEaXYuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuaW5jbHVkZVZpZXdDc3NUb1BhZ2UgPSBmdW5jdGlvbiBpbmNsdWRlQ2hhdENzc1RvUGFnZSAobGluaykge1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVDU1NMaW5rID0gZnVuY3Rpb24gY3JlYXRlQ1NTTGluayhcclxuICAgICAgICBmaWxlUGF0aCxcclxuICAgICAgICByZWwsXHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBpZFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWwpIHtcclxuICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJyZWxcIiwgcmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUpIHtcclxuICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIHR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgZmlsZVBhdGgpO1xyXG4gICAgICAgIHJldHVybiBsaW5rO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFZpZXdGYWN0b3J5KClcclxuXHJcbn0pKGRhdGFTb3VyY2UpO1xyXG5cclxuLy8gY2hhdE1haW5cclxuXHJcbi8qIGV4cG9ydGVkIGNoYXRDdXN0b21pemVyICovXHJcbi8qIGdsb2JhbCBjaGF0Q3VzdG9taXplciAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG52YXIgY2hhdEN1c3RvbWl6ZXIgPSAoZnVuY3Rpb24gY3JlYXRlQ2hhdEN1c3RvbWl6ZXIgKGNvbmZpZykge1xyXG5cclxuICAgIGZ1bmN0aW9uIENoYXRDdXN0b21pemVyKCkge31cclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0dXBPdXRlckNoYXRTZXR0aW5ncyA9IGZ1bmN0aW9uIHNldHVwT3V0ZXJDaGF0U2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5hbGxvd01pbmltaXplKCk7XHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbk9mTWFpbkJsb2NrKCk7XHJcbiAgICAgICAgdGhpcy5zZXRUaXRsZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0TWFpbkNzc0NsYXNzKCk7XHJcbiAgICAgICAgdGhpcy5hbGxvd0RyYWdORHJvcCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuYWxsb3dEcmFnTkRyb3AgPSBmdW5jdGlvbiBhbGxvd0RyYWdORHJvcCgpIHtcclxuICAgICAgICB2YXIgY2xpY2tCbG9jayA9IGdldEVsZW1lbnQoY29uZmlnLkRPTS5USVRMRV9CTE9DS19DTEFTUyk7XHJcbiAgICAgICAgdmFyIGRyYWdCbG9jayA9IGdldEVsZW1lbnQoY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpO1xyXG4gICAgICAgIGlmIChjb25maWcuY2hhdFNldHRpbmdzLmFsbG93RHJhZyA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2xpY2tCbG9jay5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uIGRyYWdBbmREcm9wKGUpIHtcclxuICAgICAgICAgICAgdmFyIGNvcmRzO1xyXG4gICAgICAgICAgICB2YXIgc2hpZnRYO1xyXG4gICAgICAgICAgICB2YXIgc2hpZnRZO1xyXG4gICAgICAgICAgICB2YXIgbW92ZU9iajtcclxuICAgICAgICAgICAgdmFyIHNldE51bGw7XHJcbiAgICAgICAgICAgIHZhciBlbmREcmFnO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q29vcmRzKGVsZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IGJveC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXRcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvcmRzID0gZ2V0Q29vcmRzKGRyYWdCbG9jayk7XHJcbiAgICAgICAgICAgIHNoaWZ0WCA9IGUucGFnZVggLSBjb3Jkcy5sZWZ0O1xyXG4gICAgICAgICAgICBzaGlmdFkgPSBlLnBhZ2VZIC0gY29yZHMudG9wO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gbW92ZUF0KGVsZW0pIHtcclxuICAgICAgICAgICAgICAgIGRyYWdCbG9jay5zdHlsZS5sZWZ0ID0gZWxlbS5wYWdlWCAtIHNoaWZ0WCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIGRyYWdCbG9jay5zdHlsZS50b3AgPSBlbGVtLnBhZ2VZIC0gc2hpZnRZICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtb3ZlT2JqID0gZnVuY3Rpb24gbW92ZU9iakRyYWdBbmREcm9wKGVsZW0pIHtcclxuICAgICAgICAgICAgICAgIG1vdmVBdChlbGVtKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHNldE51bGwgPSBmdW5jdGlvbiBzZXROdWxsRHJhZ0FuZERyb3AgKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLG1vdmVPYmogKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsc2V0TnVsbCApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZW5kRHJhZyA9IGZ1bmN0aW9uIGVuZERyYWdBbmREcm9wKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbW92ZUF0KGUpO1xyXG4gICAgICAgICAgICBkcmFnQmxvY2suc3R5bGUuekluZGV4ID0gMTAwMDtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW92ZU9iaik7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHNldE51bGwpO1xyXG4gICAgICAgICAgICBkcmFnQmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCBlbmREcmFnKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5zZXRQb3NpdGlvbk9mTWFpbkJsb2NrID0gZnVuY3Rpb24gc2V0UG9zaXRpb25PZk1haW5CbG9jaygpIHtcclxuICAgICAgICBpZiAoY29uZmlnLmNoYXRTZXR0aW5ncy5wb3NpdGlvbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuQ0hBVF9QT1NJVElPTl9SSUdIVFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuQ0hBVF9QT1NJVElPTl9MRUZUXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q3VzdG9taXplci5wcm90b3R5cGUuc2V0VGl0bGUgPSBmdW5jdGlvbiBzZXRUaXRsZSgpIHtcclxuICAgICAgICBpZihjb25maWcuY2hhdFNldHRpbmdzLmNoYXRUaXRsZS5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3MuY2hhdFRpdGxlID0gY29uZmlnLkRFRkFVTFRfQ0hBVF9USVRMRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlRJVExFX0JMT0NLX0NMQVNTKS5pbm5lckhUTUwgPSBjb25maWcuY2hhdFNldHRpbmdzLmNoYXRUaXRsZTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdEN1c3RvbWl6ZXIucHJvdG90eXBlLmFsbG93TWluaW1pemUgPSBmdW5jdGlvbiBhbGxvd01pbmltaXplKCkge1xyXG4gICAgICAgIGlmIChjb25maWcuY2hhdFNldHRpbmdzLmFsbG93TWluaW1pemUgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ0hBTkdFX1NUWUxFX0JVVFRPTl9NQVhfU0laRSkuY2xhc3NMaXN0LmFkZChcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDdXN0b21pemVyLnByb3RvdHlwZS5zZXRNYWluQ3NzQ2xhc3MgPSBmdW5jdGlvbiBzZXRNYWluQ3NzQ2xhc3MoKSB7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy5vdXRlckNzc0NsYXNzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgY29uZmlnLmNoYXRTZXR0aW5ncy5vdXRlckNzc0NsYXNzID0gY29uZmlnLkRFRkFVTFRfQ1NTX0NMQVNTX0ZPUl9DSEFUO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uTUFJTl9TVFlMRV9DSEFUX0JMT0NLX0NMQVNTKS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgIGNvbmZpZy5jaGF0U2V0dGluZ3Mub3V0ZXJDc3NDbGFzc1xyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgQ2hhdEN1c3RvbWl6ZXIoKTtcclxufSkobWFpbkNvbmZpZyk7XHJcbi8qIGdsb2JhbCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGNoYXRDdXN0b21pemVyICovXHJcbi8qIGdsb2JhbCBnZXRIYXNoICovXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGdsb2JhbCB2aWV3RmFjdG9yeSAqL1xyXG52YXIgY2hhdENvbnRyb2xsZXIgPSAoZnVuY3Rpb24gY3JlYXRlQ2hhdENvbnRyb2xsZXIgKGNvbmZpZykge1xyXG5cclxuICAgIC8vIElOQ0xVREUgLy9cclxuXHJcbiAgICAvKiBleHBvcnRlZCBnZXRIYXNoICovXHJcbiAgICBmdW5jdGlvbiBnZXRIYXNoKHN0cikge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gc3RyICsgZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERSAvL1xyXG5cclxuICAgIGZ1bmN0aW9uIENoYXRDb250cm9sbGVyKCkge31cclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcEJhc2ljICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oY29uZmlnLkxPQ0FMX1NUT1JBR0VfTkFNRSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dXBDaGF0VmlldygpLnRoZW4oIGZ1bmN0aW9uIHN0YXJ0QXV0aG9yaXphdGlvbkFuZEJhc2ljTGlzdGVuZXJzICgpIHtcclxuICAgICAgICAgICAgdGhhdC5hdXRob3JpemF0aW9uKGNvbmZpZy5jaGF0U2V0dGluZ3MucmVxdWlyZU5hbWUpO1xyXG4gICAgICAgICAgICB0aGF0LnNldHVwQ2hhdEJhc2ljTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiBhZnRlclNldHVwVmlld0NvbmZpZ3VyYXRpb24gKCkge1xyXG4gICAgICAgICAgICBpZihjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5nZXRVc2VyRGF0YShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpLnRoZW4oZnVuY3Rpb24gYWZ0ZXJVc2VyRGF0YVNldHVwICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnNldHVwQ2hhdFN0eWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXR1cEludGVydmFsRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXR1cENoYXRTZW5kTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoYXQuc2V0dXBDaGF0U3R5bGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gcG9zdENoYXRTZXR1cCAoKSB7XHJcbiAgICAgICAgICAgIGNoYXRDdXN0b21pemVyLnNldHVwT3V0ZXJDaGF0U2V0dGluZ3MoKTtcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBhdXRob3JpemF0aW9uIGJsb2NrIC8vXHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb24gPSBmdW5jdGlvbiBhdXRob3JpemF0aW9uICh1c2VyTmFtZUlzUmVxdWlyZSkge1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZXR1cCgpO1xyXG4gICAgICAgIGlmKCF0aGlzLmdldENvbmRpdGlvbkZyb21Mb2NhbFN0b3JhZ2UoKSkge1xyXG4gICAgICAgICAgICBpZih1c2VyTmFtZUlzUmVxdWlyZSA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBnZXRIYXNoKGNvbmZpZy5ERUZBVUxUX1VTRVJfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSA9IGNvbmZpZy5ERUZBVUxUX1VTRVJfTkFNRTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUNvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCwgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVBdXRob3JpemF0aW9uTWVudVZpc2libGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBDaGF0Q29uZGl0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUudG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlID0gZnVuY3Rpb24gdG9nZ2xlQXV0aG9yaXphdGlvbk1lbnVWaXNpYmxlICgpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQVVUSE9SSVpBVElPTl9NRU5VX0NMQVNTKS5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgKVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8g0JXRgdC70Lgg0YLRgNC10LHRg9C10YLRgdGPINCy0LLQtdGB0YLQuCDQuNC80Y8sINC/0L7Qu9GD0YfQsNC10Lwg0LXQs9C+INC4INC30LDQvdC+0YHQuNC8INGO0LfQtdGA0LAg0LIg0LHQtFxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmdldFVzZXJOYW1lRnJvbUlucHV0ID0gZnVuY3Rpb24gZ2V0VXNlck5hbWVGcm9tSW5wdXQgKCkge1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lID0gZ2V0RWxlbWVudChcclxuICAgICAgICAgICAgY29uZmlnLkRPTS5VU0VSX05BTUVfSU5QVVRfQ0xBU1NcclxuICAgICAgICApLnZhbHVlO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IGdldEhhc2goXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25maWcuY2hhdFNldHRpbmdzLmlzTWluaW1pemUgPSBmYWxzZTtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCwgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBdXRob3JpemF0aW9uTWVudVZpc2libGUoKTtcclxuICAgICAgICB0aGlzLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNldHVwQ2hhdFNlbmRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB1c2VyRGF0YU1hbmFnZXIuZ2V0VXNlckRhdGEoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2V0dXAgQ2hhdCAvL1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRTZW5kTGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0dXBDaGF0U2VuZExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgLy8gc2V0dXAgY2hhdCBsaXN0ZW5lcnNcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uU0VORF9NRVNTQUdFX0ZVTExfU0laRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5zZW5kTWVzc2FnZS5iaW5kKHVzZXJEYXRhTWFuYWdlcixcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJOYW1lXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uU0VORF9NRVNTQUdFX01JTl9TSVpFX0JVVFRPTikuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgdXNlckRhdGFNYW5hZ2VyLnNlbmRNZXNzYWdlLmJpbmQodXNlckRhdGFNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB1c2VyRGF0YU1hbmFnZXIuc2V0TWVzc2FnZUFzUmVhZC5iaW5kKHVzZXJEYXRhTWFuYWdlcikpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGF0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDaGF0QmFzaWNMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXR1cENoYXRCYXNpY0xpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5TRU5EX1VTRVJfTkFNRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgdGhhdC5nZXRVc2VyTmFtZUZyb21JbnB1dC5iaW5kKHRoYXQpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uU0VUX01BWF9TVFlMRV9CVVRUT04pLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgIHRoYXQubWluTWF4U3R5bGVUb2dnbGUuYmluZCh0aGF0KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLlNFVF9NSU5fU1RZTEVfQlVUVE9OKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICB0aGF0Lm1pbk1heFN0eWxlVG9nZ2xlLmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwQ2hhdFZpZXcgPSBmdW5jdGlvbiBzZXR1cENoYXRWaWV3ICgpIHtcclxuICAgICAgICByZXR1cm4gdmlld0ZhY3RvcnkuY3JlYXRlVmlldyhjb25maWcuSFRNTF9GSUxFX1BBVEgsIGNvbmZpZy5DU1NfRklMRV9QQVRILCBudWxsKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwQ2hhdFN0eWxlID0gZnVuY3Rpb24gc2V0dXBDaGF0U3R5bGUoKSB7XHJcbiAgICAgICAgaWYgKCFjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplKSB7XHJcbiAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5NQUlOX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1JTklNSVpFX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuSU5WSVNJQkxFX0NMQVNTXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhbmdlSW5wdXRBbmRTZW5kQnV0dG9uQ2xhc3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLm1pbk1heFN0eWxlVG9nZ2xlID0gZnVuY3Rpb24gbWluTWF4U3R5bGVUb2dnbGUoKSB7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1BSU5fU1RZTEVfQ0hBVF9CTE9DS19DTEFTUykuY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgICAgICAgY29uZmlnLklOVklTSUJMRV9DTEFTU1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLk1JTklNSVpFX1NUWUxFX0NIQVRfQkxPQ0tfQ0xBU1MpLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgICAgICAgIGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1NcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLmlzTWluaW1pemUgPSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID09PSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNoYW5nZUlucHV0QW5kU2VuZEJ1dHRvbkNsYXNzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmFjdGl2aXR5Tm90aWZ5ID0gZnVuY3Rpb24gYWN0aXZpdHlOb3RpZnkgKCkge1xyXG4gICAgICAgIHVzZXJEYXRhTWFuYWdlci51cGRhdGVVc2VyT25saW5lKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5jaGFuZ2VJbnB1dEFuZFNlbmRCdXR0b25DbGFzcyA9IGZ1bmN0aW9uIGNoYW5nZUlucHV0QW5kU2VuZEJ1dHRvbkNsYXNzICgpIHtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyA9IGNvbmZpZy5ET00uQ1NTX01JTl9TSVpFX0lOUFVUX01FU1NBR0VfQkxPQ0tfQ0xBU1NcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25maWcuQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MgPSBjb25maWcuRE9NLkNTU19NQVhfU0laRV9JTlBVVF9NRVNTQUdFX0JMT0NLX0NMQVNTXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTE9DQUwgU1RPUkFHRSAvL1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cENoYXRDb25kaXRpb24gPSBmdW5jdGlvbiBzZXR1cENoYXRDb25kaXRpb24gKCkge1xyXG4gICAgICAgIHZhciBjb25kaXRpb24gPSB0aGlzLmdldENvbmRpdGlvbkZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSB0aGlzLmdldENvbmRpdGlvbkZyb21Mb2NhbFN0b3JhZ2UoKS51c2VySWQ7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUgPSB0aGlzLmdldENvbmRpdGlvbkZyb21Mb2NhbFN0b3JhZ2UoKS51c2VyTmFtZTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplID0gY29uZGl0aW9uLmlzTWluaW1pemU7XHJcbiAgICB9O1xyXG5cclxuICAgIENoYXRDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlQ29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzYXZlQ29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHVzZXJJZDogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLFxyXG4gICAgICAgICAgICBpc01pbmltaXplOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy5pc01pbmltaXplLFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25maWcuTE9DQUxfU1RPUkFHRV9OQU1FLCBkYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLmdldENvbmRpdGlvbkZyb21Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBnZXRDb25kaXRpb25Gcm9tTG9jYWxTdG9yYWdlICgpIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25maWcuTE9DQUxfU1RPUkFHRV9OQU1FKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBMT0NBTCBTVE9SQUdFIC8vXHJcblxyXG4gICAgQ2hhdENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMgPSBmdW5jdGlvbiBzZXR1cEludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uIGludGVydmFsRnVuY3Rpb25zICgpIHtcclxuICAgICAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ICE9PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJEYXRhTWFuYWdlci5nZXRVc2VyRGF0YShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGVzdFwiKTtcclxuICAgICAgICAgICAgdGhhdC5hY3Rpdml0eU5vdGlmeSgpO1xyXG4gICAgICAgIH0sIGNvbmZpZy5VUERBVEVfVVNFUl9EQVRBX1RJTUUpXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgQ2hhdENvbnRyb2xsZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcsIGV2ZW50RW1pdHRlcik7XHJcblxyXG5cclxuY2hhdENvbnRyb2xsZXIuc3RhcnRBcHAoKTsiXX0=
