var mainConfig={DOM:{USER_LIST_CSS_CLASS:"root-touchsoft-dashboard_users-list",CSS_CHAT_CONTAINS_BLOCK_STYLE:"root-touchsoft-dashboard_chat",CSS_SEND_MESSAGE_BUTTON_CLASS:"root-touchsoft-dashboard_send-button",CSS_CLOSE_CHAT_BUTTON_CLASS:"root-touchsoft-dashboard_close-chat",CSS_FILTER_INPUT_ID:"root-touchsoft-dashboard_filter-input",CSS_SORT_SELECT_ID:"root-touchsoft-dashboard_sort",CSS_ACTIVE_USER_BLOCK:"root-touchsoft-dashboard_active-user",CSS_CONTROL_PANEL_LOG_CLASS:"root-touchsoft-dashboard_control-log",CSS_CONTROL_PANEL_SELECT_CLASS:"root-touchsoft-dashboard_control_select_command",CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS:"root-touchsoft-dashboard_control_send-command-button",CSS_CONTROL_PARAMETERS_CLASS:"root-touchsoft-dashboard_control_parameter-input",CSS_CONTROL_PANEL_LOG_ELEMENT_CLASS:"root-touchsoft-dashboard_control-log-inner-information"},launcher:{pattern:"touchsoft_chat-launcher_",after:["chatTitle","chatUrl","chatClass","chatPositionSelect","allowMinimize","allowDrag","requireName","showTime","networkRadioXMR","networkRadioFetch","networkRadioLongPoll","scriptCode"],srcStart:"&ltscript src='https://rawgit.com/UnacceptableCondition/Homework_2/master/js/chat.js?",srcEnd:"'&gt&lt/script&gt"},userList:{USER_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user",USER_ID_ELEMENT_CSS_CLASS:"root-touchsoft-dashboard_user-id",USER_INDICATOR_CSS_CLASS_OFFLINE:"root-touchsoft-dashboard_user-offline",USER_INDICATOR_CSS_CLASS_ONLINE:"root-touchsoft-dashboard_user-online"},chatSettings:{typeOfRequest:"longPoll"},currentUserSettings:{userId:null,userName:null},currentDashboardCondition:{filterBy:null,sortBy:null},interval:{UPDATE_USERS_TIME:5e3,ONLINE_INTERVAL:12e3},router:{ABOUT_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/about.html",LAUNCHER_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/chatLauncher.html",DASHBOARD_HTML_PATH:"https://rawgit.com/UnacceptableCondition/online_consultant_web_app/master/app/html/dashboard/dashboard.html",CONTENT_CLASS:"content",NAVIGATION_ACTIVE_CSS:"navigation-active"},messages:{CSS_USER_NOT_READ_MESSAGES:"root-touchsoft-dashboard_message-not-read",CSS_CHAT_MESSAGES_CONTAINER:"root-touchsoft-dashboard_chat-messages",CSS_MESSAGE_CONTAINER:"root-touchsoft-dashboard_chat-message-elements",CSS_CHAT_MESSAGE_SENDER_NAME:"root-touchsoft-dashboard_chat-message-sender",CSS_CHAT_MESSAGE_DATE:"root-touchsoft-dashboard_chat-message-date",CSS_CHAT_MESSAGE:"root-touchsoft-dashboard_chat-message"},INVISIBLE_CLASS:"root-touchsoft-dashboard_invisible-element",DATA_BASE_URL:"https://onlineconsultantwebapp.firebaseio.com",ADMIN_NAME:"Admin",CSS_CURRENT_INPUT_CLASS:"root-touchsoft-dashboard_textarea-for-message",LOCAL_STORAGE_NAME:"currentCondition",CSS_HAVE_NEW_MESSAGE_STYLE:"root-touchsoft-dashboard_user-have-new-message",COMMAND_PATH_PREFIX:"https://onlineconsultantwebapp.firebaseio.com/usersSettings/"},dataBaseUrl=mainConfig.DATA_BASE_URL,getElement=function(e,t,s){var n=s?"#":".";return t?document.querySelectorAll(n+e):document.querySelector(n+e)},dataConnectorConfig={typeOfRequest:mainConfig.chatSettings.typeOfRequest},sorter=function(){function e(){}return e.prototype.quickSort=function(e,t,s,n){var r;return 1<e.length&&(t<(r=function(e,t,s,n){for(var r,a,o,i,u=e[Math.floor((s+t)/2)][n],c=t,l=s;c<=l;){for(;e[c][n]>u;)c++;for(;e[l][n]<u;)l--;c<=l&&(o=l,i=(r=e)[a=c],r[a]=r[o],r[o]=i,c++,l--)}return c}(e,t,s,n))-1&&this.quickSort(e,t,r-1,n),r<s&&this.quickSort(e,r,s,n)),e},new e}();function clearElementContent(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}var dataConnector=function(e){var t;function s(){}return s.prototype.setupDataBaseAPI=function(e){return"fetch"===e?{request:t.requestFetch,getNewConnectorAPI:t.setupDataBaseAPI}:"XHR"===e?{request:t.requestXMR,getNewConnectorAPI:t.setupDataBaseAPI}:{request:t.requestXMR,createLongPollConnection:t.longPoll,getNewConnectorAPI:t.setupDataBaseAPI}},s.prototype.requestFetch=function(e,t,s,n){return fetch(e,{headers:{Accept:n,"Content-Type":n},method:s,body:t}).then(function(e){return"application/json"===n?e.json():e.text()})},s.prototype.requestXMR=function(n,r,a,o){return new Promise(function(e,t){var s=new XMLHttpRequest;s.open(a,n,!0),s.setRequestHeader("Content-Type",o),s.onload=function(){e("application/json"===o?JSON.parse(s.response):s.response)},s.onerror=function(){t(s.statusText)},r?s.send(r):s.send()})},s.prototype.longPoll=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.setRequestHeader("Accept","text/event-stream"),t},(t=new s).setupDataBaseAPI(e.typeOfRequest)}(dataConnectorConfig),dataSource=function(o,t){var s,r="userList",n="usersMessages",a="usersSettings",i={isMinimize:!1,readLastMessage:!0};function u(){}function c(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.createLongPollConnection(s)}function l(e,t){var s=this.createRequestPath(dataBaseUrl,t,null,e);return o.request.bind(null,s,null,"GET","application/json")}return u.prototype.createRequestPath=function(e,t,s,n){var r=e;return null!==n&&(r+="/"+n),null!==t&&(r+="/"+t),null!==s&&(r+="/"+s),r+=".json"},u.prototype.getHTML=function(e){return o.request(e,null,"GET","application/x-www-form-urlencoded; charset=UTF-8")},u.prototype.setData=function(e,t,s,n,r){var a;return a="PUT"===t?this.createRequestPath(dataBaseUrl,n,s,e):this.createRequestPath(dataBaseUrl,n,null,e),o.request(a,JSON.stringify(r),t,"application/json")},u.prototype.addNewUserToDataSource=function(t,e){var s=new Date,n=this;i.userName=e,Object.keys(i).map(function(e){return n.setData(a,"PUT",e,t,i[e]),!0}),this.setData(r,"PUT",null,t,{lastOnline:s.getTime(),sendNewMessage:!1})},u.prototype.getDataSourceAPI=function(e){return e&&(t.chatSettings.typeOfRequest=e),u.prototype.getData="longPoll"===t.chatSettings.typeOfRequest?c:l,{usersAPI:{getUserList:s.getData.bind(s,r),getUserSettings:s.getData.bind(s,a),getUserMessages:s.getData.bind(s,n),getSettingField:s.getData.bind(s,a),sendMessage:s.setData.bind(s,n,"POST"),setSettingField:s.setData.bind(s,a,"PUT"),addNewUserToDataSource:s.addNewUserToDataSource.bind(s),updateLastOnline:s.setData.bind(s,r,"PUT","lastOnline"),updateSendNewMessageFlag:s.setData.bind(s,r,"PUT","sendNewMessage"),updateMessageIsReadField:s.setData.bind(s,n,"PUT")},commonAPI:{getHTML:s.getHTML.bind(s),getDataSourceAPI:s.getDataSourceAPI.bind(s)}}},(s=new u).getDataSourceAPI()}(dataConnector,mainConfig),eventEmitter=function(){function e(){this.events={}}return e.prototype.addSubscribe=function(e,t){var s=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){s.events[e]=s.events[e].filter(function(e){return e!==t})}},e.prototype.emit=function(e,t){var s=this.events[e];s&&s.forEach(function(e){e.call(null,t)})},new e}(),longPollResponseParser=function(){var s={message:/message/,userList:/lastOnline.{1,}sendNewMessage/,lastOnline:/"path":"\/\w{1,}\/lastOnline/,sendNewMessage:/"path":"\/\w{1,}\/sendNewMessage/,setting:/readLastMessage/,read:/read/,getIp:/getIp/,askQuestion:/askQuestion/},r=/event: put/,t=/data: null/,a=/","data":/,o=/"path":"\/-/,n=/"data":{"lastOnline":\d+,"sendNewMessage":/,i=/data: {"path":"\/","data":{"getIp":/,u=/data: {"path":"\/","data":{"askQuestion":/,c=/data: {"path":"\/askQuestion","data":/,l=!0;function e(){}return e.prototype.getTypeOfChanges=function(t){return Object.keys(s).filter(function(e){return!!s[e].test(t)&&e})[0]},e.prototype.prepareDataBeforeJsonParse=function(e){return e[e.length-1].split(a)[1].trim().slice(0,-1)},e.prototype.parseUsersMessages=function(e,t){var s,n={},r={};return"read"===t?(n.id=e[e.length-1].split('data: {"path":"/').pop().split('/read","').shift(),n.value=e[e.length-1].split('/read","data":').pop().trim().slice(0,-1),n):o.test(e[e.length-1])?(s=e[e.length-1].split('data: {"path":"/').pop().split(a).shift(),n=JSON.parse(this.prepareDataBeforeJsonParse(e)),r[s]=n,r):this.getFirstData(e)},e.prototype.hasNewData=function(e){return!t.test(e[e.length-1])&&1<e.length},e.prototype.parseUserList=function(e,t){var s={};return l?(l=!1,this.getFirstData(e)):n.test(e[e.length-1])?(s[this.getUserId(e[e.length-1],null)]=this.getFirstData(e),s):(s=JSON.parse(e[e.length-1].split(a)[1].trim().slice(0,-1)),[this.getUserId(e[e.length-1],t),s])},e.prototype.getFirstData=function(e){try{return JSON.parse(this.prepareDataBeforeJsonParse(e))}catch(e){return null}},e.prototype.getUserId=function(e,t){return t?e.split(t).shift().split('data: {"path":"/').pop().slice(0,-1):e.split('data: {"path":"/').pop().split(",")[0].trim().slice(0,-1)},e.prototype.parseCommandAnswer=function(e){var t,s=/getIp/.test(e[e.length-1]),n=/askQuestion/.test(e[e.length-1]);return s&&n?(t=e[e.length-1].split(/data: {"path":"\/","data":/).pop().split("},"),[JSON.parse(t[0]+"}}"),JSON.parse("{"+t[1].trim().slice(0,-1))]):s?this.parseUserIpData(e):n?this.parseQuestionsData(e):void 0},e.prototype.parseUserIpData=function(e){return i.test(e)?JSON.parse(e[e.length-1].split(i).pop().trim().slice(0,-2)):JSON.parse(e[e.length-1].split(r).pop().split('data: {"path":"/getIp","data":').pop().trim().slice(0,-1))},e.prototype.parseQuestionsData=function(e){return u.test(e[e.length-1])?JSON.parse(e[e.length-1].split(u).pop().trim().slice(0,-2)):c.test(e[e.length-1])?JSON.parse(e[e.length-1].split(c).pop().trim().slice(0,-1)):JSON.parse('{"askQuestion":{"'+e[e.length-1].split('data: {"path":"/askQuestion/').pop().replace('","data"','"')+"}")},e.prototype.parse=function(e){var t=e.split(r),s=this.getTypeOfChanges(t[t.length-1]),n={type:s};return!!this.hasNewData(t)&&("message"===s||"read"===s?(n.object=this.parseUsersMessages(t,s),n):"sendNewMessage"===s||"lastOnline"===s||"userList"===s?(n.object=this.parseUserList(t,s),n):("getIp"===s||"askQuestion"===s)&&(n.object=this.parseCommandAnswer(t,s),n))},new e}(),viewFactory=function(n){function e(){}return e.prototype.createView=function(s,n,r){var a=this;return new Promise(function(e,t){s?(n&&a.includeViewCssToPage(a.createCSSLink(n,"stylesheet","text/css","touch-soft-chat-css")),e(a.includeViewHTMLToPage(s,r))):t(new Error("htmlPath is null. Please add htmlPath"))})},e.prototype.includeViewHTMLToPage=function(e,t){var s=t?getElement(t):document.body;return n.commonAPI.getHTML(e).then(function(e){s.innerHTML=e})},e.prototype.includeViewCssToPage=function(e){document.head.appendChild(e)},e.prototype.createCSSLink=function(e,t,s,n){var r=document.createElement("link");return n&&r.setAttribute("id",n),t&&r.setAttribute("rel",t),s&&r.setAttribute("type",s),r.setAttribute("href",e),r},new e}(dataSource),messageListManager=function(u){function e(){}return e.prototype.setup=function(){this.messageList=[],this.cDOM={messagesBlock:getElement(u.messages.CSS_CHAT_MESSAGES_CONTAINER)}},e.prototype.createMessageElement=function(e,t,s,n){var r=this.createMessageContainerDiv(n,s),a=this.createDivForMessageBlock(t,u.DISPLAY_MESSAGE_DATE,[u.messages.CSS_CHAT_MESSAGE_DATE]),o=this.createDivForMessageBlock(s,u.DISPLAY_SENDER_NAME,[u.messages.CSS_CHAT_MESSAGE_SENDER_NAME]),i=this.createDivForMessageBlock(e,u.DISPLAY_MESSAGE,[u.messages.CSS_CHAT_MESSAGE]);return r.appendChild(a),r.appendChild(o),r.appendChild(i),r},e.prototype.getMessageObjectsForMarkAsRead=function(){var e,t=[],s=u.ADMIN_NAME||u.currentUserSettings.userName,n=u.currentUserSettings.userId;for(e=this.messageList.length-1;0<=e;e--)if(this.messageList[e].sender!==s){if(this.messageList[e].read)break;t.push({userId:n,fieldName:this.messageList[e].id+"/read",fieldValue:!0}),this.messageList[e].read=!0}return t},e.prototype.createMessageContainerDiv=function(e,t){var s=document.createElement("div");return s.classList.add(u.messages.CSS_MESSAGE_CONTAINER),e||u.currentUserSettings.userName===t||s.classList.add(u.messages.CSS_USER_NOT_READ_MESSAGES),s},e.prototype.createDivForMessageBlock=function(e,t,s){var n=document.createElement("div");return s.forEach(function(e){n.classList.add(e)}),n.innerHTML=e,n},e.prototype.createMessageList=function(e){var t=[];return e&&e.forEach(function(e){t.push(e)}),t},e.prototype.updateMessageList=function(e){0<this.getMessageObjectsForMarkAsRead().length&&(u.currentUserSettings.readLastMessage=!1),this.messageList=e,this.displayMessages()},e.prototype.addMessageToMessageList=function(e){this.messageList.push(e)},e.prototype.displayMessages=function(){var t,s=this;this.clearChat(),this.messageList.forEach(function(e){t=s.createMessageElement(e.message,e.date,e.sender,e.read),s.cDOM.messagesBlock.appendChild(t)})},e.prototype.clearChat=function(){for(;this.cDOM.messagesBlock.firstChild;)this.cDOM.messagesBlock.removeChild(this.cDOM.messagesBlock.firstChild)},new e}(mainConfig),userDataManager=function(i,s,n){function e(){var t=this;"longPoll"===i.chatSettings.typeOfRequest?(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){s.getUserCorrespondence(t),e()})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t;i.currentMessageConnection&&i.currentMessageConnection.abort(),i.currentMessageConnection=dataSource.usersAPI.getUserMessages(e),i.currentMessageConnection.onreadystatechange=function(){3===this.readyState&&200===this.status&&(t=n.parse(this.responseText))&&s.emit(t.type,t.object)},i.currentMessageConnection.send()}.bind(this),e.prototype.updateMessageList=function(t){t&&Object.keys(t).map(function(e){return t[e].id=e,messageListManager.addMessageToMessageList(t[e]),!0}),messageListManager.displayMessages()}.bind(this),s.addSubscribe("message",function(e){t.updateMessageList(e)}),s.addSubscribe("read",function(t){t&&messageListManager.messageList.forEach(function(e){e.id===t.id&&(e.read=t.value,messageListManager.displayMessages())})})):(e.prototype.getUserData=function(t){var s=this;return new Promise(function(e){return s.getUserCorrespondence(t).then(function(){e()})})}.bind(this),e.prototype.getUserCorrespondence=function(e){var t=this;return dataSource.usersAPI.getUserMessages(e)().then(function(e){t.updateMessageList(e)})}.bind(this),e.prototype.updateMessageList=function(t){var e,s=[];t&&Object.keys(t).map(function(e){return t[e].id=e,s.push(t[e]),!0}),messageListManager.displayMessages(),e=messageListManager.createMessageList(s),messageListManager.updateMessageList(e)}.bind(this))}return e.prototype.setup=function(){messageListManager.setup()},e.prototype.clearMessageList=function(){messageListManager.messageList=[]},e.prototype.createNewUserProfileToDataBase=function(e,t){dataSource.usersAPI.addNewUserToDataSource(e,t)},e.prototype.saveSettingField=function(e){dataSource.usersAPI.setSettingField(e,i.currentUserSettings.userId,i.currentUserSettings[e])},e.prototype.updateUserOnline=function(e){var t=new Date;dataSource.usersAPI.updateLastOnline(e,t.getTime())},e.prototype.sendMessage=function(){var e,t,s,n=this.getMessageFromInputElement(),r=(e=new Date,t=1===e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),e.getHours().toString().concat(":",t)),a=i.currentUserSettings.userName||i.ADMIN_NAME,o={sender:a,message:n,read:!1,date:r,id:s};"longPoll"!==i.chatSettings.typeOfRequest&&(messageListManager.addMessageToMessageList(o),messageListManager.displayMessages()),this.saveMessageToDataSource(o)},e.prototype.getMessageFromInputElement=function(){var e=getElement(i.CSS_CURRENT_INPUT_CLASS),t=e.value;return e.value="",t},e.prototype.setMessageAsRead=function(){var e=messageListManager.getMessageObjectsForMarkAsRead();0<e.length&&(e.forEach(function(e){dataSource.usersAPI.updateMessageIsReadField(e.fieldName,e.userId,e.fieldValue)}),i.currentUserSettings.readLastMessage=!0),messageListManager.displayMessages()},e.prototype.saveMessageToDataSource=function(e){e.sender===i.currentUserSettings.userName&&dataSource.usersAPI.updateSendNewMessageFlag(i.currentUserSettings.userId,!0),dataSource.usersAPI.sendMessage(null,i.currentUserSettings.userId,e)},e.prototype.saveUserSettingsToDataSource=function(e){e.forEach(function(e){dataSource.usersAPI.setSettingField(e.fieldName,e.userId,e.fieldValue)})},new e}(mainConfig,eventEmitter,longPollResponseParser),log=function(t){function s(e){getElement(t.DOM.CSS_CONTROL_PANEL_LOG_CLASS).appendChild(e)}function n(e){var n=document.createElement("div");n.classList.add(t.DOM.CSS_CONTROL_PANEL_LOG_ELEMENT_CLASS);return function t(s,n){Object.keys(s).map(function(e){s[e]instanceof Object?t(s[e],n):n(s[e],e)})}(e,function(e,t){var s;(s=document.createElement("div")).innerHTML=t+": "+e,n.appendChild(s)}),n}return{write:function(e){e instanceof Array?e.forEach(function(e){s(n(e))}):s(n(e))},clear:function(e){for(var t=getElement(e);t.firstChild;)t.removeChild(t.firstChild)}.bind(null,t.DOM.CSS_CONTROL_PANEL_LOG_CLASS)}}(mainConfig),userListManager=function(a,e){function t(){this.uList=[]}return t.prototype.setup=function(){},t.prototype.createUserElement=function(e,t){var s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return s.classList.add(a.userList.USER_ELEMENT_CSS_CLASS),n.classList.add(a.userList.USER_ID_ELEMENT_CSS_CLASS),n.innerHTML=e,t?r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_ONLINE):r.classList.add(a.userList.USER_INDICATOR_CSS_CLASS_OFFLINE),s.appendChild(n),s.appendChild(r),s},t.prototype.setUserList=function(e){this.uList=e},t.prototype.addUserToUsersArray=function(e,t,s){var n=this.userIsOnline(e.lastOnline);s.push({userId:t,userElement:this.createUserElement(t,n),online:n,visible:!0,sendNewMessage:e.sendNewMessage,readLastMessage:e.readLastMessage,lastOnline:e.lastOnline,userName:e.userName})},t.prototype.updateUserOnlineStatus=function(e,t){var s=this.getUserFromUserListById(e);this.uList[s].lastOnline=t,this.uList[s].online=this.userIsOnline(t),this.uList[s].userElement=this.createUserElement(e,this.userIsOnline(t))},t.prototype.getUserFromUserListById=function(t){var s=this,n=null;return Object.keys(s.uList).map(function(e){return s.uList[e].userId===t&&(n=e),!0}),n},t.prototype.userIsOnline=function(e){return(new Date).getTime()-e<=a.interval.ONLINE_INTERVAL},t.prototype.filterByName=function(){this.uList.forEach(function(e){e.visible=-1!==e.userId.indexOf(a.currentDashboardCondition.filterBy)})},t.prototype.sortUsersByField=function(){e.quickSort(this.uList,0,this.uList.length-1,a.currentDashboardCondition.sortBy)},t.prototype.clearUserList=function(){this.uList=[]},t.prototype.displayUsers=function(){!function(e){var t=getElement(e);for(;t.firstChild;)t.removeChild(t.firstChild)}(a.DOM.USER_LIST_CSS_CLASS),this.uList.forEach(function(e){e.visible&&getElement(a.DOM.USER_LIST_CSS_CLASS).appendChild(e.userElement)})},new t}(mainConfig,sorter),controlPanel=function(o,i,s,n){var u,e,c,r,t,l,d,p={getIp:{parametersNumber:0,type:"async"},askQuestion:{parametersNumber:3,type:"pending"}};function a(e){t[e].forEach(function(e){e()})}function g(){var e,t,s,n,r,a;l={commandName:u.value,parametersNumber:p[u.value].parametersNumber,isExecute:!1,typeOfCommand:p[u.value].type},c.forEach(function(e,t){t<l.parametersNumber&&(l["parameter"+t]=e.value)}),e=null,t=u.value,s=e||o.currentUserSettings.userId,d=o.COMMAND_PATH_PREFIX+s+"/commands/"+t+".json",n=l,r=d,a=JSON.stringify(n),i.request(r,a,"PUT","application/json")}function S(){}return t={firstInit:[function(){getElement(o.DOM.CSS_CONTROL_PANEL_LOG_CLASS),u=getElement(o.DOM.CSS_CONTROL_PANEL_SELECT_CLASS),e=getElement(o.DOM.CSS_CONTROL_SEND_COMMAND_BUTTON_CLASS),c=getElement(o.DOM.CSS_CONTROL_PARAMETERS_CLASS,!0)},function(){u.addEventListener("change",function(){}),e.addEventListener("click",g)}],setup:[function(e){var t=e||o.currentUserSettings.userId;r&&r.abort(),r=i.createLongPollConnection(o.COMMAND_PATH_PREFIX+t+"/commandsResponse/.json"),s.clear(),r.onreadystatechange=function(){if(3===this.readyState&&200===this.status){var e=n.parse(this.responseText);e&&s.write(e.object)}},r.send()}],close:[function(){r&&r.abort()}]},S.prototype.setup=a.bind(null,"setup"),S.prototype.close=a.bind(null,"close"),S.prototype.firstInit=a.bind(null,"firstInit"),new S}(mainConfig,dataConnector,log,longPollResponseParser),dashboard=function(s,n,r,a,e,o,i){var t=[];function u(){this.setupEventEmitter()}return u.prototype.startApp=function(){r.setup(s),this.getUserList(),this.setupCommonListenerFunctions(),this.setupIntervalFunctions(),i.firstInit()},u.prototype.setupEventEmitter=function(){var n,r=this;o.addSubscribe("userList",function(e){var t,s=[];t=e instanceof Array?e[1]:e,Object.keys(t).map(function(e){return a.addUserToUsersArray(t[e],e,s),!0}),a.uList=a.uList.concat(s),n=r.getCurrentUserIdFromLocalStorage(),r.localSettingsSetup(n),r.setupUserListDOM()}),o.addSubscribe("lastOnline",function(e){var t=e[0],s=e[1];a.updateUserOnlineStatus(t,s)}),o.addSubscribe("sendNewMessage",function(e){var t=a.getUserFromUserListById(e[0]);a.uList[t].sendNewMessage=e[1],r.toggleNewMessageIndicatorToUser()})},u.prototype.saveCurrentConditionToLocalStorage=function(){var e=JSON.stringify({filter:s.currentDashboardCondition.filterBy,sort:s.currentDashboardCondition.sortBy,currentUserId:s.currentUserSettings.userId});localStorage.setItem(s.LOCAL_STORAGE_NAME,e)},u.prototype.getCurrentUserIdFromLocalStorage=function(){var e=localStorage.getItem(s.LOCAL_STORAGE_NAME),t=null;return e&&(t=JSON.parse(e),s.currentDashboardCondition.filterBy=t.filter,s.currentDashboardCondition.sortBy=t.sort,s.currentUserSettings.userId=t.currentUserId),t},u.prototype.localSettingsSetup=function(e){e&&(e.filter&&(getElement(s.DOM.CSS_FILTER_INPUT_ID).value=e.filter,this.filter()),e.sort&&(getElement(s.DOM.CSS_SORT_SELECT_ID).value=e.sort,this.sort()),e.currentUserId&&(s.currentUserSettings.userId=e.currentUserId,this.startConversationWithUser(s.currentUserSettings.userId)))},u.prototype.filter=function(){s.currentDashboardCondition.filterBy=getElement(s.DOM.CSS_FILTER_INPUT_ID).value,this.saveCurrentConditionToLocalStorage(),a.filterByName(s.currentDashboardCondition.filterBy),a.displayUsers()},u.prototype.sort=function(){s.currentDashboardCondition.sortBy=getElement(s.DOM.CSS_SORT_SELECT_ID).value,this.saveCurrentConditionToLocalStorage(),a.sortUsersByField(),a.displayUsers()},u.prototype.setupUsersListeners=function(){var t=this;Array.from(s.users).forEach(function(e){e.addEventListener("click",t.userListener.bind(t,e.firstChild.innerText))})},u.prototype.setupUserListDOM=function(){a.displayUsers(),this.getAcessToUsersList(),this.toggleNewMessageIndicatorToUser(),this.setupUsersListeners()},u.prototype.getAcessToUsersList=function(){s.users=getElement(s.userList.USER_ELEMENT_CSS_CLASS,!0)},u.prototype.getUserList=function(){var e,t=n.usersAPI.getUserList(null);t.onreadystatechange=function(){this.status&&(e=longPollResponseParser.parse(this.responseText))&&o.emit(e.type,e.object)},t.send(),s.currentUserListConnection=t},u.prototype.userListener=function(e){this.startConversationWithUser(e),this.markMessageFromUserAsRead(e)},u.prototype.startConversationWithUser=function(e){var t=this;s.currentUserSettings.userId=e,i.setup(),r.clearMessageList(),r.getUserData(e).then(function(){getElement(s.DOM.CSS_ACTIVE_USER_BLOCK).classList.remove(s.INVISIBLE_CLASS),t.saveCurrentConditionToLocalStorage()}),n.usersAPI.updateSendNewMessageFlag(e,!1)},u.prototype.updateUserMessagesAndDisplayIt=function(){r.getUserData(s.currentUserSettings.userId),this.markMessageFromUserAsRead(s.currentUserSettings.userId)},u.prototype.setupCommonListenerFunctions=function(){var e=this;getElement(s.DOM.CSS_SEND_MESSAGE_BUTTON_CLASS).addEventListener("click",userDataManager.sendMessage.bind(userDataManager,s.ADMIN_NAME)),getElement(s.DOM.CSS_CLOSE_CHAT_BUTTON_CLASS).addEventListener("click",e.closeConversation.bind(e)),getElement(s.DOM.CSS_FILTER_INPUT_ID).addEventListener("input",e.filter.bind(e)),getElement(s.DOM.CSS_SORT_SELECT_ID).addEventListener("input",e.sort.bind(e)),document.addEventListener("mousemove",userDataManager.setMessageAsRead.bind(userDataManager))},u.prototype.markMessageFromUserAsRead=function(e){var t=a.getUserFromUserListById(e);a.uList[t].sendNewMessage=!1,r.saveUserSettingsToDataSource([{userId:e,fieldName:"sendNewMessage",fieldValue:!1}]),this.toggleNewMessageIndicatorToUser()},u.prototype.closeConversation=function(){getElement(s.DOM.CSS_ACTIVE_USER_BLOCK).classList.add(s.INVISIBLE_CLASS),s.currentUserSettings.userId=null,s.currentMessageConnection.abort(),i.close(),this.saveCurrentConditionToLocalStorage()},u.prototype.toggleNewMessageIndicatorToUser=function(){var t;Object.keys(a.uList).map(function(e){return t=a.uList[e].userElement.getElementsByClassName(s.CSS_HAVE_NEW_MESSAGE_STYLE)[0],a.uList[e].sendNewMessage&&!t&&((t=document.createElement("div")).classList.add(s.CSS_HAVE_NEW_MESSAGE_STYLE),a.uList[e].userElement.appendChild(t)),!a.uList[e].sendNewMessage&&t&&a.uList[e].userElement.removeChild(t),!0})},u.prototype.setupIntervalFunctions=function(){var e=this;t.push=setInterval(function(){Object.keys(a.uList).map(function(e){return a.updateUserOnlineStatus(a.uList[e].userId,a.uList[e].lastOnline),!0}),e.setupUserListDOM()},s.interval.UPDATE_USERS_TIME)},u.prototype.closeApp=function(){t.forEach(function(e){clearInterval(e)}),userDataManager.clearMessageList(),a.clearUserList(),s.currentMessageConnection&&s.currentMessageConnection.abort(),s.currentUserListConnection.abort(),i.close()},new u}(mainConfig,dataSource,userDataManager,userListManager,0,eventEmitter,controlPanel),launcher=function(s){var o={},n={chatTitle:{typeOfValue:"value"},chatUrl:{typeOfValue:"value"},chatClass:{typeOfValue:"value"},chatPositionSelect:{typeOfValue:"value"},allowMinimize:{typeOfValue:"checked"},allowDrag:{typeOfValue:"checked"},showTime:{typeOfValue:"checked"},requireName:{typeOfValue:"checked"},networkRadioXMR:{typeOfValue:"value",true:"XHR"},networkRadioLongPoll:{typeOfValue:"value",true:"longPoll"},networkRadioFetch:{typeOfValue:"value",true:"fetch"}};function e(){}return e.prototype.getDataFromElement=function(s){var n,r="",a=this;return Object.keys(o).map(function(e,t){return s[e]&&(0<t?"radio"===(n=o[e].getAttribute("type"))?o[e].checked&&(r+="'&typeOfRequest='"+a.getElementValue(e,n)):r+="'&"+e+"='"+a.getElementValue(e,n):r+=e+"='"+a.getElementValue(e)),!0}),r.length<1&&(r=null),r},e.prototype.getElementValue=function(e){return o[e][n[e].typeOfValue]},e.prototype.startApp=function(){var t=this;s.launcher.after.map(function(e){return o[e]=getElement(s.launcher.pattern+e,!1,!0),o[e].addEventListener("input",function(){var e=s.launcher.srcStart+this.getDataFromElement(n);e+=s.launcher.srcEnd,o.scriptCode.innerHTML=e}.bind(t)),!0})},e.prototype.closeApp=function(){o={}},new e}(mainConfig),about=function(){function e(){}return e.prototype.startApp=function(){},e.prototype.closeApp=function(){},new e}(),mainController=function(s){var n={dashboard:s.router.DASHBOARD_HTML_PATH,configuration:s.router.LAUNCHER_HTML_PATH,about:s.router.ABOUT_HTML_PATH},r={dashboard:dashboard.closeApp.bind(dashboard),configuration:launcher.closeApp.bind(launcher),about:about.closeApp.bind(about)},a={dashboard:dashboard.startApp.bind(dashboard),configuration:launcher.startApp.bind(launcher),about:about.startApp.bind(about)};function e(){}return e.prototype.startApp=function(){var t=this;window.addEventListener("hashchange",function(e){t.handleUrl(e.newURL)}),t.handleUrl(window.location.href+"#dashboard")},e.prototype.handleUrl=function(e){var t;-1!==e.indexOf("#")&&(t=e.split("#").pop(),this.closePreviousPage(t),document.querySelectorAll("a."+s.router.NAVIGATION_ACTIVE_CSS).forEach(function(e){e.classList.remove(s.router.NAVIGATION_ACTIVE_CSS)}),document.querySelectorAll('a[href="#'+t+'"]').forEach(function(e){e.classList.add(s.router.NAVIGATION_ACTIVE_CSS)}),clearElementContent(s.router.CONTENT_CLASS),viewFactory.createView(n[t],null,s.router.CONTENT_CLASS).then(function(){a[t]()}))},e.prototype.closePreviousPage=function(t){Object.keys(r).map(function(e){return e!==t&&r[e](),!0})},new e}(mainConfig);mainController.startApp();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZEFwcC5qcyJdLCJuYW1lcyI6WyJtYWluQ29uZmlnIiwiRE9NIiwiVVNFUl9MSVNUX0NTU19DTEFTUyIsIkNTU19DSEFUX0NPTlRBSU5TX0JMT0NLX1NUWUxFIiwiQ1NTX1NFTkRfTUVTU0FHRV9CVVRUT05fQ0xBU1MiLCJDU1NfQ0xPU0VfQ0hBVF9CVVRUT05fQ0xBU1MiLCJDU1NfRklMVEVSX0lOUFVUX0lEIiwiQ1NTX1NPUlRfU0VMRUNUX0lEIiwiQ1NTX0FDVElWRV9VU0VSX0JMT0NLIiwiQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTIiwiQ1NTX0NPTlRST0xfUEFORUxfU0VMRUNUX0NMQVNTIiwiQ1NTX0NPTlRST0xfU0VORF9DT01NQU5EX0JVVFRPTl9DTEFTUyIsIkNTU19DT05UUk9MX1BBUkFNRVRFUlNfQ0xBU1MiLCJDU1NfQ09OVFJPTF9QQU5FTF9MT0dfRUxFTUVOVF9DTEFTUyIsImxhdW5jaGVyIiwicGF0dGVybiIsImFmdGVyIiwic3JjU3RhcnQiLCJzcmNFbmQiLCJ1c2VyTGlzdCIsIlVTRVJfRUxFTUVOVF9DU1NfQ0xBU1MiLCJVU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTIiwiVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09GRkxJTkUiLCJVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FIiwiY2hhdFNldHRpbmdzIiwidHlwZU9mUmVxdWVzdCIsImN1cnJlbnRVc2VyU2V0dGluZ3MiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsImN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24iLCJmaWx0ZXJCeSIsInNvcnRCeSIsImludGVydmFsIiwiVVBEQVRFX1VTRVJTX1RJTUUiLCJPTkxJTkVfSU5URVJWQUwiLCJyb3V0ZXIiLCJBQk9VVF9IVE1MX1BBVEgiLCJMQVVOQ0hFUl9IVE1MX1BBVEgiLCJEQVNIQk9BUkRfSFRNTF9QQVRIIiwiQ09OVEVOVF9DTEFTUyIsIk5BVklHQVRJT05fQUNUSVZFX0NTUyIsIm1lc3NhZ2VzIiwiQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMiLCJDU1NfQ0hBVF9NRVNTQUdFU19DT05UQUlORVIiLCJDU1NfTUVTU0FHRV9DT05UQUlORVIiLCJDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FIiwiQ1NTX0NIQVRfTUVTU0FHRV9EQVRFIiwiQ1NTX0NIQVRfTUVTU0FHRSIsIklOVklTSUJMRV9DTEFTUyIsIkRBVEFfQkFTRV9VUkwiLCJBRE1JTl9OQU1FIiwiQ1NTX0NVUlJFTlRfSU5QVVRfQ0xBU1MiLCJMT0NBTF9TVE9SQUdFX05BTUUiLCJDU1NfSEFWRV9ORVdfTUVTU0FHRV9TVFlMRSIsIkNPTU1BTkRfUEFUSF9QUkVGSVgiLCJkYXRhQmFzZVVybCIsImdldEVsZW1lbnQiLCJzZWxlY3RvciIsImlzQWxsIiwiaXRJc0lkIiwic2VsZWN0b3JTdGFydCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhQ29ubmVjdG9yQ29uZmlnIiwic29ydGVyIiwiU29ydGVyIiwicHJvdG90eXBlIiwicXVpY2tTb3J0IiwiaXRlbXMiLCJsZWZ0IiwicmlnaHQiLCJzb3J0RmllbGQiLCJpbmRleCIsImxlbmd0aCIsImZpcnN0SW5kZXgiLCJzZWNvbmRJbmRleCIsInRlbXAiLCJwaXZvdCIsIk1hdGgiLCJmbG9vciIsImkiLCJqIiwicGFydGl0aW9uIiwidGhpcyIsImNsZWFyRWxlbWVudENvbnRlbnQiLCJlbGVtZW50U2VsZWN0b3IiLCJlbGVtZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGF0YUNvbm5lY3RvciIsImRhdGFDb25uZWN0b3JDb25maWdPYmoiLCJkYXRhQmFzZUNvbm5lY3RvciIsIkRhdGFCYXNlQ29ubmVjdG9yIiwic2V0dXBEYXRhQmFzZUFQSSIsInJlcXVlc3QiLCJyZXF1ZXN0RmV0Y2giLCJnZXROZXdDb25uZWN0b3JBUEkiLCJyZXF1ZXN0WE1SIiwiY3JlYXRlTG9uZ1BvbGxDb25uZWN0aW9uIiwibG9uZ1BvbGwiLCJyZXF1ZXN0UGF0aCIsInJlcXVlc3RCb2R5IiwicmVxdWVzdFR5cGUiLCJjb250ZW50VHlwZSIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsIkNvbnRlbnQtVHlwZSIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwidGV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIkpTT04iLCJwYXJzZSIsIm9uZXJyb3IiLCJzdGF0dXNUZXh0Iiwic2VuZCIsInRhcmdldFVybCIsInhodHRwIiwiZGF0YVNvdXJjZSIsImNvbmZpZyIsImRhdGFTb3VyY2VJbnN0YW5jZSIsIlVTRVJfTElTVCIsIlVTRVJfTUVTU0FHRVMiLCJVU0VSU19TRVRUSU5HUyIsIm5ld1VzZXJEYXRhIiwiaXNNaW5pbWl6ZSIsInJlYWRMYXN0TWVzc2FnZSIsIkRhdGFTb3VyY2UiLCJsb25nUG9sbENvbm5lY3QiLCJkYXRhVHlwZSIsImNyZWF0ZVJlcXVlc3RQYXRoIiwiYmFzaWNDb25uZWN0IiwiYmluZCIsImRhdGFCYXNlVVJMIiwicmVxdWVzdFBvc3RmaXgiLCJyZXF1ZXN0UHJlZml4IiwicGF0aCIsImdldEhUTUwiLCJzZXREYXRhIiwiZmllbGROYW1lIiwidmFsdWUiLCJzdHJpbmdpZnkiLCJhZGROZXdVc2VyVG9EYXRhU291cmNlIiwiZGF0ZSIsIkRhdGUiLCJ0aGF0IiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsInNldHRpbmdOYW1lIiwibGFzdE9ubGluZSIsImdldFRpbWUiLCJzZW5kTmV3TWVzc2FnZSIsImdldERhdGFTb3VyY2VBUEkiLCJnZXREYXRhIiwidXNlcnNBUEkiLCJnZXRVc2VyTGlzdCIsImdldFVzZXJTZXR0aW5ncyIsImdldFVzZXJNZXNzYWdlcyIsImdldFNldHRpbmdGaWVsZCIsInNlbmRNZXNzYWdlIiwic2V0U2V0dGluZ0ZpZWxkIiwidXBkYXRlTGFzdE9ubGluZSIsInVwZGF0ZVNlbmROZXdNZXNzYWdlRmxhZyIsInVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZCIsImNvbW1vbkFQSSIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsImV2ZW50cyIsImFkZFN1YnNjcmliZSIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwicHVzaCIsImZpbHRlciIsImVsZW1lbnRDYWxsYmFjayIsImVtaXQiLCJkYXRhIiwiZXZlbnQiLCJmb3JFYWNoIiwiY2FsbCIsImxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJ0eXBlc09mQ2hhbmdlIiwibWVzc2FnZSIsInNldHRpbmciLCJyZWFkIiwiZ2V0SXAiLCJhc2tRdWVzdGlvbiIsImV2ZW50UmVndWxhciIsImhhc051bGxEYXRhIiwiZ2V0RGF0YVJlZ3VsYXIiLCJpdElzTmV3TWVzc2FnZVJlZ3VsYXIiLCJpdElzTmV3VXNlckxpc3RSZWd1bGFyIiwiaXRJc0ZpcnN0SXBEYXRhUmVndWxhciIsIml0SXNGaXJzdFF1ZXN0aW9uc0RhdGEiLCJpdElzTmV3UXVlc3Rpb25zQ29tbWFuZCIsIml0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiIsIkxvbmdQb2xsUmVzcG9uc2VQYXJzZXIiLCJnZXRUeXBlT2ZDaGFuZ2VzIiwiYW5zd2VyRGF0YSIsInR5cGVOYW1lIiwidGVzdCIsInByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlIiwic3BsaXQiLCJ0cmltIiwic2xpY2UiLCJwYXJzZVVzZXJzTWVzc2FnZXMiLCJjaGFuZ2VUeXBlIiwibWVzc2FnZUlkIiwicmVzdWx0T2JqZWN0IiwiaWQiLCJwb3AiLCJzaGlmdCIsImdldEZpcnN0RGF0YSIsImhhc05ld0RhdGEiLCJwYXJzZVVzZXJMaXN0IiwiZ2V0VXNlcklkIiwiZXhjZXB0aW9uIiwicGFyc2VDb21tYW5kQW5zd2VyIiwiaXRJc0lQSW5mb3JtYXRpb24iLCJpdElzUXVlc3Rpb25zSW5mb3JtYXRpb24iLCJwYXJzZVVzZXJJcERhdGEiLCJwYXJzZVF1ZXN0aW9uc0RhdGEiLCJyZXBsYWNlIiwicmVzdWx0IiwicmVzdWx0T2ZQYXJzZSIsInR5cGUiLCJvYmplY3QiLCJ2aWV3RmFjdG9yeSIsIlZpZXdGYWN0b3J5IiwiY3JlYXRlVmlldyIsImh0bWxQYXRoIiwiY3NzUGF0aCIsImNvbnRhaW5lckNsYXNzIiwiaW5jbHVkZVZpZXdDc3NUb1BhZ2UiLCJjcmVhdGVDU1NMaW5rIiwiaW5jbHVkZVZpZXdIVE1MVG9QYWdlIiwiRXJyb3IiLCJjb250YWluZXJEaXYiLCJodG1sIiwiaW5uZXJIVE1MIiwibGluayIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZpbGVQYXRoIiwicmVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm1lc3NhZ2VMaXN0TWFuYWdlciIsIk1lc3NhZ2VMaXN0TWFuYWdlciIsInNldHVwIiwibWVzc2FnZUxpc3QiLCJjRE9NIiwibWVzc2FnZXNCbG9jayIsImNyZWF0ZU1lc3NhZ2VFbGVtZW50IiwibWVzc2FnZURhdGUiLCJzZW5kZXIiLCJpc1JlYWQiLCJtZXNzYWdlQ29udGFpbmVyRGl2IiwiY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiIsIm1lc3NhZ2VEYXRlRGl2IiwiY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrIiwiRElTUExBWV9NRVNTQUdFX0RBVEUiLCJtZXNzYWdlU2VuZGVyRGl2IiwiRElTUExBWV9TRU5ERVJfTkFNRSIsIm1lc3NhZ2VEaXYiLCJESVNQTEFZX01FU1NBR0UiLCJnZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQiLCJtZXNzYWdlc0lzUmVhZCIsImZpZWxkVmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0Rpc3BsYXkiLCJzdHlsZUNsYXNzZXMiLCJkaXYiLCJzdHlsZSIsImNyZWF0ZU1lc3NhZ2VMaXN0IiwibWVzc2FnZU9iamVjdHMiLCJuZXdNZXNzYWdlTGlzdCIsInVwZGF0ZU1lc3NhZ2VMaXN0IiwiZGlzcGxheU1lc3NhZ2VzIiwiYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QiLCJtZXNzYWdlT2JqIiwiY2xlYXJDaGF0IiwibWVzc2FnZU9iamVjdCIsInVzZXJEYXRhTWFuYWdlciIsIlVzZXJEYXRhTWFuYWdlciIsImdldFVzZXJEYXRhIiwiZ2V0VXNlckNvcnJlc3BvbmRlbmNlIiwiY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uIiwiYWJvcnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwia2V5IiwibWVzc2FnZXNPYmplY3QiLCJjbGVhck1lc3NhZ2VMaXN0IiwiY3JlYXRlTmV3VXNlclByb2ZpbGVUb0RhdGFCYXNlIiwic2F2ZVNldHRpbmdGaWVsZCIsInVwZGF0ZVVzZXJPbmxpbmUiLCJtaW51dGVzIiwiZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQiLCJnZXRNaW51dGVzIiwidG9TdHJpbmciLCJnZXRIb3VycyIsImNvbmNhdCIsInNhdmVNZXNzYWdlVG9EYXRhU291cmNlIiwic2V0TWVzc2FnZUFzUmVhZCIsInNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UiLCJzZXR0aW5ncyIsIm5ld0ZpZWxkU2V0dGluZyIsImxvZyIsImRpc3BsYXlNZXNzYWdlIiwibWVzc2FnZUVsZW1lbnQiLCJyZXN1bHREaXYiLCJkZXBsb3lPYmplY3QiLCJkYXRhTmFtZSIsImlubmVyRGl2Iiwid3JpdGUiLCJBcnJheSIsImNsZWFyIiwidXNlckxpc3RNYW5hZ2VyIiwiVXNlckxpc3RNYW5hZ2VyIiwidUxpc3QiLCJjcmVhdGVVc2VyRWxlbWVudCIsImlzT25saW5lIiwidXNlckRpdiIsInVzZXJJZERpdiIsInVzZXJJbmRpY2F0b3IiLCJzZXRVc2VyTGlzdCIsInVzZXJMdXN0T2JqZWN0IiwiYWRkVXNlclRvVXNlcnNBcnJheSIsInVzZXIiLCJ1c2Vyc0xpc3QiLCJ1c2VySXNPbmxpbmUiLCJ1c2VyRWxlbWVudCIsIm9ubGluZSIsInZpc2libGUiLCJ1cGRhdGVVc2VyT25saW5lU3RhdHVzIiwidXNlckluZGV4IiwiZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQiLCJ1c2VyTWFuYWdlciIsImxhc3RVc2VyT25saW5lVGltZSIsImZpbHRlckJ5TmFtZSIsImluZGV4T2YiLCJzb3J0VXNlcnNCeUZpZWxkIiwiY2xlYXJVc2VyTGlzdCIsImRpc3BsYXlVc2VycyIsImVsZW0iLCJjb250cm9sUGFuZWwiLCJwYXJzZXIiLCJzZWxlY3RDb21tYW5kIiwic2VuZEJ1dHRvbiIsInBhcmFtZXRlckVsZW1lbnRzIiwiY29ubmVjdGlvbiIsIm1vZHVsZUluaXQiLCJjdXJyZW50Q29tbWFuZCIsInBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3QiLCJjb21tYW5kcyIsInBhcmFtZXRlcnNOdW1iZXIiLCJtb2R1bGVDb250cm9sbGVyIiwiYWN0aW9uIiwiY29udHJvbEZ1bmN0aW9uIiwic2VuZEJ1dHRvbkxpc3RlbmVyIiwiY29tbWFuZE5hbWUiLCJjb21tYW5kT2JqZWN0IiwianNvbkRhdGEiLCJpc0V4ZWN1dGUiLCJ0eXBlT2ZDb21tYW5kIiwiQ29udHJvbFBhbmVsIiwiZmlyc3RJbml0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwiZGFzaGJvYXJkIiwidURhdGFNYW5hZ2VyIiwidUxpc3RNYW5hZ2VyIiwiY1BhbmVsIiwiaW50ZXJ2YWxJZCIsIkRhc2hib2FyZENvbnRyb2xsZXIiLCJzZXR1cEV2ZW50RW1pdHRlciIsInN0YXJ0QXBwIiwic2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucyIsInNldHVwSW50ZXJ2YWxGdW5jdGlvbnMiLCJjb25kaXRpb24iLCJuZXdEYXRhIiwiZ2V0Q3VycmVudFVzZXJJZEZyb21Mb2NhbFN0b3JhZ2UiLCJsb2NhbFNldHRpbmdzU2V0dXAiLCJzZXR1cFVzZXJMaXN0RE9NIiwidG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlciIsInNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UiLCJzZXJpYWxDb25kaXRpb24iLCJzb3J0IiwiY3VycmVudFVzZXJJZCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwic3RhcnRDb252ZXJzYXRpb25XaXRoVXNlciIsInNldHVwVXNlcnNMaXN0ZW5lcnMiLCJmcm9tIiwidXNlcnMiLCJ1c2VyTGlzdGVuZXIiLCJpbm5lclRleHQiLCJnZXRBY2Vzc1RvVXNlcnNMaXN0IiwibG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvciIsImN1cnJlbnRVc2VyTGlzdENvbm5lY3Rpb24iLCJtYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkIiwicmVtb3ZlIiwidXBkYXRlVXNlck1lc3NhZ2VzQW5kRGlzcGxheUl0IiwiY2xvc2VDb252ZXJzYXRpb24iLCJuZXdNZXNzYWdlRGl2IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNldEludGVydmFsIiwidmlld0lkIiwiY2xvc2VBcHAiLCJjbGVhckludGVydmFsIiwiRE9NVmFyaWFibGVzIiwia2V5T2ZWYWx1ZSIsImNoYXRUaXRsZSIsInR5cGVPZlZhbHVlIiwiY2hhdFVybCIsImNoYXRDbGFzcyIsImNoYXRQb3NpdGlvblNlbGVjdCIsImFsbG93TWluaW1pemUiLCJhbGxvd0RyYWciLCJzaG93VGltZSIsInJlcXVpcmVOYW1lIiwibmV0d29ya1JhZGlvWE1SIiwidHJ1ZSIsIm5ldHdvcmtSYWRpb0xvbmdQb2xsIiwibmV0d29ya1JhZGlvRmV0Y2giLCJMYXVuY2hlciIsImdldERhdGFGcm9tRWxlbWVudCIsInNyYyIsImVsZW1lbnROYW1lIiwiZ2V0QXR0cmlidXRlIiwiY2hlY2tlZCIsImdldEVsZW1lbnRWYWx1ZSIsIm5hbWUiLCJzY3JpcHRDb2RlIiwiYWJvdXQiLCJBYm91dCIsIm1haW5Db250cm9sbGVyIiwibWF0Y2hlc0h0bWxQYXRoIiwiY29uZmlndXJhdGlvbiIsImNsb3NlRnVuY3Rpb25zIiwic3RhcnRGdW5jdGlvbnMiLCJNYWluQ29udHJvbGxlciIsIndpbmRvdyIsImhhbmRsZVVybCIsIm5ld1VSTCIsImxvY2F0aW9uIiwiaHJlZiIsInVybCIsImhhc2giLCJjbG9zZVByZXZpb3VzUGFnZSJdLCJtYXBwaW5ncyI6IkFBR0EsSUFBSUEsV0FBYSxDQUNi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LEtBQU8sZUFJMUNMLEVBQWV2WSxVQUFVeVksVUFBWSxTQUFtQkksR0FDcEQsSUFBSUMsR0FDcUIsSUFBdEJELEVBQUk1RyxRQUFRLE9BR2Y2RyxFQUFPRCxFQUFJMVAsTUFBTSxLQUFLUSxNQUN0QjFJLEtBQUs4WCxrQkFBa0JELEdBR3ZCcFosU0FBU0MsaUJBQWlCLEtBQU9xRSxFQUFPaEcsT0FBT0ssdUJBQXVCc0osUUFBUSxTQUE0QnZHLEdBQ3RHQSxFQUFRa00sVUFBVXlJLE9BQU8vUixFQUFPaEcsT0FBT0sseUJBRTNDcUIsU0FBU0MsaUJBQWlCLFlBQWNtWixFQUFPLE1BQU1uUixRQUFRLFNBQXlCdkcsR0FDbEZBLEVBQVFrTSxVQUFVQyxJQUFJdkosRUFBT2hHLE9BQU9LLHlCQUd4QzZDLG9CQUFvQjhDLEVBQU9oRyxPQUFPSSxlQUNsQ3dNLFlBQVlFLFdBQVdxTixFQUFnQlcsR0FBTyxLQUFNOVUsRUFBT2hHLE9BQU9JLGVBQWV3RSxLQUFLLFdBQ2xGMFYsRUFBZVEsU0FLdkJQLEVBQWV2WSxVQUFVK1ksa0JBQW9CLFNBQTJCRCxHQUNwRW5ULE9BQU9DLEtBQUt5UyxHQUFnQnhTLElBQUksU0FBOEJrSixHQUkxRCxPQUhHQSxJQUFRK0osR0FDUFQsRUFBZXRKLE1BRVosS0FJUixJQUFJd0osRUFwRU0sQ0FzRWxCMWMsWUFFSHFjLGVBQWU3RCIsImZpbGUiOiJkYXNoYm9hcmRBcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb25maWdcclxuXHJcbi8qIGV4cG9ydGVkIG1haW5Db25maWcgKi9cclxudmFyIG1haW5Db25maWcgPSB7XHJcbiAgICBET006IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSBET00g0Y3Qu9C10LzQtdC90YLQsCDQsiDQutC+0YLQvtGA0L7QvCDQvdC10L7QsdGF0L7QtNC40LzQviDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC/0LjRgdC+0Log0Y7Qt9C10YDQvtCyXHJcbiAgICAgICAgVVNFUl9MSVNUX0NTU19DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlcnMtbGlzdFwiLFxyXG4gICAgICAgIC8vINCR0LvQvtC6INCyINC60L7RgtC+0YDRi9C5INC30LDQs9GA0YPQttCw0LXRgtGB0Y8g0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NIQVRfQ09OVEFJTlNfQkxPQ0tfU1RZTEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXRcIixcclxuICAgICAgICAvLyDQmtC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y4g0L/QviDQvdCw0LbQsNGC0LjRjlxyXG4gICAgICAgIENTU19TRU5EX01FU1NBR0VfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zZW5kLWJ1dHRvblwiLFxyXG4gICAgICAgIC8vINCa0LvQsNGB0YEg0LrQvdC+0L/QutC4INC30LDQutGA0YvQstCw0Y7RidC10Lkg0YfQsNGCXHJcbiAgICAgICAgQ1NTX0NMT1NFX0NIQVRfQlVUVE9OX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jbG9zZS1jaGF0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGE0LjQu9GM0YLRgNCw0YbQuNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX0ZJTFRFUl9JTlBVVF9JRDogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfZmlsdGVyLWlucHV0XCIsXHJcbiAgICAgICAgLy8gSUQgRE9NINGN0LvQtdC80LXQvdGC0LAg0LTRj9C7INCy0LLQvtC00LAg0L/QsNGA0LDQvNC10YLRgNCwINGB0L7RgNGC0LjRgNC+0LLQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAgICAgQ1NTX1NPUlRfU0VMRUNUX0lEOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9zb3J0XCIsXHJcbiAgICAgICAgLy8g0JrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC+0YLQvtCx0YDQsNC20LDQtdGC0YHRjyDRh9Cw0YIg0Lgg0LrQvtC90YLRgNC+0Lsg0L/QsNC90LXQu9GMXHJcbiAgICAgICAgQ1NTX0FDVElWRV9VU0VSX0JMT0NLOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9hY3RpdmUtdXNlclwiLFxyXG5cclxuICAgICAgICAvLyBDT05UUk9MIFBBTkVMXHJcbiAgICAgICAgLy8g0JrQu9Cw0YHRgSBjb250cm9sIHBhbmVsINC10LvQtdC80LXQvdGCXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jb250cm9sLWxvZ1wiLFxyXG4gICAgICAgIENTU19DT05UUk9MX1BBTkVMX1NFTEVDVF9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfY29udHJvbF9zZWxlY3RfY29tbWFuZFwiLFxyXG4gICAgICAgIENTU19DT05UUk9MX1NFTkRfQ09NTUFORF9CVVRUT05fQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NvbnRyb2xfc2VuZC1jb21tYW5kLWJ1dHRvblwiLFxyXG4gICAgICAgIENTU19DT05UUk9MX1BBUkFNRVRFUlNfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NvbnRyb2xfcGFyYW1ldGVyLWlucHV0XCIsXHJcbiAgICAgICAgQ1NTX0NPTlRST0xfUEFORUxfTE9HX0VMRU1FTlRfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NvbnRyb2wtbG9nLWlubmVyLWluZm9ybWF0aW9uXCJcclxuXHJcbiAgICB9LFxyXG4gICAgbGF1bmNoZXI6IHtcclxuICAgICAgICBwYXR0ZXJuOiBcInRvdWNoc29mdF9jaGF0LWxhdW5jaGVyX1wiLFxyXG4gICAgICAgIGFmdGVyIDogW1xyXG4gICAgICAgICAgICBcImNoYXRUaXRsZVwiLCBcImNoYXRVcmxcIiwgXCJjaGF0Q2xhc3NcIiwgXCJjaGF0UG9zaXRpb25TZWxlY3RcIixcclxuICAgICAgICAgICAgXCJhbGxvd01pbmltaXplXCIsIFwiYWxsb3dEcmFnXCIsIFwicmVxdWlyZU5hbWVcIiwgXCJzaG93VGltZVwiLCBcIm5ldHdvcmtSYWRpb1hNUlwiLFxyXG4gICAgICAgICAgICBcIm5ldHdvcmtSYWRpb0ZldGNoXCIsXCJuZXR3b3JrUmFkaW9Mb25nUG9sbFwiLCBcInNjcmlwdENvZGVcIlxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgc3JjU3RhcnQ6IFwiJmx0c2NyaXB0IHNyYz0naHR0cHM6Ly9yYXdnaXQuY29tL1VuYWNjZXB0YWJsZUNvbmRpdGlvbi9Ib21ld29ya18yL21hc3Rlci9qcy9jaGF0LmpzP1wiLFxyXG4gICAgICAgIHNyY0VuZDogIFwiJyZndCZsdC9zY3JpcHQmZ3RcIlxyXG4gICAgfSxcclxuICAgIHVzZXJMaXN0OiB7XHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YHRiyDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC+0LHRitC10LrRgtC+0Lwg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgICAgIC8vINCt0LvQtdC80LXQvdGCINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgIFVTRVJfRUxFTUVOVF9DU1NfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX3VzZXJcIixcclxuICAgICAgICAvLyDQrdC70LXQvNC10L3RgiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyBpZCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAgICBVU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLWlkXCIsXHJcbiAgICAgICAgLy8g0K3Qu9C10LzQtdC90YLRiyDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRgdGC0LDRgtGD0YHQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAgICBVU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT0ZGTElORTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1vZmZsaW5lXCIsXHJcbiAgICAgICAgVVNFUl9JTkRJQ0FUT1JfQ1NTX0NMQVNTX09OTElORTogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdXNlci1vbmxpbmVcIlxyXG4gICAgfSxcclxuICAgIGNoYXRTZXR0aW5nczoge1xyXG4gICAgICAgIHR5cGVPZlJlcXVlc3Q6IFwibG9uZ1BvbGxcIlxyXG4gICAgfSxcclxuICAgIGN1cnJlbnRVc2VyU2V0dGluZ3M6IHtcclxuICAgICAgICB1c2VySWQ6IG51bGwsXHJcbiAgICAgICAgdXNlck5hbWU6IG51bGxcclxuICAgIH0sXHJcblxyXG4gICAgY3VycmVudERhc2hib2FyZENvbmRpdGlvbjoge1xyXG4gICAgICAgIGZpbHRlckJ5OiBudWxsLFxyXG4gICAgICAgIHNvcnRCeTogbnVsbFxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgaW50ZXJ2YWw6IHtcclxuICAgICAgICBVUERBVEVfVVNFUlNfVElNRTogNTAwMCxcclxuICAgICAgICBPTkxJTkVfSU5URVJWQUw6IDEyMDAwXHJcbiAgICB9LFxyXG4gICAgcm91dGVyOiB7XHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBhYm91dFxyXG4gICAgICAgIEFCT1VUX0hUTUxfUEFUSDogXCJodHRwczovL3Jhd2dpdC5jb20vVW5hY2NlcHRhYmxlQ29uZGl0aW9uL29ubGluZV9jb25zdWx0YW50X3dlYl9hcHAvbWFzdGVyL2FwcC9odG1sL2Rhc2hib2FyZC9hYm91dC5odG1sXCIsXHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgTEFVTkNIRVJfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2NoYXRMYXVuY2hlci5odG1sXCIsXHJcbiAgICAgICAgLy8gVVJMINC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRiyBkYXNoYm9hcmRcclxuICAgICAgICBEQVNIQk9BUkRfSFRNTF9QQVRIOiBcImh0dHBzOi8vcmF3Z2l0LmNvbS9VbmFjY2VwdGFibGVDb25kaXRpb24vb25saW5lX2NvbnN1bHRhbnRfd2ViX2FwcC9tYXN0ZXIvYXBwL2h0bWwvZGFzaGJvYXJkL2Rhc2hib2FyZC5odG1sXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCwg0LIg0LrQvtGC0L7RgNGL0Lkg0LfQsNCz0YDRg9C20LDQtdGC0YHRjyDQvdC10L7QsdGF0L7QtNC40LzQsNGPINGH0LDRgdGC0Ywg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICAgIENPTlRFTlRfQ0xBU1M6IFwiY29udGVudFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBLCDQvtGC0LzQtdGH0LDRjtGJ0LjQuSDQsNC60YLQuNCy0L3Rg9GOINGB0YLRgNCw0L3QuNGG0YMg0LIg0L/QsNC90LXQu9C4INC90LDQstC40LPQsNGG0LjQuFxyXG4gICAgICAgIE5BVklHQVRJT05fQUNUSVZFX0NTUzogXCJuYXZpZ2F0aW9uLWFjdGl2ZVwiXHJcbiAgICB9LFxyXG4gICAgbWVzc2FnZXM6IHtcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDQtNC70Y8g0Y3Qu9C10LzQtdC90LDRgiDRgSDRgdC+0L7QsdGJ0LXQvdC40LUsINC10YHQu9C4INGO0LfQtdGAINC90LUg0L/RgNC+0YfQuNGC0LDQuyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfVVNFUl9OT1RfUkVBRF9NRVNTQUdFUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfbWVzc2FnZS1ub3QtcmVhZFwiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNGPXHJcbiAgICAgICAgQ1NTX0NIQVRfTUVTU0FHRVNfQ09OVEFJTkVSOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VzXCIsXHJcblxyXG4gICAgICAgIC8vIG1lc3NhZ2VcclxuICAgICAgICAvLyBDc3Mg0LrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC90LDRhdC+0LTQuNGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8s0LTQsNGC0LAg0Lgg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfTUVTU0FHRV9DT05UQUlORVI6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1lbGVtZW50c1wiLFxyXG4gICAgICAgIC8vIENzcyDQutC70LDRgdGBIERPTSDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LjQvNGPINC+0YLQv9GA0LDQstC40YLQtdC70Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX1NFTkRFUl9OQU1FOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2Utc2VuZGVyXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDQtNCw0YLRgyDRgdC+0L7QsdGJ0LXQvdC40Y9cclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFX0RBVEU6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2NoYXQtbWVzc2FnZS1kYXRlXCIsXHJcbiAgICAgICAgLy8gQ3NzINC60LvQsNGB0YEgRE9NINGN0LvQtdC80LXQvdGC0LAg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00LXQvCDQvtGC0L7QsdGA0LDQttCw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgICAgICBDU1NfQ0hBVF9NRVNTQUdFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF9jaGF0LW1lc3NhZ2VcIlxyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8vINC60LvQsNGB0YEg0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtCwXHJcbiAgICBJTlZJU0lCTEVfQ0xBU1M6IFwicm9vdC10b3VjaHNvZnQtZGFzaGJvYXJkX2ludmlzaWJsZS1lbGVtZW50XCIsXHJcblxyXG4gICAgREFUQV9CQVNFX1VSTDogXCJodHRwczovL29ubGluZWNvbnN1bHRhbnR3ZWJhcHAuZmlyZWJhc2Vpby5jb21cIixcclxuXHJcblxyXG4gICAgQURNSU5fTkFNRTogXCJBZG1pblwiLFxyXG5cclxuICAgIC8vIElEIERPTSDRjdC70LXQvNC10L3RgtCwINC00Y/QuyDQstCy0L7QtNCwINGB0L7QvtCx0YnQtdC90LjRjyDQv9C10YDQtdC0INC+0YLQv9GA0LDQstC60L7QuSDRjtC30LXRgNGDXHJcbiAgICBDU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUzogXCJyb290LXRvdWNoc29mdC1kYXNoYm9hcmRfdGV4dGFyZWEtZm9yLW1lc3NhZ2VcIixcclxuXHJcbiAgICBMT0NBTF9TVE9SQUdFX05BTUU6IFwiY3VycmVudENvbmRpdGlvblwiLFxyXG5cclxuICAgIC8vINC00LvRjyDQvdC+0LLRi9GFINGB0L7QvtCx0YnQtdC90LjQuSDQvtGCINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5XHJcbiAgICAvLyDQldGB0LvQuCDRjtC30LXRgCDQv9GA0LjRgdC70LDQuyDRgdC+0L7QvtCx0YnQtdC90LjQtSwg0L3QsCDRjtC30LXRgNCwINCyINGB0L/QuNGB0LrQtSDQstC10YjQsNC10YLRgdGPINGN0YLQvtGCINGB0YLQuNC70YxcclxuICAgIENTU19IQVZFX05FV19NRVNTQUdFX1NUWUxFOiBcInJvb3QtdG91Y2hzb2Z0LWRhc2hib2FyZF91c2VyLWhhdmUtbmV3LW1lc3NhZ2VcIixcclxuXHJcbiAgICBDT01NQU5EX1BBVEhfUFJFRklYOiBcImh0dHBzOi8vb25saW5lY29uc3VsdGFudHdlYmFwcC5maXJlYmFzZWlvLmNvbS91c2Vyc1NldHRpbmdzL1wiXHJcblxyXG5cclxuXHJcblxyXG59O1xyXG4vKiBleHBvcnRlZCBkYXRhQ29ubmVjdG9yQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIGRhdGFCYXNlVXJsICovXHJcbi8qIGV4cG9ydGVkIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIGRhdGFCYXNlVXJsID0gbWFpbkNvbmZpZy5EQVRBX0JBU0VfVVJMO1xyXG5cclxudmFyIGdldEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRFbGVtZW50RnJvbURPTSAoc2VsZWN0b3IsIGlzQWxsLCBpdElzSWQpIHtcclxuICAgIHZhciBzZWxlY3RvclN0YXJ0ID0gKGl0SXNJZCkgPyBcIiNcIiA6IFwiLlwiO1xyXG4gICAgaWYoaXNBbGwpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvclN0YXJ0ICsgc2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JTdGFydCArIHNlbGVjdG9yKTtcclxufTtcclxuXHJcblxyXG52YXIgZGF0YUNvbm5lY3RvckNvbmZpZyA9IHtcclxuICAgIHR5cGVPZlJlcXVlc3Q6IG1haW5Db25maWcuY2hhdFNldHRpbmdzLnR5cGVPZlJlcXVlc3RcclxufTtcclxuXHJcbi8vIHNlcnZpY2VcclxuXHJcbi8qIGV4cG9ydGVkIHNvcnRlciAqL1xyXG52YXIgc29ydGVyID0gKGZ1bmN0aW9uIGNyZWF0ZU5ld1NvcnRlciAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZXIoKSB7fVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNvcnRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHN3YXAoaXRlbXMsIGZpcnN0SW5kZXgsIHNlY29uZEluZGV4KSB7XHJcbiAgICAgICAgdmFyIHRlbXAgPSBpdGVtc1tmaXJzdEluZGV4XTtcclxuICAgICAgICBpdGVtc1tmaXJzdEluZGV4XSA9IGl0ZW1zW3NlY29uZEluZGV4XTtcclxuICAgICAgICBpdGVtc1tzZWNvbmRJbmRleF0gPSB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnRpdGlvbihpdGVtcywgbGVmdCwgcmlnaHQsIHNvcnRGaWVsZCkge1xyXG4gICAgICAgIHZhciBwaXZvdCA9IGl0ZW1zW01hdGguZmxvb3IoKHJpZ2h0ICsgbGVmdCkgLyAyKV1bc29ydEZpZWxkXTtcclxuICAgICAgICB2YXIgaSA9IGxlZnQ7XHJcbiAgICAgICAgdmFyIGogPSByaWdodDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGkgPD0gaikge1xyXG4gICAgICAgICAgICB3aGlsZSAoaXRlbXNbaV1bc29ydEZpZWxkXSA+IHBpdm90KSB7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKGl0ZW1zW2pdW3NvcnRGaWVsZF0gPCBwaXZvdCkge1xyXG4gICAgICAgICAgICAgICAgai0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpIDw9IGopIHtcclxuICAgICAgICAgICAgICAgIHN3YXAoaXRlbXMsIGksIGopO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgai0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG5cclxuICAgIFNvcnRlci5wcm90b3R5cGUucXVpY2tTb3J0ID0gZnVuY3Rpb24gcXVpY2tTb3J0KFxyXG4gICAgICAgIGl0ZW1zLFxyXG4gICAgICAgIGxlZnQsXHJcbiAgICAgICAgcmlnaHQsXHJcbiAgICAgICAgc29ydEZpZWxkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgaW5kZXg7XHJcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgaW5kZXggPSBwYXJ0aXRpb24oaXRlbXMsIGxlZnQsIHJpZ2h0LCBzb3J0RmllbGQpO1xyXG4gICAgICAgICAgICBpZiAobGVmdCA8IGluZGV4IC0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWlja1NvcnQoaXRlbXMsIGxlZnQsIGluZGV4IC0gMSwgc29ydEZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCByaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWlja1NvcnQoaXRlbXMsIGluZGV4LCByaWdodCwgc29ydEZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBjcmVhdGVTb3J0ZXIoKTtcclxufSkoKTtcclxuLyogZXhwb3J0ZWQgY2xlYXJFbGVtZW50Q29udGVudCAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vLyDQntGH0LjRidCw0LXRgiBET00g0YHQvtC00LXRgNC20LDRidC40Lkg0Y3Qu9C10LzQtdC90YLRiyDRgdC/0LjRgdC60LAg0Y7Qt9C10YDQvtCyXHJcbmZ1bmN0aW9uIGNsZWFyRWxlbWVudENvbnRlbnQoZWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGRhdGFiYXNlXHJcblxyXG4vKiBleHBvcnRlZCBkYXRhQ29ubmVjdG9yICovXHJcbi8qIGdsb2JhbCBkYXRhQ29ubmVjdG9yQ29uZmlnICovXHJcbi8vINCc0L7QtNGD0LvRjCDQv9GA0LXQtNC+0YHRgtCw0LLQu9GP0LXRgiDRgdC/0L7RgdC+0LEg0L7RgtC/0YDQsNCy0LrQuCDQt9Cw0L/RgNC+0YHQsCDQuiDQuNGB0YLQvtGH0L3QuNC60YMg0LTQsNC90L3Ri9GFXHJcbi8vINCU0LvRjyDRgNC10LrQstC10YHRgtCwINC90LXQvtCx0YXQvtC00LjQvCDQv9GD0YLRjCwg0YLQtdC70L4g0LfQsNC/0YDQvtGB0LAsINGC0LjQvyDQt9Cw0L/RgNC+0YHQsFxyXG4vLyByZXF1ZXN0INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIFByb21pc2VcclxudmFyIGRhdGFDb25uZWN0b3IgPSAoZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZUFQSShkYXRhQ29ubmVjdG9yQ29uZmlnT2JqKSB7XHJcbiAgICB2YXIgZGF0YUJhc2VDb25uZWN0b3I7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YUJhc2VDb25uZWN0b3IoKSB7fVxyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5zZXR1cERhdGFCYXNlQVBJID0gZnVuY3Rpb24gc2V0dXBEYXRhQmFzZUFQSSAodHlwZU9mUmVxdWVzdCkge1xyXG4gICAgICAgIHZhciBkYXRhQmFzZUFQSTtcclxuICAgICAgICBpZiAodHlwZU9mUmVxdWVzdCA9PT0gXCJmZXRjaFwiKSB7XHJcbiAgICAgICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdEZldGNoLFxyXG4gICAgICAgICAgICAgICAgZ2V0TmV3Q29ubmVjdG9yQVBJOiBkYXRhQmFzZUNvbm5lY3Rvci5zZXR1cERhdGFCYXNlQVBJXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlT2ZSZXF1ZXN0ID09PSBcIlhIUlwiKSB7XHJcbiAgICAgICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdFhNUixcclxuICAgICAgICAgICAgICAgIGdldE5ld0Nvbm5lY3RvckFQSTogZGF0YUJhc2VDb25uZWN0b3Iuc2V0dXBEYXRhQmFzZUFQSVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGFCYXNlQVBJID0ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdDogZGF0YUJhc2VDb25uZWN0b3IucmVxdWVzdFhNUixcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbjogZGF0YUJhc2VDb25uZWN0b3IubG9uZ1BvbGwsXHJcbiAgICAgICAgICAgICAgICBnZXROZXdDb25uZWN0b3JBUEk6IGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUElcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGFCYXNlQVBJO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhQmFzZUNvbm5lY3Rvci5wcm90b3R5cGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24gcmVxdWVzdEZldGNoKFxyXG4gICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2gocmVxdWVzdFBhdGgsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQWNjZXB0OiBjb250ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IGNvbnRlbnRUeXBlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiBnZXRSZXNwb25zZUpTT04ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYoY29udGVudFR5cGUgPT09IFwiYXBwbGljYXRpb24vanNvblwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFCYXNlQ29ubmVjdG9yLnByb3RvdHlwZS5yZXF1ZXN0WE1SID0gZnVuY3Rpb24gcmVxdWVzdFhNUihcclxuICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICByZXF1ZXN0Qm9keSxcclxuICAgICAgICByZXF1ZXN0VHlwZSxcclxuICAgICAgICBjb250ZW50VHlwZVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIHJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4ocmVxdWVzdFR5cGUsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgY29udGVudFR5cGUpO1xyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gbG9hZENhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiBlcnJvckNhc2UoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoeGhyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEJvZHkpIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKHJlcXVlc3RCb2R5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGF0YUJhc2VDb25uZWN0b3IucHJvdG90eXBlLmxvbmdQb2xsID0gZnVuY3Rpb24gbG9uZ1BvbGwgKHRhcmdldFVybCkge1xyXG4gICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhodHRwLm9wZW4oJ0dFVCcsIHRhcmdldFVybCwgdHJ1ZSk7XHJcbiAgICAgICAgeGh0dHAuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ3RleHQvZXZlbnQtc3RyZWFtJyk7XHJcbiAgICAgICAgcmV0dXJuIHhodHRwO1xyXG4gICAgfTtcclxuXHJcbiAgICBkYXRhQmFzZUNvbm5lY3RvciA9IG5ldyBEYXRhQmFzZUNvbm5lY3RvcigpO1xyXG4gICAgcmV0dXJuIGRhdGFCYXNlQ29ubmVjdG9yLnNldHVwRGF0YUJhc2VBUEkoZGF0YUNvbm5lY3RvckNvbmZpZ09iai50eXBlT2ZSZXF1ZXN0KTtcclxuXHJcbn0pKGRhdGFDb25uZWN0b3JDb25maWcpO1xyXG4vKiBleHBvcnRlZCBkYXRhU291cmNlICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGdsb2JhbCBkYXRhQmFzZVVybCAqL1xyXG4vKiBnbG9iYWwgZGF0YUNvbm5lY3RvciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQtNCw0L3QvdGL0YVcclxuLy8g0JLRgdC1IEFQSSDRhNGD0L3QutGG0LjQuCDQstC+0LfQstGA0LDRidCw0Y7RgiDQv9GA0L7QvNC40YHRi1xyXG52YXIgZGF0YVNvdXJjZSA9IChmdW5jdGlvbiBjcmVhdGVEYXRhU291cmNlIChkYXRhQ29ubmVjdG9yLCBjb25maWcpIHtcclxuICAgIHZhciBkYXRhU291cmNlSW5zdGFuY2U7XHJcbiAgICB2YXIgVVNFUl9MSVNUID0gXCJ1c2VyTGlzdFwiO1xyXG4gICAgdmFyIFVTRVJfTUVTU0FHRVMgPSBcInVzZXJzTWVzc2FnZXNcIjtcclxuICAgIHZhciBVU0VSU19TRVRUSU5HUyA9IFwidXNlcnNTZXR0aW5nc1wiO1xyXG4gICAgdmFyIG5ld1VzZXJEYXRhID0ge1xyXG4gICAgICAgIGlzTWluaW1pemU6IGZhbHNlLFxyXG4gICAgICAgIHJlYWRMYXN0TWVzc2FnZTogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBEYXRhU291cmNlKCkge31cclxuXHJcbiAgICBmdW5jdGlvbiBsb25nUG9sbENvbm5lY3QgKGRhdGFUeXBlLCB1c2VySWQpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIG51bGwsIGRhdGFUeXBlKTtcclxuICAgICAgICByZXR1cm4gZGF0YUNvbm5lY3Rvci5jcmVhdGVMb25nUG9sbENvbm5lY3Rpb24ocmVxdWVzdFBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJhc2ljQ29ubmVjdCAoZGF0YVR5cGUsIHVzZXJJZCkge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UGF0aCA9IHRoaXMuY3JlYXRlUmVxdWVzdFBhdGgoZGF0YUJhc2VVcmwsIHVzZXJJZCwgbnVsbCwgZGF0YVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QuYmluZChudWxsLCByZXF1ZXN0UGF0aCwgbnVsbCwgXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcbiAgICB9XHJcblxyXG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuY3JlYXRlUmVxdWVzdFBhdGggPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0UGF0aChcclxuICAgICAgICBkYXRhQmFzZVVSTCxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgcmVxdWVzdFBvc3RmaXgsXHJcbiAgICAgICAgcmVxdWVzdFByZWZpeFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBkYXRhQmFzZVVSTDtcclxuICAgICAgICBpZihyZXF1ZXN0UHJlZml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UHJlZml4XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcGF0aCArPSBcIi9cIiArIHVzZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQb3N0Zml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhdGggKz0gXCIvXCIgKyByZXF1ZXN0UG9zdGZpeDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF0aCArPSBcIi5qc29uXCI7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldEhUTUwgPSBmdW5jdGlvbiBnZXRIVE1MIChyZXF1ZXN0UGF0aCkge1xyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBcIkdFVFwiLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04J1xyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24gc2V0RGF0YSAoZGF0YVR5cGUsIHJlcXVlc3RUeXBlLCBmaWVsZE5hbWUsIHVzZXJJZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFBhdGg7XHJcbiAgICAgICAgaWYocmVxdWVzdFR5cGUgPT09IFwiUFVUXCIpIHtcclxuICAgICAgICAgICAgcmVxdWVzdFBhdGggPSB0aGlzLmNyZWF0ZVJlcXVlc3RQYXRoKGRhdGFCYXNlVXJsLCB1c2VySWQsIGZpZWxkTmFtZSwgZGF0YVR5cGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoID0gdGhpcy5jcmVhdGVSZXF1ZXN0UGF0aChkYXRhQmFzZVVybCwgdXNlcklkLCBudWxsLCBkYXRhVHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhQ29ubmVjdG9yLnJlcXVlc3QoXHJcbiAgICAgICAgICAgIHJlcXVlc3RQYXRoLFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSksXHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UgPSBmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhU291cmNlICh1c2VySWQsIHVzZXJOYW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZTtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgbmV3VXNlckRhdGEudXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgICAgICBPYmplY3Qua2V5cyhuZXdVc2VyRGF0YSkubWFwKGZ1bmN0aW9uIGFkZE5ld1NldHRpbmdzIChzZXR0aW5nTmFtZSkge1xyXG4gICAgICAgICAgICB0aGF0LnNldERhdGEoVVNFUlNfU0VUVElOR1MsIFwiUFVUXCIsIHNldHRpbmdOYW1lLCB1c2VySWQsIG5ld1VzZXJEYXRhW3NldHRpbmdOYW1lXSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YShVU0VSX0xJU1QsIFwiUFVUXCIsIG51bGwsIHVzZXJJZCwge1wibGFzdE9ubGluZVwiOiBkYXRlLmdldFRpbWUoKSwgXCJzZW5kTmV3TWVzc2FnZVwiOiBmYWxzZX0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXRhU291cmNlLnByb3RvdHlwZS5nZXREYXRhU291cmNlQVBJID0gZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZUFQSSAodHlwZU9mUmVxdWVzdCkge1xyXG4gICAgICAgIGlmKHR5cGVPZlJlcXVlc3QpIHtcclxuICAgICAgICAgICAgY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ID0gdHlwZU9mUmVxdWVzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ID09PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0RGF0YSA9IGxvbmdQb2xsQ29ubmVjdFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIERhdGFTb3VyY2UucHJvdG90eXBlLmdldERhdGEgPSBiYXNpY0Nvbm5lY3RcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdXNlcnNBUEk6IHtcclxuICAgICAgICAgICAgICAgIGdldFVzZXJMaXN0OiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX0xJU1RcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBnZXRVc2VyU2V0dGluZ3M6IGRhdGFTb3VyY2VJbnN0YW5jZS5nZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJTX1NFVFRJTkdTXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgZ2V0VXNlck1lc3NhZ2VzOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX01FU1NBR0VTXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgZ2V0U2V0dGluZ0ZpZWxkOiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSU19TRVRUSU5HU1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlOiBkYXRhU291cmNlSW5zdGFuY2Uuc2V0RGF0YS5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBVU0VSX01FU1NBR0VTLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUE9TVFwiXHJcblxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHNldFNldHRpbmdGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUlNfU0VUVElOR1MsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJQVVRcIlxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGFkZE5ld1VzZXJUb0RhdGFTb3VyY2U6IGRhdGFTb3VyY2VJbnN0YW5jZS5hZGROZXdVc2VyVG9EYXRhU291cmNlLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlTGFzdE9ubGluZTogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9MSVNULFxyXG4gICAgICAgICAgICAgICAgICAgIFwiUFVUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJsYXN0T25saW5lXCJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWc6IGRhdGFTb3VyY2VJbnN0YW5jZS5zZXREYXRhLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFVTRVJfTElTVCxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic2VuZE5ld01lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU1lc3NhZ2VJc1JlYWRGaWVsZDogZGF0YVNvdXJjZUluc3RhbmNlLnNldERhdGEuYmluZChcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUl9NRVNTQUdFUyxcclxuICAgICAgICAgICAgICAgICAgICBcIlBVVFwiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbW1vbkFQSToge1xyXG4gICAgICAgICAgICAgICAgZ2V0SFRNTDogZGF0YVNvdXJjZUluc3RhbmNlLmdldEhUTUwuYmluZChkYXRhU291cmNlSW5zdGFuY2UpLFxyXG4gICAgICAgICAgICAgICAgZ2V0RGF0YVNvdXJjZUFQSTogZGF0YVNvdXJjZUluc3RhbmNlLmdldERhdGFTb3VyY2VBUEkuYmluZChkYXRhU291cmNlSW5zdGFuY2UpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXQvCBpbnN0YW5jZSDQvtCx0YrQtdC60YLQsCwg0LfQsNC00LDQtdC8IEFQSVxyXG4gICAgZGF0YVNvdXJjZUluc3RhbmNlID0gbmV3IERhdGFTb3VyY2UoKTtcclxuXHJcblxyXG5cclxuICAgIHJldHVybiBkYXRhU291cmNlSW5zdGFuY2UuZ2V0RGF0YVNvdXJjZUFQSSgpO1xyXG59KShkYXRhQ29ubmVjdG9yLCBtYWluQ29uZmlnKTtcclxuXHJcbi8vIGV2ZW50RW1pdHRlclxyXG5cclxuLyogZXhwb3J0ZWQgZXZlbnRFbWl0dGVyICovXHJcbnZhciBldmVudEVtaXR0ZXIgPSAoZnVuY3Rpb24gY3JlYXRlRXZlbnRFbWl0dGVyICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkU3Vic2NyaWJlID0gZnVuY3Rpb24gYWRkU3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmKCAhdGhpcy5ldmVudHNbZXZlbnROYW1lXSApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaWJlICgpIHtcclxuICAgICAgICAgICAgdGhhdC5ldmVudHNbZXZlbnROYW1lXSA9IHRoYXQuZXZlbnRzW2V2ZW50TmFtZV0uZmlsdGVyKGZ1bmN0aW9uIHJlbW92ZSAoZWxlbWVudENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudENhbGxiYWNrICE9PSBjYWxsYmFja1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlbW92ZVN1YnNjcmliZVxyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0IChldmVudE5hbWUsIGRhdGEpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLmV2ZW50c1tldmVudE5hbWVdO1xyXG4gICAgICAgIGlmKCBldmVudCApIHtcclxuICAgICAgICAgICAgZXZlbnQuZm9yRWFjaChmdW5jdGlvbiBpbnZva2UgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKG51bGwsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbn0pKCk7XHJcbi8qIGV4cG9ydGVkIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIgKi9cclxudmFyIGxvbmdQb2xsUmVzcG9uc2VQYXJzZXIgPSAoZnVuY3Rpb24gY3JlYXRlTG9uZ1BvbGxSZXNwb25zZVBhcnNlcigpIHtcclxuICAgIHZhciB0eXBlc09mQ2hhbmdlID0ge1xyXG4gICAgICAgIG1lc3NhZ2U6IC9tZXNzYWdlLyxcclxuICAgICAgICB1c2VyTGlzdDogL2xhc3RPbmxpbmUuezEsfXNlbmROZXdNZXNzYWdlLyxcclxuICAgICAgICBsYXN0T25saW5lOiAvXCJwYXRoXCI6XCJcXC9cXHd7MSx9XFwvbGFzdE9ubGluZS8sXHJcbiAgICAgICAgc2VuZE5ld01lc3NhZ2U6IC9cInBhdGhcIjpcIlxcL1xcd3sxLH1cXC9zZW5kTmV3TWVzc2FnZS8sXHJcbiAgICAgICAgc2V0dGluZzogL3JlYWRMYXN0TWVzc2FnZS8sXHJcbiAgICAgICAgcmVhZDogL3JlYWQvLFxyXG4gICAgICAgIGdldElwOiAvZ2V0SXAvLFxyXG4gICAgICAgIGFza1F1ZXN0aW9uOiAvYXNrUXVlc3Rpb24vXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBldmVudFJlZ3VsYXIgPSAvZXZlbnQ6IHB1dC87XHJcbiAgICB2YXIgaGFzTnVsbERhdGEgPSAvZGF0YTogbnVsbC87XHJcbiAgICB2YXIgZ2V0RGF0YVJlZ3VsYXIgPSAvXCIsXCJkYXRhXCI6LztcclxuICAgIHZhciBpdElzTmV3TWVzc2FnZVJlZ3VsYXIgPSAvXCJwYXRoXCI6XCJcXC8tLztcclxuICAgIHZhciBpdElzTmV3VXNlckxpc3RSZWd1bGFyID0gL1wiZGF0YVwiOntcImxhc3RPbmxpbmVcIjpcXGQrLFwic2VuZE5ld01lc3NhZ2VcIjovO1xyXG4gICAgdmFyIGl0SXNGaXJzdElwRGF0YVJlZ3VsYXIgPSAvZGF0YToge1wicGF0aFwiOlwiXFwvXCIsXCJkYXRhXCI6e1wiZ2V0SXBcIjovO1xyXG4gICAgdmFyIGl0SXNGaXJzdFF1ZXN0aW9uc0RhdGEgPSAvZGF0YToge1wicGF0aFwiOlwiXFwvXCIsXCJkYXRhXCI6e1wiYXNrUXVlc3Rpb25cIjovO1xyXG4gICAgdmFyIGl0SXNOZXdRdWVzdGlvbnNDb21tYW5kID0gL2RhdGE6IHtcInBhdGhcIjpcIlxcL2Fza1F1ZXN0aW9uXCIsXCJkYXRhXCI6LztcclxuICAgIHZhciBpdElzRmlyc3RVc2VyTGlzdENvbm5lY3Rpb24gPSB0cnVlO1xyXG5cclxuICAgIGZ1bmN0aW9uIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIoKSB7fVxyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmdldFR5cGVPZkNoYW5nZXMgPSBmdW5jdGlvbiBnZXRUeXBlT2ZDaGFuZ2VzKFxyXG4gICAgICAgIGFuc3dlckRhdGFcclxuICAgICkge1xyXG4gICAgICAgIHZhciB0eXBlID0gT2JqZWN0LmtleXModHlwZXNPZkNoYW5nZSkuZmlsdGVyKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDdXJyZW50VHlwZU9mQ2hhbmdlKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZXNPZkNoYW5nZVt0eXBlTmFtZV0udGVzdChhbnN3ZXJEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB0eXBlWzBdO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wcmVwYXJlRGF0YUJlZm9yZUpzb25QYXJzZSA9IGZ1bmN0aW9uIHByZXBhcmVEYXRhQmVmb3JlSnNvblBhcnNlKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVsxXVxyXG4gICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlVXNlcnNNZXNzYWdlcyA9IGZ1bmN0aW9uIHBhcnNlVXNlcnNNZXNzYWdlcyhcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBjaGFuZ2VUeXBlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgIHZhciBtZXNzYWdlSWQ7XHJcbiAgICAgICAgdmFyIHJlc3VsdE9iamVjdCA9IHt9O1xyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlID09PSBcInJlYWRcIikge1xyXG4gICAgICAgICAgICBkYXRhLmlkID0gcmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnL3JlYWRcIixcIicpXHJcbiAgICAgICAgICAgICAgICAuc2hpZnQoKTtcclxuICAgICAgICAgICAgZGF0YS52YWx1ZSA9IHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJy9yZWFkXCIsXCJkYXRhXCI6JylcclxuICAgICAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXRJc05ld01lc3NhZ2VSZWd1bGFyLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0RGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VJZCA9IHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdXHJcbiAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgIC5wb3AoKVxyXG4gICAgICAgICAgICAuc3BsaXQoZ2V0RGF0YVJlZ3VsYXIpXHJcbiAgICAgICAgICAgIC5zaGlmdCgpO1xyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UocmVzcG9uc2UpKTtcclxuICAgICAgICByZXN1bHRPYmplY3RbbWVzc2FnZUlkXSA9IGRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdE9iamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuaGFzTmV3RGF0YSA9IGZ1bmN0aW9uIGhhc05ld0RhdGEocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAhaGFzTnVsbERhdGEudGVzdChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSkgJiYgcmVzcG9uc2UubGVuZ3RoID4gMVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlVXNlckxpc3QgPSBmdW5jdGlvbiBwYXJzZVVzZXJMaXN0KFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIGNoYW5nZVR5cGVcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgdmFyIHVzZXJJZDtcclxuICAgICAgICBpZiAoaXRJc0ZpcnN0VXNlckxpc3RDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGl0SXNGaXJzdFVzZXJMaXN0Q29ubmVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdERhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXRJc05ld1VzZXJMaXN0UmVndWxhci50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSkge1xyXG4gICAgICAgICAgICB1c2VySWQgPSB0aGlzLmdldFVzZXJJZChyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXSwgbnVsbCk7XHJcbiAgICAgICAgICAgIGRhdGFbdXNlcklkXSA9IHRoaXMuZ2V0Rmlyc3REYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgICByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KGdldERhdGFSZWd1bGFyKVsxXVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdXNlcklkID0gdGhpcy5nZXRVc2VySWQocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0sIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBbdXNlcklkLCBkYXRhXTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUuZ2V0Rmlyc3REYXRhID0gZnVuY3Rpb24gZ2V0Rmlyc3REYXRhKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIganNvbkRhdGE7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAganNvbkRhdGEgPSBKU09OLnBhcnNlKHRoaXMucHJlcGFyZURhdGFCZWZvcmVKc29uUGFyc2UocmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGpzb25EYXRhO1xyXG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLmdldFVzZXJJZCA9IGZ1bmN0aW9uIGdldFVzZXJJZChcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBjaGFuZ2VUeXBlXHJcbiAgICApIHtcclxuICAgICAgICBpZiAoY2hhbmdlVHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIC5zcGxpdChjaGFuZ2VUeXBlKVxyXG4gICAgICAgICAgICAgICAgLnNoaWZ0KClcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnZGF0YToge1wicGF0aFwiOlwiLycpXHJcbiAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilbMF1cclxuICAgICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAtMSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBMb25nUG9sbFJlc3BvbnNlUGFyc2VyLnByb3RvdHlwZS5wYXJzZUNvbW1hbmRBbnN3ZXIgPSBmdW5jdGlvbiBwYXJzZUNvbW1hbmRBbnN3ZXIoXHJcbiAgICAgICAgcmVzcG9uc2VcclxuICAgICkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIHZhciBpcERhdGE7XHJcbiAgICAgICAgdmFyIGFza1F1ZXN0aW9uRGF0YTtcclxuICAgICAgICB2YXIgaXRJc0lQSW5mb3JtYXRpb24gPSAvZ2V0SXAvLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pO1xyXG4gICAgICAgIHZhciBpdElzUXVlc3Rpb25zSW5mb3JtYXRpb24gPSAvYXNrUXVlc3Rpb24vLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pO1xyXG5cclxuICAgICAgICBpZihpdElzSVBJbmZvcm1hdGlvbiAmJiBpdElzUXVlc3Rpb25zSW5mb3JtYXRpb24pIHtcclxuICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KC9kYXRhOiB7XCJwYXRoXCI6XCJcXC9cIixcImRhdGFcIjovKS5wb3AoKS5zcGxpdChcIn0sXCIpO1xyXG4gICAgICAgICAgICBhc2tRdWVzdGlvbkRhdGEgPSBKU09OLnBhcnNlKGRhdGFbMF0rIFwifX1cIik7XHJcbiAgICAgICAgICAgIGlwRGF0YSA9IEpTT04ucGFyc2UoXCJ7XCIgKyBkYXRhWzFdLnRyaW0oKS5zbGljZSgwLC0xKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICBhc2tRdWVzdGlvbkRhdGEsXHJcbiAgICAgICAgICAgICAgICBpcERhdGFcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRJc0lQSW5mb3JtYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VVc2VySXBEYXRhKHJlc3BvbnNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGl0SXNRdWVzdGlvbnNJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVF1ZXN0aW9uc0RhdGEocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VVc2VySXBEYXRhID0gZnVuY3Rpb24gcGFyc2VVc2VySXBEYXRhKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZihpdElzRmlyc3RJcERhdGFSZWd1bGFyLnRlc3QocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KGl0SXNGaXJzdElwRGF0YVJlZ3VsYXIpLnBvcCgpLnRyaW0oKS5zbGljZSgwLC0yKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0uc3BsaXQoZXZlbnRSZWd1bGFyKS5wb3AoKS5zcGxpdChcImRhdGE6IHtcXFwicGF0aFxcXCI6XFxcIi9nZXRJcFxcXCIsXFxcImRhdGFcXFwiOlwiKS5wb3AoKS50cmltKCkuc2xpY2UoMCwtMSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcblxyXG4gICAgTG9uZ1BvbGxSZXNwb25zZVBhcnNlci5wcm90b3R5cGUucGFyc2VRdWVzdGlvbnNEYXRhID0gZnVuY3Rpb24gcGFyc2VRdWVzdGlvbnNEYXRhKFxyXG4gICAgICAgIHJlc3BvbnNlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZihpdElzRmlyc3RRdWVzdGlvbnNEYXRhLnRlc3QocmVzcG9uc2VbcmVzcG9uc2UubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdLnNwbGl0KGl0SXNGaXJzdFF1ZXN0aW9uc0RhdGEpLnBvcCgpLnRyaW0oKS5zbGljZSgwLC0yKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdElzTmV3UXVlc3Rpb25zQ29tbWFuZC50ZXN0KHJlc3BvbnNlW3Jlc3BvbnNlLmxlbmd0aCAtIDFdKSkge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdChpdElzTmV3UXVlc3Rpb25zQ29tbWFuZCkucG9wKCkudHJpbSgpLnNsaWNlKDAsLTEpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShcIntcXFwiYXNrUXVlc3Rpb25cXFwiOntcXFwiXCIgKyByZXNwb25zZVtyZXNwb25zZS5sZW5ndGggLSAxXS5zcGxpdChcImRhdGE6IHtcXFwicGF0aFxcXCI6XFxcIi9hc2tRdWVzdGlvbi9cIikucG9wKCkucmVwbGFjZShcIlxcXCIsXFxcImRhdGFcXFwiXCIsIFwiXFxcIlwiKSArIFwifVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG5cclxuICAgIExvbmdQb2xsUmVzcG9uc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UodGV4dCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB0ZXh0LnNwbGl0KGV2ZW50UmVndWxhcik7XHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSB0aGlzLmdldFR5cGVPZkNoYW5nZXMocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdE9mUGFyc2UgPSB7IHR5cGU6IGNoYW5nZVR5cGUgfTtcclxuICAgICAgICBpZiAodGhpcy5oYXNOZXdEYXRhKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZVR5cGUgPT09IFwibWVzc2FnZVwiIHx8IGNoYW5nZVR5cGUgPT09IFwicmVhZFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRPZlBhcnNlLm9iamVjdCA9IHRoaXMucGFyc2VVc2Vyc01lc3NhZ2VzKHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPT09IFwic2VuZE5ld01lc3NhZ2VcIiB8fFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9PT0gXCJsYXN0T25saW5lXCIgfHxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPT09IFwidXNlckxpc3RcIlxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZVVzZXJMaXN0KHJlc3VsdCwgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2ZQYXJzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2VUeXBlID09PSBcImdldElwXCIgfHwgY2hhbmdlVHlwZSA9PT0gXCJhc2tRdWVzdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgIHJlc3VsdE9mUGFyc2Uub2JqZWN0ID0gdGhpcy5wYXJzZUNvbW1hbmRBbnN3ZXIocmVzdWx0LCBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZlBhcnNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMb25nUG9sbFJlc3BvbnNlUGFyc2VyKCk7XHJcbn0pKCk7XHJcblxyXG4vLyB2aWV3XHJcblxyXG4vKiBleHBvcnRlZCB2aWV3RmFjdG9yeSAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgZGF0YVNvdXJjZSAqL1xyXG52YXIgdmlld0ZhY3RvcnkgPSAoZnVuY3Rpb24gY3JlYXRlVmlld0ZhY3RvcnkgKGRhdGFTb3VyY2UpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBWaWV3RmFjdG9yeSAoKSB7fVxyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVWaWV3ID0gZnVuY3Rpb24gY3JlYXRlQ2hhdFZpZXcgKGh0bWxQYXRoLCBjc3NQYXRoLCBjb250YWluZXJDbGFzcykge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gY3JlYXRlVmlld1Byb21pc2UgKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZihodG1sUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYoY3NzUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaW5jbHVkZVZpZXdDc3NUb1BhZ2UodGhhdC5jcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlc2hlZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0L2Nzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvdWNoLXNvZnQtY2hhdC1jc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGF0LmluY2x1ZGVWaWV3SFRNTFRvUGFnZShodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJodG1sUGF0aCBpcyBudWxsLiBQbGVhc2UgYWRkIGh0bWxQYXRoXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWaWV3RmFjdG9yeS5wcm90b3R5cGUuaW5jbHVkZVZpZXdIVE1MVG9QYWdlID0gZnVuY3Rpb24gaW5jbHVkZUNoYXRIVE1MVG9QYWdlIChodG1sUGF0aCwgY29udGFpbmVyQ2xhc3MpIHtcclxuICAgICAgICB2YXIgY29udGFpbmVyRGl2ID0gKGNvbnRhaW5lckNsYXNzKSA/IGdldEVsZW1lbnQoY29udGFpbmVyQ2xhc3MpIDogZG9jdW1lbnQuYm9keTtcclxuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS5jb21tb25BUEkuZ2V0SFRNTChodG1sUGF0aCkudGhlbihmdW5jdGlvbiBzZXRIdG1sIChodG1sKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFZpZXdGYWN0b3J5LnByb3RvdHlwZS5pbmNsdWRlVmlld0Nzc1RvUGFnZSA9IGZ1bmN0aW9uIGluY2x1ZGVDaGF0Q3NzVG9QYWdlIChsaW5rKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH07XHJcblxyXG4gICAgVmlld0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNTU0xpbmsgPSBmdW5jdGlvbiBjcmVhdGVDU1NMaW5rKFxyXG4gICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgIHJlbCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGlkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbCkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgVmlld0ZhY3RvcnkoKVxyXG5cclxufSkoZGF0YVNvdXJjZSk7XHJcblxyXG4vLyBjaGF0IG1hbmFnZXJcclxuXHJcbi8qIGdsb2JhbCBnZXRFbGVtZW50ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGV4cG9ydGVkIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vLyDQnNC+0LTRg9C70Ywg0LTQu9GPINGA0LDQsdC+0YLRiyDRgdC+INGB0L/QuNGB0LrQvtC8INGB0L7QvtCx0YnQtdC90LjQuSDQntCU0J3QntCT0J4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbnZhciBtZXNzYWdlTGlzdE1hbmFnZXIgPSAoZnVuY3Rpb24gc2V0dXBNZXNzYWdlTGlzdE1hbmFnZXIgKGNvbmZpZykge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vINCk0L7RgNC80LDRgiAgbWVzc2FnZUxpc3QgPSBbXHJcbiAgICAvLyAgICB7XHJcbiAgICAvLyAgICAgICBzZW5kZXI6IHNlbmRlclxyXG4gICAgLy8gICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIC8vICAgICAgIHJlYWQ6IHRydWUvZmFsc2VcclxuICAgIC8vICAgICAgIGRhdGU6IGRhdGVcclxuICAgIC8vICAgIH0sXHJcbiAgICAvLyBdXHJcbiAgICAvLyByZWFkIC0g0LHRi9C70L4g0LvQuCDQv9GA0L7Rh9C40YLQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1XHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIGZ1bmN0aW9uIE1lc3NhZ2VMaXN0TWFuYWdlcigpIHt9XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwICgpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5jRE9NID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlc0Jsb2NrOiBnZXRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VTX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdPUksgV0lUSCBNRVNTQUdFIEVMRU1FTlQgLy9cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0Y3Qu9C10LzQtdC90YIg0YHQvtC+0LHRidC10L3QuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC90LAg0Y3QutGA0LDQvdC1XHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlRGF0ZSxcclxuICAgICAgICBzZW5kZXIsXHJcbiAgICAgICAgaXNSZWFkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgbWVzc2FnZUNvbnRhaW5lckRpdiA9IHRoaXMuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdihpc1JlYWQsIHNlbmRlcik7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VEYXRlRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFX0RBVEUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9EQVRFXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBtZXNzYWdlU2VuZGVyRGl2ID0gdGhpcy5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2soXHJcbiAgICAgICAgICAgIHNlbmRlcixcclxuICAgICAgICAgICAgY29uZmlnLkRJU1BMQVlfU0VOREVSX05BTUUsXHJcbiAgICAgICAgICAgIFtjb25maWcubWVzc2FnZXMuQ1NTX0NIQVRfTUVTU0FHRV9TRU5ERVJfTkFNRV1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgbWVzc2FnZURpdiA9IHRoaXMuY3JlYXRlRGl2Rm9yTWVzc2FnZUJsb2NrKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBjb25maWcuRElTUExBWV9NRVNTQUdFLFxyXG4gICAgICAgICAgICBbY29uZmlnLm1lc3NhZ2VzLkNTU19DSEFUX01FU1NBR0VdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZURpdik7XHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChtZXNzYWdlU2VuZGVyRGl2KTtcclxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQgPSBmdW5jdGlvbiAgZ2V0TWVzc2FnZU9iamVjdHNGb3JNYXJrQXNSZWFkICgpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICB2YXIgbWVzc2FnZXNJc1JlYWQgPSBbXTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSBjb25maWcuQURNSU5fTkFNRSB8fCBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZTtcclxuICAgICAgICB2YXIgdXNlcklkID0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkO1xyXG4gICAgICAgIGZvcihpID0gdGhpcy5tZXNzYWdlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1lc3NhZ2VMaXN0W2ldLnNlbmRlciAhPT0gdXNlck5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLm1lc3NhZ2VMaXN0W2ldLnJlYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc0lzUmVhZC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogdGhpcy5tZXNzYWdlTGlzdFtpXS5pZCArIFwiL3JlYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdFtpXS5yZWFkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzSXNSZWFkO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNvbnRhaW5lckRpdiA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VDb250YWluZXJEaXYgKGlzUmVhZCwgc2VuZGVyKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VDb250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX01FU1NBR0VfQ09OVEFJTkVSKTtcclxuICAgICAgICBpZiAoIWlzUmVhZCAmJiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSAhPT0gc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcubWVzc2FnZXMuQ1NTX1VTRVJfTk9UX1JFQURfTUVTU0FHRVMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvbnRhaW5lckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgPSBmdW5jdGlvbiBjcmVhdGVEaXZGb3JNZXNzYWdlQmxvY2sgKHRleHQsIGlzRGlzcGxheSwgc3R5bGVDbGFzc2VzKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc3R5bGVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gY2xhc3NBZGQgKHN0eWxlKSB7XHJcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKHN0eWxlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBXT1JLIFdJVEggTUVTU0FHRSBFTEVNRU5UIC8vXHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VMaXN0IChtZXNzYWdlT2JqZWN0cykgIHtcclxuICAgICAgICB2YXIgbmV3TWVzc2FnZUxpc3QgPSBbXTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cykge1xyXG4gICAgICAgICAgICBtZXNzYWdlT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIGFkZEVsZW1lbnRUb01lc3NhZ2VMaXN0IChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlTGlzdC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld01lc3NhZ2VMaXN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXNzYWdlTGlzdE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3QgKG5ld01lc3NhZ2VMaXN0KSB7XHJcbiAgICAgICAgaWYodGhpcy5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnJlYWRMYXN0TWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gbmV3TWVzc2FnZUxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgTWVzc2FnZUxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9NZXNzYWdlTGlzdCA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0IChcclxuICAgICAgICBtZXNzYWdlT2JqXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0LnB1c2gobWVzc2FnZU9iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCf0LXRgNC10LHQuNGA0LDQtdGCINGB0L/QuNGB0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LksINGB0L7Qt9C00LDQtdGCINGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40LUg0LjQvCBET00g0Y3Qu9C10LzQtdC90YLRiyDQuCDQstGB0YLQsNCy0LvRj9C10YIg0LjRhSDQsiDRh9Cw0YJcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuZGlzcGxheU1lc3NhZ2VzID0gZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2VzKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNsZWFyQ2hhdCgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBjcmVhdGVNZXNzYWdlIChtZXNzYWdlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGF0LmNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdC5zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlT2JqZWN0LnJlYWRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhhdC5jRE9NLm1lc3NhZ2VzQmxvY2suYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCe0YfQuNGB0YLQuNGC0YwgRE9NINGN0LvQtdC80LXQvdGCINCyINC60L7RgtC+0YDQvtC8INC+0YLQvtCx0YDQsNC20LDRjtGC0YHRjyDRgdC+0L7QsdGJ0LXQvdC40Y8gKNC90LDQv9GA0LjQvNC10YAg0YfRgtC+0LHRiyDQstGB0YLQsNCy0LjRgtGMINC90LLQvtGL0Lkg0YHQv9C40YHQvtC6INGB0L7QvtCx0YnQtdC90LjQuSlcclxuICAgIE1lc3NhZ2VMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJDaGF0ID0gZnVuY3Rpb24gY2xlYXJDaGF0KCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLmNET00ubWVzc2FnZXNCbG9jay5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLnJlbW92ZUNoaWxkKHRoaXMuY0RPTS5tZXNzYWdlc0Jsb2NrLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBNZXNzYWdlTGlzdE1hbmFnZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG4vKiBleHBvcnRlZCB1c2VyRGF0YU1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIG1lc3NhZ2VMaXN0TWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4vKiBnbG9iYWwgZ2V0Q3VycmVudERhdGUgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIGV2ZW50RW1pdHRlciAqL1xyXG4vKiBnbG9iYWwgbWFpbkNvbmZpZyAqL1xyXG4vKiBnbG9iYWwgbG9uZ1BvbGxSZXNwb25zZVBhcnNlciAqL1xyXG52YXIgdXNlckRhdGFNYW5hZ2VyID0gIChmdW5jdGlvbiBjcmVhdGVVc2VyRGF0YU1hbmFnZXIgKGNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKSB7XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIC8qIGV4cG9ydGVkIGdldEN1cnJlbnREYXRlICovXHJcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSAoZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT09IDEpID8gXCIwXCIgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIHJldHVybiBkYXRlXHJcbiAgICAgICAgICAgIC5nZXRIb3VycygpXHJcbiAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgIC5jb25jYXQoXCI6XCIsIG1pbnV0ZXMpO1xyXG4gICAgfVxyXG4gICAgLyogZXhwb3J0ZWQgY3JlYXRlTWVzc2FnZU9iamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZU9iamVjdCAoXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRlLFxyXG4gICAgICAgIHNlbmRlcixcclxuICAgICAgICBpc1JlYWQsXHJcbiAgICAgICAgaWRcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlbmRlcjogc2VuZGVyLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICByZWFkOiBpc1JlYWQsXHJcbiAgICAgICAgICAgIGRhdGU6IGRhdGUsXHJcbiAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSU5DTFVERVxyXG5cclxuICAgIC8vIGJhc2ljXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyRGF0YUJhc2ljICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGdldENvcnJlc3BvbmRlbmNlIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpLnRoZW4oIGZ1bmN0aW9uIGdldFJlc29sdmUgKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYyAoZGF0YSkge1xyXG4gICAgICAgIHZhciBuZXdNZXNzYWdlTGlzdDtcclxuICAgICAgICB2YXIgbWVzc2FnZXNPYmplY3QgPSBbXTtcclxuICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcChmdW5jdGlvbiBwdXNoRGF0YSAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0uaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlc09iamVjdC5wdXNoKGRhdGFba2V5XSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5kaXNwbGF5TWVzc2FnZXMoKTtcclxuICAgICAgICBuZXdNZXNzYWdlTGlzdCA9IG1lc3NhZ2VMaXN0TWFuYWdlci5jcmVhdGVNZXNzYWdlTGlzdChtZXNzYWdlc09iamVjdCk7XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2VMaXN0KG5ld01lc3NhZ2VMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYyAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLnVzZXJzQVBJLmdldFVzZXJNZXNzYWdlcyh1c2VySWQpKCkudGhlbihmdW5jdGlvbiB1cGRhdGVNZXNzYWdlc0xpc3QgKGRhdGEpIHtcclxuICAgICAgICAgICAgdGhhdC51cGRhdGVNZXNzYWdlTGlzdChkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJEYXRhRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGdldExvbmdQb2xsQ29ycmVzcG9uZGVuY2UocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICB0aGF0LmdldFVzZXJDb3JyZXNwb25kZW5jZSh1c2VySWQpO1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckNvcnJlc3BvbmRlbmNlRnJvbUxvbmdQb2xsQ29ubmVjdGlvbih1c2VySWQpIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICBpZihjb25maWcuY3VycmVudE1lc3NhZ2VDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbiA9IGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlck1lc3NhZ2VzKHVzZXJJZCk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBzZXR1cENvbm5lY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSAzICYmIHRoaXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBsb25nUG9sbFJlc3BvbnNlUGFyc2VyLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoZGF0YS50eXBlLCBkYXRhLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uc2VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VMaXN0QWZ0ZXJMb25nUG9sbCAoZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIGFkZFRvTWVzc2FnZUxpc3RMb25nUG9sbCAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0uaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuYWRkTWVzc2FnZVRvTWVzc2FnZUxpc3QoZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFVzZXJEYXRhTWFuYWdlciAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmKGNvbmZpZy5jaGF0U2V0dGluZ3MudHlwZU9mUmVxdWVzdCA9PT0gXCJsb25nUG9sbFwiKSB7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBnZXRVc2VyRGF0YUZyb21Mb25nUG9sbENvbm5lY3Rpb24uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyQ29ycmVzcG9uZGVuY2UgPSBnZXRVc2VyQ29ycmVzcG9uZGVuY2VGcm9tTG9uZ1BvbGxDb25uZWN0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWVzc2FnZUxpc3QgPSB1cGRhdGVNZXNzYWdlTGlzdEFmdGVyTG9uZ1BvbGwuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmFkZFN1YnNjcmliZShcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gc3Vic2NyaWJlTWVzc2FnZSAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC51cGRhdGVNZXNzYWdlTGlzdChkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJyZWFkXCIsIGZ1bmN0aW9uIHN1YnNjcmliZVJlYWQgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIubWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZXMgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobWVzc2FnZS5pZCA9PT0gZGF0YS5pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlYWQgPSBkYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGdldFVzZXJEYXRhQmFzaWMuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5nZXRVc2VyQ29ycmVzcG9uZGVuY2UgPSBnZXRVc2VyQ29ycmVzcG9uZGVuY2VCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VMaXN0ID0gdXBkYXRlTWVzc2FnZUxpc3RCYXNpYy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAgKCkge1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0TWFuYWdlci5zZXR1cCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLmNsZWFyTWVzc2FnZUxpc3QgPSBmdW5jdGlvbiBjbGVhck1lc3NhZ2VMaXN0ICgpIHtcclxuICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIubWVzc2FnZUxpc3QgPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVOZXdVc2VyUHJvZmlsZVRvRGF0YUJhc2UgPSBmdW5jdGlvbiBjcmVhdGVOZXdVc2VyUHJvZmlsZVRvRGF0YUJhc2UgKHVzZXJJZCwgdXNlck5hbWUpIHtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLmFkZE5ld1VzZXJUb0RhdGFTb3VyY2UodXNlcklkLCB1c2VyTmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2F2ZVNldHRpbmdGaWVsZCA9IGZ1bmN0aW9uIHNldEZpZWxkIChmaWVsZE5hbWUpIHtcclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNldFNldHRpbmdGaWVsZChcclxuICAgICAgICAgICAgZmllbGROYW1lLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzW2ZpZWxkTmFtZV1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVVzZXJPbmxpbmUgPSBmdW5jdGlvbiB1cGRhdGVVc2VyT25saW5lICh1c2VySWQpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlO1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkudXBkYXRlTGFzdE9ubGluZSh1c2VySWQsIGRhdGUuZ2V0VGltZSgpKVxyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24gc2VuZE1lc3NhZ2UgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5nZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCgpO1xyXG4gICAgICAgIHZhciBkYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcclxuICAgICAgICB2YXIgdXNlck5hbWUgPSBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VyTmFtZSB8fCBjb25maWcuQURNSU5fTkFNRTtcclxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IGNyZWF0ZU1lc3NhZ2VPYmplY3QoXHJcbiAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgIHVzZXJOYW1lLFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYoY29uZmlnLmNoYXRTZXR0aW5ncy50eXBlT2ZSZXF1ZXN0ICE9PSBcImxvbmdQb2xsXCIpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmFkZE1lc3NhZ2VUb01lc3NhZ2VMaXN0KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICBtZXNzYWdlTGlzdE1hbmFnZXIuZGlzcGxheU1lc3NhZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UobWVzc2FnZU9iamVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuZ2V0TWVzc2FnZUZyb21JbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRNZXNzYWdlRnJvbUlucHV0RWxlbWVudCAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KGNvbmZpZy5DU1NfQ1VSUkVOVF9JTlBVVF9DTEFTUyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICBlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJEYXRhTWFuYWdlci5wcm90b3R5cGUuc2V0TWVzc2FnZUFzUmVhZCA9IGZ1bmN0aW9uIHNldE1lc3NhZ2VBc1JlYWQgKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0cyA9IG1lc3NhZ2VMaXN0TWFuYWdlci5nZXRNZXNzYWdlT2JqZWN0c0Zvck1hcmtBc1JlYWQoKTtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gc2V0UmVhZCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVNZXNzYWdlSXNSZWFkRmllbGQoXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUxpc3RNYW5hZ2VyLmRpc3BsYXlNZXNzYWdlcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyRGF0YU1hbmFnZXIucHJvdG90eXBlLnNhdmVNZXNzYWdlVG9EYXRhU291cmNlID0gZnVuY3Rpb24gc2F2ZU1lc3NhZ2VUb0RhdGFTb3VyY2UgKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICBpZihtZXNzYWdlT2JqZWN0LnNlbmRlciA9PT0gY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlck5hbWUpIHtcclxuICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS51cGRhdGVTZW5kTmV3TWVzc2FnZUZsYWcoY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkLHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhU291cmNlLnVzZXJzQVBJLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VPYmplY3RcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTZXR0aW5ncyA9IFt7dXNlcklkLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWV9LHt9Li4uXVxyXG4gICAgVXNlckRhdGFNYW5hZ2VyLnByb3RvdHlwZS5zYXZlVXNlclNldHRpbmdzVG9EYXRhU291cmNlID0gZnVuY3Rpb24gc2F2ZVVzZXJTZXR0aW5nc1RvRGF0YVNvdXJjZSAoc2V0dGluZ3MpIHtcclxuICAgICAgICBzZXR0aW5ncy5mb3JFYWNoKGZ1bmN0aW9uIHNhdmVTZXR0aW5nIChuZXdGaWVsZFNldHRpbmcpIHtcclxuICAgICAgICAgICAgZGF0YVNvdXJjZS51c2Vyc0FQSS5zZXRTZXR0aW5nRmllbGQoXHJcbiAgICAgICAgICAgICAgICBuZXdGaWVsZFNldHRpbmcuZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgbmV3RmllbGRTZXR0aW5nLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkU2V0dGluZy5maWVsZFZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFVzZXJEYXRhTWFuYWdlcigpO1xyXG5cclxufSkobWFpbkNvbmZpZywgZXZlbnRFbWl0dGVyLCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyKTtcclxuXHJcbi8vIGxvZ1xyXG5cclxudmFyIGxvZyA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuXHJcbiAgICAvKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbiAgICAvKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4gICAgLy8g0J7Rh9C40YnQsNC10YIgRE9NINGB0L7QtNC10YDQttCw0YnQuNC5INGN0LvQtdC80LXQvdGC0Ysg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gd3JpdGVNZXNzYWdlIChtZXNzYWdlcykge1xyXG4gICAgICAgIHZhciBtZXNzYWdlRWxlbWVudDtcclxuICAgICAgICBpZihtZXNzYWdlcyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VFbGVtZW50ID0gY3JlYXRlTWVzc2FnZUVsZW1lbnQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZShtZXNzYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWVzc2FnZUVsZW1lbnQgPSBjcmVhdGVNZXNzYWdlRWxlbWVudChtZXNzYWdlcyk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UobWVzc2FnZUVsZW1lbnQpIHtcclxuICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTKS5hcHBlbmRDaGlsZChtZXNzYWdlRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQobWVzc2FnZXMpIHtcclxuICAgICAgICB2YXIgcmVzdWx0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByZXN1bHREaXYuY2xhc3NMaXN0LmFkZChjb25maWcuRE9NLkNTU19DT05UUk9MX1BBTkVMX0xPR19FTEVNRU5UX0NMQVNTKTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGxiYWNrRm9yTWVzc2FnZXNEZXBsb3kgPSBmdW5jdGlvbiBhZGREYXRhVG9SZXN1bHREaXYgKGRhdGEsIGRhdGFOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBpbm5lckRpdjtcclxuICAgICAgICAgICAgaW5uZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBpbm5lckRpdi5pbm5lckhUTUwgPSBkYXRhTmFtZSArIFwiOiBcIiArIGRhdGE7XHJcbiAgICAgICAgICAgIHJlc3VsdERpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGVwbG95T2JqZWN0KG1lc3NhZ2VzLCBjYWxsYmFja0Zvck1lc3NhZ2VzRGVwbG95KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0RGl2O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlcGxveU9iamVjdCAob2JqZWN0LCBjYWxsYmFjaykge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKG9iamVjdCkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYob2JqZWN0W2tleV0gaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGRlcGxveU9iamVjdChvYmplY3Rba2V5XSwgY2FsbGJhY2spXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhvYmplY3Rba2V5XSxrZXkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgd3JpdGU6IHdyaXRlTWVzc2FnZSxcclxuICAgICAgICBjbGVhcjogY2xlYXJFbGVtZW50Q29udGVudC5iaW5kKG51bGwsXHJcbiAgICAgICAgICAgIGNvbmZpZy5ET00uQ1NTX0NPTlRST0xfUEFORUxfTE9HX0NMQVNTXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG59KG1haW5Db25maWcpO1xyXG5cclxuLy8gZGFzaGJvYXJkXHJcblxyXG4vKiBleHBvcnRlZCB1c2VyTGlzdE1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxuLyogZ2xvYmFsIHNvcnRlciAqL1xyXG52YXIgdXNlckxpc3RNYW5hZ2VyID0gKGZ1bmN0aW9uIGNyZWF0ZVVzZXJMaXN0IChjb25maWcsIHNvcnRlcikge1xyXG4gICAgLy8gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLyog0KTQvtGA0LzQsNGCINC+0LHRitC10LrRgtCwINCyINGB0L/QuNGB0LrQtSDRjtC30LXRgNCwXHJcbiAgICAgICogdXNlcklkOiBcIkl2YW4zMDAwMDBcIixcclxuICAgICAgKiB1c2VyRWxlbWVudDogVXNlckxpc3RNYW5hZ2VyLmNyZWF0ZVVzZXJFbGVtZW50KHVzZXJJZCwgdXNlcklzT25saW5lKSxcclxuICAgICAgKiBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgKiB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAqIHNlbmROZXdNZXNzYWdlOiB1c2VyU2V0dGluZ3Muc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICogcmVhZExhc3RNZXNzYWdlOiB1c2VyU2V0dGluZ3MucmVhZExhc3RNZXNzYWdlLFxyXG4gICAgICAqIGxhc3RPbmxpbmU6IHVzZXJTZXR0aW5ncy5sYXN0T25saW5lLFxyXG4gICAgICAqIGlzTWluaW1pemU6IHVzZXJTZXR0aW5ncy5pc01pbmltaXplLFxyXG4gICAgICAqIHVzZXJOYW1lOiB1c2VyU2V0dGluZ3MudXNlck5hbWVcclxuICAgICAgKlxyXG4gICAgICAqIHZpc2libGUgLSDQvtGC0L7QsdGA0LDQttCw0YLRjCDQu9C4INGO0LfQtdGA0LAg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICAgICovXHJcbiAgICAvLyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmdW5jdGlvbiBVc2VyTGlzdE1hbmFnZXIoKSB7XHJcbiAgICAgICAgdGhpcy51TGlzdCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiBzZXR1cCAoKSB7fTtcclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0LXRgiBET00g0LXQu9C10LzQtdC90YIg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0Y7Qt9C10YDQsCDQsiDRgdC/0LjRgdC60LVcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY3JlYXRlVXNlckVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVVc2VyRWxlbWVudChcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgaXNPbmxpbmVcclxuICAgICkge1xyXG4gICAgICAgIHZhciB1c2VyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlcklkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgdXNlckluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIHVzZXJEaXYuY2xhc3NMaXN0LmFkZChjb25maWcudXNlckxpc3QuVVNFUl9FTEVNRU5UX0NTU19DTEFTUyk7XHJcblxyXG4gICAgICAgIHVzZXJJZERpdi5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lEX0VMRU1FTlRfQ1NTX0NMQVNTKTtcclxuICAgICAgICB1c2VySWREaXYuaW5uZXJIVE1MID0gdXNlcklkO1xyXG5cclxuICAgICAgICBpZiAoaXNPbmxpbmUpIHtcclxuICAgICAgICAgICAgdXNlckluZGljYXRvci5jbGFzc0xpc3QuYWRkKGNvbmZpZy51c2VyTGlzdC5VU0VSX0lORElDQVRPUl9DU1NfQ0xBU1NfT05MSU5FKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1c2VySW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLnVzZXJMaXN0LlVTRVJfSU5ESUNBVE9SX0NTU19DTEFTU19PRkZMSU5FKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQodXNlcklkRGl2KTtcclxuICAgICAgICB1c2VyRGl2LmFwcGVuZENoaWxkKHVzZXJJbmRpY2F0b3IpO1xyXG5cclxuICAgICAgICByZXR1cm4gdXNlckRpdjtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zZXRVc2VyTGlzdCA9IGZ1bmN0aW9uIHNldFVzZXJMaXN0ICh1c2VyTHVzdE9iamVjdCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSB1c2VyTHVzdE9iamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5hZGRVc2VyVG9Vc2Vyc0FycmF5ID0gZnVuY3Rpb24gYWRkVXNlclRvVXNlcnNMaXN0KFxyXG4gICAgICAgIHVzZXIsXHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHVzZXJzTGlzdFxyXG4gICAgKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJc09ubGluZSA9IHRoaXMudXNlcklzT25saW5lKHVzZXIubGFzdE9ubGluZSk7XHJcbiAgICAgICAgdXNlcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgdXNlckVsZW1lbnQ6IHRoaXMuY3JlYXRlVXNlckVsZW1lbnQodXNlcklkLCB1c2VySXNPbmxpbmUpLFxyXG4gICAgICAgICAgICBvbmxpbmU6IHVzZXJJc09ubGluZSxcclxuICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2VuZE5ld01lc3NhZ2U6IHVzZXIuc2VuZE5ld01lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlYWRMYXN0TWVzc2FnZTogdXNlci5yZWFkTGFzdE1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGxhc3RPbmxpbmU6IHVzZXIubGFzdE9ubGluZSxcclxuICAgICAgICAgICAgdXNlck5hbWU6IHVzZXIudXNlck5hbWVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlVXNlclZpZXcgKHVzZXJJZCwgbGFzdE9ubGluZSkge1xyXG4gICAgICAgIHZhciB1c2VySW5kZXggPSB0aGlzLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy51TGlzdFt1c2VySW5kZXhdLmxhc3RPbmxpbmUgPSBsYXN0T25saW5lO1xyXG4gICAgICAgIHRoaXMudUxpc3RbdXNlckluZGV4XS5vbmxpbmUgPSB0aGlzLnVzZXJJc09ubGluZShsYXN0T25saW5lKTtcclxuICAgICAgICB0aGlzLnVMaXN0W3VzZXJJbmRleF0udXNlckVsZW1lbnQgPSB0aGlzLmNyZWF0ZVVzZXJFbGVtZW50KFxyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIHRoaXMudXNlcklzT25saW5lKGxhc3RPbmxpbmUpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIGluZGV4INGO0LfQtdGA0LAg0LIg0YHQv9C40YHQutC1INGO0LfQtdGA0LAg0LXRgdC70Lgg0L7QvSDRgtCw0Lwg0L3QsNGF0L7QtNC40YLRgdGPLiDQkiDQv9GA0L7RgtC40LLQvdC+INGB0LvRg9GH0LDQtSDQstC+0LfQstGA0LDRidCw0LXRgiBudWxsXHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkID0gZnVuY3Rpb24gZ2V0VXNlckZyb21Vc2VyTGlzdEJ5SWQodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJNYW5hZ2VyID0gdGhpcztcclxuICAgICAgICB2YXIgdXNlckluZGV4ID0gbnVsbDtcclxuICAgICAgICBPYmplY3Qua2V5cyh1c2VyTWFuYWdlci51TGlzdCkubWFwKGZ1bmN0aW9uIGdldEtleSAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyTWFuYWdlci51TGlzdFtrZXldLnVzZXJJZCA9PT0gdXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5kZXggPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJJbmRleDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdGCINC+0L3Qu9Cw0LnQvSDRjtC30LXRgNCwINC90LDRhdC+0LTRjyDRgNCw0LfQvdC40YbRgyDQvNC10LbQtNGDINC00LDRgtC+0Lkg0L/QvtGB0LvQtdC00L3QtdCz0L4g0LrQvtC90LXQutGC0LAg0Y7Qt9C10YDQsCDRgSDQsdC0INC4INGC0LXQutGD0YnQuNC8INCy0YDQtdC80LXQvdC10LxcclxuICAgIC8vINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUg0LXRgdC70Lgg0Y7Qt9C10YAg0L7QvdC70LDQudC9LCBmYWxzZSAtINC+0YTRhNC70LDQudC9XHJcbiAgICBVc2VyTGlzdE1hbmFnZXIucHJvdG90eXBlLnVzZXJJc09ubGluZSA9IGZ1bmN0aW9uIHVzZXJJc09ubGluZSAobGFzdFVzZXJPbmxpbmVUaW1lKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAtIGxhc3RVc2VyT25saW5lVGltZSA8PSBjb25maWcuaW50ZXJ2YWwuT05MSU5FX0lOVEVSVkFMO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQlNC10LvQsNC10YIg0L3QtdCy0LjQtNC40LzRi9C80Lgg0YLQtdGFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5INCyINGB0L/QuNGB0LrQtSwg0LIg0LjQvNC10L3QsNGFINC60L7RgtC+0YDRi9GFINC90LXRgiDQv9C10YDQtdC00LDQvdC90L7QuSDQv9C+0LTRgdGC0YDQvtC60LhcclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuZmlsdGVyQnlOYW1lID0gZnVuY3Rpb24gZmlsdGVyQnlOYW1lKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBmaWx0ZXJOYW1lIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9IGVsZW1lbnQudXNlcklkLmluZGV4T2YoY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkpICE9PSAtMTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtGA0YLQuNGA0YPQtdGCINGB0L/QuNGB0L7QuiDRjtC30LXRgNC+0LIg0L/QviDQv9C+0LvRjlxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5zb3J0VXNlcnNCeUZpZWxkID0gZnVuY3Rpb24gc29ydFVzZXJzQnlPbmxpbmUoKSB7XHJcbiAgICAgICAgc29ydGVyLnF1aWNrU29ydCh0aGlzLnVMaXN0LCAwLCB0aGlzLnVMaXN0Lmxlbmd0aCAtIDEsIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXJMaXN0TWFuYWdlci5wcm90b3R5cGUuY2xlYXJVc2VyTGlzdCA9IGZ1bmN0aW9uIGNsZWFyVXNlckxpc3QgKCkge1xyXG4gICAgICAgIHRoaXMudUxpc3QgPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC+0LHRgNCw0LfQuNGC0YwvINCe0LHQvdC+0LLQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0Y7Qt9C10YDQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gICAgVXNlckxpc3RNYW5hZ2VyLnByb3RvdHlwZS5kaXNwbGF5VXNlcnMgPSBmdW5jdGlvbiBkaXNwbGF5VXNlcnMoKSB7XHJcbiAgICAgICAgY2xlYXJFbGVtZW50Q29udGVudChjb25maWcuRE9NLlVTRVJfTElTVF9DU1NfQ0xBU1MpO1xyXG4gICAgICAgIHRoaXMudUxpc3QuZm9yRWFjaChmdW5jdGlvbiBnZXRFbGVtIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5VU0VSX0xJU1RfQ1NTX0NMQVNTKS5hcHBlbmRDaGlsZChlbGVtLnVzZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIC8vIGluY2x1ZGVcclxuXHJcbiAgICAvKiBleHBvcnRlZCBjbGVhckVsZW1lbnRDb250ZW50ICovXHJcbiAgICAvKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4gICAgLy8g0J7Rh9C40YnQsNC10YIgRE9NINGB0L7QtNC10YDQttCw0YnQuNC5INGN0LvQtdC80LXQvdGC0Ysg0YHQv9C40YHQutCwINGO0LfQtdGA0L7QslxyXG4gICAgZnVuY3Rpb24gY2xlYXJFbGVtZW50Q29udGVudChlbGVtZW50U2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudFNlbGVjdG9yKTtcclxuICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBVc2VyTGlzdE1hbmFnZXIoKVxyXG5cclxufSkobWFpbkNvbmZpZywgc29ydGVyKTtcclxudmFyIGNvbnRyb2xQYW5lbCA9IChmdW5jdGlvbiAoY29uZmlnLCBkYXRhQ29ubmVjdG9yLCBsb2csIHBhcnNlcikge1xyXG5cclxuICAgIHZhciBsb2dFbGVtZW50O1xyXG4gICAgdmFyIHNlbGVjdENvbW1hbmQ7XHJcbiAgICB2YXIgc2VuZEJ1dHRvbjtcclxuICAgIHZhciBwYXJhbWV0ZXJFbGVtZW50cztcclxuXHJcbiAgICB2YXIgY29ubmVjdGlvbjtcclxuICAgIHZhciBtb2R1bGVJbml0O1xyXG4gICAgdmFyIGN1cnJlbnRDb21tYW5kO1xyXG4gICAgdmFyIHBhdGhGb3JDdXJyZW50Q29tbWFuZFJlcXVlc3Q7XHJcblxyXG4gICAgdmFyIGNvbW1hbmRzID0ge1xyXG4gICAgICAgIGdldElwOiB7XHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnNOdW1iZXI6IDAsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXN5bmNcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXNrUXVlc3Rpb246IHtcclxuICAgICAgICAgICAgcGFyYW1ldGVyc051bWJlcjogMyxcclxuICAgICAgICAgICAgdHlwZTogXCJwZW5kaW5nXCJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG1vZHVsZUNvbnRyb2xsZXIgKGFjdGlvbikge1xyXG4gICAgICAgIG1vZHVsZUluaXRbYWN0aW9uXS5mb3JFYWNoKGZ1bmN0aW9uIGludm9rZUNvbnRyb2xGdW5jdGlvbnMgKGNvbnRyb2xGdW5jdGlvbikge1xyXG4gICAgICAgICAgICBjb250cm9sRnVuY3Rpb24oKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEFjY2Vzc1RvRE9NICgpIHtcclxuICAgICAgICBsb2dFbGVtZW50ID0gZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DT05UUk9MX1BBTkVMX0xPR19DTEFTUyk7XHJcbiAgICAgICAgc2VsZWN0Q29tbWFuZCA9IGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9QQU5FTF9TRUxFQ1RfQ0xBU1MpO1xyXG4gICAgICAgIHNlbmRCdXR0b24gPSAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DT05UUk9MX1NFTkRfQ09NTUFORF9CVVRUT05fQ0xBU1MpO1xyXG4gICAgICAgIHBhcmFtZXRlckVsZW1lbnRzID0gIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfQ09OVFJPTF9QQVJBTUVURVJTX0NMQVNTLCB0cnVlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc2V0dXBMb25nUG9sbENvbm5lY3Rpb24gKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VyID0gKHVzZXJJZCkgPyB1c2VySWQgOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQ7XHJcbiAgICAgICAgaWYoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbm5lY3Rpb24gPSBkYXRhQ29ubmVjdG9yLmNyZWF0ZUxvbmdQb2xsQ29ubmVjdGlvbihcclxuICAgICAgICAgICAgY29uZmlnLkNPTU1BTkRfUEFUSF9QUkVGSVggKyB1c2VyICsgXCIvY29tbWFuZHNSZXNwb25zZS8uanNvblwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsb2cuY2xlYXIoKTtcclxuICAgICAgICBjb25uZWN0aW9uLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGNvbW1hbmRDaGFuZ2VDYWxsYmFjayAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IDMgJiYgdGhpcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgID0gcGFyc2VyLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsb2dFbGVtZW50LmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KGRhdGEub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICBsb2cud3JpdGUoZGF0YS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25uZWN0aW9uLnNlbmQoKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlTG9uZ1BvbGxDb25uZWN0aW9uICgpIHtcclxuICAgICAgICBpZihjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVxdWVzdENvbW1hbmQgKGNvbW1hbmRPYmplY3QsIHJlcXVlc3RQYXRoKSB7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoY29tbWFuZE9iamVjdCk7XHJcbiAgICAgICAgZGF0YUNvbm5lY3Rvci5yZXF1ZXN0KFxyXG4gICAgICAgICAgICByZXF1ZXN0UGF0aCxcclxuICAgICAgICAgICAganNvbkRhdGEsXHJcbiAgICAgICAgICAgIFwiUFVUXCIsXHJcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVDb21tYW5kICgpIHtcclxuICAgICAgICB2YXIgcGFyYW1ldGVyUHJlZml4ID0gXCJwYXJhbWV0ZXJcIjtcclxuICAgICAgICBjdXJyZW50Q29tbWFuZCA9IHtcclxuICAgICAgICAgICAgY29tbWFuZE5hbWU6IHNlbGVjdENvbW1hbmQudmFsdWUsXHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnNOdW1iZXI6IGNvbW1hbmRzW3NlbGVjdENvbW1hbmQudmFsdWVdLnBhcmFtZXRlcnNOdW1iZXIsXHJcbiAgICAgICAgICAgIGlzRXhlY3V0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHR5cGVPZkNvbW1hbmQ6IGNvbW1hbmRzW3NlbGVjdENvbW1hbmQudmFsdWVdLnR5cGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBhcmFtZXRlckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmKGluZGV4IDwgY3VycmVudENvbW1hbmQucGFyYW1ldGVyc051bWJlcikge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudENvbW1hbmRbcGFyYW1ldGVyUHJlZml4ICsgaW5kZXhdID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhdGhGb3JDb21tYW5kUmVxdWVzdCAodXNlcklkLCBjb21tYW5kTmFtZSkge1xyXG4gICAgICAgIHZhciB1c2VyID0gKHVzZXJJZCkgPyB1c2VySWQgOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQ7XHJcbiAgICAgICAgcGF0aEZvckN1cnJlbnRDb21tYW5kUmVxdWVzdCA9IGNvbmZpZy5DT01NQU5EX1BBVEhfUFJFRklYICsgdXNlciArIFwiL2NvbW1hbmRzL1wiICsgY29tbWFuZE5hbWUgKyBcIi5qc29uXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VuZEJ1dHRvbkxpc3RlbmVyICgpIHtcclxuICAgICAgICBjcmVhdGVDb21tYW5kKCk7XHJcbiAgICAgICAgY3JlYXRlUGF0aEZvckNvbW1hbmRSZXF1ZXN0KG51bGwsIHNlbGVjdENvbW1hbmQudmFsdWUpO1xyXG4gICAgICAgIHJlcXVlc3RDb21tYW5kKGN1cnJlbnRDb21tYW5kLCBwYXRoRm9yQ3VycmVudENvbW1hbmRSZXF1ZXN0KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMgKCkge1xyXG4gICAgICAgIHNlbGVjdENvbW1hbmQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KHNlbGVjdENvbW1hbmQudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbmRCdXR0b25MaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlSW5pdCA9IHtcclxuICAgICAgICBmaXJzdEluaXQ6IFtcclxuICAgICAgICAgICAgZ2V0QWNjZXNzVG9ET00sXHJcbiAgICAgICAgICAgIHNldHVwTGlzdGVuZXJzXHJcbiAgICAgICAgXSxcclxuICAgICAgICBzZXR1cDogW1xyXG4gICAgICAgICAgICBzZXR1cExvbmdQb2xsQ29ubmVjdGlvblxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgY2xvc2U6IFtcclxuICAgICAgICAgICAgY2xvc2VMb25nUG9sbENvbm5lY3Rpb25cclxuICAgICAgICBdXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRyb2xQYW5lbCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgQ29udHJvbFBhbmVsLnByb3RvdHlwZS5zZXR1cCA9IG1vZHVsZUNvbnRyb2xsZXIuYmluZChudWxsLCBcInNldHVwXCIpO1xyXG4gICAgQ29udHJvbFBhbmVsLnByb3RvdHlwZS5jbG9zZSA9IG1vZHVsZUNvbnRyb2xsZXIuYmluZChudWxsLCBcImNsb3NlXCIpO1xyXG4gICAgQ29udHJvbFBhbmVsLnByb3RvdHlwZS5maXJzdEluaXQgPSBtb2R1bGVDb250cm9sbGVyLmJpbmQobnVsbCwgXCJmaXJzdEluaXRcIik7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBDb250cm9sUGFuZWwoKTtcclxuXHJcbn0pKG1haW5Db25maWcsIGRhdGFDb25uZWN0b3IsIGxvZywgbG9uZ1BvbGxSZXNwb25zZVBhcnNlcik7XHJcbi8qIGV4cG9ydGVkIGRhc2hib2FyZCAqL1xyXG4vKiBnbG9iYWwgZ2V0RWxlbWVudCAqL1xyXG4vKiBnbG9iYWwgdXNlckRhdGFNYW5hZ2VyICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbi8qIGdsb2JhbCB1c2VyTGlzdE1hbmFnZXIgKi9cclxuLyogZ2xvYmFsIGRhdGFTb3VyY2UgKi9cclxuLyogZ2xvYmFsIGV2ZW50RW1pdHRlciAqL1xyXG4vKiBnbG9iYWwgc29ydGVyICovXHJcbi8qIGdsb2JhbCBsb25nUG9sbFJlc3BvbnNlUGFyc2VyICovXHJcbnZhciBkYXNoYm9hcmQgPSAoZnVuY3Rpb24gY3JlYXRlRGFzaGJvYXJkQ29udHJvbGxlcihjb25maWcsIGRhdGFTb3VyY2UsIHVEYXRhTWFuYWdlciwgdUxpc3RNYW5hZ2VyLCBzb3J0ZXIsIGV2ZW50RW1pdHRlciwgY1BhbmVsKXtcclxuXHJcbiAgICB2YXIgaW50ZXJ2YWxJZCA9IFtdO1xyXG5cclxuICAgIGZ1bmN0aW9uIERhc2hib2FyZENvbnRyb2xsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50RW1pdHRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5zZXR1cChjb25maWcpO1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTtcclxuICAgICAgICB0aGlzLnNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNldHVwSW50ZXJ2YWxGdW5jdGlvbnMoKTtcclxuICAgICAgICBjUGFuZWwuZmlyc3RJbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldHVwRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gc2V0dXBFdmVudEVtaXR0ZXIgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgY29uZGl0aW9uO1xyXG4gICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJ1c2VyTGlzdFwiLCBmdW5jdGlvbiAgc2V0dXBEYXRhIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2Vyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgdmFyIG5ld0RhdGE7XHJcbiAgICAgICAgICAgIGlmKGRhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgbmV3RGF0YSA9IGRhdGFbMV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdEYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhuZXdEYXRhKS5tYXAoZnVuY3Rpb24gc2V0VXNlclNldHRpbmcodXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICB1TGlzdE1hbmFnZXIuYWRkVXNlclRvVXNlcnNBcnJheShcclxuICAgICAgICAgICAgICAgICAgICBuZXdEYXRhW3VzZXJJZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJzTGlzdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0ID0gdUxpc3RNYW5hZ2VyLnVMaXN0LmNvbmNhdCh1c2Vyc0xpc3QpO1xyXG4gICAgICAgICAgICBjb25kaXRpb24gPSB0aGF0LmdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIHRoYXQubG9jYWxTZXR0aW5nc1NldHVwKGNvbmRpdGlvbik7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0dXBVc2VyTGlzdERPTSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJsYXN0T25saW5lXCIsIGZ1bmN0aW9uIGxhc3RPbmxpbmVTdWIgKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJJZCA9IGRhdGFbMF07XHJcbiAgICAgICAgICAgIHZhciBsYXN0T25saW5lID0gZGF0YVsxXTtcclxuICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVwZGF0ZVVzZXJPbmxpbmVTdGF0dXModXNlcklkLCBsYXN0T25saW5lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50RW1pdHRlci5hZGRTdWJzY3JpYmUoXCJzZW5kTmV3TWVzc2FnZVwiLCBmdW5jdGlvbiBzZW5kTmV3TWVzc2FnZVN1YiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlckluZGV4ID0gdUxpc3RNYW5hZ2VyLmdldFVzZXJGcm9tVXNlckxpc3RCeUlkKGRhdGFbMF0pO1xyXG4gICAgICAgICAgICB1TGlzdE1hbmFnZXIudUxpc3RbdXNlckluZGV4XS5zZW5kTmV3TWVzc2FnZSA9IGRhdGFbMV07XHJcbiAgICAgICAgICAgIHRoYXQudG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gREFTSEJPQVJEX0NPTkRJVElPTlxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIHNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgdmFyIHNlcmlhbENvbmRpdGlvbiA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgZmlsdGVyOiBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSxcclxuICAgICAgICAgICAgc29ydDogY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uc29ydEJ5LFxyXG4gICAgICAgICAgICBjdXJyZW50VXNlcklkOiBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWRcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25maWcuTE9DQUxfU1RPUkFHRV9OQU1FLCBzZXJpYWxDb25kaXRpb24pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRDdXJyZW50VXNlcklkRnJvbUxvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VySWRGcm9tTG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIHZhciBzZXJpYWxDb25kaXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25maWcuTE9DQUxfU1RPUkFHRV9OQU1FKTtcclxuICAgICAgICB2YXIgY29uZGl0aW9uID0gbnVsbDtcclxuICAgICAgICBpZiAoc2VyaWFsQ29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbmRpdGlvbiA9IEpTT04ucGFyc2Uoc2VyaWFsQ29uZGl0aW9uKTtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnREYXNoYm9hcmRDb25kaXRpb24uZmlsdGVyQnkgPSBjb25kaXRpb24uZmlsdGVyO1xyXG4gICAgICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5zb3J0QnkgPSBjb25kaXRpb24uc29ydDtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gY29uZGl0aW9uLmN1cnJlbnRVc2VySWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb25kaXRpb247XHJcbiAgICB9O1xyXG5cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmxvY2FsU2V0dGluZ3NTZXR1cCA9IGZ1bmN0aW9uIGxvY2FsU2V0dGluZ3NTZXR1cChjb25kaXRpb24pIHtcclxuICAgICAgICBpZiAoY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24uZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0ZJTFRFUl9JTlBVVF9JRCkudmFsdWUgPSBjb25kaXRpb24uZmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uLnNvcnQpIHtcclxuICAgICAgICAgICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfU09SVF9TRUxFQ1RfSUQpLnZhbHVlID0gY29uZGl0aW9uLnNvcnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uLmN1cnJlbnRVc2VySWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCA9IGNvbmRpdGlvbi5jdXJyZW50VXNlcklkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydENvbnZlcnNhdGlvbldpdGhVc2VyKGNvbmZpZy5jdXJyZW50VXNlclNldHRpbmdzLnVzZXJJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gREFTSEJPQVJEX0NPTkRJVElPTlxyXG5cclxuICAgIC8vINGE0LjQu9GM0YLRgNCw0YbQuNGPINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIGZpbHRlcigpIHtcclxuICAgICAgICBjb25maWcuY3VycmVudERhc2hib2FyZENvbmRpdGlvbi5maWx0ZXJCeSA9IGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfRklMVEVSX0lOUFVUX0lEKS52YWx1ZTtcclxuICAgICAgICB0aGlzLnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuZmlsdGVyQnlOYW1lKGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLmZpbHRlckJ5KTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuZGlzcGxheVVzZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC8vINGB0L7RgNGC0LjRgNC+0LLQutCwINGB0L/QuNGB0LrQsCDRjtC30LXRgNC+0LJcclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbiBzb3J0KCkge1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50RGFzaGJvYXJkQ29uZGl0aW9uLnNvcnRCeSA9IGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfU09SVF9TRUxFQ1RfSUQpLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25kaXRpb25Ub0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5zb3J0VXNlcnNCeUZpZWxkKCk7XHJcbiAgICAgICAgdUxpc3RNYW5hZ2VyLmRpc3BsYXlVc2VycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFVzZXJzTGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0dXBVc2Vyc0xpc3RlbmVycygpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgQXJyYXkuZnJvbShjb25maWcudXNlcnMpLmZvckVhY2goZnVuY3Rpb24gYWRkTGlzdGVuZXJzIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQudXNlckxpc3RlbmVyLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZmlyc3RDaGlsZC5pbm5lclRleHRcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBVc2VyTGlzdERPTSA9IGZ1bmN0aW9uIHNldHVwVXNlckxpc3RET00gKCkge1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci5kaXNwbGF5VXNlcnMoKTtcclxuICAgICAgICB0aGlzLmdldEFjZXNzVG9Vc2Vyc0xpc3QoKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIoKTtcclxuICAgICAgICB0aGlzLnNldHVwVXNlcnNMaXN0ZW5lcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0QWNlc3NUb1VzZXJzTGlzdCA9IGZ1bmN0aW9uIGFjY2Vzc1RvVXNlcnNET00oKSB7XHJcbiAgICAgICAgY29uZmlnLnVzZXJzID0gZ2V0RWxlbWVudChcclxuICAgICAgICAgICAgY29uZmlnLnVzZXJMaXN0LlVTRVJfRUxFTUVOVF9DU1NfQ0xBU1MsIHRydWVcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRVc2VyTGlzdCA9IGZ1bmN0aW9uIGdldFVzZXJMaXN0ICgpIHtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICB2YXIgbG9uZ1BvbGxVc2VyTGlzdENvbm5lY3RvciA9IGRhdGFTb3VyY2UudXNlcnNBUEkuZ2V0VXNlckxpc3QobnVsbCk7XHJcbiAgICAgICAgbG9uZ1BvbGxVc2VyTGlzdENvbm5lY3Rvci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBnZXRDb25uZWN0aW9uRnJvbURhdGEgKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBsb25nUG9sbFJlc3BvbnNlUGFyc2VyLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudEVtaXR0ZXIuZW1pdChkYXRhLnR5cGUsIGRhdGEub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9uZ1BvbGxVc2VyTGlzdENvbm5lY3Rvci5zZW5kKCk7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyTGlzdENvbm5lY3Rpb24gPSBsb25nUG9sbFVzZXJMaXN0Q29ubmVjdG9yO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUudXNlckxpc3RlbmVyID0gZnVuY3Rpb24gdXNlckxpc3RlbmVyKHVzZXJJZCkge1xyXG4gICAgICAgIHRoaXMuc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlcih1c2VySWQpO1xyXG4gICAgICAgIHRoaXMubWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZCh1c2VySWQpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC60YDRi9Cy0LDQtdGCINGH0LDRgiDRgSDRjtC30LXRgNC+0LwsINC30LDQs9GA0YPQttCw0LXRgiDQvNC10YHRgdCw0LTQttC4INGO0LfQtdGA0LAg0Lgg0L7RgtC+0LHRgNCw0LbQsNC10YIg0LjRhVxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRDb252ZXJzYXRpb25XaXRoVXNlciA9IGZ1bmN0aW9uIHN0YXJ0Q29udmVyc2F0aW9uV2l0aFVzZXIoXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgY29uZmlnLmN1cnJlbnRVc2VyU2V0dGluZ3MudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIGNQYW5lbC5zZXR1cCgpO1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5jbGVhck1lc3NhZ2VMaXN0KCk7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLmdldFVzZXJEYXRhKHVzZXJJZClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc2F2ZUxvY2FsRGF0YSAoKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFbGVtZW50KGNvbmZpZy5ET00uQ1NTX0FDVElWRV9VU0VSX0JMT0NLKS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5JTlZJU0lCTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zYXZlQ3VycmVudENvbmRpdGlvblRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGRhdGFTb3VyY2UudXNlcnNBUEkudXBkYXRlU2VuZE5ld01lc3NhZ2VGbGFnKHVzZXJJZCwgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIC8vINCe0LHQvdC+0LLQu9C10YIg0LzQsNGB0YHQuNCyINGB0L7QvtCx0YnQtdC90LjQuSDQsiDQvNC+0LTRg9C70LUg0YfQsNGC0LAg0Lgg0LLRi9Cy0L7QtNC40YIg0LjRhSDQvdCwINGN0LrRgNCw0L1cclxuICAgIERhc2hib2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZVVzZXJNZXNzYWdlc0FuZERpc3BsYXlJdCA9IGZ1bmN0aW9uIHVwZGF0ZVVzZXJNZXNzYWdlc0FuZERpc3BsYXlJdChcclxuICAgICkge1xyXG4gICAgICAgIHVEYXRhTWFuYWdlci5nZXRVc2VyRGF0YShjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgICAgIHRoaXMubWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZChjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBDb21tb25MaXN0ZW5lckZ1bmN0aW9ucyA9IGZ1bmN0aW9uIHNldHVwQ29tbW9uTGlzdGVuZXJGdW5jdGlvbnMoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfU0VORF9NRVNTQUdFX0JVVFRPTl9DTEFTUykuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICB1c2VyRGF0YU1hbmFnZXIuc2VuZE1lc3NhZ2UuYmluZCh1c2VyRGF0YU1hbmFnZXIsIGNvbmZpZy5BRE1JTl9OQU1FKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19DTE9TRV9DSEFUX0JVVFRPTl9DTEFTUykuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICB0aGF0LmNsb3NlQ29udmVyc2F0aW9uLmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfRklMVEVSX0lOUFVUX0lEKS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImlucHV0XCIsXHJcbiAgICAgICAgICAgIHRoYXQuZmlsdGVyLmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGdldEVsZW1lbnQoY29uZmlnLkRPTS5DU1NfU09SVF9TRUxFQ1RfSUQpLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhhdC5zb3J0LmJpbmQodGhhdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdXNlckRhdGFNYW5hZ2VyLnNldE1lc3NhZ2VBc1JlYWQuYmluZCh1c2VyRGF0YU1hbmFnZXIpKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J/QvtC80LXRh9Cw0LXRgiDQutCw0L3QsNC7INGO0LfQtdGA0LAg0LrQsNC6INC/0YDQvtGH0LjRgtCw0L3QvdGL0LkgKNC10YHQu9C4INGC0LDQvCDQtdGB0YLRjCDQvdC10L/RgNC+0YfQuNGC0LDQvdC90YvQtSDRgdC+0L7QsdGJ0LXQvdC40Y8pXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5tYXJrTWVzc2FnZUZyb21Vc2VyQXNSZWFkID0gZnVuY3Rpb24gbWFya01lc3NhZ2VGcm9tVXNlckFzUmVhZCAodXNlcklkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJbmRleCA9IHVMaXN0TWFuYWdlci5nZXRVc2VyRnJvbVVzZXJMaXN0QnlJZCh1c2VySWQpO1xyXG4gICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt1c2VySW5kZXhdLnNlbmROZXdNZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgdURhdGFNYW5hZ2VyLnNhdmVVc2VyU2V0dGluZ3NUb0RhdGFTb3VyY2UoW3tcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZTogXCJzZW5kTmV3TWVzc2FnZVwiLFxyXG4gICAgICAgICAgICBmaWVsZFZhbHVlOiBmYWxzZVxyXG4gICAgICAgIH1dKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZU5ld01lc3NhZ2VJbmRpY2F0b3JUb1VzZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0JfQsNC60YDRi9Cy0LDQtdGCINC60LDQvdCw0Lsg0L7QsdGJ0LXQvdC40Y8g0YEg0Y7Qt9C10YDQvtC8INC4INGH0LDRglxyXG4gICAgRGFzaGJvYXJkQ29udHJvbGxlci5wcm90b3R5cGUuY2xvc2VDb252ZXJzYXRpb24gPSBmdW5jdGlvbiBjbG9zZUNvbnZlcnNhdGlvbiAoKSB7XHJcbiAgICAgICAgZ2V0RWxlbWVudChjb25maWcuRE9NLkNTU19BQ1RJVkVfVVNFUl9CTE9DSykuY2xhc3NMaXN0LmFkZChjb25maWcuSU5WSVNJQkxFX0NMQVNTKTtcclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJTZXR0aW5ncy51c2VySWQgPSBudWxsO1xyXG4gICAgICAgIGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24uYWJvcnQoKTtcclxuICAgICAgICBjUGFuZWwuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLnNhdmVDdXJyZW50Q29uZGl0aW9uVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0LTQvtCx0LDQstC70Y/QtdGCINC90L7QstGL0Lkg0LXQu9C10LzQtdC90YIt0LjQvdC00LjQutCw0YLQvtGAINCyXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS50b2dnbGVOZXdNZXNzYWdlSW5kaWNhdG9yVG9Vc2VyID0gZnVuY3Rpb24gdG9nZ2xlTmV3TWVzc2FnZUluZGljYXRvclRvVXNlcigpIHtcclxuICAgICAgICB2YXIgbmV3TWVzc2FnZURpdjtcclxuICAgICAgICBPYmplY3Qua2V5cyh1TGlzdE1hbmFnZXIudUxpc3QpLm1hcChmdW5jdGlvbiBibGluayhrZXkpIHtcclxuICAgICAgICAgICAgbmV3TWVzc2FnZURpdiA9IHVMaXN0TWFuYWdlci51TGlzdFtrZXldLnVzZXJFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgICAgICAgICAgICAgICBjb25maWcuQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEVcclxuICAgICAgICAgICAgKVswXTtcclxuICAgICAgICAgICAgaWYgKHVMaXN0TWFuYWdlci51TGlzdFtrZXldLnNlbmROZXdNZXNzYWdlICYmICFuZXdNZXNzYWdlRGl2KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VEaXYuY2xhc3NMaXN0LmFkZChjb25maWcuQ1NTX0hBVkVfTkVXX01FU1NBR0VfU1RZTEUpO1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W2tleV0udXNlckVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3TWVzc2FnZURpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIXVMaXN0TWFuYWdlci51TGlzdFtrZXldLnNlbmROZXdNZXNzYWdlICYmIG5ld01lc3NhZ2VEaXYpIHtcclxuICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFtrZXldLnVzZXJFbGVtZW50LnJlbW92ZUNoaWxkKG5ld01lc3NhZ2VEaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cEludGVydmFsRnVuY3Rpb25zID0gZnVuY3Rpb24gc2V0dXBJbnRlcnZhbEZ1bmN0aW9ucyAoKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGludGVydmFsSWQucHVzaCA9IHNldEludGVydmFsKGZ1bmN0aW9uIGludGVydmFsICgpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXModUxpc3RNYW5hZ2VyLnVMaXN0KS5tYXAoZnVuY3Rpb24gdXNlckxpc3RVcGRhdGUgKHZpZXdJZCkge1xyXG4gICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVwZGF0ZVVzZXJPbmxpbmVTdGF0dXMoXHJcbiAgICAgICAgICAgICAgICAgICAgdUxpc3RNYW5hZ2VyLnVMaXN0W3ZpZXdJZF0udXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgIHVMaXN0TWFuYWdlci51TGlzdFt2aWV3SWRdLmxhc3RPbmxpbmVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoYXQuc2V0dXBVc2VyTGlzdERPTSgpO1xyXG4gICAgICAgIH0sY29uZmlnLmludGVydmFsLlVQREFURV9VU0VSU19USU1FKVxyXG4gICAgfTtcclxuXHJcbiAgICBEYXNoYm9hcmRDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZUFwcCA9IGZ1bmN0aW9uIGNsb3NlQXBwICgpIHtcclxuICAgICAgICBpbnRlcnZhbElkLmZvckVhY2goZnVuY3Rpb24gY2xlYXIgKGlkKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaWQpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdXNlckRhdGFNYW5hZ2VyLmNsZWFyTWVzc2FnZUxpc3QoKTtcclxuICAgICAgICB1TGlzdE1hbmFnZXIuY2xlYXJVc2VyTGlzdCgpO1xyXG4gICAgICAgIGlmKGNvbmZpZy5jdXJyZW50TWVzc2FnZUNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgY29uZmlnLmN1cnJlbnRNZXNzYWdlQ29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25maWcuY3VycmVudFVzZXJMaXN0Q29ubmVjdGlvbi5hYm9ydCgpO1xyXG4gICAgICAgIGNQYW5lbC5jbG9zZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IERhc2hib2FyZENvbnRyb2xsZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcsIGRhdGFTb3VyY2UsIHVzZXJEYXRhTWFuYWdlciwgdXNlckxpc3RNYW5hZ2VyLCBzb3J0ZXIsIGV2ZW50RW1pdHRlciwgY29udHJvbFBhbmVsKTtcclxuLyogZXhwb3J0ZWQgbGF1bmNoZXIgKi9cclxuLyogZ2xvYmFsIGdldEVsZW1lbnQgKi9cclxuLyogZ2xvYmFsIG1haW5Db25maWcgKi9cclxudmFyIGxhdW5jaGVyID0gKGZ1bmN0aW9uIGNyZWF0ZUxhdW5jaGVyIChjb25maWcpIHtcclxuXHJcbiAgICB2YXIgRE9NVmFyaWFibGVzID0ge307XHJcbiAgICB2YXIga2V5T2ZWYWx1ZSA9IHtcclxuICAgICAgICBjaGF0VGl0bGU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hhdFVybDoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGF0Q2xhc3M6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hhdFBvc2l0aW9uU2VsZWN0OiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcInZhbHVlXCJcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBhbGxvd01pbmltaXplOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWxsb3dEcmFnOiB7XHJcbiAgICAgICAgICAgIHR5cGVPZlZhbHVlOiBcImNoZWNrZWRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2hvd1RpbWU6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwiY2hlY2tlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXF1aXJlTmFtZToge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJjaGVja2VkXCJcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyByYWRpbyBidXR0b24gKGxhc3QgZWxlbWVudCwgaXQncyBpbXBvdGVudClcclxuICAgICAgICBuZXR3b3JrUmFkaW9YTVI6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIixcclxuICAgICAgICAgICAgdHJ1ZTogXCJYSFJcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbmV0d29ya1JhZGlvTG9uZ1BvbGw6IHtcclxuICAgICAgICAgICAgdHlwZU9mVmFsdWU6IFwidmFsdWVcIixcclxuICAgICAgICAgICAgdHJ1ZTogXCJsb25nUG9sbFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBuZXR3b3JrUmFkaW9GZXRjaDoge1xyXG4gICAgICAgICAgICB0eXBlT2ZWYWx1ZTogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB0cnVlOiBcImZldGNoXCJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIExhdW5jaGVyKCkge31cclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuZ2V0RGF0YUZyb21FbGVtZW50ID0gZnVuY3Rpb24gZ2V0RGF0YUZyb21FbGVtZW50IChrZXkpIHtcclxuICAgICAgICB2YXIgc3JjID0gXCJcIjtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHR5cGVPZlZhbHVlO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKERPTVZhcmlhYmxlcykubWFwKGZ1bmN0aW9uIHNldHVwRGF0YSAoZWxlbWVudE5hbWUsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmKGtleVtlbGVtZW50TmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGlmKGluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVPZlZhbHVlID0gRE9NVmFyaWFibGVzW2VsZW1lbnROYW1lXS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVPZlZhbHVlID09PSBcInJhZGlvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoRE9NVmFyaWFibGVzW2VsZW1lbnROYW1lXS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gXCInJlwiICsgXCJ0eXBlT2ZSZXF1ZXN0XCIgKyBcIj0nXCIgKyB0aGF0LmdldEVsZW1lbnRWYWx1ZShlbGVtZW50TmFtZSwgdHlwZU9mVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IFwiJyZcIiArIGVsZW1lbnROYW1lICsgXCI9J1wiICsgdGhhdC5nZXRFbGVtZW50VmFsdWUoZWxlbWVudE5hbWUsIHR5cGVPZlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYyArPSBlbGVtZW50TmFtZSArIFwiPSdcIiArIHRoYXQuZ2V0RWxlbWVudFZhbHVlKGVsZW1lbnROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihzcmMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICBzcmMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3JjO1xyXG4gICAgfTtcclxuXHJcbiAgICBMYXVuY2hlci5wcm90b3R5cGUuZ2V0RWxlbWVudFZhbHVlID0gZnVuY3Rpb24gZ2V0RWxlbWVudFZhbHVlIChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIERPTVZhcmlhYmxlc1tuYW1lXVtrZXlPZlZhbHVlW25hbWVdLnR5cGVPZlZhbHVlXTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU2NyaXB0ICgpIHtcclxuICAgICAgICB2YXIgc3JjID0gY29uZmlnLmxhdW5jaGVyLnNyY1N0YXJ0ICsgdGhpcy5nZXREYXRhRnJvbUVsZW1lbnQoa2V5T2ZWYWx1ZSk7XHJcbiAgICAgICAgc3JjICs9IGNvbmZpZy5sYXVuY2hlci5zcmNFbmQ7XHJcbiAgICAgICAgRE9NVmFyaWFibGVzLnNjcmlwdENvZGUuaW5uZXJIVE1MID0gc3JjO1xyXG4gICAgfVxyXG5cclxuICAgIExhdW5jaGVyLnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIHN0YXJ0QXBwICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgY29uZmlnLmxhdW5jaGVyLmFmdGVyLm1hcCgoZnVuY3Rpb24gY3JlYXRlU2NyaXB0UGFydCAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBET01WYXJpYWJsZXNbZWxlbWVudF0gPSAgZ2V0RWxlbWVudChjb25maWcubGF1bmNoZXIucGF0dGVybiArIGVsZW1lbnQsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAgICAgRE9NVmFyaWFibGVzW2VsZW1lbnRdLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBjcmVhdGVTY3JpcHQuYmluZCh0aGF0KSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcblxyXG4gICAgTGF1bmNoZXIucHJvdG90eXBlLmNsb3NlQXBwID0gZnVuY3Rpb24gY2xvc2VBcHAgKCkge1xyXG4gICAgICAgIERPTVZhcmlhYmxlcyA9IHt9O1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IExhdW5jaGVyKCk7XHJcblxyXG59KShtYWluQ29uZmlnKTtcclxuLyogZXhwb3J0ZWQgYWJvdXQgKi9cclxuLy8gU1RVQiAvL1xyXG52YXIgYWJvdXQgPSAoZnVuY3Rpb24gY3JlYXRlQWJvdXRQYWdlQXBwICgpIHtcclxuICAgIGZ1bmN0aW9uIEFib3V0KCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBBYm91dC5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbiBzdGFydEFwcCAoKSB7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBBYm91dC5wcm90b3R5cGUuY2xvc2VBcHAgPSBmdW5jdGlvbiBjbG9zZUFwcCAoKSB7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3IEFib3V0KCk7XHJcblxyXG59KSgpO1xyXG4vKiBnbG9iYWwgZGFzaGJvYXJkICovXHJcbi8qIGdsb2JhbCBsYXVuY2hlciAqL1xyXG4vKiBnbG9iYWwgYWJvdXQgKi9cclxuLyogZ2xvYmFsIGNsZWFyRWxlbWVudENvbnRlbnQgKi9cclxuLyogZ2xvYmFsIHZpZXdGYWN0b3J5ICovXHJcbi8qIGdsb2JhbCBtYWluQ29uZmlnICovXHJcbnZhciBtYWluQ29udHJvbGxlciA9IChmdW5jdGlvbiBjcmVhdGVNYWluQ29udHJvbGxlciAoY29uZmlnKSB7XHJcblxyXG4gICAgdmFyIG1hdGNoZXNIdG1sUGF0aCA9IHtcclxuICAgICAgICBkYXNoYm9hcmQ6IGNvbmZpZy5yb3V0ZXIuREFTSEJPQVJEX0hUTUxfUEFUSCxcclxuICAgICAgICBjb25maWd1cmF0aW9uOiBjb25maWcucm91dGVyLkxBVU5DSEVSX0hUTUxfUEFUSCxcclxuICAgICAgICBhYm91dDogY29uZmlnLnJvdXRlci5BQk9VVF9IVE1MX1BBVEhcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBjbG9zZUZ1bmN0aW9ucyA9IHtcclxuICAgICAgICBkYXNoYm9hcmQ6IGRhc2hib2FyZC5jbG9zZUFwcC5iaW5kKGRhc2hib2FyZCksXHJcbiAgICAgICAgY29uZmlndXJhdGlvbjogbGF1bmNoZXIuY2xvc2VBcHAuYmluZChsYXVuY2hlciksXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LmNsb3NlQXBwLmJpbmQoYWJvdXQpXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBzdGFydEZ1bmN0aW9ucyA9IHtcclxuICAgICAgICBkYXNoYm9hcmQ6IGRhc2hib2FyZC5zdGFydEFwcC5iaW5kKGRhc2hib2FyZCksXHJcbiAgICAgICAgY29uZmlndXJhdGlvbjogbGF1bmNoZXIuc3RhcnRBcHAuYmluZChsYXVuY2hlciksXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LnN0YXJ0QXBwLmJpbmQoYWJvdXQpXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIE1haW5Db250cm9sbGVyICgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgTWFpbkNvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gc3RhcnRBcHAgKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGZ1bmN0aW9uIGhhc0NoYW5nZUV2ZW50QWRkIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoYXQuaGFuZGxlVXJsKGVsZW1lbnQubmV3VVJMKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g0J/RgNC4INC30LDQs9GA0YPQt9C60LUg0YHRgtGA0LDQvdC40YbRiyAtINGB0YfQuNGC0LDRgtGMINGB0L7RgdGC0L7Rj9C90LjQtSDQuCDQt9Cw0L/Rg9GB0YLQuNGC0Ywg0L7QsdGA0LDQsdC+0YLRh9C40LpcclxuICAgICAgICB0aGF0LmhhbmRsZVVybCh3aW5kb3cubG9jYXRpb24uaHJlZiArIFwiI2Rhc2hib2FyZFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNGC0Ywg0L7QsdGA0LDQsdC+0YLRh9C40LogVVJMXHJcbiAgICBNYWluQ29udHJvbGxlci5wcm90b3R5cGUuaGFuZGxlVXJsID0gZnVuY3Rpb24gaGFuZGxlVXJsKHVybCkge1xyXG4gICAgICAgIHZhciBoYXNoID0gbnVsbDtcclxuICAgICAgICBpZih1cmwuaW5kZXhPZihcIiNcIikgPT09IC0xKXtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhhc2ggPSB1cmwuc3BsaXQoJyMnKS5wb3AoKTtcclxuICAgICAgICB0aGlzLmNsb3NlUHJldmlvdXNQYWdlKGhhc2gpO1xyXG5cclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYS4nICsgY29uZmlnLnJvdXRlci5OQVZJR0FUSU9OX0FDVElWRV9DU1MpLmZvckVhY2goZnVuY3Rpb24gcmVtb3ZlQ2xhc3NBY3RpdmUgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5yb3V0ZXIuTkFWSUdBVElPTl9BQ1RJVkVfQ1NTKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZj1cIiMnICsgaGFzaCArICdcIl0nKS5mb3JFYWNoKGZ1bmN0aW9uIGFkZENsYXNzQWN0aXZlIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcucm91dGVyLk5BVklHQVRJT05fQUNUSVZFX0NTUyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNsZWFyRWxlbWVudENvbnRlbnQoY29uZmlnLnJvdXRlci5DT05URU5UX0NMQVNTKTtcclxuICAgICAgICB2aWV3RmFjdG9yeS5jcmVhdGVWaWV3KG1hdGNoZXNIdG1sUGF0aFtoYXNoXSwgbnVsbCwgY29uZmlnLnJvdXRlci5DT05URU5UX0NMQVNTKS50aGVuKGZ1bmN0aW9uIGludm9rZVN0YXJ0RnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzdGFydEZ1bmN0aW9uc1toYXNoXSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgTWFpbkNvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlUHJldmlvdXNQYWdlID0gZnVuY3Rpb24gY2xvc2VQcmV2aW91c1BhZ2UoaGFzaCkge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGNsb3NlRnVuY3Rpb25zKS5tYXAoZnVuY3Rpb24gaW52b2tlQ2xvc2VGdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmKGtleSAhPT0gaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VGdW5jdGlvbnNba2V5XSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgTWFpbkNvbnRyb2xsZXIoKTtcclxuXHJcbn0pKG1haW5Db25maWcpO1xyXG5cclxubWFpbkNvbnRyb2xsZXIuc3RhcnRBcHAoKTsiXX0=
